<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>面试</title>
      <link href="/2023/03/16/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95/"/>
      <url>/2023/03/16/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h1 id="面试"><a href="#面试" class="headerlink" title="面试"></a>面试</h1><h2 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h2><p>1.仿原神界面</p><p>使用<strong>Vue 3 + TypeScript + Vite + swiper</strong>开发，主要使用html，css写布局。项目地址：</p><p><a href="http://yucheng12345.gitee.io/yuanshen3.1">http://yucheng12345.gitee.io/yuanshen3.1</a></p><p>2.日程表，后台管理系统</p><p>使用v<strong>ue3、pinia、typescript、element-plus、axios、mockjs</strong>开发，该项目包括项目登录，背景主题设置，日历，每日完成统计，待办事件，已完成事件和对应的图表。项目地址：</p><p><a href="http://yucheng12345.gitee.io/calendar">http://yucheng12345.gitee.io/calendar</a></p><h2 id="面经"><a href="#面经" class="headerlink" title="面经"></a>面经</h2><p>html&amp;css</p><p><a href="https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/css%E9%9D%A2/">https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/css%E9%9D%A2/</a></p><p>js</p><p><a href="https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/JS%E9%9D%A2/">https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/JS%E9%9D%A2/</a></p><p>性能优化</p><p><a href="https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E9%9D%A2/">https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E9%9D%A2/</a></p><p>计网</p><p><a href="https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/%E8%AE%A1%E7%BD%91%E9%9D%A2/">https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/%E8%AE%A1%E7%BD%91%E9%9D%A2/</a></p><p>浏览器原理</p><p><a href="https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86/">https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86/</a></p><p>vue</p><p><a href="https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/vue%E9%9D%A2/">https://1179339018.github.io/2023/03/16/%E9%9D%A2%E8%AF%95/vue%E9%9D%A2/</a></p>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>性能优化面</title>
      <link href="/2023/03/16/%E9%9D%A2%E8%AF%95/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E9%9D%A2/"/>
      <url>/2023/03/16/%E9%9D%A2%E8%AF%95/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="性能优化面"><a href="#性能优化面" class="headerlink" title="性能优化面"></a>性能优化面</h1><h1 id="回流与重绘"><a href="#回流与重绘" class="headerlink" title="回流与重绘"></a>回流与重绘</h1><h2 id="回流与重绘概念与触发条件"><a href="#回流与重绘概念与触发条件" class="headerlink" title="回流与重绘概念与触发条件"></a>回流与重绘概念与触发条件</h2><p><strong>回流必将引起重绘，重绘不一定会引起回流。</strong></p><h3 id="回流"><a href="#回流" class="headerlink" title="回流"></a>回流</h3><p>浏览器会把<code>HTML</code>解析成<code>DOM</code>，把<code>CSS</code>解析成<code>CSSOM</code>，<code>DOM</code>和<code>CSSOM</code>合并就产生了<code>Render Tree</code></p><p>当<code>Render Tree</code>中部分或全部元素的<code>尺寸、结构、或某些属性</code>发生改变时，浏览器重新渲染部分或全部文档的过程称为回流。</p><p>会导致回流的操作：</p><ul><li><p>页面首次渲染</p></li><li><p>浏览器窗口大小发生改变</p></li><li><p>元素尺寸或位置发生改变</p></li><li><p>元素内容变化（文字数量或图片大小等等）</p></li><li><p>元素字体大小变化</p></li><li><p>添加或者删除<strong>可见</strong>的<code>DOM</code>元素</p></li><li><p>激活<code>CSS</code>伪类（例如：<code>:hover</code>）</p></li><li><p>查询某些属性或调用某些方法</p></li></ul><h3 id="重绘"><a href="#重绘" class="headerlink" title="重绘"></a>重绘</h3><p>当页面中元素样式的改变并不影响它在文档流中的位置时（例如：<code>color</code>、<code>background-color</code>、<code>visibility</code>等），浏览器会将新样式赋予给元素并重新绘制它，这个过程称为重绘。</p><p><code>一般来说，回流对性能的损耗更多一点</code></p><h2 id="如何避免"><a href="#如何避免" class="headerlink" title="如何避免"></a>如何避免</h2><p>Css:</p><p>1.少使用table布局</p><p>2.将动画效果应用到<code>position</code>属性为<code>absolute</code>或<code>fixed</code>的元素上。</p><p>JS:</p><p>1.避免频繁操作<code>样式属性和DOM</code>,插件一个大的class和DOM,分别放所有style和DOM操作</p><p>2.避免频繁读取会引发回流/重绘的属性，如果确实需要多次使用，就用一个变量缓存起来。</p><p>3.对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流。</p><h1 id="懒加载"><a href="#懒加载" class="headerlink" title="懒加载"></a>懒加载</h1><h2 id="懒加载的实现原理"><a href="#懒加载的实现原理" class="headerlink" title="懒加载的实现原理"></a>懒加载的实现原理</h2><p>表现：</p><p>加载网页时，不把他加载出来，滚动页面，图片出现在可视区域中，再加载</p><p>原理：</p><p>先将img的src属性隐藏，而将其真正的地址存放在img标签自定义的属性中(<em>eg：data-src</em>)，当图片进入可视区域时，将真正的路径从<em>data-src</em>中取出替换回来，从而显示图片。</p><p>代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">     &lt;img src=&quot;loading.gif&quot;  data-src=&quot;pic.png&quot;&gt;</span><br><span class="line">     &lt;img src=&quot;loading.gif&quot;  data-src=&quot;pic.png&quot;&gt;</span><br><span class="line">     &lt;img src=&quot;loading.gif&quot;  data-src=&quot;pic.png&quot;&gt;</span><br><span class="line">     &lt;img src=&quot;loading.gif&quot;  data-src=&quot;pic.png&quot;&gt;</span><br><span class="line">     &lt;img src=&quot;loading.gif&quot;  data-src=&quot;pic.png&quot;&gt;</span><br><span class="line">     &lt;img src=&quot;loading.gif&quot;  data-src=&quot;pic.png&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var imgs = document.querySelectorAll(&#x27;img&#x27;);</span><br><span class="line">function lozyLoad()&#123;</span><br><span class="line">        var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;</span><br><span class="line">        var winHeight= window.innerHeight;</span><br><span class="line">        for(var i=0;i &lt; imgs.length;i++)&#123;</span><br><span class="line">            if(imgs[i].offsetTop &lt; scrollTop + winHeight )&#123;</span><br><span class="line">                imgs[i].src = imgs[i].getAttribute(&#x27;data-src&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  window.onscroll = lozyLoad();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="节流和防抖"><a href="#节流和防抖" class="headerlink" title="节流和防抖"></a>节流和防抖</h1><h2 id="节流"><a href="#节流" class="headerlink" title="节流"></a>节流</h2><p>在事件不断触发的过程中，固定时间内执行一次事件。</p><p>固定时间内执行一次事件，所以我们有两种实现方法，一用时间戳，二用定时器。</p><p>时间戳</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 时间戳版</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> preTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> context = <span class="variable language_">this</span>,</span><br><span class="line">      args = [...<span class="variable language_">arguments</span>],</span><br><span class="line">      nowTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果两次时间间隔超过了指定时间，则执行函数。</span></span><br><span class="line">    <span class="keyword">if</span> (nowTime - preTime &gt;= delay) &#123;</span><br><span class="line">      preTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">      <span class="keyword">return</span> fn.<span class="title function_">apply</span>(context, args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用时间戳虽然能实现节流，但是最后一次事件不会执行。</p><p>定时器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span> (fun, wait)&#123;</span><br><span class="line">  <span class="keyword">let</span> timeout = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> context = <span class="variable language_">this</span></span><br><span class="line">    <span class="keyword">let</span> args = [...<span class="variable language_">arguments</span>]</span><br><span class="line">    <span class="keyword">if</span>(!timeout)&#123;</span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        fun.<span class="title function_">apply</span>(context, args)</span><br><span class="line">        timeout = <span class="literal">null</span> </span><br><span class="line">      &#125;, wait)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用定时器实现节流，虽然最后一次能触发，但是第一次不会触发。</p><p>时间戳 + 定时器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">event, wait</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> pre = <span class="number">0</span>, timer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">Date</span>() - pre &gt; wait) &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">            timer = <span class="literal">null</span>;</span><br><span class="line">            pre = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">            event.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                event.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">            &#125;, wait)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="防抖"><a href="#防抖" class="headerlink" title="防抖"></a>防抖</h2><p>当你频繁触发一个事件时，让该事件在停止触发后再触发，以此减少部分性能。</p><p>（不要一直触发，停止操作等待多少秒再触发）</p><p>定时器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, wait</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> context = <span class="variable language_">this</span>,</span><br><span class="line">      args = [...<span class="variable language_">arguments</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果此时存在定时器的话，则取消之前的定时器重新记时</span></span><br><span class="line">    <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">      timer = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置定时器，使事件间隔指定事件后执行</span></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(context, args);</span><br><span class="line">    &#125;, wait);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>节流：（只需要触发一次）</p><p>1.登录</p><p>2.搜索框搜索输入。只需用户最后一次输入完，再发送请求</p><p>3.缩放浏览器resize</p><p>4.避免短时间内多次触发动画引起性能问题</p><p>防抖：</p><p>1.按钮提交，验证码</p><h2 id="图片优化"><a href="#图片优化" class="headerlink" title="图片优化"></a>图片优化</h2><p>如何对项目中的图片进行优化</p><p>1.精灵图</p><p>2.可以使用css去写</p><p>3.移动端用CDN</p><p>4.小图base64</p><p>5.选择正确的图片格式：</p><ol><li><ul><li>对于能够显示 WebP 格式的浏览器尽量使用 WebP 格式。因为 WebP 格式具有更好的图像数据压缩算法，能带来更小的图片体积，而且拥有肉眼识别无差异的图像质量，缺点就是兼容性并不好</li><li>小图使用 PNG，其实对于大部分图标这类图片，完全可以使用 SVG 代替</li><li>照片使用 JPEG</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>浏览器原理</title>
      <link href="/2023/03/16/%E9%9D%A2%E8%AF%95/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86/"/>
      <url>/2023/03/16/%E9%9D%A2%E8%AF%95/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="浏览器原理"><a href="#浏览器原理" class="headerlink" title="浏览器原理"></a>浏览器原理</h1><h1 id="浏览器安全"><a href="#浏览器安全" class="headerlink" title="浏览器安全"></a>浏览器安全</h1><h2 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h2><p><strong>XSS攻击：</strong> 跨站脚本攻击。</p><p><code>攻击者脚本</code> 嵌入 <code>被攻击网站</code>，获取用户cookie等隐私信息。</p><p>这些脚本包括js代码，HTML或flash</p><p>XSS攻击可以分为3类：<a href="https://juejin.cn/post/6945277278347591688#%E5%AD%98%E5%82%A8%E5%9E%8B">存储型</a>（持久型）、<a href="https://juejin.cn/post/6945277278347591688#%E5%8F%8D%E5%B0%84%E5%9E%8B">反射型</a>（非持久型）、<a href="https://juejin.cn/post/6945277278347591688#%E5%9F%BA%E4%BA%8EDOM">基于DOM</a>。</p><h3 id="1-存储型"><a href="#1-存储型" class="headerlink" title="1.存储型"></a>1.存储型</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9150820b8af465594cb32a445450044~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p><p>攻击者将一些script放上网页。这里面有src链接如</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/448349874197408f9e7a11ab5122fc9e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p><p>当你点开，就会把你的cookie信息传到黑客的服务器上，他就可以登录你的账户操作</p><h3 id="2-反射型"><a href="#2-反射型" class="headerlink" title="2.反射型"></a>2.反射型</h3><p>用户将一段含有恶意代码的请求提交给 Web 服务器，Web 服务器接收到请求时，又将恶意代码反射给了浏览器端，这就是反射型 XSS 攻击。你去点链接时，就会被攻击</p><h3 id="3-基于-DOM-的-XSS-攻击"><a href="#3-基于-DOM-的-XSS-攻击" class="headerlink" title="3.基于 DOM 的 XSS 攻击"></a>3.基于 DOM 的 XSS 攻击</h3><p>基于 DOM 的 XSS 攻击是不牵涉到页面 Web 服务器的</p><p>黑客通过各种手段将恶意脚本注入用户的页面中，比如通过网络劫持在页面传输过程中修改 HTML 页面的内容</p><p>在 Web 资源传输过程或者在用户使用页面的过程中修改 Web 页面的数据。</p><h2 id="XSS防御"><a href="#XSS防御" class="headerlink" title="XSS防御"></a>XSS防御</h2><p>XSS 攻击和反射型 XSS 攻击都是需要经过 Web 服务器来处理的，因此可以认为这两种类型的漏洞是服务端的安全漏洞。而基于 DOM 的 XSS 攻击全部都是在浏览器端完成的，因此基于 DOM 的 XSS 攻击是属于前端的安全漏洞。</p><p>无论是何种类型的 XSS 攻击，它们都有一个共同点，那就是首先往浏览器中注入恶意脚本，然后再通过恶意脚本将用户信息发送至黑客部署的恶意服务器上。</p><p>所以要阻止 XSS 攻击，我们可以通过阻止恶意 JavaScript 脚本的注入和恶意消息的发送来实现。</p><p>措施：</p><p>1.进行转码或过滤，将js脚本转成乱码，浏览器就识别不出来了</p><p>2.使用CSP(由开发者自己定义的网络安全协议)，可以做到</p><ul><li>限制加载其他域下的资源文件，这样即使黑客插入了一个 JavaScript 文件，这个 JavaScript 文件也是无法被加载的；</li><li>禁止向第三方域提交数据，这样用户数据也不会外泄；</li><li>禁止执行内联脚本和未授权的脚本；</li><li>还提供了上报机制，这样可以帮助我们尽快发现有哪些 XSS 攻击，以便尽快修复问题。</li></ul><p>3.使用<code>HttpOnly</code>，把<code>cookie</code>中<code>http</code>的响应头的<code>HttpOnly</code>设置成<code>true</code>，cookie就不能被别人拿到</p><h2 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h2><p>CSRF：<strong>跨站请求伪造</strong></p><p><strong>CSRF攻击就是黑客利用了用户的登录状态，并通过第三方的站点来做一些坏事。</strong></p><p>主要是通过用户的登录状态去完成一些事情</p><p>1.get请求</p><p>比如说攻击者将一个转账的请求放到img标签了</p><p>浏览器自动get到这个img，钱就被转走了</p><p>2.post</p><p>打开黑客的站点时，他将转账的操作放在提交表单，按钮中，你一点就没了</p><p>3.诱导你去点一些东西</p><p>比如什么美女图像，小视频网站，你一点进去，就无，就post了</p><h2 id="CSRF防御"><a href="#CSRF防御" class="headerlink" title="CSRF防御"></a>CSRF防御</h2><p>发起 CSRF 攻击的三个必要条件:</p><ul><li>第一个，目标站点一定要有CSRF漏洞；</li><li>第二个，用户要登录过目标站点，并且在浏览器上保持有该站点的登录状态；</li><li>第三个，需要用户打开一个第三方站点,可以是黑客的站点，也可以是一些论坛。</li></ul><p>防止：</p><p>1.Cookie的SameSite属性</p><p>通常 CSRF 攻击都是从第三方站点发起的，要防止 CSRF 攻击，我们最好能实现从第三方站点发送请求时禁止 Cookie 的发送</p><p><strong>在 HTTP 响应头中，通过 set-cookie 字段设置 Cookie 时，可以带上 SameSite 选项，如下：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: widget_session=abc123; SameSite=None; Secure</span><br></pre></td></tr></table></figure><p>我们可以针对实际情况将一些关键的 Cookie 设置为 Strict 或者 Lax 模式</p><p>2.验证请求的来源站点</p><p>使用HTTP 请求头中的 Referer 和 Origin 属性</p><p>3.CSRF Token</p><p>除了使用以上两种方式来防止 CSRF 攻击之外，还可以采用 CSRF Token 来验证，这个流程比较好理解，大致分为两步。</p><p>1.在浏览器向服务器发起请求时，服务器生成一个 CSRF Token</p><p>2.在浏览器端如果要发起转账的请求，那么需要带上页面中的 CSRF Token，然后服务器会验证该 Token 是否合法。如果是从第三方站点发出的请求，那么将无法获取到 CSRF Token 的值，所以即使发出了请求，服务器也会因为 CSRF Token 不正确而拒绝请求。</p><h1 id="浏览器渲染"><a href="#浏览器渲染" class="headerlink" title="浏览器渲染"></a>浏览器渲染</h1><h2 id="浏览器渲染过程"><a href="#浏览器渲染过程" class="headerlink" title="浏览器渲染过程"></a>浏览器渲染过程</h2><p>1.html渲染成html树（dom树）</p><p>2.css渲染成css树</p><p>3.dom树和css树生成渲染树（render tree）</p><p>4.render tree 渲染完成，浏览器计算元素的大小和位置</p><p>5.绘制内容上去</p><h2 id="浏览器渲染优化"><a href="#浏览器渲染优化" class="headerlink" title="浏览器渲染优化"></a>浏览器渲染优化</h2><ol><li>提前渲染：ssr服务器端渲染 </li><li>避免渲染阻塞：CSS放在HTML的head中 JS放在HTML的body底部 </li><li>避免无用渲染：懒加载 </li><li>减少渲染次数：对dom查询进行缓存、将dom操作合并、使用减少重排的标签</li></ol><h1 id="进程和线程"><a href="#进程和线程" class="headerlink" title="进程和线程"></a>进程和线程</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>进程</p><p>一个运行的exe就是一个进程，一个进程可以有多个线程</p><p>线程</p><p>进程中的一个执行任务（控制单元），负责当前进程中程序的执行。一个进程至少有一个线程，一个进程可以运行多个线程，多个线程可共享数据。</p><p><strong>进程是资源分配的最小单位，线程是CPU调度的最小单位</strong></p><p><strong>进程间不会相互影响 ；线程一个线程挂掉将导致整个进程挂掉</strong></p><p><strong>线程间可以通过直接共享同一进程中的资源，而进程通信需要借助 进程间通信。</strong></p><p><strong>调度</strong></p><p><strong>系统开销</strong></p><h2 id="进程间的通讯方式"><a href="#进程间的通讯方式" class="headerlink" title="进程间的通讯方式"></a>进程间的通讯方式</h2><p>1.<strong>管道</strong></p><p>管道就是操作系统在内核中开辟的一段缓冲区，进程1可以将需要交互的数据拷贝到这段缓冲区，进程2就可以读取了。</p><p>2.消息队列</p><p>消息队列就是一个消息的列表。用户可以在消息队列中添加消息、读取消息等。消息队列提供了一种从一个进程向另一个进程发送一个数据块的方法。 </p><p>但是和管道一样，有长度限制</p><p>3.信号量</p><p>这个就是设置信号量，如信号量的初始值是 1，然后 a 进程来访问内存1的时候，我们就把信号量的值设为 0</p><p>b访问内存1的时候，发现是0，就访问不了</p><p>4.共享内存</p><p>共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问（使多个进程可以访问同一块内存空间）</p><p>5.套接字通信</p><p>其他都是一个主机上通信，socket是多个主机上通信</p><h2 id="死锁产生原因和解决方法"><a href="#死锁产生原因和解决方法" class="headerlink" title="死锁产生原因和解决方法"></a>死锁产生原因和解决方法</h2><p>产生原因：</p><p>1.竞争资源，两个进程同时需要一个内存，只有一个使用，其他的就阻塞了</p><p>2.进程推进不合法，P1保持R1,P2保持R2，P1又要请求R2,P2又要请求R1,就造成死锁了</p><p>产生死锁的必要条件：</p><ul><li>互斥条件：一个资源每次只能被一个进程使用。</li><li>请求和保持条件：当进程因请求资源而阻塞时，对已获得的资源保持不放。</li><li>不剥夺条件：进程已获得的资源在未使用完之前，不能剥夺，只能在使用完时由自己释放。</li><li>环路等待条件：若干进程之间形成一种头尾相接的循环等待资源关系。</li></ul><p><strong>预防死锁的方法：</strong></p><p>破坏后面三个条件</p><p>解决死锁：</p><p>1.重启</p><p>2.关闭进程</p><p>3.进程回退，让进程回退到没有发生死锁的某个节点</p><h1 id="浏览器缓存"><a href="#浏览器缓存" class="headerlink" title="浏览器缓存"></a>浏览器缓存</h1><p>含义：</p><p>浏览器缓存（Browser Caching）是为了节约网络的资源加速浏览，浏览器在用户磁盘上对最近请求过的文档进行存储，当访问者再次请求这个页面时，浏览器就可以从本地磁盘显示文档，这样就可以加速页面的阅览。</p><p>储存位置：</p><p>优先度从高到低</p><p>1.Service Worker，运行在浏览器背后的独立线程，就是一个线程，这个有请求，要用HTTPS保证安全</p><p>2.Memory Cache，内存中的缓存</p><p>3.Disk Cache，硬盘中的缓存</p><p>4.Push Cache，在session中存在，HTTP2.0内容</p><h2 id="缓存过程分析"><a href="#缓存过程分析" class="headerlink" title="缓存过程分析"></a>缓存过程分析</h2><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/18/16f19164a117d8e7~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image" alt="img"></p><p>1.浏览器每次发起http请求，都会先在浏览器缓存中查找<code>请求的结果以及缓存标识</code></p><p>2.浏览器每次<code>请求的结果以及缓存标识</code>都会存入浏览器缓存</p><h3 id="强缓存"><a href="#强缓存" class="headerlink" title="强缓存"></a>强缓存</h3><p>不会向服务器发起请求，直接从缓存中读取资源。</p><p>强缓存可以通过设置两种 HTTP Header 实现： Expires 和 Cache-Control</p><ol><li>Expires</li></ol><p>缓存过期时间，用来指定资源到期的时间</p><p>Expires=max-age + 请求时间，需要和 Last-modified 结合使用。</p><ol start="2"><li>Cache-Control</li></ol><p>在 HTTP/1.1 中，Cache-Control 是最重要的规则，主要用于控制网页缓存。</p><p>Cache-Control 可以在请求头或者响应头中设置，并且可以组合使用多种指令：</p><p>public,private,no-cache,no-store,max-age,s-maxage,max-stale，min-fresh</p><p>3.Expires 和 Cache-Control 两者对比</p><p> Expires 是 http1.0 的产物，Cache-Control 是 http1.1 的产物，两者同时存在的话，Cache-Control 优先级高于 Expires；在某些不支持 HTTP1.1 的环境下，Expires 就会发挥用处。</p><h3 id="协商缓存"><a href="#协商缓存" class="headerlink" title="协商缓存"></a>协商缓存</h3><ul><li>协商缓存生效，返回 304 和 Not Modified</li></ul><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/18/16f1917d5231e17d~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image" alt="img"></p><ul><li>协商缓存成功，返回 200 和请求结果</li></ul><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/18/16f19189449396ce~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image" alt="img"></p><h1 id="浏览器组成"><a href="#浏览器组成" class="headerlink" title="浏览器组成"></a>浏览器组成</h1><h2 id="从输入URL到页面加载的全过程"><a href="#从输入URL到页面加载的全过程" class="headerlink" title="从输入URL到页面加载的全过程"></a>从输入URL到页面加载的全过程</h2><p>使用浏览器就是开一个进程，主要进程有</p><ul><li>浏览器进程 (Browser Process)：负责浏览器的TAB的前进、后退、地址栏、书签栏的工作和处理浏览器的一些不可见的底层操作，比如网络请求和文件访问。</li><li> 渲染进程 (Renderer Process)：负责一个Tab内的显示相关的工作，也称渲染引擎。</li><li> 插件进程 (Plugin Process)：负责控制网页使用到的插件</li><li> GPU进程 (GPU Process)：负责处理整个应用程序的GPU任务</li></ul><p>1.输入URL</p><p>进入Browser Process：</p><p>2.查找此URL是否有浏览器缓存-系统缓存-路由缓存，没有的话就下一步</p><p>3.DNS域名解析，服务器发送回IP地址</p><p>4.客户端默认80端口和服务器的IP地址建立TCP连接</p><p>5.发送HTTP请求，主要是get请求，拿到网页上的元素</p><p>6.服务器返回对应的html</p><p>7.关闭TCP连接</p><p>进入Renderer Process：</p><p>8.拿到解析的HTML内容，进入渲染过程</p><p>html dom</p><p>css css</p><p>html css render tree</p><p>元素 位置 大小</p><p>绘制</p><p>9.如果解析时遇到需要请求网络的资源，再次进入Browser Process</p><p>10.遇到插件进入Plugin Process</p><p>11.最后GPU加载出来</p><h1 id="浏览器本地存储"><a href="#浏览器本地存储" class="headerlink" title="浏览器本地存储"></a>浏览器本地存储</h1><h2 id="Cookie，session，sessionStorage、localStorage-的区别"><a href="#Cookie，session，sessionStorage、localStorage-的区别" class="headerlink" title="Cookie，session，sessionStorage、localStorage 的区别"></a>Cookie，session，sessionStorage、localStorage 的区别</h2><h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><p> cookie是存储于访问者的计算机中的变量。可以让我们用同一个浏览器访问同一个域名的时候共享数据。</p><p>特点：</p><ul><li>cookie 保存在浏览器本地</li><li>正常设置的cookie 是不加密的，用户可以自由看到</li><li>用户可以删除cookie，或者禁用它</li><li>cookie 可以被篡改</li><li>cookie 可以用于攻击</li><li>cookie 存储量很小。未来实际上要被localStorage 替代，但是后者IE9 兼容。</li></ul><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>name</td><td>一个cookie的名称</td></tr><tr><td>value</td><td>一个cookie的值</td></tr><tr><td>domain🔥</td><td>域名 name = value:，是键值对，可以设置要保存 key/Value，注意这里的 name 不能和其他属性项的名字一样</td></tr><tr><td>path🔥</td><td>表示cookie 影响到的路径，如path=/。如果路径不能匹配时，浏览器则不发送这个Cookie</td></tr><tr><td>Size</td><td>此cookie大小</td></tr><tr><td>http</td><td>是微软对COOKIE 做的扩展。如果在COOKIE 中设置了“httpOnly”属性，则通过程序（JS 脚本、applet 等）将无法读取到COOKIE 信息，防止XSS 攻击产生</td></tr><tr><td>secure</td><td>当secure 值为true 时，cookie 在HTTP 中是无效，在HTTPS 中才有效</td></tr><tr><td>maxAge/Expires</td><td>最大失效时间（毫秒），设置在多少后失效</td></tr></tbody></table><h3 id="session"><a href="#session" class="headerlink" title="session"></a>session</h3><p>当浏览器访问服务器并发送第一次请求时，服务器端会创建一个session 对象，生成一个类似于key,value</p><p>的键值对， 然后将key(cookie)返回到浏览器(客户)端，浏览器下次再访问时，携带key(cookie)，找到对应</p><p>的session(value)。</p><p>特点：</p><p>1.session 是另一种记录客户状态的机制，不同的是Cookie 保存在客户端浏览器中，而session 保存在服务器上。</p><p>2.Cookie 数据存放在客户的浏览器上，Session 数据放在服务器上。Session 相比Cookie 要更安全一些</p><p>3.由于Session 保存到服务器上，所以当访问量增多的时候，会比较占用服务器的性能。</p><p>4.单个cookie 保存的数据大小不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。Session 没有这方面的限制。Session 是基于Cookie 进行工作的。</p><h3 id="sessionStorage、localStorage、cookie的作用和区别"><a href="#sessionStorage、localStorage、cookie的作用和区别" class="headerlink" title="sessionStorage、localStorage、cookie的作用和区别"></a>sessionStorage、localStorage、cookie的作用和区别</h3><p>1、sessionStorage和localStorage都是用作存储数据，一些比较大的文件，图片，cookie存放用户的一些状态如path,demain</p><p>cookie一般存储登录验证信息或者token，localStorage常用于存储不易变动的数据，减轻服务器压力，sessionStorage可以用来监测用户是否是刷新进入页面，如音乐播放器恢复进度条功能</p><p>2、3者的数据共享都遵循同源原则，sessionStorage还限制必须是同一个页面 </p><p>3、cookie存储空间大小约4kb， sessionStorage及localStorage空间比较大，大约5M </p><p>4、cookie的数据会自动的传递到服务器；sessionStorage和localStorage数据保存在本地</p><p>5、cookie设置的过期时间之前一直有效；localStorage永久存储，浏览器关闭后数据不丢失除非主动删除数据；sessionStorage数据在当前浏览器窗口关闭后自动删除</p><h1 id="浏览器事件机制"><a href="#浏览器事件机制" class="headerlink" title="浏览器事件机制"></a>浏览器事件机制</h1><h2 id="事件是什么？事件模型？"><a href="#事件是什么？事件模型？" class="headerlink" title="事件是什么？事件模型？"></a>事件是什么？事件模型？</h2><p>事件：</p><p>用户的操作，如click,move,文档加载，窗口滚动和大小调整</p><p>因为dom是一个树结构，就会存在一个事件流</p><p><img src="https://camo.githubusercontent.com/76f7593d991a23f13ba8d993f9121aa327097cfd4f8b52b16710a308dbd4d7b3/68747470733a2f2f7374617469632e7675652d6a732e636f6d2f33653961363435302d373463662d313165622d383566362d3666616337376330633962332e706e67" alt="img"></p><p>事件模型：</p><p>1.原始事件模型（DOM0级）</p><p>事件绑定监听函数比较简单, 有两种方式：</p><ul><li>HTML代码中直接绑定</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;fun()&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>通过<code>JS</code>代码绑定</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;.btn&#x27;</span>);</span><br><span class="line">btn.<span class="property">onclick</span> = fun;</span><br></pre></td></tr></table></figure><p>特点：</p><ul><li>只支持冒泡，不支持捕获</li><li>同一个类型的事件只能绑定一次</li></ul><p>2.标准事件模型（DOM2级）</p><p>绑定事件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addEventListener</span>(eventType, handler, useCapture)</span><br></pre></td></tr></table></figure><p>移除事件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">removeEventListener</span>(eventType, handler, useCapture)</span><br></pre></td></tr></table></figure><p>eventType：事件类型</p><p>handler：事件处理函数</p><p>useCapture：</p><p>默认为false，是冒泡阶段</p><p>true，变成捕获阶段</p><p>有些浏览器不兼容</p><p><code>eventTarget.attachEvent()</code>方法将指定的监听器注册到 eventTarget（目标对象） 上</p><p><code>eventTarget.detachEvent(eventNameWithOn,callback);</code>这个是删除</p><h2 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">eventTarget.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">   <span class="comment">// 这个 event 就是事件对象，我们还喜欢的写成 e 或者 evt </span></span><br><span class="line">&#125; </span><br><span class="line">eventTarget.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">   <span class="comment">// 这个 event 就是事件对象，我们还喜欢的写成 e 或者 evt  </span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这个event表示事件的状态</p><p>鼠标触发这个事件的话，得到鼠标位置</p><p>键盘触发这个事件的话，得到按了哪个键</p><p><strong>常见使用方法</strong></p><p><code>e.target</code> 返回事件对象</p><p><code>e.stopPropagation()</code> 阻止冒泡</p><p><code>e.preventDefault()</code> 阻止默认行为</p><p><code>e.target</code> 和 <code>this</code> 的区别：</p><ul><li>this 是事件绑定的元素， 这个函数的调用者（绑定这个事件的元素）</li><li>e.target 是事件触发的元素。</li></ul><p>比如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>abc<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>abc<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>abc<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">   &lt;/ul&gt;</span><br><span class="line">   </span><br><span class="line">   ul.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">               <span class="comment">// 我们给ul 绑定了事件  那么this 就指向ul  </span></span><br><span class="line">               <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">               <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>);</span><br><span class="line"></span><br><span class="line">               <span class="comment">// e.target 指向我们点击的那个对象 谁触发了这个事件 我们点击的是li e.target 指向的就是li</span></span><br><span class="line">               <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>);</span><br><span class="line"></span><br><span class="line">           &#125;)</span><br></pre></td></tr></table></figure><h2 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h2><p>事件委托也称为事件代理</p><p><code>事件委托的原理</code></p><p><strong>不是每个子节点单独设置事件监听器，而是事件监听器设置在其父节点上，然后利用冒泡原理影响设置每个子节点</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  &lt;ul&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 事件委托的核心原理：给父节点添加侦听器， 利用事件冒泡影响每一个子节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;ul&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ul.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">// alert(&#x27;知否知否，点我应有弹框在手！&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">// e.target 这个可以得到我们点击的对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;pink&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">// 点了谁，就让谁的style里面的backgroundColor颜色变为pink</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>li上的事件会冒泡到ul上，ul上有绑定事件</p><p>我们点击li，就可以让li颜色变为pink</p><h2 id="事件循环"><a href="#事件循环" class="headerlink" title="事件循环"></a>事件循环</h2><p>事件循环(event-loop)</p><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>JavaScript是单线程的</p><p>JavaScript 有同步和异步的概念，这就解决了代码阻塞的问题：</p><ul><li><p><strong>同步</strong>：如果在一个函数返回的时候，调用者就能够得到预期结果，那么这个函数就是同步的；</p></li><li><p><strong>异步</strong>：如果在函数返回的时候，调用者还不能够得到预期结果，而是需要在将来通过一定的手段得到，那么这个函数就是异步的。</p></li><li><p><strong>同步任务：</strong> 在主线程上排队执行的任务，只有一个任务执行完毕，才能执行下一个任务，</p></li><li><p><strong>异步任务：</strong> 不进入主线程，而是放在任务队列中，若有多个异步任务则需要在任务队列中排队等待，任务队列类似于缓冲区，任务下一步会被移到执行栈然后主线程执行调用栈的任务。</p></li></ul><h3 id="执行栈与任务队列"><a href="#执行栈与任务队列" class="headerlink" title="执行栈与任务队列"></a>执行栈与任务队列</h3><p>同步任务进执行栈，异步任务进任务队列</p><p>1.执行栈</p><p>他是一个栈，先进后出，同步任务进执行栈</p><p>所以下面的代码先执行</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec9e8a50c3de4aaf9f7a98d6faf561a5~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="20200815002745238.gif"></p><p>2.任务队列</p><p>JavaScript在执行代码时，会将同步的代码按照顺序排在执行栈中，然后依次执行里面的函数。</p><p>当遇到异步任务时，就将其放入任务队列中，等待当前执行栈所有同步代码执行完成之后，就会从异步任务队列中取出已完成的异步任务的回调并将其放入执行栈中继续执行，如此循环往复，直到执行完所有任务。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b1d13b5c77746f783045cd2f9dc1815~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="事件循环.png"></p><h2 id="宏任务和微任务"><a href="#宏任务和微任务" class="headerlink" title="宏任务和微任务"></a>宏任务和微任务</h2><p>宏任务与微任务都属于异步任务，再执行上微任务的优先级高于宏任务，因此每一次都会先执行完微任务在执行宏任务。</p><p>宏任务有：setTimeout、setInterval、I/O、UI 交互事件，Dom事件，ajax事件</p><p>微任务有：promise的回调、MutationObserver 的回调 ,process.nextTick，async/await,.then（）</p><p>注：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;同步代码2&#x27;</span>)<span class="comment">//同步任务</span></span><br><span class="line">  <span class="title function_">resolve</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;<span class="comment">//微任务</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise.then&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>一次 Eventloop 循环会处理一个宏任务和所有这次循环中产生的微任务。</strong></p><p><strong>Promise的状态在发生变化之后，就不会再发生变化</strong></p><h2 id="nodejs的事件循环"><a href="#nodejs的事件循环" class="headerlink" title="nodejs的事件循环"></a>nodejs的事件循环</h2><p>当Node.js启动时，它会初始化一个事件循环，来处理输入的脚本，这个脚本可能进行异步API的调用、调度计时器或调用process.nextTick()，然后开始处理事件循环。</p><p>Node.js使用V8作为js的解析引擎，而I/O处理方面使用了自己设计的libuv，libuv是一个基于事件驱动的跨平台抽象层，封装了不同操作系统一些底层特性，对外提供统一的API</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4fca3d06b2464ce5a6694e0966fa93ff~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p><p>根据上图，可以看到Node.js的运行机制如下:</p><ol><li>V8引擎负责解析JavaScript脚本；</li><li>解析后的代码，调用Node API；</li><li>libuv库负责Node API的执行。它将不同的任务分配给不同的线程，形成一个Event Loop（事件循环），以异步的方式将任务的执行结果返回给V8引擎；</li><li>V8引擎将结果返回给用户；</li></ol><p>具体的实现</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">   ┌───────────────────────────┐</span><br><span class="line">┌─&gt;│           timers          │</span><br><span class="line">│  └─────────────┬─────────────┘</span><br><span class="line">│  ┌─────────────┴─────────────┐</span><br><span class="line">│  │     pending callbacks     │</span><br><span class="line">│  └─────────────┬─────────────┘</span><br><span class="line">│  ┌─────────────┴─────────────┐</span><br><span class="line">│  │       idle, prepare       │</span><br><span class="line">│  └─────────────┬─────────────┘      ┌───────────────┐</span><br><span class="line">│  ┌─────────────┴─────────────┐      │   incoming:   │</span><br><span class="line">│  │           poll            │&lt;─────┤  connections, │</span><br><span class="line">│  └─────────────┬─────────────┘      │   data, etc.  │</span><br><span class="line">│  ┌─────────────┴─────────────┐      └───────────────┘</span><br><span class="line">│  │           check           │</span><br><span class="line">│  └─────────────┬─────────────┘</span><br><span class="line">│  ┌─────────────┴─────────────┐</span><br><span class="line">└──┤      close callbacks      │</span><br><span class="line">   └───────────────────────────┘</span><br></pre></td></tr></table></figure><p>分成六个阶段：</p><p>1.<code>timers</code>：实现setTimeout、setInterval回调</p><p>2.<code>I/O callbacks</code> 阶段：主要执行系统级别的回调函数，比如 TCP 连接失败的回调；</p><p>3.<code>idle, prepare</code> 阶段：仅Node.js内部使用，可以忽略；</p><p>4.<code>poll</code> 阶段：轮询等待新的链接和请求等事件，执行 I/O 回调等；</p><p>5.<code>check</code> 阶段：执行 setImmediate() 的回调；</p><p>6.<code>close callbacks</code> 阶段：执行关闭请求的回调函数</p><p>比较重要的就是第四阶段：poll</p><p>1.先等待timer的时间，然后清空poll队列</p><p>2.</p><p>如果有 setImmediate 回调需要执行，poll 阶段会停止并且进入到 check 阶段执行回调；</p><p>如果没有 setImmediate 回调需要执行，会等待回调被加入到队列中并立即执行回调，这里同样会有个超时时间设置防止一直等待下去；</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd424a6a6443420ba545a3a2467164c0~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image.png"></p><p>process.nexttick执行顺序</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;timeout&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;promise&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">process.<span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;nextTick&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>输出结果如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nextTick</span><br><span class="line">promise</span><br><span class="line">timeout</span><br></pre></td></tr></table></figure><p>可以看到，process.nextTick()是优先于promise的回调执行（微任务所有）。</p><h1 id="垃圾回收机制"><a href="#垃圾回收机制" class="headerlink" title="垃圾回收机制"></a>垃圾回收机制</h1><h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><p>有两种机制：</p><p>1、标记清除：将<code>可达</code>的对象标记起来，<code>不可达</code>的对象当成垃圾回收</p><p>对所有活动对象进行标记，清除阶段会将没有标记的对象清除；标记整理算法：标记结束后，算法将活动对象压入内存一端，则需要清理的对象在边界，直接被清理掉就行。（内存空间不连续）</p><p><img src="https://www.teqng.com/wp-content/uploads/2021/09/wxsync-2021-09-76349487667369b3a9301666d7057fb0.png" alt="img"></p><p> 2、引用计数：找出每个对象的引用数，等于0就回收，大于0就回收</p><p>并且如果两个对象互相引用，引用永远是1，所以不会被回收，造成内存泄露。</p><h2 id="V8的垃圾回收"><a href="#V8的垃圾回收" class="headerlink" title="V8的垃圾回收"></a>V8的垃圾回收</h2><p>分代回收</p><p><strong>新生代</strong>的垃圾只有<code>1-8M</code>的容量，比较容易处理</p><p><strong>老生代</strong>的容量就大很多了，不易处理</p><p>1.新生代</p><p>在JavaScript中，任何对象的声明分配到的内存，将会先被放置在新生代中。</p><p>在新生代中，主要使用<code>Scavenge</code>算法进行垃圾回收，<code>Scavenge</code>算法是一个典型的牺牲空间换取时间的复制算法，在占用空间不大的场景上非常适用。</p><p><img src="https://www.teqng.com/wp-content/uploads/2021/09/wxsync-2021-09-50369819178d6e2db1827b0a2883fa23.png" alt="img"></p><p>具体步骤：</p><p>1、标记活动对象和非活动对象</p><p>2、复制<code>from-space</code>的活动对象到<code>to-space</code>中并进行排序</p><p>3、清除<code>from-space</code>中的非活动对象</p><p>4、将<code>from-space</code>和<code>to-space</code>进行角色互换，以便下一次的<code>Scavenge算法</code>垃圾回收</p><p><strong>怎么判断哪些对象是活动对象，哪些是非活动对象呢？</strong></p><p>使用标记清除法</p><p><strong>新生代中的对象什么时候变成老生代的对象？</strong></p><p>在新生代中，还进一步进行了细分。分为<code>nursery子代</code>和<code>intermediate子代</code>两个区域</p><p>对象第一次分配到nursery子代，如果下一次还在，到intermediate子代，还没有被回收，到老生代</p><p>2.老生代</p><p>老生代里使用了<code>Mark-Sweep算法(标记清理)</code>和<code>Mark-Compact算法(标记整理)</code>（会整理空位）</p><p>老生代不需要复制，直接标记活动对象和非活动对象之后，就直接执行清理了。</p><h2 id="内存泄漏"><a href="#内存泄漏" class="headerlink" title="内存泄漏"></a>内存泄漏</h2><p>以下四种情况会造成内存的泄漏：</p><ul><li><strong>意外的全局变量：</strong>由于使用未声明的变量，而意外的创建了一个全局变量，而使这个变量一直留在内存中无法被回收。</li><li><strong>被遗忘的计时器或回调函数：</strong>设置了 setInterval 定时器，而忘记取消它，如果循环函数有对外部变量的引用的话，那么这个变量会被一直留在内存中，而无法被回收。</li><li><strong>脱离 DOM 的引用：</strong>获取一个 DOM 元素的引用，而后面这个元素被删除，由于一直保留了对这个元素的引用，所以它也无法被回收。</li><li><strong>闭包：</strong>不合理的使用闭包，从而导致某些变量一直被留在内存当中。</li></ul>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>计网面</title>
      <link href="/2023/03/16/%E9%9D%A2%E8%AF%95/%E8%AE%A1%E7%BD%91%E9%9D%A2/"/>
      <url>/2023/03/16/%E9%9D%A2%E8%AF%95/%E8%AE%A1%E7%BD%91%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="计网面"><a href="#计网面" class="headerlink" title="计网面"></a>计网面</h1><h2 id="四层协议和七层"><a href="#四层协议和七层" class="headerlink" title="四层协议和七层"></a>四层协议和七层</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/137084-20180525143809658-1611041911.jpg" alt="img"></p><p>osi(7)</p><p>TCP/IP（4）：</p><p>1.应用层：</p><p>2.传输层：</p><p>3.网络层：</p><p>4.网络接口层：负责接受IP数据并通过网络发送，或从网络上接受物理帧，抽出IP数据报，交给IP层。</p><h1 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h1><h2 id="HTTP-和-HTTPS"><a href="#HTTP-和-HTTPS" class="headerlink" title="HTTP 和 HTTPS"></a>HTTP 和 HTTPS</h2><h3 id="http"><a href="#http" class="headerlink" title="http"></a>http</h3><p>超文本传输协议，简单来说就是一种发布和接收 HTML 页面的方法，被用于在 Web 浏览器和网站服务器之间传递信息，不提供加密,默认端口为80。</p><p>优点：简单，速度快，跨平台好</p><p>通信过程：</p><ul><li>服务器在 80 端口等待客户的请求</li><li>浏览器发起到服务器的 TCP 连接(创建套接字 Socket)</li><li>服务器接收来自浏览器的 TCP 连接</li><li>浏览器(HTTP 客户端)与 Web 服务器(HTTP 服务器)交换 HTTP 消息</li><li>关闭 TCP 连接</li></ul><h3 id="https"><a href="#https" class="headerlink" title="https"></a>https</h3><p>https:超文本传输安全协议</p><p>HTTPS 经由 HTTP 进行通信，但利用 SSL/TLS 来加密数据包,默认端口号是 443</p><p>HTTPS 协议中，SSL 通道通常使用基于密钥的加密算法，密钥长度通常是 40 比特或 128 比特。</p><p>优点：保密性好、信任度高。</p><h3 id="https-协议的工作原理"><a href="#https-协议的工作原理" class="headerlink" title="https 协议的工作原理"></a>https 协议的工作原理</h3><p>客户端在使用 HTTPS 方式与 Web 服务器通信时有以下几个步骤：</p><ol><li>客户端使用 https url 访问服务器，则要求 web 服务器<code>建立 ssl 链接</code>。</li><li>web 服务器接收到客户端的请求之后，会<code>将网站的证书（证书中包含了公钥），传输给客户端</code>。</li><li>客户端和 web 服务器端开始<code>协商 SSL 链接的安全等级</code>，也就是加密等级。</li><li>客户端浏览器通过双方协商一致的安全等级，<code>建立会话密钥</code>，然后通过网站的公钥来加密会话密钥，并传送给网站。</li><li>web 服务器<code>通过自己的私钥解密出会话密钥</code>。</li><li>web 服务器<code>通过会话密钥加密与客户端之间的通信</code>。</li></ol><h3 id="SSL-TLS"><a href="#SSL-TLS" class="headerlink" title="SSL/TLS"></a>SSL/TLS</h3><p>SSL 指安全套接字协议(Secure Sockets Layer)，TLS 是基于 SSL 之上的，但由于习惯叫法，通常把 HTTPS 中的核心加密协议混成为 SSL/TLS。</p><p>核心要素:非对称加密</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/b8b6ee7608b1f2a1dee4858de121138b7e5d95.webp" alt="img"></p><p>使用 SSL/TLS 进行通信的双方需要使用非对称加密方案来通信，但是非对称加密设计了较为复杂的数学算法，在实际通信过程中，计算的代价较高，效率太低，因此，<code>SSL/TLS 实际对消息的加密使用的是对称加密</code>。</p><blockquote><p>对称加密</p></blockquote><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/d8fe6f42452625d48935348e07f09a899230c3.webp" alt="img"></p><p>对称加密存在隐患</p><p>客户端 C 和服务器 S 想要使用 SSL/TLS 通信，由上述 SSL/TLS 通信原理，C 需要先知道 S 的公钥，而 S 公钥的唯一获取途径，就是把 S 公钥在网络信道中传输。</p><p>假设 S 公钥不做加密，在信道中传输，那么很有可能存在一个攻击者 A，发送给 C 一个诈包，假装是 S 公钥，其实是诱饵服务器 AS 的公钥。当 C 收获了 AS 的公钥(却以为是 S 的公钥)，C 后续就会使用 AS 公钥对数据进行加密，并在公开信道传输，那么 A 将捕获这些加密包，用 AS 的私钥解密，就截获了 C 本要给 S 发送的内容，而 C 和 S 二人全然不知。</p><p>同样的，S 公钥即使做加密，也难以避免这种信任性问题，C 被 AS 拐跑了!</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/037575e505741ef9d28358a4f61054b662838b.webp" alt="img"></p><h3 id="数字签名"><a href="#数字签名" class="headerlink" title="数字签名"></a>数字签名</h3><p>证书颁发机构(CA，Certificate Authority)。CA 默认是受信任的第三方</p><p>CA 会给各个服务器颁发证书，证书存储在服务器上，并附有 CA 的电子签名。</p><ul><li>设有服务器 S，客户端 C，和第三方信赖机构 CA。</li><li>S 信任 CA，CA 是知道 S 公钥的，S 向 CA 颁发证书。并附上 CA 私钥对消息摘要的加密签名。</li><li>S 获得 CA 颁发的证书，将该证书传递给 C。</li><li>C 获得 S 的证书，信任 CA 并知晓 CA 公钥，使用 CA 公钥对 S 证书山的签名解密，同时对消息进行散列处理，得到摘要。比较摘要，验证 S 证书的真实性。</li><li>如果 C 验证 S 证书是真实的，则信任 S 的公钥(在 S 证书中)。</li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/10a0699adf394f8aba2f570a67b8c822~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="在这里插入图片描述"></p><h2 id="HTTP状态码及其含义"><a href="#HTTP状态码及其含义" class="headerlink" title="HTTP状态码及其含义"></a>HTTP状态码及其含义</h2><p>跨域：当前页面中的某个接口请求的地址和当前页面的地址如果<code>协议、域名、端口</code>其中有一项不同，就说该接口跨域了。</p><ul><li><p>1xx（信息性状态码）表示服务器已经接收到部分请求，需要客户端继续发送其余请求。</p></li><li><p>2xx（成功状态码）表示服务器已经成功处理了请求。例如，200 OK表示请求成功；201 Created表示服务器已经创建了新资源；204 No Content表示服务器已经成功处理了请求，但没有返回任何内容。</p></li><li><p>3xx（重定向状态码）表示为了完成请求，需要客户端进行进一步的操作。例如，301 Moved Permanently表示请求的资源已经永久移动到新位置；302 Found表示请求的资源临时移动到新位置；304 Not Modified表示资源没有发生变化，可以使用缓存的版本。</p></li><li><p>4xx（客户端错误状态码）表示客户端发送的请求有错误或者无效。</p><p>401，未授权</p><p>402，需付费</p><p>403，不可以访问</p><p>404，找不到资源</p><p>408，超时</p></li><li><p>5xx（服务器错误状态码）表示服务器在处理请求时发生了内部错误或者异常。</p><p>500 表示服务器内部错误；</p><p>501 Not Implemented 表示服务器不支持当前请求所需要的功能；502 Bad Gateway 表示作为网关或代理的服务器从上游服务器收到无效响应；503 Service Unavailable 表示服务器暂时无法处理请求。</p></li></ul><h2 id="HTTP-请求跨域问题"><a href="#HTTP-请求跨域问题" class="headerlink" title="HTTP 请求跨域问题"></a>HTTP 请求跨域问题</h2><h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><p>script 标签 src 属性中的链 接却可以访问跨域的 js 脚本，</p><p>利用这个特性，服务端不再返回 JSON 格式的数据，而是返回一段 <code>调用某个函数的 js 代码，在 src 中进行了调用</code>，这样实现了跨域。</p><p>步骤：</p><ol><li>去创建一个script标签</li><li>script的src属性设置接口地址</li><li>接口参数，必须要带一个自定义函数名，要不然后台无法返回数据</li><li>通过定义函数名去接受返回的数据</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动态创建 script</span></span><br><span class="line"><span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置回调函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置 script 的 src 属性，并设置请求地址</span></span><br><span class="line">script.<span class="property">src</span> = <span class="string">&#x27;http://localhost:3000/?callback=getData&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让 script 生效</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(script);</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">fn</span> (data) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;客户端的fn函数被调用了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 1.将非同源服务器端的请求地址写在script标签的src属性中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:3001/better?callback=fn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>laravel php 后端代码</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">Request <span class="variable">$request</span></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//获取回调函数名</span></span><br><span class="line">    <span class="variable">$callback</span>= <span class="variable">$request</span>-&gt;callback;</span><br><span class="line">    <span class="comment">//服务端返回数据</span></span><br><span class="line">    <span class="variable">$data</span> = [</span><br><span class="line">        [</span><br><span class="line">            <span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">0</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>=&gt;[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]]</span><br><span class="line">    ];</span><br><span class="line">    <span class="comment">//动态执行回调函数</span></span><br><span class="line">    <span class="comment">//方法1:</span></span><br><span class="line">     <span class="keyword">return</span> <span class="title function_ invoke__">response</span>()-&gt;<span class="title function_ invoke__">jsonp</span>(<span class="variable">$callback</span>, <span class="variable">$data</span>);<span class="comment">//接收的方法名和传输的数据</span></span><br><span class="line">    <span class="comment">//方法2:</span></span><br><span class="line">    <span class="comment">// return response()-&gt;json($data)-&gt;setCallback($callback);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>JSONP 的缺点</strong>:<br>JSON 只支持 get，因为 script 标签只能使用 get 请求； JSONP 需要后端配合返回指定格式的数据。</p><h3 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h3><p>cors：目前最常用的一种解决办法，通过设置后端允许跨域实现。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;GET, PUT, OPTIONS, POST&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="proxy代理"><a href="#proxy代理" class="headerlink" title="proxy代理"></a>proxy代理</h3><p>目前常用方式。 通俗点说就是客户端浏览器发起一个请求会存在跨域问题，但是服务端向另一个服务端发起请求并无跨域，因为跨域问题归根结底源于同源策略，而同源策略只存在于浏览器</p><p>那么我们是不是可以通过 <code>Nginx</code> 配置一个代理服务器，反向代理访问跨域的接口，并且我们还可以修改 <code>Cookie</code> 中 <code>domain</code> 信息，方便当前域 <code>Cookie</code> 写入</p><p>在nginx配置下 加如下代码就可以解决跨域的问题；</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add_header <span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Origin</span> <span class="attr">http</span>:<span class="comment">//a.xxx.com; </span></span><br><span class="line">add_header <span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Credentials</span> <span class="literal">true</span>;</span><br><span class="line">add_header <span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Methods</span> <span class="variable constant_">GET</span>,<span class="variable constant_">POST</span>;</span><br></pre></td></tr></table></figure><h2 id="GET-和-POST-的区别"><a href="#GET-和-POST-的区别" class="headerlink" title="GET 和 POST 的区别"></a>GET 和 POST 的区别</h2><p><code>GET</code>和<code>POST</code>，两者是<code>HTTP</code>协议中发送请求的方法</p><table><thead><tr><th align="left">序号</th><th align="left">方法</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">GET</td><td align="left">请求指定的页面信息，并返回实体主体。</td></tr><tr><td align="left">2</td><td align="left">HEAD</td><td align="left">类似于 GET 请求，只不过返回的响应中没有具体的内容，用于获取报头</td></tr><tr><td align="left">3</td><td align="left">POST</td><td align="left">向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST 请求可能会导致新的资源的建立和/或已有资源的修改。</td></tr><tr><td align="left">4</td><td align="left">PUT</td><td align="left">从客户端向服务器传送的数据取代指定的文档的内容。</td></tr><tr><td align="left">5</td><td align="left">DELETE</td><td align="left">请求服务器删除指定的页面。</td></tr><tr><td align="left">6</td><td align="left">CONNECT</td><td align="left">HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器。</td></tr><tr><td align="left">7</td><td align="left">OPTIONS</td><td align="left">允许客户端查看服务器的性能。</td></tr><tr><td align="left">8</td><td align="left">TRACE</td><td align="left">回显服务器收到的请求，主要用于测试或诊断。</td></tr><tr><td align="left">9</td><td align="left">PATCH</td><td align="left">是对 PUT 方法的补充，用来对已知资源进行局部更新 。</td></tr></tbody></table><h3 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h3><p>从指定的资源请求数据。</p><ol><li>可被缓存</li><li>保留在浏览器历史记录中</li><li>可被收藏为书签</li><li>不应在处理敏感数据时使用</li><li>有长度限制</li><li>只应当用于取回数据</li></ol><h3 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h3><p>向指定的资源提交要被处理的数据。</p><ol><li>不会被缓存</li><li>不会保留在浏览器历史记录中</li><li>被收藏为书签</li><li>对数据长度没有要求</li></ol><p>本质上都是<code>TCP</code>链接，并无差别</p><p>但是由于<code>HTTP</code>的规定和浏览器/服务器的限制，导致他们在应用过程中会体现出一些区别</p><h2 id="http1-0，http1-1-http2-0-区别"><a href="#http1-0，http1-1-http2-0-区别" class="headerlink" title="http1.0，http1.1, http2.0 区别"></a>http1.0，http1.1, http2.0 区别</h2><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2017/8/3/016c54576b5ac1238fe4df64259e6cb4~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p><h3 id="HTTP1-0-gt-HTTP1-1"><a href="#HTTP1-0-gt-HTTP1-1" class="headerlink" title="HTTP1.0 -&gt; HTTP1.1"></a>HTTP1.0 -&gt; HTTP1.1</h3><p>1.<strong>带宽优化</strong></p><p>HTTP1.0，带宽存在浪费，每次传输数据会传数据的所有，并且不支持断点续传功能。</p><p>HTTP1.1，请求头引入了range头域，它允许只请求资源的某个部分，即返回码是206</p><p>2.<strong>Host头处理</strong></p><p>HTTP1.0，认为每台服务器都绑定一个唯一的IP地址，因此，请求消息中的URL并没有传递主机名。</p><p>HTTP1.1，传递主机名</p><p>3.<strong>长连接</strong></p><p>HTTP 1.0需要使用keep-alive参数来告知服务器端要建立一个长连接，而HTTP1.1默认支持长连接。</p><h3 id="HTTP1-1-gt-HTTP2-0"><a href="#HTTP1-1-gt-HTTP2-0" class="headerlink" title="HTTP1.1 -&gt; HTTP2.0"></a>HTTP1.1 -&gt; HTTP2.0</h3><p>1.<strong>多路复用</strong></p><p>HTTP2.0使用了多路复用的技术，做到同一个连接并发处理多个请求，而且并发请求的数量比HTTP1.1大了好几个数量级。</p><p>2.<strong>数据压缩</strong></p><p>HTTP1.1不支持header数据的压缩，HTTP2.0使用HPACK<a href="http://lib.csdn.net/base/datastructure">算法</a>对header的数据进行压缩，这样数据体积小了，在网络上传输就会更快。</p><p>3.<strong>服务器推送</strong></p><p>当我们对支持HTTP2.0的web server请求数据的时候，服务器会顺便把一些客户端需要的资源一起推送到客户端，免得客户端再次创建连接发送请求到服务器端获取。这种方式非常合适加载静态资源。</p><p>服务器端推送的这些资源其实存在客户端的某处地方，客户端直接从本地加载这些资源就可以了，不用走网络，速度自然是快很多的。</p><h2 id="HTTP请求报文"><a href="#HTTP请求报文" class="headerlink" title="HTTP请求报文"></a>HTTP请求报文</h2><p>一个HTTP请求报文由请求行（request line） 、请求头部（header）、空行和请求数据4个部分组成。</p><p>1.请求行由三部分组成：<strong>请求方法</strong>、<strong>请求URL</strong>（不包括域名 ） 、<strong>HTTP协议版本</strong></p><p>2.请求头部</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aa90ec2b2edf46cb8de233c0b944b118~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="一般请求所带有的属性"></p><p>3.空行</p><p>请求头之后是一个空行，通知服务器以下不再有请求头</p><p>4.请求体</p><p>GET没有请求数据，POST有。</p><p>与请求数据相关的最常使用的请求头是 Content-Type 和 Content-Length 。</p><h2 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h2><p>1.状态行</p><p>状态行由三部分组成：<strong>服务器HTTP协议版本</strong>，<strong>响应状态码</strong>，<strong>状态码的文本描述</strong></p><p>2.响应首部（首部行）</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c39fd612d3549f18d488312fc987325~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="响应首部"></p><p>3.响应实体</p><p>实体包含了Web客户端请求的对象，Content-Length标头及Content-Type标头用于计算实体的位置、数据类型和数据长度。</p><h1 id="TCP和UDP"><a href="#TCP和UDP" class="headerlink" title="TCP和UDP"></a>TCP和UDP</h1><h2 id="TCP握手"><a href="#TCP握手" class="headerlink" title="TCP握手"></a>TCP握手</h2><p>TCP：一个程序希望通过TCP与另一个应用程序通信时，发送请求到一个确切的地址。双方“握手”之后，TCP 将在两个应用程序之间建立一个全双工 (full-duplex) 的通信</p><p>TCP三次握手(连接)</p><p>1.客户端发一个SYN包(seq = x)给服务器，并进入syn_sent</p><p>2.服务器收到，回复SYN + ACK（seq = y,ack = x + 1）给客户端，进入SYN_rcvd</p><p>3.客户端收到，回复ACK（ack = y + 1）包给服务器，进入established状态，建立成功。服务器收到ACK包后，也进入ESTABLISHED状态。</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA1MTEwNDA1NjY2?x-oss-process=image/format,png" alt="三次握手"></p><p>TCP四次挥手（断开连接）：</p><p>1.客户端发送一个FIN包（seq=m）给服务器，并进入FIN_WAIT_1状态，表示自己已经没有数据要发送了。</p><p>2.服务器收到FIN包后，回复一个ACK包（ack=m+1）给客户端，并进入CLOSE_WAIT状态，表示已经知道客户端要关闭连接了。客户端收到ACK包后，进入FIN_WAIT_2状态，等待服务器关闭连接。</p><p>3.服务器发送完所有数据后，发送一个FIN包（seq=n）给客户端，并进入LAST_ACK状态，等待客户端确认。</p><p>4.客户端收到FIN包后，回复一个ACK包（ack=n+1）给服务器，并进入TIME_WAIT状态，在一定时间内等待可能出现的重传。服务器收到ACK包后，关闭连接并释放资源。</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA2MDg0ODUxMjcy?x-oss-process=image/format,png" alt="四次挥手">之所以挥手比握手多一次是因为TCP是全双工通信协议，在关闭连接时需要双方都确认自己的数据已经发送完毕。而在建立连接时只需要双方确认对方的存在即可。</p><p>TCP/IP / 如何保证数据包传输的有序可靠？</p><p>对字节流分段并进行编号然后<code>通过 ACK 回复</code>和<code>超时重发</code>这两个机制来保证。</p><h2 id="TCP和UDP的区别"><a href="#TCP和UDP的区别" class="headerlink" title="TCP和UDP的区别"></a>TCP和UDP的区别</h2><h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><p>一种无连接协议，位于传输层</p><p>特点：<br>1.无连接</p><ul><li>不需要“握手”，UDP 只会给数据增加一个 UDP 头标识下是 UDP 协议，然后就传递给网络层了</li><li>在接收端，网络层将数据传递给传输层，UDP 只去除 IP 报文头就传递给应用层，不会任何拼接操作</li></ul><p>2.有单播，多播，广播的功能</p><p>支持一对一，一对多，多对多，多对一</p><p>3.面向报文</p><p>从应用层的传下来的报文，既不合并，也不拆分，而是保留这些报文的边界</p><p><code>所以应用程序必须选择合适大小的报文</code></p><p>4.不可靠</p><p>想发就发，不管网络是否好到可以收到</p><p>没有拥塞控制，一直会以恒定的速度发送数据，可能丢包</p><p><code>优点：实时性要求高的场景（比如电话会议）就需要使用 UDP 而不是 TCP</code></p><p>5.头部开销小，传输数据报文时是很高效的</p><h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><p>TCP协议全称是传输控制协议是一种面向连接的、可靠的、基于字节流的传输层通信协议</p><p>特点：</p><p>1.面向连接</p><p>建立连接的方法是“三次握手”</p><p>2.仅支持单播传输</p><p>3.面向字节流</p><p>TCP不像UDP一样那样一个个报文独立地传输，而是在不保留报文边界的情况下以字节流方式进行传输。</p><p>4.可靠传输</p><p>ack回复，延时重传</p><p>5.提供拥塞控制</p><p>当网络出现拥塞的时候，TCP能够减小向网络注入数据的速率和数量，缓解拥塞</p><p>6.TCP提供全双工通信</p><h3 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h3><table><thead><tr><th></th><th>UDP</th><th>TCP</th></tr></thead><tbody><tr><td>是否连接</td><td>无连接</td><td>面向连接</td></tr><tr><td>是否可靠</td><td>不可靠传输，不使用流量控制和拥塞控制</td><td>可靠传输，使用流量控制和拥塞控制</td></tr><tr><td>连接对象个数</td><td>支持一对一，一对多，多对一和多对多交互通信</td><td>只能是一对一通信</td></tr><tr><td>传输方式</td><td>面向报文</td><td>面向字节流</td></tr><tr><td>首部开销</td><td>首部开销小，仅8字节</td><td>首部最小20字节，最大60字节</td></tr><tr><td>适用场景</td><td>适用于实时应用（IP电话、视频会议、直播等）</td><td>适用于要求可靠传输的应用，例如文件传输</td></tr></tbody></table><p><strong>UDP</strong>的应用场景：即时通信。面向数据报方式；网络数据大多为短消息；拥有大量客户端；对数据安全性无特殊要求；网络负担重但对响应速度要求高的场景。eg: IP电话、实时视频会议等。</p><p><strong>TCP</strong>的应用场景：对数据准确性要求高，速度可以相对较慢的。eg: 文件传输、邮件的发送与接收等。</p><h1 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h1><h2 id="DNS协议是什么"><a href="#DNS协议是什么" class="headerlink" title="DNS协议是什么"></a>DNS协议是什么</h2><p>DNS是计算机网络中基于<code>UDP</code>的一个<code>应用层</code>协议，它用于<strong>域名解析</strong>：将域名地址解析成对应的IP地址。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/df34facc8f2644349f9ec9c8eb80d3bf~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image.png"></p><p>DNS服务是按<code>层次结构</code>来检索域名的。</p><p>为什么需要使用层次结构呢？假设我们只有<code>根域名服务器</code>，那么全球所有的DNS解析都会涌入该服务器，这样做服务器的压力会非常大。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a429eeb349b04b809d1ddbbefa2c8eb3~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image.png"></p><h2 id="DNS完整的查询过程"><a href="#DNS完整的查询过程" class="headerlink" title="DNS完整的查询过程"></a>DNS完整的查询过程</h2><p>1.在向DNS请求之前，本地域名服务器会先查询指定的域名是否有缓存，如果有且未过期，则立即返回。</p><p>2.没有，向下级域名发送请求</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/379dcce1fd394bd486dd9975d409b32c~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image.png"></p><p>DNS查询提供了两种方法：<code>迭代查询</code>和<code>递归查询</code></p><h4 id="递归查询"><a href="#递归查询" class="headerlink" title="递归查询"></a>递归查询</h4><p>顾名思义，递归查询会在域名服务器查询记录的时候，继续向该域名服务器指定的下一级域名服务器查询，直到根域名服务器为止。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c0142b41a2f54b2db03c851ea1518484~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image.png"></p><h4 id="迭代查询"><a href="#迭代查询" class="headerlink" title="迭代查询"></a>迭代查询</h4><p>迭代查询在没有查询到对应的记录时，会将下一个可查询的域名服务器地址返回到本地域名服务器，由本地域名服务器重新发起请求查询，直到根域名服务器为止。</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bd6ccabf95754f3ba5932f72657442c5~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image.png"></p><h1 id="Websocket"><a href="#Websocket" class="headerlink" title="Websocket"></a>Websocket</h1><p>WebSocket是一种基于TCP的<code>全双工</code>通信协议，在应用层。</p><p>作用</p><p>1、传统上的HTTP协议它是无状态的，服务器不能够识别是哪个客户端发送的请求，不能够保存状态。<br>2、WebSocket弥补了这一问题，在客户端向服务端发送请求之后，服务器处理请求并返回到客户端，使用WebSocket可以使得服务器主动向浏览器推送消息</p><p>区别</p><p>HTTP是客户端直接向服务端发送请求，WebSocket是在完成一次握手之后建立连接</p><p>原理</p><ol><li>与服务器进行三次握手，建立TCP连接</li><li>向服务器发送HTTP请求，请求中包含WebSocket的版本信息：包括upgrade、connection等等。</li><li>服务器处理请求并返回客户端，此时可以进行WebSocket请求了</li><li>服务端也可以主动向客户端推送消息了。</li></ol><p>优缺点</p><p>优点：建立WebSocket连接之后，客户端与服务端交流更方便<br>     客户端只需要向服务端发送一次请求，服务端主动向客户端发送消息<br>缺点：在服务端的状态不会频繁变化的时候，就不需要使用WebSocket连接了，浪费性能</p>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vue面</title>
      <link href="/2023/03/16/%E9%9D%A2%E8%AF%95/vue%E9%9D%A2/"/>
      <url>/2023/03/16/%E9%9D%A2%E8%AF%95/vue%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="vue面"><a href="#vue面" class="headerlink" title="vue面"></a>vue面</h1><h1 id="vue-的基本"><a href="#vue-的基本" class="headerlink" title="vue 的基本"></a>vue 的基本</h1><h2 id="vue的基本原理"><a href="#vue的基本原理" class="headerlink" title="vue的基本原理"></a>vue的基本原理</h2><h3 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h3><p>view：视图</p><p>Controller:用户指令</p><p>Model:数据</p><p>用户与页面产生交互的时候，Controller 中的事件触发器就开始工作了，通过调用 Model 层，来完成对 Model 的修改，然后 Model 层再去通知 View 层更新。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/1664430951359474.png" alt="img"></p><h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h3><p>vue中的数据都是响应式的，怎么实现的呢</p><p>如图</p><p><code>ViewModel负责监听Model中数据的改变并且控制视图的更新，处理用户交互操作；</code></p><p>Model和View并无直接关联，而是通过ViewModel来进行联系的，</p><p>Model和ViewModel之间有着双向数据绑定的联系。</p><p>因此当Model中的数据改变时会触发View层的刷新，View中由于用户交互操作而改变的数据也会在Model中同步。</p><p>这种模式实现了 Model和View的数据自动同步，因此开发者只需要专注于数据的维护操作即可，而不需要自己操作DOM。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/1664431095994064.png" alt="img"></p><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>vue 在实例化的时候，使用 Object.definePropety()（vue3用Proxy），对 data 进行 getter 和 setter  的处理。</p><p>在组件渲染时，若用到 data 里的某个数据，这个数据就会被依赖收集进 watcher 里。</p><p>当数据更新，如果这个数据在 watcher 里，就会收到通知并更新，否则不会更新——vue 采用“数据劫持”+“观察者模式（发布者-订阅者模式）”相结合的方式实现了双向绑定——vue 的响应式原理。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/1664430790819020.png" alt="img"></p><h2 id="vue生命周期"><a href="#vue生命周期" class="headerlink" title="vue生命周期"></a>vue生命周期</h2><ol><li><p><code>create阶段</code>：vue实例被创建<br> <code>beforeCreate</code>: 创建前，此时data和methods中的数据都还没有初始化<br> <code>created</code>： 创建完毕，data中有值，未挂载</p></li><li><p><code>mount阶段</code>： vue实例被挂载到真实DOM节点<br> <code>beforeMount</code>：可以发起服务端请求，去数据<br> <code>mounted</code>: 此时可以操作DOM</p></li><li><p><code>update阶段</code>：当vue实例里面的data数据变化时，触发组件的重新渲染<br> <code>beforeUpdate</code> :更新前<br> <code>updated</code>：更新后</p></li><li><p><code>destroy阶段</code>：vue实例被销毁<br> <code>beforeDestroy</code>：实例被销毁前，此时可以手动销毁一些方法<br> <code>destroyed</code>:销毁后</p><h3 id="created和mounted的区别"><a href="#created和mounted的区别" class="headerlink" title="created和mounted的区别"></a>created和mounted的区别</h3><ul><li>created:在模板渲染成html前调用，即通常初始化某些属性值，然后再渲染成视图。</li><li>mounted:在模板渲染成html后调用，通常是初始化页面完成后，再对html的dom节点进行一些需要的操作。</li></ul></li></ol><h3 id="Vue-子组件和父组件执行顺序"><a href="#Vue-子组件和父组件执行顺序" class="headerlink" title="Vue 子组件和父组件执行顺序"></a>Vue 子组件和父组件执行顺序</h3><p><strong>加载渲染过程：</strong></p><p>先是父组件到挂载前一步，子组件渲染，父子一起挂载</p><p>1.父组件 beforeCreate</p><p>2.父组件 created</p><p>3.父组件 beforeMount</p><p>4.子组件 beforeCreate</p><p>5.子组件 created</p><p>6.子组件 beforeMount</p><p>7.子组件 mounted</p><p>8.父组件 mounted</p><p><strong>更新过程：</strong></p><p>父组件收到更新，子组件开始更新，更新完父组件再更新</p><ol><li>父组件 beforeUpdate</li></ol><p>2.子组件 beforeUpdate</p><p>3.子组件 updated</p><p>4.父组件 updated</p><p><strong>销毁过程：</strong></p><p>父组件收到销毁，子组件开始销毁，更新完父组件再销毁</p><ol><li>父组件 beforeDestroy</li></ol><p>2.子组件 beforeDestroy</p><p>3.子组件 destroyed</p><p>4.父组件 destoryed</p><h3 id="Computed-和-Watch-的区别"><a href="#Computed-和-Watch-的区别" class="headerlink" title="Computed 和 Watch 的区别"></a>Computed 和 Watch 的区别</h3><p><strong>对于Computed：</strong></p><ul><li>它支持缓存，只有依赖的数据发生了变化，才会重新计算</li><li>不支持异步，当Computed中有异步操作时，无法监听数据的变化</li><li>computed的值会默认走缓存，计算属性是基于它们的响应式依赖进行缓存的，也就是基于data声明过，或者父组件传递过来的props中的数据进行计算的。</li><li>如果一个属性是由其他属性计算而来的，这个属性依赖其他的属性，一般会使用computed</li><li>如果computed属性的属性值是函数，那么默认使用get方法，函数的返回值就是属性的属性值；在computed中，属性有一个get方法和一个set方法，当数据发生变化时，会调用set方法。</li></ul><p><strong>对于Watch：</strong></p><ul><li><p>它不支持缓存，数据变化时，它就会触发相应的操作</p></li><li><p>支持异步监听</p></li><li><p>监听的函数接收两个参数，第一个参数是最新的值，第二个是变化之前的值</p></li><li><p>当一个属性发生变化时，就需要执行相应的操作</p></li><li><ul><li>监听数据必须是data中声明的或者父组件传递过来的props中的数据，当发生变化时，会触发其他操作，函数有两个的参数：</li><li>immediate：组件加载立即触发回调函数deep：深度监听，发现数据内部的变化，在复杂数据类型中使用，例如数组中的对象发生变化。需要注意的是，deep无法监听到数组和对象内部的变化。</li></ul></li></ul><p>当想要执行异步或者昂贵的操作以响应不断的变化时，就需要使用watch。</p><p><strong>总结：</strong></p><ul><li>computed 计算属性 : 依赖其它属性值，并且 computed 的值有缓存，只有它依赖的属性值发生改变，下一次获取 computed 的值时才会重新计算 computed 的值。</li><li>watch 侦听器 : 更多的是<strong>观察</strong>的作用，<strong>无缓存性</strong>，类似于某些数据的监听回调，每当监听的数据变化时都会执行回调进行后续操作。</li></ul><p><strong>运用场景：</strong></p><ul><li><strong>使用场景</strong> <code>computed</code>：当一个属性受多个属性影响的时候使用，例：购物车商品结算功能</li><li><code>watch</code>：当一条数据影响多条数据的时候使用，例：搜索数据</li></ul><h3 id="data为什么是一个函数而不是对象"><a href="#data为什么是一个函数而不是对象" class="headerlink" title="data为什么是一个函数而不是对象"></a>data为什么是一个函数而不是对象</h3><p>1.一个组件被复用多次的话，也就会创建多个实例。本质上，这些实例用的都是同一个构造函数。</p><p>2.如果data是对象的话，对象属于引用类型，会影响到所有的实例。所以为了保证组件不同的实例之间data不冲突，data必须是一个函数。</p><h2 id="虚拟DOM"><a href="#虚拟DOM" class="headerlink" title="虚拟DOM"></a>虚拟DOM</h2><p>渲染时，如果是DOM节点更新，那么整个DOM将重新渲染，然而DOM节点渲染是非常消耗性能的一件事</p><p>虚拟DOM就是让更新的节点更新，不是DOM树更新</p><p>虚拟DOM本质上是一个js对象，通过对象来表示真实的DOM结构。</p><p>tag用来描述标签，props用来描述属性，children用来表示嵌套的层级关系。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>TXM to SFM<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>html-&gt;虚拟DOM</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">tag</span>: <span class="string">&#x27;div&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;app&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">chidren</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">tag</span>: <span class="string">&#x27;p&#x27;</span>,</span><br><span class="line">      <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="attr">className</span>: <span class="string">&#x27;text&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">chidren</span>: [</span><br><span class="line">        <span class="string">&#x27;TXM to SFM&#x27;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="React-Vue-项目中-key-的作用"><a href="#React-Vue-项目中-key-的作用" class="headerlink" title="React/Vue 项目中 key 的作用"></a>React/Vue 项目中 key 的作用</h3><p>1.key的作用是为了在diff算法执行时更快的找到对应的节点，<code>提高diff速度，更高效的更新虚拟DOM</code>;</p><p>当状态中的数据发生变化时，react会根据【新数据】生成【新的虚拟DOM】, 随后React进行【新虚拟DOM】与【旧虚拟DOM】的diff比较，比较规则如下：</p><p>a. 旧虚拟DOM中找到了与新虚拟DOM相同的key：</p><p>​     (1).若虚拟DOM中内容没变, 直接使用之前的真实DOM</p><p>​     (2).若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM</p><p> b. 旧虚拟DOM中未找到与新虚拟DOM相同的key</p><p>  根据数据创建新的真实DOM，随后渲染到到页面</p><p>2.为了在数据变化时强制更新组件，以避免<code>“就地复用”</code>带来的副作用。</p><p>不能使用index</p><ol><li>若对数据进行：逆序添加、逆序删除等破坏顺序操作:</li></ol><p>会产生没有必要的真实DOM更新 ==&gt; 界面效果没问题, 但效率低。</p><ol start="2"><li>如果结构中还包含输入类的DOM：</li></ol><p>会产生错误DOM更新 ==&gt; 界面有问题。    </p><h2 id="vue组件的通信方式"><a href="#vue组件的通信方式" class="headerlink" title="vue组件的通信方式"></a>vue组件的通信方式</h2><h3 id="父子组件通信"><a href="#父子组件通信" class="headerlink" title="父子组件通信"></a>父子组件通信</h3><p><code>props</code>/<code>$emit</code> 父子组件通信</p><p>父-&gt;子<code>props</code></p><p>子-&gt;父 <code>$on、$emit</code></p><ul><li>在子组件中，通过<code>$emit()</code> 来发射事件</li><li>在父组件中，通过<code>v-on</code> 来监听子组件事件</li></ul><p>父访问子</p><ul><li><code>$refs</code> 和 ref 指令通常是一起使用的</li><li>首先，我们通过 ref 给某一个子组件绑定一个特定的 ID</li><li>其次，通过<code>this.$refs.ID</code>就可以访问到该组件了<ul><li>接着使用 <code>this.$refs.ID.xx</code> 就可以拿到该组件里面的属性数据了</li></ul></li></ul><p>子访问父</p><p> <code>$parent</code></p><h3 id="兄弟组件通信"><a href="#兄弟组件通信" class="headerlink" title="兄弟组件通信"></a>兄弟组件通信</h3><p><strong>1.借助父组件传参</strong></p><p>都传给父组件，在去访问父组件参数</p><p>2.Event Bus</p><p>已经有人写了Event Bus了，就是mitt</p><p>A组件派发（emit）B组件监听（on）</p><h3 id="跨级组件通信"><a href="#跨级组件通信" class="headerlink" title="跨级组件通信"></a>跨级组件通信</h3><p>vuex</p><ul><li><p>State：总的数据</p></li><li><p>Getters：有时候，我们需要从 store 中获取一些 state 变异后的状态，比如下面的 Store</p></li><li><p>```js</p><pre><code>getters: &#123;   // 获取年龄大于20的学生对象   more20stu(state)&#123;       return state.students.filter(s =&gt; s.age &gt;20)   &#125; &#125;,  //这样我们在其他 .vue 组件中就可以传入年龄数值筛选了   &lt;div&gt;  &lt;h2&gt;&#123;&#123;$store.getters.more20stu&#125;&#125;&lt;/h2&gt;</code></pre>  </div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- Mutation：Vuex的store状态的更新唯一方式：提交**Mutation**</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">      mutations: &#123;</span><br><span class="line">          increment(state)&#123;</span><br><span class="line">              state.count++</span><br><span class="line">          &#125;,</span><br><span class="line">          decrement(state)&#123;</span><br><span class="line">              state.count--</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      //通过 mutation 更新</span><br><span class="line">      </span><br><span class="line">       &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;decrement&quot;&gt;-1&lt;&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    //注意数据只能放在计算属性中</span><br><span class="line">          computed: &#123;</span><br><span class="line">          count: function() &#123;</span><br><span class="line">              return this.$store.state.count</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">          increment: function() &#123;</span><br><span class="line">              this.$store.commit(&#x27;increment&#x27;)</span><br><span class="line">          &#125;,</span><br><span class="line">          decrement: function() &#123;</span><br><span class="line">              this.$store.commit(&#x27;decrement&#x27;)</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li><li><p>Action：我们强调，不要在 Mutation 中进行异步操作，但是某些情况，我们确实希望在 Vuex 中进行一些异步操作，比如网络请求，必然是异步的，Action 类似于 Mutation，但是是用来代替 Mutation 进行异步操作的。</p></li><li><p>Module：当应用变得非常复杂时， store 对象就有可能变得相当臃肿，</p><p>为了解决这个问题，Vuex 允许我们将 store 分割成某块，而每个模块拥有自己的 state、mutations、action、getters等</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ModuleA</span> = &#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ModuleB</span> = &#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        <span class="attr">a</span>: moduleA,</span><br><span class="line">        <span class="attr">b</span>: moduleB</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.<span class="property">state</span>.<span class="property">a</span><span class="comment">// -&gt; moduleA 的状态</span></span><br><span class="line">store.<span class="property">state</span>.<span class="property">b</span><span class="comment">// -&gt; moduleB 的状态</span></span><br></pre></td></tr></table></figure></li></ul><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/5f4ea9e16eda6e37ab336075a788ae15.png" alt="img"></p><h1 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h1><h2 id="传递参数的方式"><a href="#传递参数的方式" class="headerlink" title="传递参数的方式"></a>传递参数的方式</h2><p>传递参数主要有两种类型: params 和 query</p><h3 id="params的类型"><a href="#params的类型" class="headerlink" title="params的类型"></a>params的类型</h3><ul><li>配置路由格式: <code>/router/:id</code></li><li>传递的方式: 在path后面跟上对应的值</li><li>传递后形成的路径: /router/123, /router/abc</li></ul><h3 id="query的类型"><a href="#query的类型" class="headerlink" title="query的类型"></a>query的类型</h3><ul><li>配置路由格式: /router, 也就是普通配置</li><li>传递的方式: 对象中使用query的key作为传递方式</li><li>传递后形成的路径: /router?id=123, /router?id=abc</li></ul><h2 id="router-和-route的区别"><a href="#router-和-route的区别" class="headerlink" title="$ router 和$route的区别"></a>$ router 和$route的区别</h2><ul><li><code>$router</code> 为VueRouter实例，想要导航到不同URL，则使用<code>$router.push</code>方法</li><li><code>$route</code>为当前 router 跳转对象里面可以获取name、path、query、params等</li></ul><h2 id="HashRouter-和-HistoryRouter的区别和原理？"><a href="#HashRouter-和-HistoryRouter的区别和原理？" class="headerlink" title="HashRouter 和 HistoryRouter的区别和原理？"></a>HashRouter 和 HistoryRouter的区别和原理？</h2><p>1.history和hash都是利用浏览器的2种特性实现前端路由，history是利用浏览历史记录栈的API实现，hash是监听location hash值变化事件来实现 </p><p>2.history的url没有#号，hash有#号</p><p>3.相同的url,history会触发添加到浏览器历史记录栈中，hash不会触发，history需要后端配合，如果后端不配合刷新页面会出现404，hash不需要</p><p>hashRouter原理：通过window.onhashchange获取url中hash值 </p><p>historyRouter原理：通过history.pushState,使用它做页面跳转不会触发页面刷新，使用window.onpopstate监听浏览器的前进和后退</p><h2 id="说一说-Vue-中-nextTick-作用与原理？"><a href="#说一说-Vue-中-nextTick-作用与原理？" class="headerlink" title="说一说 Vue 中 $nextTick 作用与原理？"></a>说一说 Vue 中 $nextTick 作用与原理？</h2><p>Vue在更新DOM时异步执行，在修改完数据以后，视图不会立刻更新，而是等同一事件循环中所有的数据更新之后再去更新视图。所以修改完数据，立即在方法中回去dom，获取的仍然是未修改的DOM。</p><p>$nixtTick的作用是:将回调延迟到下次 DOM 更新循环之后执行，以便于我们在回调函数中获取到的是最新的DOM，$nextTick的原理本质上是返回一个Promise，进行异步执行</p><h2 id="keep-alive的实现"><a href="#keep-alive的实现" class="headerlink" title="keep-alive的实现"></a>keep-alive的实现</h2><p>作用：实现组件缓存，保持这些组件的状态，切换时，不需要重复渲染</p><p><code>Vue.js</code>内部将<code>DOM</code>节点抽象成了一个个的<code>VNode</code>节点，</p><p>keep-alive将将满足条件的组件在<code>cache</code>对象中缓存起来，需要的时候在Node节点取出来</p><h2 id="react"><a href="#react" class="headerlink" title="react"></a>react</h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bae01e6eb804d849e5bb889f787707d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>css面</title>
      <link href="/2023/03/16/%E9%9D%A2%E8%AF%95/css%E9%9D%A2/"/>
      <url>/2023/03/16/%E9%9D%A2%E8%AF%95/css%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="HTML5-新特性、语义化"><a href="#HTML5-新特性、语义化" class="headerlink" title="HTML5 新特性、语义化"></a>HTML5 新特性、语义化</h2><p><strong>语义化标签</strong>：</p><p>header nav main article section aside footer</p><p>优点：</p><ol><li>代码可读高 </li><li>有利于SEO</li><li>利于页面内容结构化 </li></ol><h2 id="CSS-选择器及优先级"><a href="#CSS-选择器及优先级" class="headerlink" title="CSS 选择器及优先级"></a>CSS 选择器及优先级</h2><p>优先级最高！important &gt; 行内元素 &gt;CSS 选择器</p><table><thead><tr><th align="center">CSS 选择器</th><th align="center">权重</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">100</td></tr><tr><td align="center">属性</td><td align="center">10</td></tr><tr><td align="center">类（class）</td><td align="center">10</td></tr><tr><td align="center">伪类（a:hover）</td><td align="center">10</td></tr><tr><td align="center">标签（div，p）</td><td align="center">1</td></tr><tr><td align="center">伪元素（：：before）</td><td align="center">1</td></tr><tr><td align="center">通配符选择器(*)</td><td align="center">0</td></tr><tr><td align="center">子选择器(ul &gt; li) 后代选择器(li a)</td><td align="center">0</td></tr></tbody></table><h2 id="position-属性的值有哪些及其区别"><a href="#position-属性的值有哪些及其区别" class="headerlink" title="position 属性的值有哪些及其区别"></a>position 属性的值有哪些及其区别</h2><p>1.relative:</p><p>相对定位，一般是父盒子使用，不脱标，继续保留原来位置</p><p>元素在移动位置的时候，是相对于它<strong>原来的位置</strong>来说的</p><p>2.absolute：</p><p>绝对定位，一般是盒子使用，脱标</p><p>元素在移动位置的时候，是相对于它<strong>父盒子</strong>来说的</p><p>3.fixed：</p><p>静态定位，脱标，父盒子是window</p><p>4.sticky:</p><p>粘性定位</p><table><thead><tr><th>定位模式</th><th>是否脱标</th><th>移动位置</th><th>是否常用</th></tr></thead><tbody><tr><td>static静态定位</td><td>否</td><td>不能使用边偏移</td><td>很少</td></tr><tr><td>relative相对定位</td><td>否（占有位置）</td><td>相对于自身位置移动</td><td>常用</td></tr><tr><td>absolute绝对定位</td><td>是（不占有位置）</td><td>相对于自身位置移动</td><td>常用</td></tr><tr><td>fixed固定定位</td><td>是（不占有位置)</td><td>浏览器可视区</td><td>常用</td></tr><tr><td>sticky</td><td>否（占有位置）</td><td>浏览器可视区</td><td>当前阶段少</td></tr></tbody></table><ul><li>在使用定位布局时候，可能会出现盒子重叠的情况</li><li>此时，可以用 <code>z-index</code> 来控制盒子的前后次序(z轴)</li></ul><p><code>z-index</code>越大，盒子在越上面</p><h2 id="box-sizing属性"><a href="#box-sizing属性" class="headerlink" title="box-sizing属性"></a>box-sizing属性</h2><p>盒子模型分成两种</p><p>1.标准盒子模型</p><p>盒子大小是 width + padding + border + margin</p><p>box-sizing：content-box</p><p>2.怪异盒子</p><p>盒子大小是 width + margin，意思是给盒子加上padding值，盒子也不会被撑大</p><p>box-sizing：border-box</p><p>3.box-sizing：inherit 继承父元素的 box-sizing 值。</p><h2 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h2><p><code>BFC</code> 全称：<code>Block Formatting Context</code>， 名为 “块级格式化上下文”。</p><p><code>W3C</code>官方解释为：<code>BFC</code>它决定了元素如何对其内容进行定位，以及与其它元素的关系和相互作用，当涉及到可视化布局时，<code>Block Formatting Context</code>提供了一个环境，<code>HTML</code>在这个环境中按照一定的规则进行布局。</p><p>简单来说就是，<code>BFC</code>是一个完全独立的空间（布局环境），让空间里的子元素不会影响到外面的布局。那么怎么使用<code>BFC</code>呢，<code>BFC</code>可以看做是一个<code>CSS</code>元素属性</p><p><strong>如何创建BFC？</strong></p><ul><li>float的值不为none</li><li>position为absolute或fixed</li><li>display的值为inline-block（行内块元素）、table-cell、table-caption</li><li>overflow的值不为visible</li></ul><p><strong>BFC的使用场景</strong></p><p>1.清除浮动</p><p>2.去除边距重叠现象</p><p>3.避免多列布局由于宽度计算四舍五入而自动换行</p><h2 id="块级元素，行内块元素，行内元素"><a href="#块级元素，行内块元素，行内元素" class="headerlink" title="块级元素，行内块元素，行内元素"></a>块级元素，行内块元素，行内元素</h2><p>1.<strong>块级元素</strong>：<code>h1 h2 h3 ul ol li div p</code></p><p>display：block</p><ul><li>这些元素占一行</li><li>而且可以定义高度和宽度</li><li>宽度默认是容器（父级宽度）的100%</li><li>是个盒子，里面可以放其他元素</li></ul><p>注：</p><ol><li><code>&lt;p&gt;</code> 标签主要用于存放文字，因此<code>&lt;p&gt;</code>里面不能放块级元素，特别是不能放<code>&lt;div&gt;</code></li><li>同理，<code>&lt;h1&gt;~&lt;h6&gt;</code>等都是文字类块级标签，里面也不能存放其他块级元素。</li></ol><p>2.<strong>行内元素</strong>: <code>a span strong em i b</code></p><p>display：line</p><p>3.<strong>行内块元素</strong>: <code>img input td select textarea button </code></p><p>继承了块级元素和行内元素的特点，可以定义高度和宽度,又不用强制占一行</p><p>默认宽度就是它本身内容的宽度(行内元素特点)</p><p>display:inline-block</p><h2 id="一个元素水平垂直居中"><a href="#一个元素水平垂直居中" class="headerlink" title="一个元素水平垂直居中"></a>一个元素水平垂直居中</h2><p><strong>水平居中</strong></p><p>1.对于行内元素: text-align : center</p><p>2.对于确定宽度的块级元素：</p><ul><li>margin: 0 auto</li><li>父盒子position: relative 子盒子position: absolute left：50% transform：translateX(-50%)</li><li>flex justify-content:center</li></ul><p>3.对于宽度未知的块级元素:</p><p>不能使用<code>margin</code>，需要将块级元素设值为 display:table</p><p><strong>垂直居中</strong></p><p>1.文字类，使用line-height和font大小一样</p><p>2.通过设置父容器 相对定位 子级设置 绝对定位，标签通过margin实现自适应居中</p><p>3.弹性布局 flex :父级设置display: flex; 子级设置margin为auto实现自适应居中</p><p>4.父级设置相对定位，子级设置绝对定位，并且通过位移 transform 实现</p><h2 id="flex布局"><a href="#flex布局" class="headerlink" title="flex布局"></a>flex布局</h2><table><thead><tr><th align="center">属性</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">justify-content:center/flex-start/flex-end/space-around/space-between</td><td align="center">对其方式，水平主轴对齐方式</td></tr><tr><td align="center">align-items:center/flex-start/flex-end/stretch</td><td align="center">设置侧轴上的子元素排列方式（单行）</td></tr><tr><td align="center">align-content:center/flex-start/flex-end/space-around/space-between/stretch</td><td align="center">设置侧轴上的子元素的排列方式（多行）</td></tr><tr><td align="center">flex-wrap</td><td align="center">是否换行</td></tr><tr><td align="center">flex-direction</td><td align="center">设置主轴的方向</td></tr><tr><td align="center">flex</td><td align="center">收缩属性占比</td></tr><tr><td align="center">align-self</td><td align="center">单个项目与其他项目不一样的对齐方式</td></tr></tbody></table><p>flex：是 flex-grow（放大） 和 flex-shrink（缩小）、flex-basis（分配多余的空间） 的简写，默认值为 0 1 auto。</p><p>order属性定义项目的排列顺序,order越小，在越前面</p><h2 id="CSS尺寸设置的单位"><a href="#CSS尺寸设置的单位" class="headerlink" title="CSS尺寸设置的单位"></a>CSS尺寸设置的单位</h2><p>px:绝对像素</p><p>rpx：<strong>相对长度单位</strong>，可以根据屏幕宽度自适应</p><p>rem:相对于根(html)的 font-size 大小来计算，</p><p>em:相对于父级元素的 font-size 大小来计算</p><p>vw:相对于界面的大小，视口宽度 </p><p>vh:视口高度</p><h2 id="浮动布局"><a href="#浮动布局" class="headerlink" title="浮动布局"></a>浮动布局</h2><p>怎么使文字环绕在图片周围：</p><p>给图片加上浮动，浮动起来的图片会脱标，不再占有原先位置。</p><p>浮动布局:当元素浮动以后可以向左或向右移动，直到它的外边缘碰到包含它的框或者另外一个浮动元素的边框为</p><p>止。元素浮动以后会脱离正常的文档流，所以文档的普通流中的框就变的好像浮动元素不存在一样。</p><h2 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h2><p>设置浮动会脱离文档流，当父元素不设高度需要子元素来撑开，而子元素设置浮动就会导致父元素的高度塌陷 解决塌陷：</p><p>1.给父盒子设置高度</p><p>2.给父盒子设置overflow：hidden</p><p>3.额外标签法 在浮动元素后加一个div 属性clear：both</p><p>4.父盒子添加伪元素::after{ content：’’； display：table/block； clear：both }</p><h2 id=""><a href="#" class="headerlink" title=""></a></h2>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JS面</title>
      <link href="/2023/03/16/%E9%9D%A2%E8%AF%95/JS%E9%9D%A2/"/>
      <url>/2023/03/16/%E9%9D%A2%E8%AF%95/JS%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="JS面"><a href="#JS面" class="headerlink" title="JS面"></a>JS面</h1><h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><h2 id="JavaScript有哪些数据类型，它们的区别？"><a href="#JavaScript有哪些数据类型，它们的区别？" class="headerlink" title="JavaScript有哪些数据类型，它们的区别？"></a>JavaScript有哪些数据类型，它们的区别？</h2><p>简单数据类型：Number ，Boolen ，NULL , String , Symbol , BigInt ，Undefined</p><p>引用数据类型：Object</p><p>简单数据类型存在栈中，占据空间小、大小固定</p><p>引用数据类型存在堆，占据空间大、大小不固定占据空间大、大小不固定。引用数据类型在栈中存储了指针，该指针指向堆中该实体的起始地址。当解释器寻找引用值时，会首先检索其在栈中的地址，取得地址后从堆中获得实体。（数组，对象，函数）</p><h2 id="数据类型检测的方式有哪些"><a href="#数据类型检测的方式有哪些" class="headerlink" title="数据类型检测的方式有哪些"></a>数据类型检测的方式有哪些</h2><p>1.<strong>typeof</strong></p><p>其中数组、对象、null都会被判断为object，其他判断都正确。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="number">2</span>);               <span class="comment">// number</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">true</span>);            <span class="comment">// boolean</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="string">&#x27;str&#x27;</span>);           <span class="comment">// string</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> []);              <span class="comment">// object  </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;);    <span class="comment">// function</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> &#123;&#125;);              <span class="comment">// object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">undefined</span>);       <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">null</span>);            <span class="comment">// object</span></span><br></pre></td></tr></table></figure><p>2.<strong>instanceof</strong></p><p><code>instanceof</code>可以正确判断对象的类型，<strong>其内部运行机制是判断在其原型链中能否找到该类型的原型</strong>。</p><p>只能判断</p><p>3.<strong>constructor</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="number">2</span>).<span class="property">constructor</span> === <span class="title class_">Number</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="literal">true</span>).<span class="property">constructor</span> === <span class="title class_">Boolean</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="string">&#x27;str&#x27;</span>).<span class="property">constructor</span> === <span class="title class_">String</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(([]).<span class="property">constructor</span> === <span class="title class_">Array</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;).<span class="property">constructor</span> === <span class="title class_">Function</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((&#123;&#125;).<span class="property">constructor</span> === <span class="title class_">Object</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><code>constructor</code>有两个作用，</p><p>1.是判断数据的类型，</p><p>2.是对象实例通过 <code>constrcutor</code> 对象访问它的构造函数。需要注意，如果创建一个对象来改变它的原型，<code>constructor</code>就不能用来判断数据类型了：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Fn</span>(<span class="params"></span>)&#123;&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="title class_">Fn</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="title class_">Fn</span>();</span><br><span class="line"> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f.<span class="property">constructor</span>===<span class="title class_">Fn</span>);    <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f.<span class="property">constructor</span>===<span class="title class_">Array</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>4.<strong>Object.prototype.toString.call()</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;</span><br><span class="line"> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">call</span>(<span class="number">2</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">call</span>(<span class="literal">true</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">call</span>(<span class="string">&#x27;str&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">call</span>([]));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">call</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">call</span>(&#123;&#125;));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">call</span>(<span class="literal">undefined</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">call</span>(<span class="literal">null</span>));</span><br></pre></td></tr></table></figure><p>obj.toString()的结果和Object.prototype.toString.call(obj)的结果不一样，这是为什么？</p><p>这是因为toString是Object的原型方法，而Array、function等<strong>类型作为Object的实例，都重写了toString方法</strong>，就返回不了</p><p>只能调用Object上原型toString方法</p><h2 id="判断数组的方式有哪些"><a href="#判断数组的方式有哪些" class="headerlink" title="判断数组的方式有哪些"></a>判断数组的方式有哪些</h2><p>1.Object.prototype.toString.call(obj) ==  ‘Array’</p><p>2.obj._<em>proto</em>  = Array.prototype;</p><p>3.Array.isArray(obj)</p><p>4.obj instanceof Array</p><h2 id="null和undefined区别"><a href="#null和undefined区别" class="headerlink" title="null和undefined区别"></a>null和undefined区别</h2><p>null是对象已经定义，没有值</p><p>undefined对象未定义</p><p>typeof null 的结果是Object。</p><p>null存储的是NULL和Object的存储吗都是000</p><h2 id="typeof-NaN-的结果是什么？"><a href="#typeof-NaN-的结果是什么？" class="headerlink" title="typeof NaN 的结果是什么？"></a>typeof NaN 的结果是什么？</h2><p>NaN 指“不是一个数字”（not a number），NaN 是一个“警戒值”（sentinel value，有特殊用途的常规值），用于指出数字类型中的错误情况，即“执行数学运算没有成功，这是失败后返回的结果”。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typeof NaN; // &quot;number&quot;</span><br></pre></td></tr></table></figure><p>NaN 是一个特殊值，它和自身不相等，是唯一一个非自反（自反，reflexive，即 x === x 不成立）的值。而 NaN !== NaN 为 true。</p><h2 id="isNaN-和-Number-isNaN-函数的区别？"><a href="#isNaN-和-Number-isNaN-函数的区别？" class="headerlink" title="isNaN 和 Number.isNaN 函数的区别？"></a>isNaN 和 Number.isNaN 函数的区别？</h2><ul><li>函数 isNaN 接收参数后，会尝试将这个参数转换为数值，任何不能被转换为数值的的值都会返回 true，因此非数字值传入也会返回 true ，会影响 NaN 的判断。</li><li>函数 Number.isNaN 会首先判断传入参数是否为数字，如果是数字再继续判断是否为 NaN ，不会进行数据类型的转换，这种方法对于 NaN 的判断更为准确。</li></ul><h2 id="操作符的强制类型转换规则？"><a href="#操作符的强制类型转换规则？" class="headerlink" title="== 操作符的强制类型转换规则？"></a>== 操作符的强制类型转换规则？</h2><p>对于 <code>==</code> 来说，如果对比双方的类型<strong>不一样</strong>，就会进行<strong>类型转换</strong>。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/9459268747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032312f706e672f313530303630342f313631353437353231373138302d65616265383036302d613636612d343235642d616434632d3337633363613633386136382e706e67.png" alt="image"></p><h2 id="Object-is-与比较操作符-的区别？"><a href="#Object-is-与比较操作符-的区别？" class="headerlink" title="Object.is() 与比较操作符 === == 的区别？"></a>Object.is() 与比较操作符 === == 的区别？</h2><p>object.is()和===没什么太多区别，但-0 和 +0 不再相同，但Object.is(NaN, NaN) 会返回 true。</p><h2 id="作用域和作用域链"><a href="#作用域和作用域链" class="headerlink" title="作用域和作用域链"></a>作用域和作用域链</h2><p>作用域：分成全局作用域、局部作用域(函数作用域、块级作用域)</p><p>作用：作用域最大的用处就是<code>隔离变量</code>，不同作用域下同名变量不会有冲突。</p><p>一般情况下，变量到 创建该变量 的函数的作用域中取值。但是如果在当前作用域中没有查到，就会向上级作用域去查，直到查到全局作用域，这么一个查找过程形成的链条就叫做作用域链</p><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p><strong>在一个函数里面嵌套另一个函数，被嵌套的那个函数的作用域是一个闭包。</strong></p><p>特性</p><p><strong>1.函数内再嵌套函数</strong><br><strong>2.内部函数可以引用外层的参数和变量</strong><br><strong>3.参数和变量不会被垃圾回收机制回收</strong></p><p>使用场景</p><ul><li>创建私有变量</li><li>延长变量的生命周期</li></ul><h3 id="柯里化函数"><a href="#柯里化函数" class="headerlink" title="柯里化函数"></a>柯里化函数</h3><p>柯里化的目的在于避免频繁调用具有相同参数函数的同时，又能够轻松的重用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设我们有一个求长方形面积的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getArea</span>(<span class="params">width, height</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> width * height</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果我们碰到的长方形的宽老是10</span></span><br><span class="line"><span class="keyword">const</span> area1 = <span class="title function_">getArea</span>(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="keyword">const</span> area2 = <span class="title function_">getArea</span>(<span class="number">10</span>, <span class="number">30</span>)</span><br><span class="line"><span class="keyword">const</span> area3 = <span class="title function_">getArea</span>(<span class="number">10</span>, <span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们可以使用闭包柯里化这个计算面积的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getArea</span>(<span class="params">width</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">height</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> width * height</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getTenWidthArea = <span class="title function_">getArea</span>(<span class="number">10</span>)</span><br><span class="line"><span class="comment">// 之后碰到宽度为10的长方形就可以这样计算面积</span></span><br><span class="line"><span class="keyword">const</span> area1 = <span class="title function_">getTenWidthArea</span>(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 而且如果遇到宽度偶尔变化也可以轻松复用</span></span><br><span class="line"><span class="keyword">const</span> getTwentyWidthArea = <span class="title function_">getArea</span>(<span class="number">20</span>)</span><br></pre></td></tr></table></figure><h3 id="使用闭包模拟私有方法"><a href="#使用闭包模拟私有方法" class="headerlink" title="使用闭包模拟私有方法"></a>使用闭包模拟私有方法</h3><p>在<code>JavaScript</code>中，没有支持声明私有变量，但我们可以使用闭包来模拟私有方法</p><p>下面举个例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Counter</span> = (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> privateCounter = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">changeBy</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    privateCounter += val;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">increment</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">changeBy</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">decrement</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">changeBy</span>(-<span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">value</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> privateCounter;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Counter1</span> = <span class="title function_">makeCounter</span>();</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Counter2</span> = <span class="title function_">makeCounter</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Counter1</span>.<span class="title function_">value</span>()); <span class="comment">/* logs 0 */</span></span><br><span class="line"><span class="title class_">Counter1</span>.<span class="title function_">increment</span>();</span><br><span class="line"><span class="title class_">Counter1</span>.<span class="title function_">increment</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Counter1</span>.<span class="title function_">value</span>()); <span class="comment">/* logs 2 */</span></span><br><span class="line"><span class="title class_">Counter1</span>.<span class="title function_">decrement</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Counter1</span>.<span class="title function_">value</span>()); <span class="comment">/* logs 1 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Counter2</span>.<span class="title function_">value</span>()); <span class="comment">/* logs 0 */</span></span><br></pre></td></tr></table></figure><h2 id="Promise使用"><a href="#Promise使用" class="headerlink" title="Promise使用"></a>Promise使用</h2><p>Promise 出现的目的是解决 Node.js 异步编程中回调地狱的问题。</p><p>实际上，Promise 本身是一个构造函数</p><p>有两个特点：</p><p>1.对象的状态不受外界影响。有三种状态：<code>padding</code>(进行中)、<code>fulfilled</code>(成功)、<code>rejected</code>(失败)。只有异步操作的结果，可以决定当前是哪一种状态，任何其他操作都无法改变这个状态。</p><p>2.一旦状态改变，就不会再变。状态只有从padding改变到fulfilled或者refected，两种改变。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="string">&#x27;这个执行then，而且状态不会改变了&#x27;</span>)</span><br><span class="line"><span class="comment">//reject()</span></span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(成功了做的事)</span><br><span class="line">       .<span class="title function_">catch</span>(失败了做的事)</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果then中有两个参数</span></span><br><span class="line">第一个参数是用来处理<span class="title class_">Promise</span>成功的函数</span><br><span class="line">第二个则是处理失败的函数</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&#x27;err!!!&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;success&#x27;</span>, res)</span><br><span class="line">  &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;error&#x27;</span>, err)</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;catch&#x27;</span>, err)</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="comment">//输出 error err!!!</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>语法糖</p><p>成功</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&#x27;王小端Coder&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">// 王小端Coder</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>失败</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">reject</span>(<span class="string">&#x27;失败&#x27;</span>);</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;抛出异常&#x27;</span>); <span class="comment">// 这行无效</span></span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(error); <span class="comment">// 失败</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>finally方法</strong></p><p>不管Promis对象最后状态如何，都会执行的操作</p><p><strong>Promise.all</strong></p><p><code>Promise.all</code>可以将多个 <code>Promise</code>实例包装成一个新的Promise实例。同时，成功和失败的返回值是不同的，成功的时候返回的是<strong>一个结果数组</strong>，而失败的时候则返回<strong>最先被reject失败状态的值</strong>。</p><p>Promise.all中传入的是数组，返回的也是是数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promiseAll = <span class="title class_">Promise</span>.<span class="title function_">all</span>([promise1, promise2, promise3]).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;all&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>Promise.race</strong></p><p>顾名思义，Promse.race就是赛跑的意思，意思就是说，Promise.race([p1, p2, p3])里面哪个结果获得的快，就返回那个结果，不管结果本身是成功状态还是失败状态</p><h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><p>class ES6新增</p><ul><li>类抽象了对象的公共部分，它泛指某一大类（class）</li><li>对象特指某一个，通过类实例化一个具体的对象</li></ul><p>创建类与其方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name,age</span>) &#123;   </span><br><span class="line">      <span class="comment">// constructor 称为构造器或者构造函数</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;你好&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;      </span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>); </span><br><span class="line">ldh.<span class="title function_">say</span>()</span><br></pre></td></tr></table></figure><h2 id="三个注意点"><a href="#三个注意点" class="headerlink" title="三个注意点"></a>三个注意点</h2><ol><li>在ES6中类没有变量提升，所以必须先定义类，才能通过类实例化对象</li><li>类里面的共有属性和方法一定要加 <code>this</code>使用</li><li>类里面的<code>this</code>指向：<ul><li>constructor 里面的 <code>this</code>指向实例对象</li><li>方法里面的<code>this</code>指向这个方法的调用者</li></ul></li></ol><h2 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">surname</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">surname</span> = surname;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">saySurname</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我的姓是&#x27;</span> + <span class="variable language_">this</span>.<span class="property">surname</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类继承父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> entends <span class="title class_">Father</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">surname,firstname</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(surname);<span class="comment">//调用父类的 constructor(surname)</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">firstname</span> = firstname;<span class="comment">//定义子类独有的属性</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">sayFirstname</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我的名字是:&#x27;</span> + <span class="variable language_">this</span>.<span class="property">firstname</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> damao = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;刘&#x27;</span>,<span class="string">&#x27;德华&#x27;</span>);</span><br><span class="line">damao.<span class="title function_">saySurname</span>();</span><br><span class="line">damao.<span class="title function_">sayFirstname</span>();</span><br></pre></td></tr></table></figure><h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><p>创建对象有三种方式</p><ul><li><strong>对象字面量</strong></li><li><strong>new Object()</strong></li><li><strong>自定义构造函数</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 利用 new Object() 创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj1 = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 利用对象字面量创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;&#125;；</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.利用构造函数创建对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname,age</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会唱歌&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>,<span class="number">18</span>);</span><br></pre></td></tr></table></figure><h2 id="构造函数的继承"><a href="#构造函数的继承" class="headerlink" title="构造函数的继承"></a>构造函数的继承</h2><p>构造函数的的继承主要使用call方法，他可以改变函数的指向</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 借用父构造函数继承属性</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 父构造函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Father</span>(<span class="params">uname, age</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// this 指向父构造函数的对象实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">age</span> = age;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2 .子构造函数 </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">uname, age, score</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// this 指向子构造函数的对象实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title class_">Father</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, uname, age);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">score</span> = score;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> son = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>, <span class="number">100</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(son);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="new操作符的实现原理"><a href="#new操作符的实现原理" class="headerlink" title="new操作符的实现原理"></a>new操作符的实现原理</h2><p>1.创建一个空的新对象</p><p>2.设置原型，将对象的原型设置成函数的prototype 对象。（对象的-proto-指向函数的prototype）</p><p>3.将函数的this指向这个对象，为这个对象添加属性</p><p>4.返回这个新对象</p><h2 id="JS中this-的五种情况"><a href="#JS中this-的五种情况" class="headerlink" title="JS中this 的五种情况"></a>JS中this 的五种情况</h2><ol><li>作为普通函数执行时，<code>this</code>指向<code>window</code>。</li><li>当函数作为对象的方法被调用时，<code>this</code>就会指向<code>该对象</code>。（被new的时候）</li><li>构造器调用（constructor），<code>this</code>指向<code>返回的这个对象</code>。</li><li>箭头函数 指向上一层的对象</li><li>基于Function.prototype上的 <code>apply 、 call 和 bind </code>调用模式</li></ol><table><thead><tr><th>调用方式</th><th>this指向</th></tr></thead><tbody><tr><td>普通函数调用</td><td>window</td></tr><tr><td>构造函数调用</td><td>实例对象，原型对象里面的方法也指向实例对象</td></tr><tr><td>对象方法调用</td><td>该方法所属对象</td></tr><tr><td>事件绑定方法</td><td>绑定事件对象</td></tr><tr><td>定时器函数</td><td>window</td></tr><tr><td>立即执行函数</td><td>window</td></tr></tbody></table><h2 id="call-apply-bind-总结："><a href="#call-apply-bind-总结：" class="headerlink" title="call apply bind 总结："></a>call apply bind 总结：</h2><p>相同点：</p><p>都可以改变函数内部的 this指向</p><p>区别点：</p><ul><li>call和apply会调用函数，并且改变函数内部的<code>this</code>指向</li><li>call和apply传递的参数不一样，call 传递参数，apply 必须数组形式</li><li>bind不会调用函数，可以改变函数内部this指向</li></ul><p>主要应用场景</p><ul><li>call经常做继承</li><li>apply经常跟数组有关系，比如借助于数学对线实现数组最大值与最小值</li><li>bind不调用函数，但是还想改变this指向，比如改变定时器内部的this指向</li></ul><h1 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h1><h2 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h2>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vite</title>
      <link href="/2023/03/07/vite/"/>
      <url>/2023/03/07/vite/</url>
      
        <content type="html"><![CDATA[<h1 id="vite"><a href="#vite" class="headerlink" title="vite"></a>vite</h1><p>使用vite初始化一个项目</p><p>npm</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">init</span> vite<span class="meta">@latest</span></span><br></pre></td></tr></table></figure><p>Yarn</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn <span class="keyword">create</span> vite</span><br></pre></td></tr></table></figure><h1 id="ref与reactive"><a href="#ref与reactive" class="headerlink" title="ref与reactive"></a>ref与reactive</h1><p>里面的数据是响应式的，同vue的data中的</p><p>引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref,isRef,shallowRef&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">message</span>: <span class="title class_">Ref</span>&lt;string | number&gt; = <span class="title function_">ref</span>(<span class="string">&quot;我是message&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> <span class="attr">notRef</span>:number = <span class="number">123</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">changeMsg</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  message.<span class="property">value</span> = <span class="string">&quot;change msg&quot;</span><span class="comment">//使用value修改其中值</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isRef</span>(message)); <span class="comment">//true</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isRef</span>(notRef)); <span class="comment">//false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <code>shallowRef</code></p><p>创建一个跟踪自身 <code>.value</code> 变化的 ref，但不会使其值也变成响应式的</p><p>这样是可以被监听到的修改value</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Ref</span>, shallowRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">type <span class="title class_">Obj</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">message</span>: <span class="title class_">Ref</span>&lt;<span class="title class_">Obj</span>&gt; = <span class="title function_">shallowRef</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;小满&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="title function_">changeMsg</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  message.<span class="property">value</span> = &#123; <span class="attr">name</span>: <span class="string">&quot;大满&quot;</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <code>reactive</code></p><p>用来绑定复杂的数据类型 例如 对象 数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">   <span class="attr">name</span>:<span class="string">&quot;小满&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line">person.<span class="property">name</span> = <span class="string">&quot;大满&quot;</span><span class="comment">//不用管.value</span></span><br></pre></td></tr></table></figure><p><code>toRefs</code></p><p>可以帮我们批量创建ref对象主要是方便我们解构使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> obj = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">   <span class="attr">foo</span>: <span class="number">1</span>,</span><br><span class="line">   <span class="attr">bar</span>: <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"> <span class="keyword">let</span> &#123; foo, bar &#125; = <span class="title function_">toRefs</span>(obj)</span><br><span class="line"> </span><br><span class="line">foo.<span class="property">value</span>++</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo, bar);</span><br></pre></td></tr></table></figure><p><code>toRaw</code></p><p>将响应式对象转化为普通对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRaw &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> obj = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">   <span class="attr">foo</span>: <span class="number">1</span>,</span><br><span class="line">   <span class="attr">bar</span>: <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> state = <span class="title function_">toRaw</span>(obj)</span><br><span class="line"><span class="comment">// 响应式对象转化为普通对象</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">change</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(obj, state);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h1><p>函数形式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; computed, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">let</span> price = <span class="title function_">ref</span>(<span class="number">0</span>)<span class="comment">//$0</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> m = computed&lt;string&gt;(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="string">`$`</span> + price.<span class="property">value</span></span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">price.<span class="property">value</span> = <span class="number">500</span></span><br></pre></td></tr></table></figure><p>computed购物车案例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">&quot;width:800px&quot;</span> <span class="attr">border</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">th</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">th</span>&gt;</span>数量<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">th</span>&gt;</span>价格<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in data&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;AddAnbSub(item, false)&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  &#123;&#123; item.num &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;AddAnbSub(item, true)&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>&#123;&#123; item.num * item.price &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;del(index)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>总价:&#123;&#123; $total &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed, reactive, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">type Shop = &#123;</span><br><span class="line">   name: string,</span><br><span class="line">   num: number,</span><br><span class="line">   price: number</span><br><span class="line">&#125;</span><br><span class="line">let $total = ref&lt;number&gt;(0)</span><br><span class="line">const data = reactive&lt;Shop[]&gt;([</span><br><span class="line">   &#123;</span><br><span class="line">      name: &quot;小满的袜子&quot;,</span><br><span class="line">      num: 1,</span><br><span class="line">      price: 100</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      name: &quot;小满的裤子&quot;,</span><br><span class="line">      num: 1,</span><br><span class="line">      price: 200</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      name: &quot;小满的衣服&quot;,</span><br><span class="line">      num: 1,</span><br><span class="line">      price: 300</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      name: &quot;小满的毛巾&quot;,</span><br><span class="line">      num: 1,</span><br><span class="line">      price: 400</span><br><span class="line">   &#125;</span><br><span class="line">])</span><br><span class="line"> </span><br><span class="line">const AddAnbSub = (item: Shop, type: boolean = false): void =&gt; &#123;</span><br><span class="line">   if (item.num &gt; 1 &amp;&amp; !type) &#123;</span><br><span class="line">      item.num--</span><br><span class="line">   &#125;</span><br><span class="line">   if (item.num &lt;= 99 &amp;&amp; type) &#123;</span><br><span class="line">      item.num++</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">const del = (index: number) =&gt; &#123;</span><br><span class="line">   data.splice(index, 1)</span><br><span class="line">&#125;</span><br><span class="line">$total = computed&lt;number&gt;(() =&gt; &#123;</span><br><span class="line">   return data.reduce((prev, next) =&gt; &#123;</span><br><span class="line">      return prev + (next.num * next.price)</span><br><span class="line">   &#125;, 0)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h1 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h1><p>watch 需要侦听特定的数据源，并在单独的回调函数中执行副作用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">watch第一个参数监听源</span><br><span class="line"></span><br><span class="line">watch第二个参数回调函数cb（newVal,oldVal）</span><br><span class="line"></span><br><span class="line">watch第三个参数一个options配置项是一个对象&#123;</span><br><span class="line"></span><br><span class="line"><span class="attr">immediate</span>:<span class="literal">true</span> <span class="comment">//是否立即调用一次</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deep</span>:<span class="literal">true</span> <span class="comment">//是否开启深度监听</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>监听Reactive</p><p>使用reactive监听深层对象开启和不开启deep 效果一样</p><h1 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h1><p>立即执行传入的一个函数，同时<a href="https://so.csdn.net/so/search?q=%E5%93%8D%E5%BA%94%E5%BC%8F&spm=1001.2101.3001.7020">响应式</a>追踪其依赖，并在其依赖变更时重新运行该函数。</p><p>相当于<code>immediate:true</code> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> message = ref&lt;string&gt;(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> message2 = ref&lt;string&gt;(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"> <span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//console.log(&#x27;message&#x27;, message.value);</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;message2&#x27;</span>, message2.<span class="property">value</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>停止跟踪 watchEffect 返回一个函数 调用之后将停止更新</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stop =  <span class="title function_">watchEffect</span>(<span class="function">(<span class="params">oninvalidate</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//console.log(&#x27;message&#x27;, message.value);</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;message2&#x27;</span>, message2.<span class="property">value</span>);</span><br><span class="line">     <span class="title function_">oninvalidate</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;before&#x27;</span>)</span><br><span class="line">&#125;)<span class="comment">//在最开始执行</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> stopWatch = <span class="title function_">stop</span>()<span class="comment">//输出before，停止监听</span></span><br></pre></td></tr></table></figure><h1 id="less-amp-sass"><a href="#less-amp-sass" class="headerlink" title="less&amp;sass"></a>less&amp;sass</h1><p>在<a href="https://so.csdn.net/so/search?q=vite&spm=1001.2101.3001.7020">vite</a>中使用less</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install less -D </span><br></pre></td></tr></table></figure><p>安装sass</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install  sass -D </span><br></pre></td></tr></table></figure><p>这个使用时是</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style  lang=<span class="string">&quot;scss&quot;</span> scoped&gt; </span><br><span class="line">div&#123;</span><br><span class="line">background-<span class="attr">color</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h1 id="父子组件传参"><a href="#父子组件传参" class="headerlink" title="父子组件传参"></a>父子组件传参</h1><h2 id="父传子"><a href="#父传子" class="headerlink" title="父传子"></a>父传子</h2><p>defineProps</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    子集</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>值：&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>值：&#123;&#123;data&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&#x27;ts&#x27;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;ref,reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">title</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>:<span class="title class_">String</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">default</span>:<span class="string">&#x27;默认值&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">data</span>:<span class="title class_">Array</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(props.<span class="property">title</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>  <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&#x27;scss&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>使用ts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">defineProps&lt;&#123;</span><br><span class="line">    <span class="attr">title</span>:string,</span><br><span class="line">    <span class="attr">data</span>:number[]</span><br><span class="line">&#125;&gt;()</span><br></pre></td></tr></table></figure><p>父组件中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;waterVue :title=<span class="string">&quot;name&quot;</span> :data=<span class="string">&quot;[1,2,3]&quot;</span>&gt;&lt;/waterVue&gt;</span><br></pre></td></tr></table></figure><p>TS 特有的默认值方式</p><p>withDefaults是个函数也是无须引入开箱即用接受一个props函数第二个参数是一个对象设置默认值</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">type</span> <span class="type">Props</span> = &#123;</span></span><br><span class="line"><span class="class">    <span class="title">title</span>?: <span class="title">string</span>,</span></span><br><span class="line"><span class="class">    <span class="title">data</span>?: <span class="title">number</span>[]</span></span><br><span class="line"><span class="class">&#125;</span></span><br><span class="line"><span class="title">withDefaults</span>(defineProps&lt;<span class="type">Props</span>&gt;(), &#123;</span><br><span class="line">    title: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="class"><span class="keyword">data</span>: () =&gt; [1, 2, 3]</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="子传父"><a href="#子传父" class="headerlink" title="子传父"></a>子传父</h2><p>是通过defineEmits派发一个事件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;menu&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;clickTap&quot;</span>&gt;</span>派发给父组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> list = reactive&lt;number[]&gt;([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;on-click&#x27;</span>])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//如果用了ts可以这样两种方式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// const emit = defineEmits&lt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//     (e: &quot;on-click&quot;, name: string): void</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;&gt;()</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">clickTap</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">emit</span>(<span class="string">&#x27;on-click&#x27;</span>, list)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>我们在子组件绑定了一个click 事件 然后通过defineEmits 注册了一个自定义事件</p><p>点击click 触发 emit 去调用我们注册的事件 然后传递参数</p><p>父组件接受子组件的事件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layout&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Menu</span> @<span class="attr">on-click</span>=<span class="string">&quot;getList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Menu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layout-right&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Header</span>&gt;</span><span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Content</span>&gt;</span><span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Menu</span> <span class="keyword">from</span> <span class="string">&#x27;./Menu/index.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&#x27;./Header/index.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Content</span> <span class="keyword">from</span> <span class="string">&#x27;./Content/index.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> data = reactive&lt;number[]&gt;([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">getList</span> = (<span class="params">list: number[]</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(list,<span class="string">&#x27;父组件接受子组件&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="子组件暴露给父组件内部属性"><a href="#子组件暴露给父组件内部属性" class="headerlink" title="子组件暴露给父组件内部属性"></a>子组件暴露给父组件内部属性</h2><p>通过<code>defineExpose</code></p><p>我们从父组件获取子组件实例通过ref</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> &lt;<span class="title class_">Menu</span> ref=<span class="string">&quot;menus&quot;</span>&gt;&lt;/<span class="title class_">Menu</span>&gt;</span><br><span class="line"><span class="comment">//这样获取是有代码提示的</span></span><br><span class="line"> <span class="keyword">const</span> menus = ref&lt;<span class="title class_">InstanceType</span>&lt;<span class="keyword">typeof</span> menus&gt;&gt;()</span><br></pre></td></tr></table></figure><p>然后打印menus.value 发现没有任何属性</p><p>这时候父组件想要读到子组件的属性可以通过 defineExpose暴露</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = reactive&lt;number[]&gt;([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"><span class="title function_">defineExpose</span>(&#123;</span><br><span class="line">    list</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这样父组件就可以读到了</p><h1 id="全局组件"><a href="#全局组件" class="headerlink" title="全局组件"></a>全局组件</h1><p>在main.ts中引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">CardVUe</span> <span class="keyword">from</span> <span class="string">&#x27;./components/water.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;Card&#x27;</span>,<span class="title class_">CardVUe</span>)</span><br></pre></td></tr></table></figure><h1 id="递归组件"><a href="#递归组件" class="headerlink" title="递归组件"></a>递归组件</h1><p><code>当我们不知道数据的具体格式时使用</code></p><p>原理跟我们写<a href="https://so.csdn.net/so/search?q=js%E9%80%92%E5%BD%92&spm=1001.2101.3001.7020">js递归</a>是一样的 自己调用自己 通过一个条件来结束递归 否则导致内存泄漏</p><p>案例递归树</p><p>在父组件配置数据结构 数组对象格式 传给子组件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">TreeList</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: string;</span><br><span class="line">  icon?: string;</span><br><span class="line">  children?: <span class="title class_">TreeList</span>[] | [];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> data = reactive&lt;<span class="title class_">TreeList</span>[]&gt;([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;no.1&quot;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;no.1-1&quot;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;no.1-1-1&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;no.2&quot;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;no.2-1&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;no.3&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>子组件接收值 第一个script</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">TreeList</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: string;</span><br><span class="line">  icon?: string;</span><br><span class="line">  children?: <span class="title class_">TreeList</span>[] | [];</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">type <span class="title class_">Props</span>&lt;T&gt; = &#123;</span><br><span class="line">  data?: T[] | [];</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">defineProps&lt;<span class="title class_">Props</span>&lt;<span class="title class_">TreeList</span>&gt;&gt;();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="title function_">clickItem</span> = (<span class="params">item: TreeList</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="直接使用文件名当组件名"><a href="#直接使用文件名当组件名" class="headerlink" title="直接使用文件名当组件名"></a>直接使用文件名当组件名</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20230124110303343.png" alt="image-20230124110303343"></p><h1 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h1><p>引入组件</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> A <span class="keyword">from</span> <span class="string">&#x27;./A.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> B <span class="keyword">from</span> <span class="string">&#x27;./B.vue&#x27;</span></span><br></pre></td></tr></table></figure><p>使用A组件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;component :is=<span class="string">&quot;A&quot;</span>&gt;&lt;/component&gt;</span><br></pre></td></tr></table></figure><h1 id="slot"><a href="#slot" class="headerlink" title="slot"></a>slot</h1><h2 id="匿名插槽"><a href="#匿名插槽" class="headerlink" title="匿名插槽"></a>匿名插槽</h2><p>在子组件Dialog放置一个插槽</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>在父组件给这个插槽填充内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Dialog</span>&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">div</span>&gt;</span>2132<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Dialog</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Dialog</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Dialog</span>&gt;</span><br></pre></td></tr></table></figure><p>插槽简写</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Dialog</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Dialog</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h2><p>在子组件<a href="https://so.csdn.net/so/search?q=%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A&spm=1001.2101.3001.7020">动态绑定</a>参数 派发给父组件的slot去使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in 100&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:data</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>通过结构方式取值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> &lt;<span class="title class_">Dialog</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;&#123; data &#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; data &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Dialog</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="动态插槽"><a href="#动态插槽" class="headerlink" title="动态插槽"></a>动态插槽</h2><p>插槽可以是一个变量名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">        &lt;<span class="title class_">Dialog</span>&gt;</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #[<span class="attr">name</span>]&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    23</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">        &lt;/<span class="title class_">Dialog</span>&gt;</span><br><span class="line"><span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;header&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="Teleport"><a href="#Teleport" class="headerlink" title="Teleport"></a>Teleport</h1><p>通过to 属性 插入指定元素位置 to=”body” 便可以将<code>Teleport</code> 内容传送到指定位置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Teleport</span> to=<span class="string">&quot;body&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Loading</span>&gt;</span><span class="tag">&lt;/<span class="name">Loading</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Teleport</span>&gt;</span><br></pre></td></tr></table></figure><p>也可以自定义传送位置 支持 class id等 选择器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="动态控制teleport"><a href="#动态控制teleport" class="headerlink" title="动态控制teleport"></a>动态控制teleport</h3><p>使用disabled 设置为 true则 to属性不生效 false 则生效</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport :disabled=<span class="string">&quot;true&quot;</span> to=<span class="string">&#x27;body&#x27;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">A</span>&gt;</span><span class="tag">&lt;/<span class="name">A</span>&gt;</span></span></span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure><h1 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a>keep-alive</h1><blockquote><p>切换组件时，可以将件可以缓存下来,维持当前的状态</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 基本 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span></span><br><span class="line"> </span><br><span class="line">&lt;!-- 多个条件判断的子组件 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">comp-a</span> <span class="attr">v-if</span>=<span class="string">&quot;a &gt; 1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">comp-b</span> <span class="attr">v-else</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span></span><br><span class="line"> </span><br><span class="line">&lt;!-- 和 <span class="string">`&lt;transition&gt;`</span> 一起使用 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">transition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>include 和 exclude</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive :include=<span class="string">&quot;&quot;</span> :exclude=<span class="string">&quot;&quot;</span> :max=<span class="string">&quot;&quot;</span>&gt;&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure><p>include 和 exclude 允许组件有条件地缓存。二者都可以用逗号分隔字符串、正则表达式或一个数组来表示：</p><p>max</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive :max=<span class="string">&quot;10&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure><h1 id="transition"><a href="#transition" class="headerlink" title="transition"></a>transition</h1><h2 id="过渡-class"><a href="#过渡-class" class="headerlink" title="过渡 class"></a>过渡 class</h2><p>在进入/离开的过渡中，会有 6 个 class 切换。</p><ol><li><p>v-enter-from：定义进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除。</p></li><li><p>v-enter-active：定义进入过渡生效时的状态。在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡/动画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数。</p></li><li><p>v-enter-to：定义进入过渡的结束状态。在元素被插入之后下一帧生效 (与此同时 v-enter-from 被移除)，在过渡/动画完成之后移除。</p></li><li><p>v-leave-from：定义离开过渡的开始状态。在离开过渡被触发时立刻生效，下一帧被移除。</p></li><li><p>v-leave-active：定义离开过渡生效时的状态。在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，在过渡/动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数。</p></li><li><p>v-leave-to：离开过渡的结束状态。在离开过渡被触发之后下一帧生效 (与此同时 v-leave-from 被移除)，在过渡/动画完成之后移除。</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&#x27;flag = !flag&#x27;</span>&gt;切换&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&#x27;fade&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&#x27;flag&#x27;</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//开始过度</span><br><span class="line"><span class="selector-class">.fade-enter-from</span>&#123;</span><br><span class="line">   <span class="attribute">background</span>:red;</span><br><span class="line">   <span class="attribute">width</span>:<span class="number">0px</span>;</span><br><span class="line">   <span class="attribute">height</span>:<span class="number">0px</span>;</span><br><span class="line">   <span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">360deg</span>)</span><br><span class="line">&#125;</span><br><span class="line">//开始过度了</span><br><span class="line"><span class="selector-class">.fade-enter-active</span>&#123;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">2.5s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line">//过度完成</span><br><span class="line"><span class="selector-class">.fade-enter-to</span>&#123;</span><br><span class="line">   <span class="attribute">background</span>:yellow;</span><br><span class="line">   <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">   <span class="attribute">height</span>:<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line">//离开的过度</span><br><span class="line"><span class="selector-class">.fade-leave-from</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">360deg</span>)</span><br><span class="line">&#125;</span><br><span class="line">//离开中过度</span><br><span class="line"><span class="selector-class">.fade-leave-active</span>&#123;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line">//离开完成</span><br><span class="line"><span class="selector-class">.fade-leave-to</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">0px</span>;</span><br><span class="line">   <span class="attribute">height</span>:<span class="number">0px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义过渡-class-类名"><a href="#自定义过渡-class-类名" class="headerlink" title="自定义过渡 class 类名"></a>自定义过渡 class 类名</h2><p>trasnsition props</p><ul><li><code>enter-from-class</code></li><li><code>enter-active-class</code></li><li><code>enter-to-class</code></li><li><code>leave-from-class</code></li><li><code>leave-active-class</code></li><li><code>leave-to-class</code></li></ul><h1 id="使用animate-css"><a href="#使用animate-css" class="headerlink" title="使用animate.css"></a>使用animate.css</h1><p>安装</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install animate.<span class="property">css</span> -S</span><br></pre></td></tr></table></figure><p>在项目中引入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;animate.css&#x27;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">    leave-active-<span class="keyword">class</span>=<span class="string">&quot;animate__animated animate__bounceInLeft&quot;</span></span><br><span class="line">    enter-active-<span class="keyword">class</span>=<span class="string">&quot;animate__animated animate__bounceInRight&quot;</span></span><br><span class="line">    :duration = <span class="string">&#x27;500&#x27;</span><span class="comment">//持续时长</span></span><br><span class="line">    :duration = &#123;<span class="attr">enter</span>:<span class="number">50</span>,<span class="attr">leave</span>:<span class="number">500</span>&#125;<span class="comment">//分别定义</span></span><br><span class="line">&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;flag&quot;</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure><h1 id="transition-group"><a href="#transition-group" class="headerlink" title="transition-group"></a>transition-group</h1><p>和transition方法一样，是用于<code>v-for</code>的列表</p><h1 id="Provide-Inject"><a href="#Provide-Inject" class="headerlink" title="Provide / Inject"></a>Provide / Inject</h1><p>provide 可以在祖先组件中指定我们想要<strong>提供</strong>给后代组件的数据或方法，而在任何后代组件中，我们都可以使用 inject 来接收 provide <strong>提供</strong>的数据或方法。 </p><p><img src="https://img-blog.csdnimg.cn/img_convert/5f4ea9e16eda6e37ab336075a788ae15.png" alt="img"></p><p>父组件传递数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;App&quot;&gt;</span><br><span class="line">        &lt;button&gt;我是App&lt;/button&gt;</span><br><span class="line">        &lt;A&gt;&lt;/A&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; provide, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import A from &#x27;./components/A.vue&#x27;</span><br><span class="line">let flag = ref&lt;number&gt;(1)</span><br><span class="line">provide(&#x27;flag&#x27;, flag)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">    </span><br><span class="line">&lt;style&gt;</span><br><span class="line">.App &#123;</span><br><span class="line">    background: blue;</span><br><span class="line">    color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>子组件接受</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div style=&quot;background-color: green;&quot;&gt;</span><br><span class="line">        我是B</span><br><span class="line">        &lt;button @click=&quot;change&quot;&gt;change falg&lt;/button&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123; flag &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; inject, Ref, ref &#125; from &#x27;vue&#x27;</span><br><span class="line"> </span><br><span class="line">const flag = inject&lt;Ref&lt;number&gt;&gt;(&#x27;flag&#x27;, ref(1))</span><br><span class="line"> </span><br><span class="line">const change = () =&gt; &#123;</span><br><span class="line">    flag.value = 2</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="兄弟组件传参和Bus"><a href="#兄弟组件传参和Bus" class="headerlink" title="兄弟组件传参和Bus"></a>兄弟组件传参和Bus</h1><h2 id="1-借助父组件传参"><a href="#1-借助父组件传参" class="headerlink" title="1.借助父组件传参"></a>1.借助父组件传参</h2><p>例如父组件为App 子组件为A 和 B他两个是同级的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;A @on-click=&quot;getFalg&quot;&gt;&lt;/A&gt;</span><br><span class="line">        &lt;B :flag=&quot;Flag&quot;&gt;&lt;/B&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import A from &#x27;./components/A.vue&#x27;</span><br><span class="line">import B from &#x27;./components/B.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">let Flag = ref&lt;boolean&gt;(false)</span><br><span class="line">const getFalg = (flag: boolean) =&gt; &#123;</span><br><span class="line">   Flag.value = flag;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="2-Event-Bus（少用"><a href="#2-Event-Bus（少用" class="headerlink" title="2.Event Bus（少用)"></a>2.Event Bus（少用)</h2><p>我们在<a href="https://so.csdn.net/so/search?q=Vue2&spm=1001.2101.3001.7020">Vue2</a> 可以使用$emit 传递 $on监听 emit传递过来的事件</p><p>这个原理其实是运用了<a href="https://so.csdn.net/so/search?q=JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.7020">JS设计模式</a>之发布订阅模式</p><p>我写了一个简易版</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">type <span class="title class_">BusClass</span>&lt;T&gt; = &#123;</span><br><span class="line">    <span class="attr">emit</span>: <span class="function">(<span class="params">name: T</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">    <span class="attr">on</span>: <span class="function">(<span class="params">name: T, callback: <span class="built_in">Function</span></span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line">type <span class="title class_">BusParams</span> = string | number | symbol </span><br><span class="line">type <span class="title class_">List</span> = &#123;</span><br><span class="line">    [<span class="attr">key</span>: <span class="title class_">BusParams</span>]: <span class="title class_">Array</span>&lt;<span class="title class_">Function</span>&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bus</span>&lt;T <span class="keyword">extends</span> <span class="title class_">BusParams</span>&gt; implements <span class="title class_">BusClass</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="attr">list</span>: <span class="title class_">List</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span> = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">emit</span>(<span class="params">name: T, ...args: <span class="built_in">Array</span>&lt;any&gt;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="attr">eventName</span>: <span class="title class_">Array</span>&lt;<span class="title class_">Function</span>&gt; = <span class="variable language_">this</span>.<span class="property">list</span>[name]</span><br><span class="line">        eventName.<span class="title function_">forEach</span>(<span class="function"><span class="params">ev</span> =&gt;</span> &#123;</span><br><span class="line">            ev.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">on</span>(<span class="params">name: T, callback: <span class="built_in">Function</span></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="attr">fn</span>: <span class="title class_">Array</span>&lt;<span class="title class_">Function</span>&gt; = <span class="variable language_">this</span>.<span class="property">list</span>[name] || [];</span><br><span class="line">        fn.<span class="title function_">push</span>(callback)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span>[name] = fn</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Bus</span>&lt;number&gt;()</span><br></pre></td></tr></table></figure><h1 id="Mitt"><a href="#Mitt" class="headerlink" title="Mitt"></a>Mitt</h1><p>已经有人写了Event Bus了，就是mitt</p><p>1.安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mitt -S </span><br></pre></td></tr></table></figure><p>2.main.ts 初始化 </p><p>全局总线，vue 入口文件 main.js 中挂载全局属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Mit</span> = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//TypeScript注册</span></span><br><span class="line"><span class="comment">// 由于必须要拓展ComponentCustomProperties类型才能获得类型提示</span></span><br><span class="line">declare <span class="variable language_">module</span> <span class="string">&quot;vue&quot;</span> &#123;</span><br><span class="line">    <span class="keyword">export</span> interface <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">        <span class="attr">$Bus</span>: <span class="keyword">typeof</span> <span class="title class_">Mit</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//Vue3挂载全局API</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$Bus</span> = <span class="title class_">Mit</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>3.使用方法通过emit派发， on 方法添加事件，off 方法移除，clear 清空所有 </p><p>A组件派发（emit）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;我是A&lt;/h1&gt;</span><br><span class="line">        &lt;button @click=&quot;emit1&quot;&gt;emit1&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;emit2&quot;&gt;emit2&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; getCurrentInstance &#125; from &#x27;vue&#x27;</span><br><span class="line">const instance = getCurrentInstance();</span><br><span class="line">const emit1 = () =&gt; &#123;</span><br><span class="line">    instance?.proxy?.$Bus.emit(&#x27;on-num&#x27;, 100)</span><br><span class="line">&#125;</span><br><span class="line">const emit2 = () =&gt; &#123;</span><br><span class="line">    instance?.proxy?.$Bus.emit(&#x27;*****&#x27;, 500)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>B组件监听（on）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;我是B&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; getCurrentInstance &#125; from &#x27;vue&#x27;</span><br><span class="line">const instance = getCurrentInstance()</span><br><span class="line">instance?.proxy?.$Bus.on(&#x27;on-num&#x27;, (num) =&gt; &#123;</span><br><span class="line">    console.log(num,&#x27;===========&gt;B&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="TSX"><a href="#TSX" class="headerlink" title="TSX"></a>TSX</h1><p>安装插件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vitejs/plugin-vue-jsx -D</span><br></pre></td></tr></table></figure><p>在vite.config.ts 配置</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vueJsx <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue-jsx&#x27;</span>;</span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(),<span class="title function_">vueJsx</span>()]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="使用TSX"><a href="#使用TSX" class="headerlink" title="使用TSX"></a>使用TSX</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"> </span><br><span class="line">let v = ref&lt;string&gt;(&#x27;&#x27;)</span><br><span class="line"> </span><br><span class="line">const renderDom = () =&gt; &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">           &lt;input v-model=&#123;v.value&#125; type=&quot;text&quot; /&gt;</span><br><span class="line">           &lt;div&gt;</span><br><span class="line">               &#123;v.value&#125;</span><br><span class="line">           &lt;/div&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">export default renderDom</span><br></pre></td></tr></table></figure><h1 id="自定义指令directive"><a href="#自定义指令directive" class="headerlink" title="自定义指令directive"></a>自定义指令directive</h1><p><code>在setup内定义局部指令</code></p><p>但这里有一个需要注意的限制：必须以 <code>vNameOfDirective</code> 的形式来命名本地自定义指令，以使得它们可以直接在模板中使用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;show = !show&quot;</span>&gt;</span>开关&#123;&#123;show&#125;&#125; ----- &#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Dialog</span>  <span class="attr">v-move-directive</span>=<span class="string">&quot;&#123;background:&#x27;green&#x27;,flag:show&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Dialog</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="attr">vMoveDirective</span>: <span class="title class_">Directive</span> = &#123;</span><br><span class="line">  <span class="attr">created</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;初始化====&gt;&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeMount</span>(<span class="params">...args: <span class="built_in">Array</span>&lt;any&gt;</span>) &#123;</span><br><span class="line">    <span class="comment">// 在元素上做些操作</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;初始化一次=======&gt;&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params">el: any, dir: DirectiveBinding&lt;Value&gt;</span>) &#123;</span><br><span class="line">    el.<span class="property">style</span>.<span class="property">background</span> = dir.<span class="property">value</span>.<span class="property">background</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;初始化========&gt;&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;更新之前&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;更新结束&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeUnmount</span>(<span class="params">...args: <span class="built_in">Array</span>&lt;any&gt;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(args);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;======&gt;卸载之前&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">unmounted</span>(<span class="params">...args: <span class="built_in">Array</span>&lt;any&gt;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(args);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;======&gt;卸载完成&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="自定义Hooks"><a href="#自定义Hooks" class="headerlink" title="自定义Hooks"></a>自定义Hooks</h1><p>第三方的库</p><p><a href="https://vueuse.org/">https://vueuse.org/</a></p><p><a href="https://so.csdn.net/so/search?q=Vue3&spm=1001.2101.3001.7020">Vue3</a> 自定义Hook</p><p>主要用来处理复用代码逻辑的一些封装，让我们能在不同的组件中都利用 hooks 函数</p><p>案例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">type <span class="title class_">Options</span> = &#123;</span><br><span class="line">    <span class="attr">el</span>: string</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">type <span class="title class_">Return</span> = &#123;</span><br><span class="line">    <span class="title class_">Baseurl</span>: string | <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params">option: Options</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">Return</span>&gt; &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="attr">file</span>: <span class="title class_">HTMLImageElement</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(option.<span class="property">el</span>) <span class="keyword">as</span> <span class="title class_">HTMLImageElement</span>;</span><br><span class="line">            file.<span class="property">onload</span> = ():<span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(&#123;</span><br><span class="line">                    <span class="title class_">Baseurl</span>: <span class="title function_">toBase64</span>(file)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">const</span> toBase64 = (<span class="attr">el</span>: <span class="title class_">HTMLImageElement</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="attr">canvas</span>: <span class="title class_">HTMLCanvasElement</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">            <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>) <span class="keyword">as</span> <span class="title class_">CanvasRenderingContext2D</span></span><br><span class="line">            canvas.<span class="property">width</span> = el.<span class="property">width</span></span><br><span class="line">            canvas.<span class="property">height</span> = el.<span class="property">height</span></span><br><span class="line">            ctx.<span class="title function_">drawImage</span>(el, <span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>,canvas.<span class="property">height</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(el.<span class="property">width</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> canvas.<span class="title function_">toDataURL</span>(<span class="string">&#x27;image/png&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Vue3定义全局函数和变量"><a href="#Vue3定义全局函数和变量" class="headerlink" title="Vue3定义全局函数和变量"></a>Vue3定义全局函数和变量</h1><p>由于<a href="https://so.csdn.net/so/search?q=Vue3&spm=1001.2101.3001.7020">Vue3</a> 没有Prototype 属性 使用 app.config.globalProperties 代替 然后去定义变量和函数</p><p>Vue2</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 之前 (Vue 2.x)</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$http</span> = <span class="function">() =&gt;</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>Vue3</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 之后 (Vue 3.x)</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;&#125;)</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$http</span> = <span class="function">() =&gt;</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h1 id="Scoped和样式-穿透-修改ui库使用"><a href="#Scoped和样式-穿透-修改ui库使用" class="headerlink" title="Scoped和样式 穿透(修改ui库使用)"></a>Scoped和样式 穿透(修改ui库使用)</h1><p>主要是用于修改很多vue常用的组件库（element, <a href="https://so.csdn.net/so/search?q=vant&spm=1001.2101.3001.7020">vant</a>, AntDesigin），虽然配好了样式但是还是需要更改其他的样式</p><h2 id="scoped的原理"><a href="#scoped的原理" class="headerlink" title="scoped的原理"></a>scoped的原理</h2><p>ue中的scoped 通过在DOM结构以及css样式上加唯一不重复的标记:data-v-hash的方式，以保证唯一（而这个工作是由过PostCSS转译实现的），达到样式私有化模块化的目的。</p><p>总结一下scoped三条渲染规则：</p><ol><li>给HTML的DOM节点加一个不重复data属性(形如：data-v-123)来表示他的唯一性</li><li>在每句css选择器的末尾（编译后的生成的css语句）加一个当前组件的data属性选择器（如[data-v-123]）来私有化样式</li><li>如果组件内部包含有其他组件，只会给其他组件的最外层标签加上当前组件的data属性</li></ol><p>PostCSS会给一个组件中的所有dom添加了一个独一无二的动态属性data-v-xxxx，然后，给CSS选择器额外添加一个对应的属性选择器来选择该组件中dom，这种做法使得样式只作用于含有该属性的dom——组件内部dom, 从而达到了’样式模块化’的效果.</p><h2 id="deep"><a href="#deep" class="headerlink" title=":deep()"></a>:deep()</h2><p>案例修改Element ui Input样式</p><p>发现没有生效</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20230129120412232.png" alt="image-20230129120412232"></p><p>如果不写Scoped 就没问题</p><p>原因就是Scoped 搞的鬼 他在进行PostCss转化的时候把元素选择器默认放在了最后</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20230129120439868.png" alt="image-20230129120439868"></p><p>Vue 提供了样式穿透:deep() 他的作用就是用来改变 属性选择器的位置</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20230129120457925.png" alt="image-20230129120457925"></p><h1 id="Evnet-Loop-和-nextTick"><a href="#Evnet-Loop-和-nextTick" class="headerlink" title="Evnet Loop 和 nextTick"></a>Evnet Loop 和 nextTick</h1><p>1.宏任务<br>script(整体代码)、setTimeout、setInterval、UI交互事件、postMessage、Ajax</p><p>2.微任务<br>Promise.then catch finally、MutaionObserver、process.nextTick(Node.js 环境)</p><p>运行机制</p><p>所有的同步任务都是在主进程执行的形成一个执行栈，主线程之外，还存在一个”任务队列”，异步任务执行队列中先执行宏任务，然后清空当次宏任务中的所有微任务，然后进行下一个tick如此形成循环。</p><p>nextTick 就是创建一个异步任务，那么它自然要等到同步任务执行完成后才执行。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;xiaoman&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;&#123; text &#125;&#125;</span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;change&quot;</span>&gt;</span>change div<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">   </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&#x27;ts&#x27;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; ref,nextTick &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> text = <span class="title function_">ref</span>(<span class="string">&#x27;小满开飞机&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> xiaoman = ref&lt;<span class="title class_">HTMLElement</span>&gt;()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">change</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   text.<span class="property">value</span> = <span class="string">&#x27;小满不开飞机&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="variable language_">console</span>.<span class="title function_">log</span>(xiaoman.<span class="property">value</span>?.<span class="property">innerText</span>) <span class="comment">//小满开飞机</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">await</span> <span class="title function_">nextTick</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="variable language_">console</span>.<span class="title function_">log</span>(xiaoman.<span class="property">value</span>?.<span class="property">innerText</span>) <span class="comment">//小满不开飞机</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="Vue如何开发移动端"><a href="#Vue如何开发移动端" class="headerlink" title="Vue如何开发移动端"></a>Vue如何开发移动端</h1><p>开发移动端最主要的就是适配各种手机，为此我研究了一套解决方案</p><p>在之前我们用的是rem 根据HTML font-size 去做缩放</p><p>现在有了更好用的vw vh</p><p>vw 视口的最大宽度，1vw等于视口宽度的百分之一</p><p>vh 视口的最大高度，1vh等于视口高度的百分之一</p><p>1.安装依赖</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-px-<span class="keyword">to</span>-viewport -D</span><br></pre></td></tr></table></figure><p>因为<a href="https://so.csdn.net/so/search?q=vite&spm=1001.2101.3001.7020">vite</a>中已经内联了postcss，所以并不需要额外的创建 postcss.config.js文件</p><p>vite.config.ts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fileURLToPath, <span class="variable constant_">URL</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;url&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vueJsx <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue-jsx&#x27;</span></span><br><span class="line"><span class="keyword">import</span> postcsspxtoviewport <span class="keyword">from</span> <span class="string">&quot;postcss-px-to-viewport&quot;</span> <span class="comment">//插件</span></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title function_">vueJsx</span>()],</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">postcss</span>: &#123;</span><br><span class="line">      <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">postcsspxtoviewport</span>(&#123;</span><br><span class="line">          <span class="attr">unitToConvert</span>: <span class="string">&#x27;px&#x27;</span>, <span class="comment">// 要转化的单位</span></span><br><span class="line">          <span class="attr">viewportWidth</span>: <span class="number">750</span>, <span class="comment">// UI设计稿的宽度</span></span><br><span class="line">          <span class="attr">unitPrecision</span>: <span class="number">6</span>, <span class="comment">// 转换后的精度，即小数点位数</span></span><br><span class="line">          <span class="attr">propList</span>: [<span class="string">&#x27;*&#x27;</span>], <span class="comment">// 指定转换的css属性的单位，*代表全部css属性的单位都进行转换</span></span><br><span class="line">          <span class="attr">viewportUnit</span>: <span class="string">&#x27;vw&#x27;</span>, <span class="comment">// 指定需要转换成的视窗单位，默认vw</span></span><br><span class="line">          <span class="attr">fontViewportUnit</span>: <span class="string">&#x27;vw&#x27;</span>, <span class="comment">// 指定字体需要转换成的视窗单位，默认vw</span></span><br><span class="line">          <span class="attr">selectorBlackList</span>: [<span class="string">&#x27;ignore-&#x27;</span>], <span class="comment">// 指定不转换为视窗单位的类名，</span></span><br><span class="line">          <span class="attr">minPixelValue</span>: <span class="number">1</span>, <span class="comment">// 默认值1，小于或等于1px则不进行转换</span></span><br><span class="line">          <span class="attr">mediaQuery</span>: <span class="literal">true</span>, <span class="comment">// 是否在媒体查询的css代码中也进行转换，默认false</span></span><br><span class="line">          <span class="attr">replace</span>: <span class="literal">true</span>, <span class="comment">// 是否转换后直接更换属性值</span></span><br><span class="line">          <span class="attr">landscape</span>: <span class="literal">false</span> <span class="comment">// 是否处理横屏情况</span></span><br><span class="line">        &#125;)</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: <span class="title function_">fileURLToPath</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;./src&#x27;</span>, <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react &amp; vite </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>git</title>
      <link href="/2023/03/07/three%20&amp;%20git/git/"/>
      <url>/2023/03/07/three%20&amp;%20git/git/</url>
      
        <content type="html"><![CDATA[<h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><h2 id="Git-基本操作"><a href="#Git-基本操作" class="headerlink" title="Git 基本操作"></a>Git 基本操作</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/git-command.jpg" alt="img"></p><ul><li>workspace：工作区</li><li>staging area：暂存区/缓存区</li><li>local repository：版本库或本地仓库</li><li>remote repository：远程仓库</li></ul><p>所以</p><p>一般操作提交是</p><p>git pull</p><p>git add</p><p>git push</p><p>查询当前工作区所有文件的状态：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p>Git 暂存操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure><h2 id="Git版本管理和回退"><a href="#Git版本管理和回退" class="headerlink" title="Git版本管理和回退"></a>Git版本管理和回退</h2><h3 id="使用-git-reset-命令"><a href="#使用-git-reset-命令" class="headerlink" title="使用 git reset 命令"></a>使用 git reset 命令</h3><p>查看提交历史</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure><p>先把本地的分支回退到历史版本）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure><p>上一个版本就是 <code>HEAD^</code>，上上一个版本就是 <code>HEAD^^</code></p><p>把当前分支推送到远程仓库，并且让远程仓库和当前分支保持一致：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -f origin master</span><br></pre></td></tr></table></figure><h3 id="使用-git-revert-命令"><a href="#使用-git-revert-命令" class="headerlink" title="使用 git revert 命令"></a>使用 git revert 命令</h3><p>先把本地的分支回退到历史版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert HEAD^</span><br></pre></td></tr></table></figure><blockquote><p>git reset 是修改历史</p><p>git revert是用历史的一个版本代码重新提交一次</p></blockquote><h2 id="Git-分支管理"><a href="#Git-分支管理" class="headerlink" title="Git 分支管理"></a>Git 分支管理</h2><p>创建分支命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch (branchname)</span><br></pre></td></tr></table></figure><p>切换分支命令:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout (branchname)</span><br></pre></td></tr></table></figure><p>合并分支命令:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge </span><br></pre></td></tr></table></figure><h2 id="忽略文件-gitignore"><a href="#忽略文件-gitignore" class="headerlink" title="忽略文件.gitignore"></a>忽略文件.gitignore</h2><p>一般我们总会有些文件无需纳入 Git 的管理，也不希望它们总出现在未跟踪文件列表。通常都是些自动生成的文件，比如日志文件，或者编译过程中创建的临时文件等。我们可以创建一个名为 .gitignore 的文件，列出要忽略的文件模式。如下例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 此为注释 – 将被 <span class="title class_">Git</span> 忽略</span><br><span class="line"># 忽略所有 .<span class="property">a</span> 结尾的文件</span><br><span class="line">*.<span class="property">a</span></span><br><span class="line"># 但 lib.<span class="property">a</span> 除外</span><br><span class="line">!lib.<span class="property">a</span></span><br><span class="line"># 仅仅忽略项目根目录下的 <span class="variable constant_">TODO</span> 文件，不包括 subdir/<span class="variable constant_">TODO</span></span><br><span class="line">/<span class="variable constant_">TODO</span></span><br><span class="line"># 忽略 build/ 目录下的所有文件</span><br><span class="line">build/</span><br><span class="line"># 会忽略 doc/notes.<span class="property">txt</span> 但不包括 doc/server/arch.<span class="property">txt</span></span><br><span class="line">doc<span class="comment">/*.txt</span></span><br><span class="line"><span class="comment"># 忽略 doc/ 目录下所有扩展名为 txt 的文件</span></span><br><span class="line"><span class="comment">doc/**/</span>*.<span class="property">txt</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> three &amp; git </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vue中使用three.js</title>
      <link href="/2023/03/07/three%20&amp;%20git/vue%E4%B8%AD%E4%BD%BF%E7%94%A8three-js/"/>
      <url>/2023/03/07/three%20&amp;%20git/vue%E4%B8%AD%E4%BD%BF%E7%94%A8three-js/</url>
      
        <content type="html"><![CDATA[<h1 id="vue中使用three-js"><a href="#vue中使用three-js" class="headerlink" title="vue中使用three.js"></a>vue中使用three.js</h1><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>1.下载threejs</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install three</span><br></pre></td></tr></table></figure><p>2.如何使用</p><p>写好自己的three.js文件在导入在vue界面中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> three <span class="keyword">from</span> <span class="string">&#x27;../threejs网页/three&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="three-js使用"><a href="#three-js使用" class="headerlink" title="three.js使用"></a>three.js使用</h1><h2 id="1-基础"><a href="#1-基础" class="headerlink" title="1.基础"></a>1.基础</h2><h3 id="1-相机"><a href="#1-相机" class="headerlink" title="1.相机"></a>1.相机</h3><p>先导入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="variable constant_">THREE</span> <span class="keyword">from</span> <span class="string">&quot;three&quot;</span>;</span><br></pre></td></tr></table></figure><p>1、创建场景</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Scene</span>();</span><br></pre></td></tr></table></figure><p>2、创建相机</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">PerspectiveCamera</span>(</span><br><span class="line">  <span class="number">75</span>,<span class="comment">//摄像机视锥体垂直视野角度</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">innerWidth</span> / <span class="variable language_">window</span>.<span class="property">innerHeight</span>,<span class="comment">//摄像机视锥体长宽比</span></span><br><span class="line">  <span class="number">0.1</span>,<span class="comment">//摄像机视锥体近端面</span></span><br><span class="line">  <span class="number">1000</span><span class="comment">//摄像机视锥体远端面</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>3.设置相机位置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">camera.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line">scene.<span class="title function_">add</span>(camera);</span><br></pre></td></tr></table></figure><h3 id="2-添加物体"><a href="#2-添加物体" class="headerlink" title="2.添加物体"></a>2.添加物体</h3><p>1.创建几何体和材质</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cubeGeometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BoxGeometry</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);<span class="comment">//几何体的一个类型，三个参数为xyz轴长度</span></span><br><span class="line"><span class="keyword">const</span> cubeMaterial = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123; <span class="attr">color</span>: <span class="number">0xffff00</span> &#125;);<span class="comment">//基础网格材质</span></span><br></pre></td></tr></table></figure><p>2.根据几何体和材质创建物体</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cube = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(cubeGeometry, cubeMaterial);</span><br><span class="line"><span class="comment">// 将几何体添加到场景中</span></span><br><span class="line">scene.<span class="title function_">add</span>(cube);</span><br></pre></td></tr></table></figure><h3 id="3-渲染器"><a href="#3-渲染器" class="headerlink" title="3.渲染器"></a>3.渲染器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化渲染器</span></span><br><span class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>();</span><br><span class="line"><span class="comment">// 设置渲染的尺寸大小</span></span><br><span class="line">renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span><br><span class="line"><span class="comment">// console.log(renderer);</span></span><br><span class="line"><span class="comment">// 将webgl渲染的canvas内容添加到body</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(renderer.<span class="property">domElement</span>);</span><br></pre></td></tr></table></figure><h3 id="4-渲染"><a href="#4-渲染" class="headerlink" title="4.渲染"></a>4.渲染</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用渲染器，通过相机将场景渲染进来</span></span><br><span class="line">renderer.<span class="title function_">render</span>(scene, camera);</span><br></pre></td></tr></table></figure><h2 id="2-轨道控制器"><a href="#2-轨道控制器" class="headerlink" title="2.轨道控制器"></a>2.轨道控制器</h2><p>轨道控制器可以拖动物体</p><p>1.导入轨道控制器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; OrbitControls &#125; from &quot;three/examples/jsm/controls/OrbitControls&quot;;</span><br></pre></td></tr></table></figure><p>2.使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建轨道控制器</span></span><br><span class="line"><span class="keyword">const</span> controls = <span class="keyword">new</span> <span class="title class_">OrbitControls</span>(camera, renderer.<span class="property">domElement</span>);</span><br><span class="line"><span class="comment">// 添加坐标轴辅助器</span></span><br><span class="line"><span class="keyword">const</span> axesHelper = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">AxesHelper</span>(<span class="number">5</span>);</span><br><span class="line">scene.<span class="title function_">add</span>(axesHelper);</span><br></pre></td></tr></table></figure><p>设置控制器阻尼，让控制器更有真实效果,必须在动画循环里调用.update()。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">controls.<span class="property">enableDamping</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>因为我们的渲染只有一次，所以当我们推动的时候没有办法渲染出来</p><p>我们需要渲染每一帧</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">  <span class="comment">//   渲染下一帧的时候就会调用render函数</span></span><br><span class="line">  <span class="title function_">requestAnimationFrame</span>(render);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>();</span><br></pre></td></tr></table></figure><h2 id="3-修改物体"><a href="#3-修改物体" class="headerlink" title="3.修改物体"></a>3.修改物体</h2><p>1.位置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cube.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">cube.<span class="property">position</span>.<span class="property">x</span> = <span class="number">3</span>;</span><br><span class="line">cube.<span class="property">position</span>.<span class="property">y</span> = <span class="number">3</span>;</span><br></pre></td></tr></table></figure><p>直接改坐标就好</p><p>也可以使用translate</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cube.<span class="title function_">translateX</span>(<span class="number">1</span>)</span><br><span class="line">cube.<span class="title function_">translate</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>2.缩放</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cube.<span class="property">scale</span>.<span class="title function_">set</span>(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>);<span class="comment">//x变成3倍，y变成2倍，z轴不变</span></span><br><span class="line">cube.<span class="property">scale</span>.<span class="property">x</span> = <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p>3.旋转</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cube.<span class="property">rotation</span>.<span class="title function_">set</span>(<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;XZY&quot;</span>);<span class="comment">//绕x轴转45度</span></span><br></pre></td></tr></table></figure><p>也可以使用rotate</p><h2 id="4-时钟"><a href="#4-时钟" class="headerlink" title="4.时钟"></a>4.时钟</h2><p>该对象用于跟踪时间</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 设置时钟</span><br><span class="line">const clock = new THREE.Clock();</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用渲染器，通过相机将场景渲染进来</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">  <span class="comment">// 获取时钟运行的总时长</span></span><br><span class="line">  <span class="comment">// let time = clock.getElapsedTime();</span></span><br><span class="line">  <span class="comment">// console.log(&quot;时钟运行总时长：&quot;, time);</span></span><br><span class="line">    <span class="keyword">let</span> deltaTime = clock.<span class="title function_">getDelta</span>();</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;两次获取时间的间隔时间：&quot;</span>, deltaTime);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//   渲染下一帧的时候就会调用render函数</span></span><br><span class="line">  <span class="title function_">requestAnimationFrame</span>(render);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意要放到渲染器里，才能一直获取</p><h2 id="动画库"><a href="#动画库" class="headerlink" title="动画库"></a>动画库</h2><p>threejs中经常使用gasp做动画</p><p><a href="https://greensock.com/docs/v3/GSAP">https://greensock.com/docs/v3/GSAP</a></p><p>下载</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save gsap</span><br></pre></td></tr></table></figure><p>1.导入动画库</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gsap <span class="keyword">from</span> <span class="string">&quot;gsap&quot;</span>;</span><br></pre></td></tr></table></figure><p>2.设置动画</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> animate1 = gsap.<span class="title function_">to</span>(cube.<span class="property">position</span>, &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">duration</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">ease</span>: <span class="string">&quot;power1.inOut&quot;</span>,</span><br><span class="line">  <span class="comment">//   设置重复的次数，无限次循环-1</span></span><br><span class="line">  <span class="attr">repeat</span>: -<span class="number">1</span>,</span><br><span class="line">  <span class="comment">//   往返运动</span></span><br><span class="line">  <span class="attr">yoyo</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//   delay，延迟2秒运动</span></span><br><span class="line">  <span class="attr">delay</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">onComplete</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;动画完成&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">onStart</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;动画开始&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gsap.<span class="title function_">to</span>(cube.<span class="property">rotation</span>, &#123; <span class="attr">x</span>: <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, <span class="attr">duration</span>: <span class="number">5</span>, <span class="attr">ease</span>: <span class="string">&quot;power1.inOut&quot;</span> &#125;);</span><br></pre></td></tr></table></figure><p>双击暂停</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;dblclick&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//   console.log(animate1);</span></span><br><span class="line">  <span class="keyword">if</span> (animate1.<span class="title function_">isActive</span>()) &#123;</span><br><span class="line">    <span class="comment">//   暂停</span></span><br><span class="line">    animate1.<span class="title function_">pause</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//   恢复</span></span><br><span class="line">    animate1.<span class="title function_">resume</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="界面尺寸"><a href="#界面尺寸" class="headerlink" title="界面尺寸"></a>界面尺寸</h2><p>你会发现，我们前面写好的代码，在页面尺寸发生改变的时候，并不能自适应的改变尺寸，而出现空白或者滚动条突出的情况。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/983a66c2cfbc4f101ae88c9f6691ff19ec666de9.gif"></p><p>1.所以监听屏幕大小的改变，来重新设置相机的宽高比例和渲染器的尺寸大。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听画面变化，更新渲染画面</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//   console.log(&quot;画面变化了&quot;);</span></span><br><span class="line">  <span class="comment">// 更新摄像头</span></span><br><span class="line">  camera.<span class="property">aspect</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span> / <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">  <span class="comment">//   更新摄像机的投影矩阵</span></span><br><span class="line">  camera.<span class="title function_">updateProjectionMatrix</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//   更新渲染器</span></span><br><span class="line">  renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span><br><span class="line">  <span class="comment">//   设置渲染器的像素比</span></span><br><span class="line">  renderer.<span class="title function_">setPixelRatio</span>(<span class="variable language_">window</span>.<span class="property">devicePixelRatio</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>2.控制场景全屏<br>经常我们需要全屏的展示三维场景。例如，我们想要双击，实现全屏效果，代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;dblclick&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> fullScreenElement = <span class="variable language_">document</span>.<span class="property">fullscreenElement</span>;</span><br><span class="line">  <span class="keyword">if</span> (!fullScreenElement) &#123;</span><br><span class="line">    <span class="comment">//   双击控制屏幕进入全屏，退出全屏</span></span><br><span class="line">    <span class="comment">// 让画布对象全屏</span></span><br><span class="line">    renderer.<span class="property">domElement</span>.<span class="title function_">requestFullscreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//   退出全屏，使用document对象</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">exitFullscreen</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;); </span><br></pre></td></tr></table></figure><h2 id="dat"><a href="#dat" class="headerlink" title="dat"></a>dat</h2><p>安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save dat.gui</span><br></pre></td></tr></table></figure><h2 id="BufferGeometry"><a href="#BufferGeometry" class="headerlink" title="BufferGeometry"></a>BufferGeometry</h2><p>BufferGeometry可以让你自己去设计几何体</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BufferGeometry</span>();</span><br><span class="line"><span class="comment">// 创建一个简单的矩形. 在这里我们左上和右下顶点被复制了两次。</span></span><br><span class="line"><span class="comment">// 因为在两个三角面片里，这两个顶点都需要被用到。</span></span><br><span class="line"><span class="keyword">const</span> vertices = <span class="keyword">new</span> <span class="title class_">Float32Array</span>( [</span><br><span class="line">-<span class="number">1.0</span>, -<span class="number">1.0</span>,  <span class="number">1.0</span>,</span><br><span class="line"> <span class="number">1.0</span>, -<span class="number">1.0</span>,  <span class="number">1.0</span>,</span><br><span class="line"> <span class="number">1.0</span>,  <span class="number">1.0</span>,  <span class="number">1.0</span>,</span><br><span class="line"></span><br><span class="line"> <span class="number">1.0</span>,  <span class="number">1.0</span>,  <span class="number">1.0</span>,</span><br><span class="line">-<span class="number">1.0</span>,  <span class="number">1.0</span>,  <span class="number">1.0</span>,</span><br><span class="line">-<span class="number">1.0</span>, -<span class="number">1.0</span>,  <span class="number">1.0</span></span><br><span class="line">] );</span><br><span class="line"><span class="comment">//设置三个点为一个坐标</span></span><br><span class="line">geometry.<span class="title function_">setAttribute</span>(<span class="string">&quot;position&quot;</span>, <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BufferAttribute</span>(vertices, <span class="number">3</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123; <span class="attr">color</span>: <span class="number">0xffff00</span> &#125;);</span><br><span class="line"><span class="comment">// 根据几何体和材质创建物体</span></span><br><span class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(geometry, material);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mesh);</span><br><span class="line">scene.<span class="title function_">add</span>(mesh);</span><br></pre></td></tr></table></figure><h2 id="MeshBasicMaterial"><a href="#MeshBasicMaterial" class="headerlink" title="MeshBasicMaterial"></a>MeshBasicMaterial</h2><p>一种常用材质</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> color = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Color</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>(), <span class="title class_">Math</span>.<span class="title function_">random</span>(), <span class="title class_">Math</span>.<span class="title function_">random</span>());</span><br><span class="line"></span><br><span class="line"> <span class="keyword">const</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">color</span>: color,</span><br><span class="line"></span><br><span class="line">  <span class="attr">transparent</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure><h2 id="TextureLoader"><a href="#TextureLoader" class="headerlink" title="TextureLoader"></a>TextureLoader</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入纹理</span></span><br><span class="line"><span class="keyword">const</span> textureLoader = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TextureLoader</span>();</span><br><span class="line"><span class="keyword">const</span> doorColorTexture = textureLoader.<span class="title function_">load</span>(<span class="string">&quot;./textures/door/color.jpg&quot;</span>);</span><br><span class="line"><span class="comment">//在材质这里使用纹理</span></span><br><span class="line"><span class="comment">// 材质</span></span><br><span class="line"><span class="keyword">const</span> basicMaterial = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&quot;#ffff00&quot;</span>,</span><br><span class="line">  <span class="attr">map</span>: doorColorTexture,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>纹理可以偏移</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置纹理偏移</span></span><br><span class="line">doorColorTexture.<span class="property">offset</span>.<span class="property">x</span> = <span class="number">0.5</span>;</span><br><span class="line">doorColorTexture.<span class="property">offset</span>.<span class="property">y</span> = <span class="number">0.5</span>;</span><br><span class="line">doorColorTexture.<span class="property">offset</span>.<span class="title function_">set</span>(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line"><span class="comment">// 纹理旋转</span></span><br><span class="line"><span class="comment">// 设置旋转的原点</span></span><br><span class="line">doorColorTexture.<span class="property">center</span>.<span class="title function_">set</span>(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line"><span class="comment">// 旋转45deg</span></span><br><span class="line">doorColorTexture.<span class="property">rotation</span> = <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">4</span>;</span><br><span class="line"><span class="comment">// 设置纹理的重复</span></span><br><span class="line">doorColorTexture.<span class="property">repeat</span>.<span class="title function_">set</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="comment">// 设置纹理重复的模式</span></span><br><span class="line">doorColorTexture.<span class="property">wrapS</span> = <span class="variable constant_">THREE</span>.<span class="property">MirroredRepeatWrapping</span>;</span><br><span class="line">doorColorTexture.<span class="property">wrapT</span> = <span class="variable constant_">THREE</span>.<span class="property">RepeatWrapping</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> three &amp; git </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>面经3</title>
      <link href="/2022/10/12/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E7%BB%8F3/"/>
      <url>/2022/10/12/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E7%BB%8F3/</url>
      
        <content type="html"><![CDATA[<h2 id="面经3"><a href="#面经3" class="headerlink" title="面经3"></a>面经3</h2><h2 id="说一说盒模型？"><a href="#说一说盒模型？" class="headerlink" title="说一说盒模型？"></a>说一说盒模型？</h2><p><strong>标准盒模型：</strong> 一个块的总宽度 = width+margin(左右)+padding(左右)+border(左右)</p><p><strong>怪异盒模型：</strong> 一个块的总宽度 = width+margin（左右）（既 width 已经包含了 padding 和 border 值）</p><p>形成怪异盒模型的条件是box-sizing:border-box；</p><p>形成标准盒模型的条件box-sizing:content-box。</p><h2 id="说一说伪数组和数组的区别？"><a href="#说一说伪数组和数组的区别？" class="headerlink" title="说一说伪数组和数组的区别？"></a>说一说伪数组和数组的区别？</h2><ol><li>伪数组的特点：类型是object、不能使用数组方法、可以获取长度、可以使用for in遍历 </li><li>伪数组可以装换为数组的方法：a. Array.prototype.slice.call() b.Array.from() c. […伪数组] </li><li>有哪些是伪数组：函数的参数arguments，Map和Set的keys()、values()和entires()</li></ol><h2 id="说一说如何实现可过期的localstorage数据？"><a href="#说一说如何实现可过期的localstorage数据？" class="headerlink" title="说一说如何实现可过期的localstorage数据？"></a>说一说如何实现可过期的localstorage数据？</h2><p>一种是惰性删除：惰性删除是指获取数据的时候，拿到存储的时间和当前时间做对比，如果超过过期时间就清除Cookie。 </p><p>另一种是定时删除：每隔一段时间执行一次删除操作，并通过限制删除操作执行的次数和频率，来减少删除操作对CPU的长期占用。 LocalStorage清空应用场景：token存储在LocalStorage中，要清空</p><h2 id="说一说axios的拦截器原理及应用？"><a href="#说一说axios的拦截器原理及应用？" class="headerlink" title="说一说axios的拦截器原理及应用？"></a>说一说axios的拦截器原理及应用？</h2><p>axios拦截器分为响应和请求拦截器，</p><p>请求拦截器 在请求发送前进行必要操作处理，例如添加统一cookie、请求体加验证、设置请求头等，相当于是对每个接口里相同操作的一个封装； </p><p>响应拦截器 同理，响应拦截器也是如此功能，只是在请求得到响应之后，对响应体的一些处理，通常是数据统一处理等，也常来判断登录失效等。</p><h2 id="说一说创建ajax过程？"><a href="#说一说创建ajax过程？" class="headerlink" title="说一说创建ajax过程？"></a>说一说创建ajax过程？</h2><p>1.<code>new XMLHttpRequest()</code>,创建一个异步调用对象. </p><p>2.创建一个新的<code>HTTP</code>请求,并指定该<code>HTTP</code>请求的方法、<code>URL</code>及验证信息.</p><p>3.设置响应<code>HTTP</code>请求状态变化的函数.</p><p>4.发送<code>HTTP</code>请求</p><p>5.监听请求成功后的状态变化：根据状态码进行相应的处理。 XHR.onreadystatechange = function () { if (XHR.readyState == 4 &amp;&amp; XHR.status == 200) { console.log(XHR.responseText); </p><h2 id="说一下fetch-请求方式？"><a href="#说一下fetch-请求方式？" class="headerlink" title="说一下fetch 请求方式？"></a>说一下fetch 请求方式？</h2><p>fetch是一种HTTP数据请求的方式。fetch()方法返回一个Promise解析Response来自Request显示状态（成功与否）的方法。 </p><h2 id="说一下有什么方法可以保持前后端实时通信？"><a href="#说一下有什么方法可以保持前后端实时通信？" class="headerlink" title="说一下有什么方法可以保持前后端实时通信？"></a>说一下有什么方法可以保持前后端实时通信？</h2><p>轮询适用于：小型应用，实时性不高 </p><p>长轮询适用于：一些早期的对及时性有一些要求的应用：web IM 聊天 </p><p>iframe适用于：客服通信等 </p><p>WebSocket适用于：微信、网络互动游戏等 </p><p>SSE适用于：金融股票数据、看板等</p><h2 id="说一下重绘、重排区别如何避免？"><a href="#说一下重绘、重排区别如何避免？" class="headerlink" title="说一下重绘、重排区别如何避免？"></a>说一下重绘、重排区别如何避免？</h2><p>回流：当一个元素的位置、尺寸等发生改变的时候 浏览器需要重新计算该元素的几何属性并且摆放到正确的位置的过程就叫做回流。一般像页面初次渲染、带有动画的元素、添加/删除功能、图片放大缩小、浏览器窗口发生改变的时候都会触发回流。 </p><p>重绘：当一个元素的外观、样式发生改变而布局不会改变，重新绘制的过程叫做重绘。 回流必定会触发重绘，而重绘则不一定会触发回流。一般来说，回流对性能的损耗更多一点</p><h2 id="说一说-Vue-列表为什么加-key？"><a href="#说一说-Vue-列表为什么加-key？" class="headerlink" title="说一说 Vue 列表为什么加 key？"></a>说一说 Vue 列表为什么加 key？</h2><p>1.key 是为 Vue 中 vnode 的唯一标记，通过这个 key，我们的 diff 操作可以更准确、更快速 </p><p>2.不然Vue会存在“就地复用问题”，（下一个元素复用了上一个在当前位置元素的状态）</p><p>3.如果在一个v-for list里面，删除中间的一个item，这个时候这个item后面所有的index都会变化，那么diff就会计算出后面的item的key-index映射都发生了变化，就会全部重新渲染，大大影响了性能。</p><h2 id="说一说vue-router-实现懒加载的方法？"><a href="#说一说vue-router-实现懒加载的方法？" class="headerlink" title="说一说vue-router 实现懒加载的方法？"></a>说一说vue-router 实现懒加载的方法？</h2><p>1：Vue异步组件</p><p>2：ES6标准语法import（）———推荐使用！！！！！</p><p>3：webpack的require，ensure()</p><p><strong>Vue异步加载技术</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/problem&#x27;</span>,</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;problem&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>: <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">&#x27;../pages/home/problemList&#x27;</span>], resolve)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ES6推荐方式imprort ()—-推荐使用</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = (<span class="params"></span>) =&gt;<span class="title function_">import</span>(<span class="string">&#x27;../components/home.vue&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>webpack提供的require.ensure()实现懒加载：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = <span class="built_in">require</span> =&gt;</span><br><span class="line">&#123; <span class="built_in">require</span>([<span class="string">&#x27;../components/home.vue&#x27;</span>],<span class="function">()=&gt;</span>&#123; <span class="title function_">resolve</span>(<span class="built_in">require</span>(<span class="string">&#x27;../components/home.vue&#x27;</span>)); &#125;) &#125;</span><br></pre></td></tr></table></figure><h2 id="说一说前端性能优化手段？"><a href="#说一说前端性能优化手段？" class="headerlink" title="说一说前端性能优化手段？"></a>说一说前端性能优化手段？</h2><p>前端性能优化分为两类：一类是文件加载更快、另一类是文件渲染更快。 </p><p>加载更快的方法： </p><ol><li>让传输的数据包更小（压缩文件/图片）：图片压缩和文件压缩 </li><li>减少网络请求的次数：雪碧图/精灵图、节流防抖 </li><li>减少渲染的次数：缓存（HTTP缓存、本地缓存、Vue的keep-alive缓存等） </li></ol><p>渲染更快的方法： </p><ol><li>提前渲染：ssr服务器端渲染 </li><li>避免渲染阻塞：CSS放在HTML的head中 JS放在HTML的body底部 </li><li>避免无用渲染：懒加载 </li><li>减少渲染次数：对dom查询进行缓存、将dom操作合并、使用减少重排的标签</li></ol><h2 id="事件扩展符用过吗-…-，什么场景下？"><a href="#事件扩展符用过吗-…-，什么场景下？" class="headerlink" title="事件扩展符用过吗(…)，什么场景下？"></a>事件扩展符用过吗(…)，什么场景下？</h2><p>1.数组克隆 let a = [1,2,3];let b = […a] </p><p>2.数组合并 let a = [1,2,3];let b = [4,5,6];let c = […a,…b] </p><p>3.类数组转成真正的数组 let a = new Set([1,2,3]); let b = […a]</p><h2 id="说一说vue钩子函数？"><a href="#说一说vue钩子函数？" class="headerlink" title="说一说vue钩子函数？"></a>说一说vue钩子函数？</h2><ol><li><p>三个阶段 挂载阶段：beforeCreate、created、beforeMounted、mounted 更新阶段：beforeUpdate、updated 销毁阶段：beforeDestroy、destroyed </p></li><li><p>每个阶段的特性 🤔 beforeCreate：创建实例之前 🤔 created：实例创建完成（执行new Vue(options)），可访问data、computed、watch、methods上的方法和数据，可进行数据请求，未挂载到DOM结构上，不能获取el属性，如果要进行dom操作，那就要用nextTick函数 🤔 beforeMount：在挂载开始之前被调用，beforeMount之前，会找到对应的template，并编译成render函数 🤔 mounted：实例挂载到DOM上，此时可以通过DOM API获取到DOM节点，可进行数据请求 🤔 beforeupdate：响应式数据更新时调用，发生在虚拟DOM打补丁之前，适合在更新之前访问现有的DOM，比如手动移除已添加的事件监听器 🤔 updated：虚拟 DOM 重新渲染和打补丁之后调用，组件DOM已经更新 🤔 beforeDestroy：实例销毁之前调用，this仍能获取到实例，常用于销毁定时器、解绑全局事件、销毁插件对象等操作 🤔 destroyed: 实例销毁之后 </p></li><li><p> 父子组件执行顺序 挂载：父created -&gt; 子created -&gt; 子mounted&gt; 父mounted 更新：父beforeUpdate -&gt; 子beforeUpdated -&gt; 子updated -&gt; 父亲updated 销毁：父beforeDestroy -&gt; 子beforeDestroy -&gt; 子destroyed -&gt; 父destroyed</p></li></ol><h2 id="说一下对Vue响应式的理解？Vue2对比Vue3"><a href="#说一下对Vue响应式的理解？Vue2对比Vue3" class="headerlink" title="说一下对Vue响应式的理解？Vue2对比Vue3"></a>说一下对Vue响应式的理解？Vue2对比Vue3</h2><h2 id="Vue的双向数据绑定怎么实现的？"><a href="#Vue的双向数据绑定怎么实现的？" class="headerlink" title="Vue的双向数据绑定怎么实现的？"></a>Vue的双向<a href="https://www.nowcoder.com/jump/super-jump/word?word=%E6%95%B0%E6%8D%AE">数据</a>绑定怎么实现的？</h2><h2 id="写过webpack的配置吗？常用配置哪些？"><a href="#写过webpack的配置吗？常用配置哪些？" class="headerlink" title="写过webpack的配置吗？常用配置哪些？"></a>写过webpack的配置吗？常用配置哪些？</h2>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>面经2</title>
      <link href="/2022/10/12/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E7%BB%8F2/"/>
      <url>/2022/10/12/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E7%BB%8F2/</url>
      
        <content type="html"><![CDATA[<h2 id="面经2"><a href="#面经2" class="headerlink" title="面经2"></a>面经2</h2><h2 id="说几个未知宽高元素水平垂直居中方法"><a href="#说几个未知宽高元素水平垂直居中方法" class="headerlink" title="说几个未知宽高元素水平垂直居中方法"></a>说几个未知宽高元素水平垂直居中方法</h2><p><code>可以使用父元素display:flex;设置justify-content:center;align-items:center;</code> </p><p><code>使用定位position：absolute; top,bottom,left,right:0;</code></p><p>设置元素相对父级定位<code>position:absolute;left:50%;right:50%</code>，让自身平移自身高度50% <code>transform: translate(-50%,-50%);</code></p><h2 id="说一说JS变量提升？"><a href="#说一说JS变量提升？" class="headerlink" title="说一说JS变量提升？"></a>说一说JS变量提升？</h2><p>var声明会存在变量提升，函数声明也会提升，let，const不会存在变量提升</p><p>变量提升，函数声明提示，都是在js编译阶段提升的，将当前变量、函数提升至当前作用域的最顶端 并且由于编译阶段，并没有开始执行代码，所以都会被赋初始值undefined</p><p>函数不同，函数会在堆内存中开辟一个空间用于来保存函数的执行体，会将当前内存地址赋值给函数变量，所以可以在函数声明上面，来调用该函数 </p><p>let，const声明变量会形成暂时性死区，就是在该作用域当中，无法在变量声明之前去访问，即使全局存在一个同名变量，也无法访问</p><h2 id="说一说-HashRouter-和-HistoryRouter的区别和原理？"><a href="#说一说-HashRouter-和-HistoryRouter的区别和原理？" class="headerlink" title="说一说 HashRouter 和 HistoryRouter的区别和原理？"></a>说一说 HashRouter 和 HistoryRouter的区别和原理？</h2><p>1.history和hash都是利用浏览器的2种特性实现前端路由，history是利用浏览历史记录栈的API实现，hash是监听location hash值变化事件来实现 </p><p>2.history的url没有#号，hash有#号</p><p>3.相同的url,history会触发添加到浏览器历史记录栈中，hash不会触发，history需要后端配合，如果后端不配合刷新页面会出现404，hash不需要 hashRouter原理：通过window.onhashchange获取url中hash值 historyRouter原理：通过history.pushState,使用它做页面跳转不会触发页面刷新，使用window.onpopstate监听浏览器的前进和后退</p><h2 id="说一说map-和-forEach-的区别？"><a href="#说一说map-和-forEach-的区别？" class="headerlink" title="说一说map 和 forEach 的区别？"></a>说一说map 和 forEach 的区别？</h2><ol><li><p>map一般不修改原数组，forEach能改变原数组</p></li><li><p>map有返回值，创建新数组，而forEach无返回值，返回结果undefined </p></li><li><p>map和forEach用只能用try…catch…中断抛出错误中断，而return不能，用其效果相当于for循环的continue会跳过此次循环进入下一次循环。</p></li></ol><h2 id="说一说事件循环Event-loop，宏任务与微任务？"><a href="#说一说事件循环Event-loop，宏任务与微任务？" class="headerlink" title="说一说事件循环Event loop，宏任务与微任务？"></a>说一说事件循环Event loop，宏任务与微任务？</h2><p>js是单线程的，主线程在执行时会不断循环往复的从同步队列中读取任务，执行任务，当同步队列执行完毕后再从异步队列中依次执行。</p><p>宏任务与微任务都属于异步任务，再执行上微任务的优先级高于宏任务，因此每一次都会先执行完微任务在执行宏任务。</p><p>宏任务有定时器，Dom事件，ajax事件</p><p>微任务有：promise的回调、MutationObserver 的回调 ,process.nextTick</p><h2 id="说一说Vue3-0-实现数据双向绑定的方法-？"><a href="#说一说Vue3-0-实现数据双向绑定的方法-？" class="headerlink" title="说一说Vue3.0 实现数据双向绑定的方法 ？"></a>说一说Vue3.0 实现数据双向绑定的方法 ？</h2><p>在Vue2.0的基础上将Object.definedproperty换成了功能更强大的proxy，原理相同。</p><p>在vue实例初始化的时候（vm._init()执行的时候）调用Observe类的实例方法observe，传入数据（若是对象则发生递归），将其中每个数据进行一遍数据劫持（get实现依赖收集，set实现事件派发（这里的模式为发布订阅模式））</p><p>。补充：相对vue2.0解决的问题：解决无法监听新增属性或删除属性的响应式问题、解决无法监听数组长度和index变化问题。</p><h2 id="说一下Diff算法？"><a href="#说一下Diff算法？" class="headerlink" title="说一下Diff算法？"></a>说一下Diff算法？</h2><p>1.出现：主流框架中多采用VNode更新结点，更新规则为diff算法。 </p><p>2.原理：框架会将所有的结点先转化为虚拟节点Vnode，在发生更改后将VNode和原本页面的OldNode进行对比，然后以VNode为基准，在oldNode上进行准确的修改。（修改准则：原本没有新版有，则增加；原本有新版没有，则删除；都有则进行比较，都为文本结点则替换值；都为静态资源不处理；都为正常结点则替换）</p><h2 id="说一说三栏布局的实现方案"><a href="#说一说三栏布局的实现方案" class="headerlink" title="说一说三栏布局的实现方案"></a>说一说三栏布局的实现方案</h2><h2 id="说一下浏览器垃圾回收机制？"><a href="#说一下浏览器垃圾回收机制？" class="headerlink" title="说一下浏览器垃圾回收机制？"></a>说一下浏览器垃圾回收机制？</h2><p>有两种机制：</p><p>1、标记清除：对所有活动对象进行标记，清除阶段会将没有标记的对象清除；标记整理算法：标记结束后，算法将活动对象压入内存一端，则需要清理的对象在边界，直接被清理掉就行。（内存空间不连续）</p><p> 2、引用计数：将对象是否不再需要简化定义为有没有其他对象引用它，如果没有引用指向这个对象，则会被垃圾回收机制回收。（效率低）</p><h2 id="说一说-vue-的-keep-alive-？"><a href="#说一说-vue-的-keep-alive-？" class="headerlink" title="说一说 vue 的 keep-alive ？"></a>说一说 vue 的 keep-alive ？</h2><p>1、keep-alive是vue的内置组件，能在组件切换过程中将状态保留在内存中，相当于缓存，防止DOM的重复渲染；</p><p>2、keep-alive有三个属性：include（只有名字匹配的才会被缓存）、exclude（任何名字匹配的都不会被缓存）、max（最多可以缓存多少个组件）。</p><p>3、在路由router的中：相应组件下规定meta属性，定义keep-alive：true；</p><p>4、可以结合Vue组件实例加载顺序讲解，VNode-&gt;实例化-&gt;_updata-&gt;真实Node，在实例化的时候会判断该组件是否被keep-alive保存过，是的话则直接拿其中的DOM进行渲染。</p><h2 id="CSRF攻击是什么？"><a href="#CSRF攻击是什么？" class="headerlink" title="CSRF攻击是什么？"></a>CSRF攻击是什么？</h2><p>1.概念：跨域请求伪造。</p><p>2.原理：诱导用户跳转到新的页面，利用 服务器的验证漏洞 和 用户之前的登入状态，来模拟用户进行操作。</p><p>3.防范：利用cookie的sameSize属性规定其他网站不能使用本网站的cookie。或者使用token验证，再去验证用户身份。</p><h2 id="XSS攻击是什么？"><a href="#XSS攻击是什么？" class="headerlink" title="XSS攻击是什么？"></a>XSS攻击是什么？</h2><p>XSS跨站脚本攻击，恶意注入代码，其他用户访问网站时候就会被盗取信息，分为反射性和存储性，</p><p>反射是通过url直接输入，可以通过了浏览器来防御 </p><p>存储的可以通过cookie的onlyhttp来预防，还有要对用户的输入来进行验证，敏感字符来转义</p><h2 id="说一说js继承的方法和优缺点？"><a href="#说一说js继承的方法和优缺点？" class="headerlink" title="说一说js继承的方法和优缺点？"></a>说一说js继承的方法和优缺点？</h2><h2 id="说一说defer和async区别？"><a href="#说一说defer和async区别？" class="headerlink" title="说一说defer和async区别？"></a>说一说defer和async区别？</h2><p>html文件都是按顺序执行的，script标签中没有加defer和async时，浏览器在解析文档时遇到script标签就会停止解析阻塞文档解析，先加载JS文件，加载完之后立即执行，执行完毕后才能继续解析文档。 </p><p>而在script标签中写入defer或者async时，就会使JS文件异步加载，即html执行到script标签时，JS加载和文档解析同时进行，而async是在JS加载完成后立即执行JS脚本，阻塞文档解析，而defer则是JS加载完成后，在文档解析完成后执行JS脚本</p><h2 id="说一下浏览器如何渲染页面的？"><a href="#说一下浏览器如何渲染页面的？" class="headerlink" title="说一下浏览器如何渲染页面的？"></a>说一下浏览器如何渲染页面的？</h2><p>1、HTML被HTML解析器解析成DOM树。 </p><p>2、CSS被CSS解析器解析成CSS规则树。 </p><p>3、浏览器会将CSS规则树附着在DOM树上，并结合两者生成渲染树Render Tree。 </p><p>4、生成布局（flow），浏览器通过解析计算出每一个渲染树节点的位置和大小，在屏幕上画出渲染树的所有节点。 </p><p>5、将布局绘制（paint）在屏幕上，显示出整个页面</p><h2 id="说一说computed和watch的区别？"><a href="#说一说computed和watch的区别？" class="headerlink" title="说一说computed和watch的区别？"></a>说一说computed和watch的区别？</h2><p>computed:计算属性，依赖于多个值，具有缓存，只有在当前依赖的值发生改变之后，才会重新计算，不支持异步操作。应用于需要进行大量数值计算的场景 </p><p>watch：起到监听的作用，监听一个数据，然后可以进行操作，数值发生变化立即进行后续操作，无缓存，支持异步操作。应用于需要不断监听数值变化、异步或者开销较大而进行操作的场景 watch之中监听需要传入两个参数（普通数据类型），引用数据类型（需要设置deep属性与handle属性的回调函数）</p><h2 id="说一说-Vue-中-nextTick-作用与原理？"><a href="#说一说-Vue-中-nextTick-作用与原理？" class="headerlink" title="说一说 Vue 中 $nextTick 作用与原理？"></a>说一说 Vue 中 $nextTick 作用与原理？</h2><p>Vue在更新DOM时异步执行，在修改完数据以后，视图不会立刻更新，而是等同一事件循环中所有的数据更新之后再去更新视图。所以修改完数据，立即在方法中回去dom，获取的仍然是未修改的DOM。</p><p>$nixtTick的作用是:将回调延迟到下次 DOM 更新循环之后执行，以便于我们在回调函数中获取到的是最新的DOM，$nextTick的原理本质上是返回一个Promise，进行异步执行</p><h2 id="说一说new会发生什么？"><a href="#说一说new会发生什么？" class="headerlink" title="说一说new会发生什么？"></a>说一说new会发生什么？</h2><p>看下new的实现代码就知道有以下四步：</p><ol><li>创建一个新对象 </li><li>将新对象的__proto__（原型）指向构造函数的prototype（原型对象）</li><li>构造函数绑定新对象的this并执行返回结果</li><li>判断返回结果是否为null，如果为null,返回新对象，否则直接返回执行结果。</li></ol><h2 id="说一下token-能放在cookie中吗？"><a href="#说一下token-能放在cookie中吗？" class="headerlink" title="说一下token 能放在cookie中吗？"></a>说一下token 能放在cookie中吗？</h2><p>可以，token认证流程 ：</p><ol><li>客户端使用用户名跟密码请求登录 </li><li>服务端收到请求，去验证用户名与密码 </li><li>验证成功后，服务端签发一个 token ，并把它发送给客户端 </li><li>客户端接收 token 以后会把它存储起来，比如放在 cookie 里或者 localStorage 里 </li><li>客户端每次发送请求时都需要带着服务端签发的 token（把 token 放到 HTTP 的 Header 里） </li><li>服务端收到请求后，需要验证请求里带有的 token ，如验证成功则返回对应的数据</li></ol><h2 id="说一下浏览器输入URL发生了什么？"><a href="#说一下浏览器输入URL发生了什么？" class="headerlink" title="说一下浏览器输入URL发生了什么？"></a>说一下浏览器输入URL发生了什么？</h2><p>1、URL解析：判断浏览器输入的是搜索内容还是URL；</p><p>2、查找缓存：如果能找到缓存则直接返回页面，如果没有缓存则需要发送网络请求页面；</p><p>3、DNS域名解析；</p><p>4、三次握手建立TCP连接；</p><p>5、发起HTTP请求；</p><p>6、服务器响应并返回结果；</p><p>7、通过四次挥手释放TCP连接；</p><p>8、浏览器渲染；</p><p>9、js引擎解析</p><h2 id="说一说组件通信的方式？"><a href="#说一说组件通信的方式？" class="headerlink" title="说一说组件通信的方式？"></a>说一说组件通信的方式？</h2><p>1、父子组件通信常用props和$emit还有$refs；</p><p>2、兄弟组件通信常用定义的公共事件bus的$on、$emit；</p><p>3、祖先和子孙组件通信常用$attrs和$listener、provide和inject；</p><p>4、复杂通信常用vuex</p><h2 id="说一说-v-if-和-v-show区别？"><a href="#说一说-v-if-和-v-show区别？" class="headerlink" title="说一说 v-if 和 v-show区别？"></a>说一说 v-if 和 v-show区别？</h2><p>v-show是操作display:none,</p><p>v-if是操作Dom直接进行删除和添加，在性能上不及v-show</p><h2 id="React生命周期的各个阶段是什么？"><a href="#React生命周期的各个阶段是什么？" class="headerlink" title="React生命周期的各个阶段是什么？"></a>React生命周期的各个阶段是什么？</h2><h2 id="React生命周期的各个阶段是什么？-1"><a href="#React生命周期的各个阶段是什么？-1" class="headerlink" title="React生命周期的各个阶段是什么？"></a>React生命周期的各个阶段是什么？</h2><p>父子通信，父组件通过props将数据和改变父组件数据的方法传递给子组件，子组件子组件通过调用父组件的方法来修改数据。如果是类组件父组件可以通过ref获取到子组件的实例用来修改数据。跨级组件可以用过context进行传递数据。首先通过createContext方法创建一个context，在父组件中通过用context.provider包裹子组件，通过value属性传递数据，在子组件通过contextType或者consumer获取传递过来的数据。如果是hook则使用useContext函数接收context作为参数获取结果。在相关组件时可以通过redux进行组件组件之间的通信。</p>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>面经</title>
      <link href="/2022/10/12/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E7%BB%8F/"/>
      <url>/2022/10/12/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E7%BB%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="面经"><a href="#面经" class="headerlink" title="面经"></a>面经</h2><h2 id="cookie、session区别"><a href="#cookie、session区别" class="headerlink" title="cookie、session区别"></a>cookie、session区别</h2><p>cookie 存储于浏览器端，而 session 存储于服务端</p><p>cookie 的安全性相比于 session 较弱，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗<br> 考虑到安全应当使用session。</p><p>session 会在一定时间内保存在服务器上。当访问增多时，会占用服务器的资源，所以考虑到服务器性能方面，可以使用cookie</p><p>cookie 存储容量有限制，单个cookie 保存数据不能超过4k，且很多浏览器限制一个站点最多保存20个cookie。而对于 session ，其默认大小一般是1024k</p><h2 id="cookie、sessionStorage、localStorage-异同点"><a href="#cookie、sessionStorage、localStorage-异同点" class="headerlink" title="cookie、sessionStorage、localStorage 异同点"></a>cookie、sessionStorage、localStorage 异同点</h2><p><strong>html5 中 webStorage 包含 sessionStorage 和 localStorage</strong><br> 共同点：</p><p>1.都是浏览器存储 2.都存储在浏览器本地 </p><p>区别： </p><ol><li>cookie由服务器写入， sessionStorage以及localStorage都是由前端写入 </li><li>cookie的生命周期由服务器端写入时就设置好的，localStorage是写入就一直存在，除非手动清除，sessionStorage是由页面关闭时自动清除 </li><li>cookie存储空间大小约4kb， sessionStorage及localStorage空间比较大，大约5M </li><li>3者的数据共享都遵循同源原则，sessionStorage还限制必须是同一个页面 </li><li>前端给后端发送请求时，自动携带cookie, session 及 local都不携带 </li><li>cookie一般存储登录验证信息或者token，localStorage常用于存储不易变动的数据，减轻服务器压力，sessionStorage可以用来监测用户是否是刷新进入页面，如音乐播放器恢复进度条功能</li></ol><h2 id="说一说JS数据类型有哪些-区别是什么？"><a href="#说一说JS数据类型有哪些-区别是什么？" class="headerlink" title="说一说JS数据类型有哪些,区别是什么？"></a>说一说JS数据类型有哪些,区别是什么？</h2><p>Number、String、Boolean、BigInt、Symbol、Null、Undefined、Object、8种</p><p>JS数据类型分为两类：一类是基本数据类型，也叫简单数据类型，包含7种类型，分别是Number 、String、Boolean、BigInt、Symbol、Null、Undefined。另一类是引用数据类型也叫复杂数据类型，通常用Object代表，普通对象，数组，正则，日期，Math数学函数都属于Object。</p><p>数据分成两大类的本质区别：基本数据类型和引用数据类型它们在内存中的存储方式不同。<br>基本数据类型是直接存储在栈中的简单数据段，占据空间小，属于被频繁使用的数据。<br>引用数据类型是存储在堆内存中，占据空间大。引用数据类型在栈中存储了指针，该指针指向堆中该实体的起始地址，当解释器寻找引用值时，会检索其在栈中的地址，取得地址后从堆中获得实体。</p><h2 id="说一说你对闭包的理解？"><a href="#说一说你对闭包的理解？" class="headerlink" title="说一说你对闭包的理解？"></a>说一说你对闭包的理解？</h2><p>函数被引用包围，这样的组合就是闭包（closure）</p><p>也就是说，闭包让你可以在一个内层函数中访问到其外层函数的作用域</p><h2 id="闭包使用场景"><a href="#闭包使用场景" class="headerlink" title="闭包使用场景"></a>闭包使用场景</h2><p>任何闭包的使用场景都离不开这两点：</p><ul><li>创建私有变量</li><li>延长变量的生命周期</li></ul><h3 id="柯里化函数"><a href="#柯里化函数" class="headerlink" title="柯里化函数"></a>柯里化函数</h3><p>柯里化的目的在于避免频繁调用具有相同参数函数的同时，又能够轻松的重用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设我们有一个求长方形面积的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getArea</span>(<span class="params">width, height</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> width * height</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果我们碰到的长方形的宽老是10</span></span><br><span class="line"><span class="keyword">const</span> area1 = <span class="title function_">getArea</span>(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="keyword">const</span> area2 = <span class="title function_">getArea</span>(<span class="number">10</span>, <span class="number">30</span>)</span><br><span class="line"><span class="keyword">const</span> area3 = <span class="title function_">getArea</span>(<span class="number">10</span>, <span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们可以使用闭包柯里化这个计算面积的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getArea</span>(<span class="params">width</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">height</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> width * height</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getTenWidthArea = <span class="title function_">getArea</span>(<span class="number">10</span>)</span><br><span class="line"><span class="comment">// 之后碰到宽度为10的长方形就可以这样计算面积</span></span><br><span class="line"><span class="keyword">const</span> area1 = <span class="title function_">getTenWidthArea</span>(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 而且如果遇到宽度偶尔变化也可以轻松复用</span></span><br><span class="line"><span class="keyword">const</span> getTwentyWidthArea = <span class="title function_">getArea</span>(<span class="number">20</span>)</span><br></pre></td></tr></table></figure><h3 id="使用闭包模拟私有方法"><a href="#使用闭包模拟私有方法" class="headerlink" title="使用闭包模拟私有方法"></a>使用闭包模拟私有方法</h3><p>在<code>JavaScript</code>中，没有支持声明私有变量，但我们可以使用闭包来模拟私有方法</p><p>下面举个例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Counter</span> = (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> privateCounter = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">changeBy</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    privateCounter += val;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">increment</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">changeBy</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">decrement</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">changeBy</span>(-<span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">value</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> privateCounter;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Counter1</span> = <span class="title function_">makeCounter</span>();</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Counter2</span> = <span class="title function_">makeCounter</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Counter1</span>.<span class="title function_">value</span>()); <span class="comment">/* logs 0 */</span></span><br><span class="line"><span class="title class_">Counter1</span>.<span class="title function_">increment</span>();</span><br><span class="line"><span class="title class_">Counter1</span>.<span class="title function_">increment</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Counter1</span>.<span class="title function_">value</span>()); <span class="comment">/* logs 2 */</span></span><br><span class="line"><span class="title class_">Counter1</span>.<span class="title function_">decrement</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Counter1</span>.<span class="title function_">value</span>()); <span class="comment">/* logs 1 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Counter2</span>.<span class="title function_">value</span>()); <span class="comment">/* logs 0 */</span></span><br></pre></td></tr></table></figure><h2 id="说一说promise是什么与使用方法？"><a href="#说一说promise是什么与使用方法？" class="headerlink" title="说一说promise是什么与使用方法？"></a>说一说promise是什么与使用方法？</h2><p>Promise 出现的目的是解决 Node.js 异步编程中回调地狱的问题。</p><p>实际上，Promise 本身是一个构造函数，我们要解决回调地狱的问题，需要先使用 new 运算符创建 Promise 实例，在创建 Promise 实例的过程中，需要传入一个匿名函数，在匿名函数中有两个参数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(成功了做的事)</span><br><span class="line">       .<span class="title function_">catch</span>(失败了做的事)</span><br></pre></td></tr></table></figure><p>例如，我们需要依次读取A文件、B文件、C文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">p1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./1.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(result);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">p2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./2.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(result);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">p3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    lreturn <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./3.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(result);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">p1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">r1</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(r1);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">p2</span>();         <span class="comment">//返回一个promise对象</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">r2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(r2);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">p3</span>();</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">r3</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(r3);</span><br><span class="line">    <span class="keyword">return</span> p3;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="说一说跨域是什么？如何解决跨域问题？"><a href="#说一说跨域是什么？如何解决跨域问题？" class="headerlink" title="说一说跨域是什么？如何解决跨域问题？"></a>说一说跨域是什么？如何解决跨域问题？</h2><p>跨域：当前页面中的某个接口请求的地址和当前页面的地址如果协议、域名、端口其中有一项不同，就说该接口跨域了。<br>跨域限制的原因：浏览器为了保证网页的安全，出的同源协议策略。</p><p>跨域报错信息：</p><p><img src="https://uploadfiles.nowcoder.com/images/20220226/4107856_1645863343481/0BF44F815EA97361C3608F016702DF18" alt="img"></p><p>跨域解决方案</p><p>后端：</p><p>cors：目前最常用的一种解决办法，通过设置后端允许跨域实现。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;GET, PUT, OPTIONS, POST&quot;</span>);</span><br></pre></td></tr></table></figure><p>前端：</p><p>JSONP：利用的原理是script标签可以跨域请求资源，将回调函数作为参数拼接在url中。后端收到请求，调用该回调函数，并将数据作为参数返回去，注意设置响应头返回文档类型，应该设置成javascript。</p><h2 id="说一说BFC"><a href="#说一说BFC" class="headerlink" title="说一说BFC"></a>说一说BFC</h2><p><code>BFC</code> 全称：<code>Block Formatting Context</code>， 名为 “块级格式化上下文”。</p><p><code>W3C</code>官方解释为：<code>BFC</code>它决定了元素如何对其内容进行定位，以及与其它元素的关系和相互作用，当涉及到可视化布局时，<code>Block Formatting Context</code>提供了一个环境，<code>HTML</code>在这个环境中按照一定的规则进行布局。</p><p>简单来说就是，<code>BFC</code>是一个完全独立的空间（布局环境），让空间里的子元素不会影响到外面的布局。那么怎么使用<code>BFC</code>呢，<code>BFC</code>可以看做是一个<code>CSS</code>元素属性</p><h3 id="怎样触发BFC"><a href="#怎样触发BFC" class="headerlink" title="怎样触发BFC"></a>怎样触发BFC</h3><p>a.浮动 b. 非静态定位，c. overflow:hidden d. display:table </p><p><code>解决的问题：</code></p><p>a. 浮动元素重叠 b. 父元素高度塌陷 b. margin重叠</p><h2 id="说一说Vuex是什么，每个属性是干嘛的，如何使用-？"><a href="#说一说Vuex是什么，每个属性是干嘛的，如何使用-？" class="headerlink" title="说一说Vuex是什么，每个属性是干嘛的，如何使用 ？"></a>说一说Vuex是什么，每个属性是干嘛的，如何使用 ？</h2><ol><li>概念：Vuex是全局状态管理仓库，相当于window对象挂载了一个全局变量。</li><li>属性：state（数据源）、actions（处理异步事件）、mutations（处理同步事件）、getters(过滤数据)和modules（模块）</li></ol><h2 id="说一说JavaScript有几种方法判断变量的类型？"><a href="#说一说JavaScript有几种方法判断变量的类型？" class="headerlink" title="说一说JavaScript有几种方法判断变量的类型？"></a>说一说JavaScript有几种方法判断变量的类型？</h2><p>1.typeof 判断基本类型 判断引用类型时，除了function 其他的为object null </p><p>2.intanceof(根据原型链判断),原生数据类型不能判断</p><p>3.constructor.name(根据构造器判断)，不能判断null数据类型</p><p>4.Object.prototype.toString.call()（用Object的toString方法判断）所有类型数据都能判断,记住判断结果打印为：’[object Xxx]’</p><h2 id="说一说样式优先级的规则是什么？"><a href="#说一说样式优先级的规则是什么？" class="headerlink" title="说一说样式优先级的规则是什么？"></a>说一说样式优先级的规则是什么？</h2><p>！important&gt;行内&gt;id选择器&gt;class、伪类、属性&gt;伪元素、标签&gt;通配符</p><h2 id="说一说JS实现异步的方法？"><a href="#说一说JS实现异步的方法？" class="headerlink" title="说一说JS实现异步的方法？"></a>说一说JS实现异步的方法？</h2><p>setTimeout、promise、generator 、async await</p><h2 id="说一说Vue2-0-双向绑定的原理与缺陷？"><a href="#说一说Vue2-0-双向绑定的原理与缺陷？" class="headerlink" title="说一说Vue2.0 双向绑定的原理与缺陷？"></a>说一说Vue2.0 双向绑定的原理与缺陷？</h2><p>VUE响应式是指data数据发生变化时，立刻触发视图的更新。 </p><p>双向绑定原理：通过数据劫持和结合订阅－发布的方式实现的响应式，通过Object.defineProperty来数据劫持数据的Getter，Setter，数据变化时发布消息给订阅者，订阅者收到消息进行相应处理。 </p><p>缺点：一次性递归内存开销大，可能导致栈溢出； 不能监听对象的新增属性和删除熟悉属性； 无法监听数组的变化</p><h2 id="说一说数组去重都有哪些方法？"><a href="#说一说数组去重都有哪些方法？" class="headerlink" title="说一说数组去重都有哪些方法？"></a>说一说数组去重都有哪些方法？</h2><p>对象属性、new Set() 、indexOf、hasOwnProperty、reduce+includes、filter</p><h2 id="说一说null-和-undefined-的区别，如何让一个属性变为null"><a href="#说一说null-和-undefined-的区别，如何让一个属性变为null" class="headerlink" title="说一说null 和 undefined 的区别，如何让一个属性变为null"></a>说一说null 和 undefined 的区别，如何让一个属性变为null</h2><p>null表示一个值被定义了,但是是空值,但是undefined表示未被定义,让一个属性变为null，只需要定义一个变量，然后直接赋值为 null 即可</p><h2 id="说一下浮动？"><a href="#说一下浮动？" class="headerlink" title="说一下浮动？"></a>说一下浮动？</h2><p>包括左浮动，右浮动 设置浮动会脱离文档流，当父元素不设高度需要子元素来撑开，而子元素设置浮动就会导致父元素的高度塌陷 解决塌陷： </p><p>1.给父元素设置高度 </p><p>2.给父元素设置overflow：hidden </p><p>3.在下方创建一个空白div，添加样式clear：both </p><p>4.父级添加after伪类 father：：after{ content：’’； display：table； clear：both }</p><h2 id="说一说es6中箭头函数？"><a href="#说一说es6中箭头函数？" class="headerlink" title="说一说es6中箭头函数？"></a>说一说es6中箭头函数？</h2><p>没有this、this是从外部获取、不能使用new、没有arguments、没有原型和super </p><h2 id="说一说call-apply-bind的作用和区别？"><a href="#说一说call-apply-bind的作用和区别？" class="headerlink" title="说一说call apply bind的作用和区别？"></a>说一说call apply bind的作用和区别？</h2><p>首先，call apply bind三个方法都可以用来改变函数的this指向，具体区别如下：</p><p>1、fn.call (newThis,params) call函数的第一个参数是this的新指向，后面依次传入函数fn要用到的参数。会立即执行fn函数。</p><p>2、fn.apply (newThis,paramsArr) apply函数的第一个参数是this的新指向,第二个参数是fn要用到的参数数组，会立即执行fn函数。</p><p>3、fn.bind (newThis,params) bind函数的第一个参数是this的新指向，后面的参数可以直接传递，也可以按数组的形式传入。 不会立即执行fn函数，且只能改变一次fn函数的指向，后续再用bind更改无效。返回的是已经更改this指向的新fn</p><h2 id="说一说HTML语义化？"><a href="#说一说HTML语义化？" class="headerlink" title="说一说HTML语义化？"></a>说一说HTML语义化？</h2><p>语义化的好处： </p><ol><li>代码可读高 </li><li>有利于SEO </li><li>利于页面内容结构化 常见的语义化标签：header、footer、aside、main、h1-h6、input、textarea、video、aduio</li></ol><h2 id="说一说CSS尺寸设置的单位"><a href="#说一说CSS尺寸设置的单位" class="headerlink" title="说一说CSS尺寸设置的单位"></a>说一说CSS尺寸设置的单位</h2><ol><li>px：绝对像素 </li><li>rem：相对于根元素像素 </li><li>em：相对于父元素像素 </li><li>vw：视口宽度 </li><li>vh：视口高度</li></ol>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>css预处理器</title>
      <link href="/2022/07/12/css/css%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/"/>
      <url>/2022/07/12/css/css%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="css预处理器"><a href="#css预处理器" class="headerlink" title="css预处理器"></a>css预处理器</h1><h1 id="sass"><a href="#sass" class="headerlink" title="sass"></a>sass</h1><p>首先需要在vue中需要安装sass</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-sass sass-loader <span class="attr">--save-dev</span></span><br></pre></td></tr></table></figure><p>如果报错，在package.json检查下sass-loader版本，可能是版本太高了，可以进行安装低版本即可。</p><p>安装前，先卸载sass-loader</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall sass-loader</span><br></pre></td></tr></table></figure><p>卸载完成，从新安装下低版本的</p><p><code>npm install sass-loader@7.3.1</code></p><h2 id="1-sass变量"><a href="#1-sass变量" class="headerlink" title="1.sass变量"></a>1.sass变量</h2><blockquote><p>变量变量用于存储一些信息，它可以重复使用。</p></blockquote><p>Sass 变量可以存储以下信息：</p><ul><li>字符串</li><li>数字</li><li>颜色值</li><li>布尔值</li><li>列表</li><li>null 值</li></ul><p>变量声明后我们就可以在代码中使用它：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$myFont</span>: Helvetica, sans-serif;</span><br><span class="line"><span class="variable">$myColor</span>: red;</span><br><span class="line"><span class="variable">$myFontSize</span>: <span class="number">18px</span>;</span><br><span class="line"><span class="variable">$myWidth</span>: <span class="number">680px</span>;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"> <span class="attribute">font-family</span>: <span class="variable">$myFont</span>;</span><br><span class="line"> <span class="attribute">font-size</span>: <span class="variable">$myFontSize</span>;</span><br><span class="line"> <span class="attribute">color</span>: <span class="variable">$myColor</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#container</span> &#123;</span><br><span class="line"> <span class="attribute">width</span>: <span class="variable">$myWidth</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="sass作用域"><a href="#sass作用域" class="headerlink" title="sass作用域"></a>sass作用域</h2><blockquote><p>Sass 变量的作用域只能在当前的层级上有效果，如下所示 h1 的样式为它内部定义的 green，p 标签则是为 red。</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$myColor</span>: red;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line"> <span class="variable">$myColor</span>: green;  *<span class="comment">// 只在 h1 里头有用，局部作用域*</span></span><br><span class="line"> <span class="attribute">color</span>: <span class="variable">$myColor</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">   <span class="variable">$myColor</span>: green !global;  <span class="comment">// 全局作用域</span></span><br><span class="line"> <span class="attribute">color</span>: <span class="variable">$myColor</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>global</strong></p><p>当然 Sass 中我们可以使用 <strong>!global</strong> 关键词来设置变量是全局的。</p><h2 id="2-Sass-嵌套规则与属性"><a href="#2-Sass-嵌套规则与属性" class="headerlink" title="2.Sass 嵌套规则与属性"></a>2.Sass 嵌套规则与属性</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line"> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">font: &#123;</span><br><span class="line"> family: Helvetica, sans-serif;</span><br><span class="line"> size: 18px;</span><br><span class="line"> weight: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">text: &#123;</span><br><span class="line"> align: center;</span><br><span class="line"> transform: lowercase;</span><br><span class="line"> overflow: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>等于把外面的拼到嵌套里面的</p></blockquote><h2 id="3-import"><a href="#3-import" class="headerlink" title="3.@import"></a>3.@import</h2><blockquote><p>可以把sass文件导入到css文件里</p></blockquote><p><strong>注意：</strong>包含文件时不需要指定文件后缀，Sass 会自动添加后缀 .scss。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;variables&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;colors&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;reset&quot;</span>;</span><br></pre></td></tr></table></figure><h2 id="4-mixin-与-include"><a href="#4-mixin-与-include" class="headerlink" title="4.@mixin 与 @include"></a>4.@mixin 与 @include</h2><blockquote><p>@mixin 指令允许我们定义一个可以在整个样式表中重复使用的样式。</p><p>@include 指令可以将混入（mixin）引入到文档中。</p></blockquote><p><strong>定义一个混入</strong></p><p>混入(mixin)通过 @mixin 指令来定义。 @mixin name { property: value; property: value; … }</p><p>以下实例创建一个名为 “important-text” 的混入：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> important-text &#123;</span><br><span class="line"> <span class="attribute">color</span>: red;</span><br><span class="line"> <span class="attribute">font-size</span>: <span class="number">25px</span>;</span><br><span class="line"> <span class="attribute">font-weight</span>: bold;</span><br><span class="line"> <span class="attribute">border</span>: <span class="number">1px</span> solid blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>使用混入</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">selector &#123;</span><br><span class="line"> @include important-text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>混入中也可以包含混入，如下所示：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@mixin special-text &#123;</span><br><span class="line"> @include important-text;</span><br><span class="line"> @include link;</span><br><span class="line"> @include special-border;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>向混入传递变量</strong></p><p>混入可以接收参数。</p><p>我们可以向混入传递变量。</p><p>定义可以接收参数的混入：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> bordered(<span class="variable">$color</span>, <span class="variable">$width</span>) &#123;</span><br><span class="line"> <span class="attribute">border</span>: <span class="variable">$width</span> solid <span class="variable">$color</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.myArticle</span> &#123;</span><br><span class="line"> <span class="keyword">@include</span> bordered(blue, <span class="number">1px</span>); *<span class="comment">// 调用混入，并传递两个参数*</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.myNotes</span> &#123;</span><br><span class="line"> <span class="keyword">@include</span> bordered(red, <span class="number">2px</span>); *<span class="comment">// 调用混入，并传递两个参数*</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>混入的参数也可以定义默认值，语法格式如下：</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> bordered(<span class="variable">$color</span>: blue, <span class="variable">$width</span>: <span class="number">1px</span>) &#123;</span><br><span class="line"> <span class="attribute">border</span>: <span class="variable">$width</span> solid <span class="variable">$color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> sexy-border(<span class="variable">$color</span>, <span class="variable">$width</span>: <span class="number">1in</span>) &#123;</span><br><span class="line"> <span class="attribute">border</span>: &#123;</span><br><span class="line"> <span class="attribute">color</span>: <span class="variable">$color</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">$width</span>;</span><br><span class="line">  style: dashed;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123; <span class="keyword">@include</span> sexy-border(blue); &#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123; <span class="keyword">@include</span> sexy-border(blue, <span class="number">2in</span>); &#125;</span><br></pre></td></tr></table></figure><p><strong>可变参数</strong></p><p>有时，不能确定一个混入（mixin）或者一个函数（function）使用多少个参数，这时我们就可以使用 <strong>…</strong> 来设置可变参数。</p><p>例如，用于创建盒子阴影（box-shadow）的一个混入（mixin）可以采取任何数量的 box-shadow 作为参数。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> box-shadow(<span class="variable">$shadows</span>...) &#123;</span><br><span class="line">   <span class="attribute">box-shadow</span>: <span class="variable">$shadows</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.shadows</span> &#123;</span><br><span class="line"> <span class="keyword">@include</span> box-shadow(<span class="number">0px</span> <span class="number">4px</span> <span class="number">5px</span> <span class="number">#666</span>, <span class="number">2px</span> <span class="number">6px</span> <span class="number">10px</span> <span class="number">#999</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-extend-与-继承"><a href="#5-extend-与-继承" class="headerlink" title="5.@extend 与 继承"></a>5.@extend 与 继承</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.button-basic  &#123;</span><br><span class="line"> border: none;</span><br><span class="line"> padding: 15px 30px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.button-report  &#123;</span><br><span class="line"> @extend .button-basic;</span><br><span class="line"> background-color: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.button-submit  &#123;</span><br><span class="line"> @extend .button-basic;</span><br><span class="line"> background-color: green;</span><br><span class="line"> color: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-sass选择器"><a href="#6-sass选择器" class="headerlink" title="6.sass选择器"></a>6.sass选择器</h2><h2 id="1-父选择器的标识符-amp"><a href="#1-父选择器的标识符-amp" class="headerlink" title="1.父选择器的标识符&amp;"></a>1.父选择器的标识符&amp;</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">article a &#123;</span><br><span class="line">  color: blue;</span><br><span class="line">  :hover &#123; color: red &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>当a被hover时，所有的a都会变红，我们不是要这个效果，我们要被hover才变红</p></blockquote><p>解决之道为使用一个特殊的<code>sass</code>选择器，即父选择器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">article a &#123;</span><br><span class="line">  color: blue;</span><br><span class="line">  &amp;:hover &#123; color: red &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当包含父选择器标识符的嵌套规则被打开时，它不会像后代选择器那样进行拼接，而是<code>&amp;</code>被父选择器直接替换：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">article a &#123; color: blue &#125;</span><br><span class="line">article a:hover &#123; color: red &#125;</span><br></pre></td></tr></table></figure><h2 id="2-子组合选择器和同层组合选择器：-gt-、-和"><a href="#2-子组合选择器和同层组合选择器：-gt-、-和" class="headerlink" title="2.子组合选择器和同层组合选择器：&gt;、+和~"></a>2.子组合选择器和同层组合选择器：&gt;、+和~</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">article section &#123; margin: 5px &#125;</span><br><span class="line">article &gt; section &#123; border: 1px solid #ccc &#125;</span><br></pre></td></tr></table></figure><blockquote><p>你可以用子组合选择器&gt;选择一个元素的直接子元素。上例中，第一个选择器会选择article下的所有命中section选择器的元素。第二个选择器只会选择article下紧跟着的子元素中命中section选择器的元素。</p></blockquote><p>在下例中，你可以用同层相邻组合选择器<code>+</code>选择<code>header</code>元素后紧跟的<code>p</code>元素：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">header + p &#123; font-size: 1.1em &#125;</span><br></pre></td></tr></table></figure><p>你也可以用同层全体组合选择器<code>~</code>，选择所有跟在<code>article</code>后的同层<code>article</code>元素，不管它们之间隔了多少其他元素：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">article ~ article &#123; border-top: 1px dashed #ccc &#125;</span><br></pre></td></tr></table></figure><h2 id="7-sass函数（待完善）"><a href="#7-sass函数（待完善）" class="headerlink" title="7.sass函数（待完善）"></a>7.sass函数（待完善）</h2><h3 id="1-if-else-if-else示例："><a href="#1-if-else-if-else示例：" class="headerlink" title="1.if-else if-else示例："></a>1.if-else if-else示例：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@mixin txt($weight) &#123; </span><br><span class="line">  color: white; </span><br><span class="line">  @if $weight == bold &#123; </span><br><span class="line">    font-weight: bold;</span><br><span class="line">  &#125; </span><br><span class="line">  @else if $weight == light &#123; </span><br><span class="line">    font-weight: 100;</span><br><span class="line">  &#125; </span><br><span class="line">  @else &#123; </span><br><span class="line">    font-weight: normal;</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.txt1 &#123; </span><br><span class="line">  @include txt(bold); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.txt1 &#123;</span><br><span class="line">  color: white;</span><br><span class="line">  font-weight: bold; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-for示例："><a href="#2-for示例：" class="headerlink" title="2.for示例："></a>2.for示例：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@for $i from 1 to 10 &#123;</span><br><span class="line">  .border-#&#123;$i&#125; &#123;</span><br><span class="line">    border: #&#123;$i&#125;px solid blue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">.border-1 &#123;</span><br><span class="line">  border: 1px solid blue; &#125;</span><br><span class="line"></span><br><span class="line">.border-2 &#123;</span><br><span class="line">  border: 2px solid blue; &#125;</span><br><span class="line"></span><br><span class="line">.border-3 &#123;</span><br><span class="line">  border: 3px solid blue; &#125;</span><br><span class="line"></span><br><span class="line">.border-4 &#123;</span><br><span class="line">  border: 4px solid blue; &#125;</span><br><span class="line"></span><br><span class="line">.border-5 &#123;</span><br><span class="line">  border: 5px solid blue; &#125;</span><br><span class="line"></span><br><span class="line">.border-6 &#123;</span><br><span class="line">  border: 6px solid blue; &#125;</span><br><span class="line"></span><br><span class="line">.border-7 &#123;</span><br><span class="line">  border: 7px solid blue; &#125;</span><br><span class="line"></span><br><span class="line">.border-8 &#123;</span><br><span class="line">  border: 8px solid blue; &#125;</span><br><span class="line"></span><br><span class="line">.border-9 &#123;</span><br><span class="line">  border: 9px solid blue; &#125;</span><br></pre></td></tr></table></figure><h1 id="less"><a href="#less" class="headerlink" title="less"></a>less</h1><blockquote><p>less使用和sass大体相同，我说说区别</p></blockquote><h2 id="1-变量"><a href="#1-变量" class="headerlink" title="1.变量"></a>1.变量</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@width:</span> <span class="number">10px</span>; </span><br><span class="line"></span><br><span class="line"><span class="variable">@height:</span> <span class="variable">@width</span> + <span class="number">10px</span>; </span><br><span class="line"></span><br><span class="line"><span class="selector-tag">header</span> &#123;  </span><br><span class="line"></span><br><span class="line"> <span class="attribute">width</span>: <span class="variable">@width</span>; </span><br><span class="line"></span><br><span class="line"> <span class="attribute">height</span>: <span class="variable">@height</span>; &#125;</span><br></pre></td></tr></table></figure><p>sass用$,less用@</p><h2 id="2-混合（Mixins）"><a href="#2-混合（Mixins）" class="headerlink" title="2.混合（Mixins）"></a>2.混合（Mixins）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.bordered &#123; </span><br><span class="line">border-top: dotted 1px black;  </span><br><span class="line">border-bottom: solid 2px black; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.post a &#123;  </span><br><span class="line">color: red;  </span><br><span class="line">.bordered(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>sass</code>：</p><ul><li>定义@minxin</li><li>调用@include</li></ul><p><code>less</code>：</p><p>直接类名+（）</p><h2 id="3-合并-merge-了解"><a href="#3-合并-merge-了解" class="headerlink" title="3.合并(merge)了解"></a>3.合并(merge)了解</h2><h2 id="1-逗号方式"><a href="#1-逗号方式" class="headerlink" title="1.逗号方式"></a>1.逗号方式</h2><p>less代码：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="selector-tag">inset</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="selector-id">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>();</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> <span class="selector-tag">black</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>编译后的CSS输出：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#555</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> black;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><h2 id="2-空格方式"><a href="#2-空格方式" class="headerlink" title="2.空格方式"></a>2.空格方式</h2><p>合并值用空格分隔。</p><p>less代码：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">transform</span>+<span class="selector-tag">_</span>: <span class="selector-tag">scale</span>(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>();</span><br><span class="line">  <span class="selector-tag">transform</span>+<span class="selector-tag">_</span>: <span class="selector-tag">rotate</span>(<span class="number">15deg</span>);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>编译后的CSS输出：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">2</span>) <span class="built_in">rotate</span>(<span class="number">15deg</span>);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><p>为了避免任何无意的连接，merge需要在每个连接点上使用显式的+或+_标志。</p><p>#Stylus</p>]]></content>
      
      
      <categories>
          
          <category> CSS &amp; HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>react的基础使用</title>
      <link href="/2022/07/09/react%20&amp;%20vite/react%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"/>
      <url>/2022/07/09/react%20&amp;%20vite/react%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="react的基础使用"><a href="#react的基础使用" class="headerlink" title="react的基础使用"></a>react的基础使用</h1><h2 id="1-React简介"><a href="#1-React简介" class="headerlink" title="1. React简介"></a>1. React简介</h2><h3 id="1-官网"><a href="#1-官网" class="headerlink" title="1.官网"></a>1.官网</h3><ol><li>英文官网:<a href="https://reactjs.org/"> https://reactjs.org/</a></li><li>中文官网: <a href="https://react.docschina.org/">https://react.docschina.org/</a></li></ol><h3 id="2-介绍描述"><a href="#2-介绍描述" class="headerlink" title="2.介绍描述"></a>2.介绍描述</h3><p>我们下载下来可以看到这样一些文件</p><p><img src="C:\Users\11793\AppData\Roaming\Typora\typora-user-images\image-20211129213132650.png" alt="image-20211129213132650"></p><ol><li>react.js：React核心库。</li><li>react-dom.js：提供操作DOM的react扩展库。</li><li>babel.min.js：解析JSX语法代码转为JS代码的库。</li></ol><p>react是使用<code>jsx</code>的，我们浏览器只能解析<code>js</code>，所以必须把jsx-&gt;js</p><h2 id="2-hello-react"><a href="#2-hello-react" class="headerlink" title="2.hello_react"></a>2.hello_react</h2><p>使用react分3步：</p><ol><li>准备好一个“容器”</li><li>创建虚拟DOM</li><li>渲染虚拟DOM到页面</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- 准备好一个“容器” --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;!-- 引入react核心库 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javas cript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- 引入react-dom，用于支持react操作<span class="variable constant_">DOM</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- 引入babel，用于将jsx转为js --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span> &gt;</span><span class="language-javascript"> <span class="comment">/* 此处一定要写babel */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//1.创建虚拟DOM</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="variable constant_">VDOM</span> = <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello,React<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span> <span class="comment">/* 此处一定不要写引号，因为不是字符串 */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//2.渲染虚拟DOM到页面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="variable constant_">VDOM</span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 这个是个替换的</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="3-jsx"><a href="#3-jsx" class="headerlink" title="3.jsx"></a>3.jsx</h2><h3 id="1-为什么要用jsx"><a href="#1-为什么要用jsx" class="headerlink" title="1.为什么要用jsx"></a>1.为什么要用jsx</h3><ol><li>全称: JavaScript XML</li><li>react定义的一种类似于XML的JS扩展语法: JS + XML本质是<code>React.createElement(component,props, ...children)</code>方法的语法糖</li><li>作用: 用来简化创建虚拟DOM </li></ol><blockquote><p>我们的react就是创建<code>虚拟DOM</code>在把他转换为真实的DOM，用js的话需要用React提供的API，不好写</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个是js</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">VDOM</span> = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>,&#123;<span class="attr">id</span>:<span class="string">&#x27;title&#x27;</span>&#125;,<span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span&#x27;</span>,&#123;&#125;,<span class="string">&#x27;Hello,React&#x27;</span>))</span><br><span class="line"><span class="comment">//这个是jsx</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">VDOM</span> = (  <span class="comment">/* 此处一定不要写引号，因为不是字符串 */</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello,React<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="2-jsx语法规则"><a href="#2-jsx语法规则" class="headerlink" title="2.jsx语法规则"></a>2.jsx语法规则</h3><p>1.定义虚拟DOM时，不要写<code>引号</code>。</p><p>2.标签中混入JS<code>表达式</code>时要用{}。</p><p>3.样式的类名指定不要用class，要用<code>className</code>。</p><p>4.内联样式，要用style={<code>&#123;key:value&#125;</code>}的形式去写。</p><p>5.只有一个根标签</p><p>6.标签必须闭合</p><p>7.标签首字母</p><p>(1).若小写字母开头，则将该标签转为<code>html中同名元素</code>，若html中无该标签对应的同名元素，则报错。</p><p><code>就是去找html里的找不到报错</code></p><p>(2).若大写字母开头，react就去渲染对应的组件，若组件没有定义，则报错。</p><p><code>找组件里面的，找不到报错</code></p><p><strong>一个小练习</strong>：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模拟一些数据</span></span><br><span class="line"><span class="keyword">const</span> data = [<span class="string">&#x27;Angular&#x27;</span>,<span class="string">&#x27;React&#x27;</span>,<span class="string">&#x27;Vue&#x27;</span>]</span><br><span class="line"><span class="comment">//1.创建虚拟DOM</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">VDOM</span> = (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>前端js框架列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&#123;</span></span><br><span class="line"><span class="language-xml">data.map((item,index)=&gt;&#123;</span></span><br><span class="line"><span class="language-xml">return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">key都是唯一的</span></span><br><span class="line"><span class="language-xml">key相当于一个标识</span></span><br><span class="line"><span class="language-xml">&#125;)</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span> <span class="attr">id</span>=<span class="string">&#123;myId.toLowerCase()&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span>&#x27;<span class="attr">white</span>&#x27;,<span class="attr">fontSize:</span>&#x27;<span class="attr">29px</span>&#x27;&#125;&#125;&gt;</span>&#123;myData.toLowerCase()&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"><span class="comment">//2.渲染虚拟DOM到页面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="variable constant_">VDOM</span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br></pre></td></tr></table></figure><p>要动态更新数据就要<code>&#123;&#125;</code>，但是<code>&#123;&#125;</code>里面只能写<strong>js表达式</strong></p><p>1.表达式：一个表达式会产生一个值，可以放在任何一个需要值的地方</p><p><code>用Const x = 来接，接得到就是</code></p><p>(1). a</p><p>(2). a+b</p><p>(3). demo(1)</p><p>(4). arr.map() </p><p>(5). function test () {}</p><p>2.语句(代码)：</p><p>(1).if(){}</p><p>(2).for(){}</p><p>3).switch(){case:xxxx}</p><h1 id="2-React面向组件编程"><a href="#2-React面向组件编程" class="headerlink" title="2.React面向组件编程"></a>2.React面向组件编程</h1><h2 id="1-定义组件"><a href="#1-定义组件" class="headerlink" title="1.定义组件"></a>1.定义组件</h2><h3 id="1-函数式组件"><a href="#1-函数式组件" class="headerlink" title="1.函数式组件"></a>1.函数式组件</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建函数式组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">//此处的this是undefined，因为babel编译后开启了严格模式</span></span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是用函数定义的组件(适用于【简单组件】的定义)<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.渲染组件到页面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">执行了ReactDOM.render(&lt;MyComponent/&gt;.......之后，发生了什么？</span></span><br><span class="line"><span class="comment">1.React解析组件标签，找到了MyComponent组件。</span></span><br><span class="line"><span class="comment">2.发现组件是使用函数定义的，随后调用该函数，将返回的虚拟DOM转为真实DOM，随后呈现在页面中。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul><li>函数里没有<code>this</code></li><li>我们没有自己调用函数，react会调用该函数，将返回的虚拟DOM转为真实DOM，随后呈现在页面中。</li></ul><h3 id="2-类式组件"><a href="#2-类式组件" class="headerlink" title="2.类式组件"></a>2.类式组件</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建类式组件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//render是放在哪里的？—— MyComponent的原型对象上，供实例使用。</span></span><br><span class="line"><span class="comment">//render中的this是谁？—— MyComponent的实例对象 &lt;=&gt; MyComponent组件实例对象。</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;render中的this:&#x27;</span>,<span class="variable language_">this</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是用类定义的组件(适用于【复杂组件】的定义)<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.渲染组件到页面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">执行了ReactDOM.render(&lt;MyComponent/&gt;.......之后，发生了什么？</span></span><br><span class="line"><span class="comment">1.React解析组件标签，找到了MyComponent组件。</span></span><br><span class="line"><span class="comment">2.发现组件是使用类定义的，随后new出来该类的实例，并通过该实例调用到原型上的render方法。</span></span><br><span class="line"><span class="comment">3.将render返回的虚拟DOM转为真实DOM，随后呈现在页面中。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><p>声明的类要继承<code>React.Component</code></p><p>我们的主要结构要放到<code>render()&#123;表达式&#125;</code>里面去</p><p>render里面的<code>this</code>指向<code>MyComponent的实例对象</code></p><h2 id="2-组件实例的三大属性"><a href="#2-组件实例的三大属性" class="headerlink" title="2.组件实例的三大属性"></a>2.组件实例的三大属性</h2><p>这三大属性都是针对<code>类式组件</code>的，因为函数组件没有实例，没有this。</p><h3 id="1-state"><a href="#1-state" class="headerlink" title="1.state"></a>1.state</h3><p>首先，我们要创建一个类。</p><p><strong>类里面三个重要的部分：</strong></p><p>1.构造器：</p><ul><li>在普通的构造器里，我们想要继承父类，需要带父类的参数，再<code>super()</code>这些，而在react，父类参数用<code>props</code>代替</li><li>我们要添加一个<code>state</code>，通常是个对象</li><li>如果我们想在下面定义一个函数，很显然，普通函数this为undefined，于是我们在来添加一个属性，让这个在原型对象上的函数的<code>this指向实例对象</code>，我们就可以在reader里面通过this.函数名直接拿到这个函数了。</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Weather</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器调用几次？ ———— 1次</span></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">props</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;constructor&#x27;</span>);</span><br><span class="line"><span class="variable language_">super</span>(props)</span><br><span class="line"><span class="comment">//初始化状态</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">state</span> = &#123;<span class="attr">isHot</span>:<span class="literal">false</span>,<span class="attr">wind</span>:<span class="string">&#x27;微风&#x27;</span>&#125;</span><br><span class="line"><span class="comment">//解决changeWeather中this指向问题</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">changeWeather</span> = <span class="variable language_">this</span>.<span class="property">changeWeather</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">&#125; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//render调用几次？ ———— 1+n次 1是初始化的那次 n是状态更新的次数</span></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;render&#x27;</span>);</span><br><span class="line"><span class="comment">//读取状态</span></span><br><span class="line"><span class="keyword">const</span> &#123;isHot,wind&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changeWeather&#125;</span>&gt;</span>今天天气很&#123;isHot ? &#x27;炎热&#x27; : &#x27;凉爽&#x27;&#125;，&#123;wind&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="comment">// onClick里面直接写函数名字，点击会调用</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//changeWeather调用几次？ ———— 点几次调几次</span></span><br><span class="line"><span class="title function_">changeWeather</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//changeWeather放在哪里？ ———— Weather的原型对象上，供实例使用</span></span><br><span class="line"><span class="comment">//由于changeWeather是作为onClick的回调，所以不是通过实例调用的，是直接调用</span></span><br><span class="line"><span class="comment">//类中的方法默认开启了局部的严格模式，所以changeWeather中的this为undefined</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;changeWeather&#x27;</span>);</span><br><span class="line"><span class="comment">//获取原来的isHot值</span></span><br><span class="line"><span class="keyword">const</span> isHot = <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">isHot</span></span><br><span class="line"><span class="comment">//严重注意：状态必须通过setState进行更新,且更新是一种合并，不是替换。</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">isHot</span>:!isHot&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//严重注意：状态(state)不可直接更改，下面这行就是直接更改！！！</span></span><br><span class="line"><span class="comment">//this.state.isHot = !isHot //这是错误的写法</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-state简写方式"><a href="#1-state简写方式" class="headerlink" title="1.state简写方式"></a>1.state简写方式</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Weather</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//初始化状态</span></span><br><span class="line">state = &#123;<span class="attr">isHot</span>:<span class="literal">false</span>,<span class="attr">wind</span>:<span class="string">&#x27;微风&#x27;</span>&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;isHot,wind&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changeWeather&#125;</span>&gt;</span>今天天气很&#123;isHot ? &#x27;炎热&#x27; : &#x27;凉爽&#x27;&#125;，&#123;wind&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//自定义方法————要用赋值语句的形式+箭头函数</span></span><br><span class="line">changeWeather = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">const</span> isHot = <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">isHot</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">isHot</span>:!isHot&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul><li>我们为什么要constructor，是要新添一个属性，而且可能有传过来的参数constructor(props，name…),但我们只想新增一个参数固定的state，相当于新赋一个值，我们可以直接用<code>对象法</code>。</li><li>普通函数的this指向function，也就是window，但是<code>箭头函数的this是他的上一层函数的this</code>，他的上一层是什么weather的实例对象</li></ul><h3 id="2-props"><a href="#2-props" class="headerlink" title="2.props"></a>2.props</h3><blockquote><p><strong><code>props</code>有什么用？</strong></p><p>在state里，我们知道state是用来存我们的数据的，但这个state是在的<code>类里面</code>的，数据也是放在类里面的。</p><p>如果我们想从<code>外面传数据</code>到类里面，我们就要用props</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line"><span class="comment">//创建组件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// console.log(this);</span></span><br><span class="line"><span class="keyword">const</span> &#123;name,age,sex&#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>姓名：&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>性别：&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>年龄：&#123;age+1&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//渲染组件到页面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;jerry&quot;</span> <span class="attr">age</span>=<span class="string">&#123;19&#125;</span>  <span class="attr">sex</span>=<span class="string">&quot;男&quot;</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test1&#x27;</span>))</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;tom&quot;</span> <span class="attr">age</span>=<span class="string">&#123;18&#125;</span> <span class="attr">sex</span>=<span class="string">&quot;女&quot;</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test2&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = &#123;<span class="attr">name</span>:<span class="string">&#x27;老刘&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>,<span class="attr">sex</span>:<span class="string">&#x27;女&#x27;</span>&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> &#123;<span class="attr">...p</span>&#125;/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test3&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>我们可以看到，<code>const &#123;name,age,sex&#125; = this.props</code>将数据从外面传进来</p></blockquote><p><strong>注意：</strong></p><ol><li><code>age=&#123;19&#125;</code>这是把age用<code>number</code>类型传进来，不然是<code>string</code>类型</li><li>我们一般需要规定别人传进来的类型</li><li><code>&lt;Person &#123;...p&#125;/&gt;</code>，…p 是babel加react可以展开一个对象，只能适用标签属性。</li><li>其他时候，…p不能展开对象，当然js里可以用字面量复制对象</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//构造字面量对象时使用展开语法</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>:<span class="string">&#x27;tom&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;</span><br><span class="line"><span class="comment">//字面量复制对象</span></span><br><span class="line"><span class="keyword">let</span> person2 = &#123;...person&#125;</span><br><span class="line"><span class="comment">//console.log(...person); //报错，展开运算符不能展开对象</span></span><br><span class="line">           <span class="comment">//合并</span></span><br><span class="line"><span class="keyword">let</span> person3 = &#123;...person,<span class="attr">name</span>:<span class="string">&#x27;jack&#x27;</span>,<span class="attr">address</span>:<span class="string">&quot;地球&quot;</span>&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person3);</span><br></pre></td></tr></table></figure><h4 id="1-对props进行限制"><a href="#1-对props进行限制" class="headerlink" title="1.对props进行限制"></a>1.对props进行限制</h4><blockquote><p>刚才我们说了，一般要对props传进来的数据类型做限制</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// console.log(this);</span></span><br><span class="line"><span class="keyword">const</span> &#123;name,age,sex&#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line"><span class="comment">//props是只读的</span></span><br><span class="line"><span class="comment">//this.props.name = &#x27;jack&#x27; //此行代码会报错，因为props是只读的</span></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>姓名：&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>性别：&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>年龄：&#123;age+1&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//对标签属性进行类型、必要性的限制</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property">propTypes</span> = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>, <span class="comment">//限制name必传，且为字符串 </span></span><br><span class="line"><span class="comment">//15版本是React.PropTypes,16版本废弃</span></span><br><span class="line"><span class="attr">sex</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>,<span class="comment">//限制sex为字符串</span></span><br><span class="line"><span class="attr">age</span>:<span class="title class_">PropTypes</span>.<span class="property">number</span>,<span class="comment">//限制age为数值</span></span><br><span class="line"><span class="attr">speak</span>:<span class="title class_">PropTypes</span>.<span class="property">func</span>,<span class="comment">//限制speak为函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//指定默认标签属性值</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property">defaultProps</span> = &#123;</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>,<span class="comment">//sex默认值为男</span></span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span> <span class="comment">//age默认值为18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><p><code>propTypes</code>是一个规矩，而<code>PropTypes</code>是一个属性，他不是react自带的，要导入</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 引入prop-types，用于对组件标签属性进行限制 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/prop-types.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="2-props的简写方式"><a href="#2-props的简写方式" class="headerlink" title="2.props的简写方式"></a>2.props的简写方式</h4><blockquote><p>我们的<code>Person.propTypes</code>和<code>Person.defaultProps</code>在<code>person</code>类的外面，这样不规范，应该把他们放在类里</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//对标签属性进行类型、必要性的限制</span></span><br><span class="line"><span class="keyword">static</span> propTypes = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>, <span class="comment">//限制name必传，且为字符串</span></span><br><span class="line"><span class="attr">sex</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>,<span class="comment">//限制sex为字符串</span></span><br><span class="line"><span class="attr">age</span>:<span class="title class_">PropTypes</span>.<span class="property">number</span>,<span class="comment">//限制age为数值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定默认标签属性值</span></span><br><span class="line"><span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>,<span class="comment">//sex默认值为男</span></span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span> <span class="comment">//age默认值为18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// console.log(this);</span></span><br><span class="line"><span class="keyword">const</span> &#123;name,age,sex&#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line"><span class="comment">//props是只读的</span></span><br><span class="line"><span class="comment">//this.props.name = &#x27;jack&#x27; //此行代码会报错，因为props是只读的</span></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>姓名：&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>性别：&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>年龄：&#123;age+1&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-函数组件使用props"><a href="#3-函数组件使用props" class="headerlink" title="3.函数组件使用props"></a>3.函数组件使用props</h4><blockquote><p>函数组件因为没有实例对象，没有this，无法使用<code>state</code>和<code>ref</code>，但他可以使用<code>props</code>，因为函数可以自带参数</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建组件</span></span><br><span class="line"><span class="comment">//函数可以接受参数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span> (props)&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;name,age,sex&#125; = props</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>姓名：&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>性别：&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>年龄：&#123;age&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property">propTypes</span> = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>, <span class="comment">//限制name必传，且为字符串</span></span><br><span class="line"><span class="attr">sex</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>,<span class="comment">//限制sex为字符串</span></span><br><span class="line"><span class="attr">age</span>:<span class="title class_">PropTypes</span>.<span class="property">number</span>,<span class="comment">//限制age为数值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定默认标签属性值</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property">defaultProps</span> = &#123;</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>,<span class="comment">//sex默认值为男</span></span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span> <span class="comment">//age默认值为18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//渲染组件到页面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;jerry&quot;</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test1&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="3-refs"><a href="#3-refs" class="headerlink" title="3.refs"></a>3.refs</h3><blockquote><p>我们在js里，要拿到一个元素再操作它，我们要用到<code>document.querySelector</code>，react里我们用<code>ref</code>属性里代替它</p><p><code>refs</code>相当于一个标签，组件内的标签可以定义<code>ref</code>属性来标识自己。</p></blockquote><h4 id="1-字符串形式的ref"><a href="#1-字符串形式的ref" class="headerlink" title="1.字符串形式的ref"></a>1.字符串形式的ref</h4><p><strong>字符串形式ref基本形式为：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ref=<span class="string">&quot;标签名&quot;</span></span><br></pre></td></tr></table></figure><ol><li>实例对象上有一个refs属性</li><li>在一个元素里添加，<code>ref=&quot;input1&quot;</code>，另一个添加，<code>ref=&quot;input2&quot;</code></li><li>refs: {input1: input, input2: input}</li><li>我们就拿到了这两个input元素，就可以操作元素了</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line"><span class="comment">//创建组件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//展示左侧输入框的数据</span></span><br><span class="line">showData = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;input1&#125; = <span class="variable language_">this</span>.<span class="property">refs</span></span><br><span class="line"><span class="title function_">alert</span>(input1.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//展示右侧输入框的数据</span></span><br><span class="line">showData2 = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;input2&#125; = <span class="variable language_">this</span>.<span class="property">refs</span></span><br><span class="line"><span class="title function_">alert</span>(input2.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// 组件内的标签可以定义ref属性来标识自己</span></span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&quot;input1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;点击按钮提示数据&quot;</span>/&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.showData&#125;</span>&gt;</span>点我提示左侧的数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&quot;input2&quot;</span> <span class="attr">onBlur</span>=<span class="string">&#123;this.showData2&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;失去焦点提示数据&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//渲染组件到页面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> <span class="attr">a</span>=<span class="string">&quot;1&quot;</span> <span class="attr">b</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="2-回调函数形式的ref"><a href="#2-回调函数形式的ref" class="headerlink" title="2.回调函数形式的ref"></a>2.回调函数形式的ref</h4><blockquote><p>我们的react已经不推荐使用字符串形式的ref了，因为它的效率很低，下面是回调函数形式的ref</p></blockquote><p><strong>回调函数基本形式为：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ref=&#123;<span class="function">(<span class="params">current</span>) =&gt;</span> &#123;<span class="variable language_">this</span>.标签名 = current&#125;&#125;</span><br></pre></td></tr></table></figure><p>current为当前元素，回调函数的this是上一级，就是实例对象，this.标签名被放在了实例对象上</p><p><code>demo上就有这两个属性：</code></p><p><code>input1: input</code></p><p><code>input2: input</code></p><p>我们直接在this上拿</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line"><span class="comment">//创建组件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//展示左侧输入框的数据</span></span><br><span class="line">showData = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;input1&#125; = <span class="variable language_">this</span></span><br><span class="line"><span class="title function_">alert</span>(input1.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//展示右侧输入框的数据</span></span><br><span class="line">showData2 = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;input2&#125; = <span class="variable language_">this</span></span><br><span class="line"><span class="title function_">alert</span>(input2.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;c</span> =&gt;</span> this.input1 = c &#125; type=&quot;text&quot; placeholder=&quot;点击按钮提示数据&quot;/&gt;<span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.showData&#125;</span>&gt;</span>点我提示左侧的数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onBlur</span>=<span class="string">&#123;this.showData2&#125;</span> <span class="attr">ref</span>=<span class="string">&#123;c</span> =&gt;</span> this.input2 = c &#125; type=&quot;text&quot; placeholder=&quot;失去焦点提示数据&quot;/&gt;<span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//渲染组件到页面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> <span class="attr">a</span>=<span class="string">&quot;1&quot;</span> <span class="attr">b</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="3-createRef"><a href="#3-createRef" class="headerlink" title="3.createRef"></a>3.createRef</h4><blockquote><p><code>createRef</code>是react最新版本的，也是react最推荐使用的</p></blockquote><p><strong>createRef的基本形式是：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">标签名 = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">ref=&#123;<span class="variable language_">this</span>.标签名&#125;</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><p><code>React.createRef调用后可以返回一个容器，该容器可以存储被ref所标识的节点,该容器是“专人专用”的</code></p><p><strong>我们在实例对象上会添加这两个:</strong></p><p><code>myRef: &#123;current: input&#125;</code></p><p><code>myRef2: &#123;current: input&#125;</code></p><p>我们就可以直接用<code>this.myRef.current.value</code>拿到输入的值了</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line"><span class="comment">//创建组件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">React.createRef调用后可以返回一个容器，该容器可以存储被ref所标识的节点,该容器是“专人专用”的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">myRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">myRef2 = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line"><span class="comment">//展示左侧输入框的数据</span></span><br><span class="line">showData = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">myRef</span>.<span class="property">current</span>.<span class="property">value</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//展示右侧输入框的数据</span></span><br><span class="line">showData2 = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">myRef2</span>.<span class="property">current</span>.<span class="property">value</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;点击按钮提示数据&quot;</span>/&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.showData&#125;</span>&gt;</span>点我提示左侧的数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onBlur</span>=<span class="string">&#123;this.showData2&#125;</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef2&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;失去焦点提示数据&quot;</span>/&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//渲染组件到页面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> <span class="attr">a</span>=<span class="string">&quot;1&quot;</span> <span class="attr">b</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="4-总结"><a href="#4-总结" class="headerlink" title="4.总结"></a>4.总结</h3><blockquote><p>1.state</p></blockquote><p>state放在类里面，用来数据</p><p><strong>添加数据用：</strong></p><p><code>state = &#123;isHot:false,wind:&#39;微风&#39;&#125;</code></p><p><strong>定义函数用要用赋值语句的形式+箭头函数：</strong></p><p><code>changeWeather = ()=&gt;&#123;</code></p><p>​        <code>const isHot = this.state.isHot</code></p><p>​        <code>this.setState(&#123;isHot:!isHot&#125;) &#125;</code></p><blockquote><p>2.props</p></blockquote><p>props用于向类里面传数据</p><p><strong>进行限制用：</strong></p><p><code>static propTypes = &#123;</code><br>    <code>name:PropTypes.string.isRequired, //限制name必传，且为字符串</code></p><p><code>&#125;</code></p><p><strong>添加默认标签属性值：</strong></p><p><code>static defaultProps = &#123;</code><br>    <code>sex:&#39;男&#39;,//sex默认值为男</code><br><code>&#125;</code></p><blockquote><p>3.refs</p></blockquote><p>refs用于拿到元素节点</p><p><strong>字符串形式ref为：</strong></p><p><code>ref=&quot;input1&quot;</code></p><p><code>const &#123;input1&#125; = this.refs</code></p><p><strong>回调函数形式为：</strong></p><p><code>ref=&#123;c =&gt; this.input1 = c &#125;</code></p><p><code>const &#123;input1&#125; = this</code></p><p><strong>createRef形式为：</strong></p><p><code>myRef = React.createRef()</code></p><p><code>ref=&#123;this.myRef&#125;</code></p><p><code>this.myRef.current.value</code></p><h2 id="3-事件处理"><a href="#3-事件处理" class="headerlink" title="3.事件处理"></a>3.事件处理</h2><blockquote><p>我们拿到元素，要尽量少用ref，因为这样会影响效率。</p><p>如果我们想对<code>触发事件的元素进行数据更改</code>，我们可以通过<code>event.target</code>得到发生事件的DOM元素对象</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line"><span class="comment">//创建组件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//创建ref容器</span></span><br><span class="line">myRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">myRef2 = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//展示左侧输入框的数据</span></span><br><span class="line">showData = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">target</span>);</span><br><span class="line"><span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">myRef</span>.<span class="property">current</span>.<span class="property">value</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//展示右侧输入框的数据</span></span><br><span class="line">showData2 = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="title function_">alert</span>(event.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;点击按钮提示数据&quot;</span>/&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.showData&#125;</span>&gt;</span>点我提示左侧的数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onBlur</span>=<span class="string">&#123;this.showData2&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;失去焦点提示数据&quot;</span>/&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//渲染组件到页面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> <span class="attr">a</span>=<span class="string">&quot;1&quot;</span> <span class="attr">b</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ol><li>React里的事件是自定义(合成)事件，如<code>onBlur</code>，<code>onClick</code>。—————— 为了更好的兼容性</li><li>React中的事件是通过<code>事件委托方式</code>处理的(委托给组件最外层的元素) ————————为了的高效。               如<code>ul</code>中的<code>li</code>，我们都是在<code>ul</code>上添加事件，<code>li</code>会冒泡上来</li></ol><h3 id="1-非受控组件🔥"><a href="#1-非受控组件🔥" class="headerlink" title="1.非受控组件🔥"></a>1.非受控组件🔥</h3><blockquote><p>所有输入类的Dom都是现用现取</p></blockquote><p><strong>我们看下面的代码：</strong></p><ul><li>首先，我们想要<code>onSubmit</code>时，弹出东西来，因为值是在<code>input</code>上的，我们不能用<code>event.target</code></li><li>我们想要拿到两个<code>input</code>的值，就<code>ref</code>了，把<code>this.username</code>和<code>this.password</code>放到实例对象上，我们直接拿来用</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line"><span class="comment">//创建组件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">handleSubmit = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">event.<span class="title function_">preventDefault</span>() <span class="comment">//阻止表单提交</span></span><br><span class="line"><span class="keyword">const</span> &#123;username,password&#125; = <span class="variable language_">this</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">`你输入的用户名是：<span class="subst">$&#123;username.value&#125;</span>,你输入的密码是：<span class="subst">$&#123;password.value&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123; </span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;c</span> =&gt;</span> this.username = c&#125; type=&quot;text&quot; name=&quot;username&quot;/&gt;</span></span><br><span class="line"><span class="language-xml">密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;c</span> =&gt;</span> this.password = c&#125; type=&quot;password&quot; name=&quot;password&quot;/&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//渲染组件</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Login</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="2-受控组件🔥"><a href="#2-受控组件🔥" class="headerlink" title="2.受控组件🔥"></a>2.受控组件🔥</h3><p>所有输入类的Dom都存到state，用的时候在拿出来</p><p><strong>我们看下面的代码：</strong></p><ol><li>我们在<code>state</code>里创建了<code>username</code>和<code>password</code>，</li><li>当<code>input</code>被<code>onChange</code>时，我们调用函数，直接拿到<code>input</code>的<code>event.target.value</code>，保存用户名，密码到state中</li><li>再从state里取出两个</li></ol><blockquote><p>我们推荐使用受控组件，因为没有ref</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line"><span class="comment">// 所有输入类的Dom都存到state，用的时候在拿出来</span></span><br><span class="line"><span class="comment">//创建组件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//初始化状态</span></span><br><span class="line">state = &#123;</span><br><span class="line"><span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>, <span class="comment">//用户名</span></span><br><span class="line"><span class="attr">password</span>:<span class="string">&#x27;&#x27;</span> <span class="comment">//密码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//保存用户名到状态中</span></span><br><span class="line">saveUsername = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">username</span>:event.<span class="property">target</span>.<span class="property">value</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//保存密码到状态中</span></span><br><span class="line">savePassword = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">password</span>:event.<span class="property">target</span>.<span class="property">value</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//表单提交的回调</span></span><br><span class="line">handleSubmit = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">event.<span class="title function_">preventDefault</span>() <span class="comment">//阻止表单提交</span></span><br><span class="line"><span class="keyword">const</span> &#123;username,password&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">`你输入的用户名是：<span class="subst">$&#123;username&#125;</span>,你输入的密码是：<span class="subst">$&#123;password&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.saveUsername&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.savePassword&#125;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//渲染组件</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Login</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="4-函数柯里化"><a href="#4-函数柯里化" class="headerlink" title="4.函数柯里化"></a>4.函数柯里化</h2><blockquote><p>刚才的两个案例，我们注意到我们写了两个函数来更新state里的username和password，这样代码复用性不好</p><p>我们想能不能把写一个函数代替这两个函数，这就引出了函数柯里化</p></blockquote><p><strong>函数的柯里化：</strong></p><p>通过函数调用继续返回函数的方式，实现多次接收参数最后统一处理的函数编码形式。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a</span>)&#123;</span><br><span class="line"><span class="keyword">return</span><span class="function">(<span class="params">b</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function">(<span class="params">c</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> a+b+c</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>我们看看改后的代码：</strong></p><p>saveFormData 代替了这两个</p><ul><li>刚才onChange里的是<code>this.saveUsername</code>，而<code>saveUsername</code>是一个回调函数，我们触发的是一个<code>函数</code></li><li>onChange里的是<code>this.saveFormData(&#39;username&#39;)</code>，而<code>saveFormData(&#39;username&#39;)</code>是一个返回值，我们触发的是<code>undefined</code>，所以我们要返回一个<code>回调函数</code>。</li><li>而this.state[dataType]是一种对象的写法，是让dataType的值填进去</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//初始化状态</span></span><br><span class="line">state = &#123;</span><br><span class="line"><span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>, <span class="comment">//用户名</span></span><br><span class="line"><span class="attr">password</span>:<span class="string">&#x27;&#x27;</span> <span class="comment">//密码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//保存表单数据到状态中</span></span><br><span class="line">saveFormData = <span class="function">(<span class="params">dataType</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;[dataType]:event.<span class="property">target</span>.<span class="property">value</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//表单提交的回调</span></span><br><span class="line">handleSubmit = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">event.<span class="title function_">preventDefault</span>() <span class="comment">//阻止表单提交</span></span><br><span class="line"><span class="keyword">const</span> &#123;username,password&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">`你输入的用户名是：<span class="subst">$&#123;username&#125;</span>,你输入的密码是：<span class="subst">$&#123;password&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.saveFormData(</span>&#x27;<span class="attr">username</span>&#x27;)&#125; <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.saveFormData(</span>&#x27;<span class="attr">password</span>&#x27;)&#125; <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//渲染组件</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Login</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>我们也可以不用柯里化来写</p></blockquote><p><code>onChange=&#123;event =&gt; this.saveFormData(&#39;username&#39;,event) &#125;</code> 直接在这里面写回调函数，我们返回的还是一个函数</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//保存表单数据到状态中</span></span><br><span class="line">saveFormData = <span class="function">(<span class="params">dataType,event</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;[dataType]:event.<span class="property">target</span>.<span class="property">value</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;event</span> =&gt;</span> this.saveFormData(&#x27;username&#x27;,event) &#125; type=&quot;text&quot; name=&quot;username&quot;/&gt;</span></span><br><span class="line"><span class="language-xml">密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;event</span> =&gt;</span> this.saveFormData(&#x27;password&#x27;,event) &#125; type=&quot;password&quot; name=&quot;password&quot;/&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.组件生命周期🔥</p><blockquote><p>这个是组件的生命周期，就是写在类里面的。</p></blockquote><h3 id="1-react生命周期-旧"><a href="#1-react生命周期-旧" class="headerlink" title="1.react生命周期(旧)"></a>1.react生命周期(旧)</h3><p><strong>什么是挂载？</strong></p><p><strong>我们把React.js将<code>组件渲染</code>，并且构造 <code>DOM 元素</code>然后<code>塞入页面</code>的过程称为组件的挂载</strong></p><p>我们分两个阶段来记：</p><ol><li>初始化阶段: 由<code>ReactDOM.render()</code>触发—初次渲染</li></ol><table><thead><tr><th align="center">名称</th><th align="center">作用时间</th></tr></thead><tbody><tr><td align="center">constructor()</td><td align="center">最开始</td></tr><tr><td align="center">componentWillMount()(了解)</td><td align="center">组件将要渲染</td></tr><tr><td align="center">render()</td><td align="center"></td></tr><tr><td align="center">componentDidMount()🔥</td><td align="center">组件被渲染好了</td></tr></tbody></table><p><code>componentDidMount()</code> =====&gt; 常用</p><p>一般在这个钩子中做一些初始化的事，例如：开启定时器、发送网络请求、订阅消息</p><ol start="2"><li>更新阶段: 由组件内部<code>this.setSate()</code>或父组件<code>render</code>触发</li></ol><table><thead><tr><th>名称</th><th>作用时间</th></tr></thead><tbody><tr><td>shouldComponentUpdate()🔥</td><td>组件更新的阀门</td></tr><tr><td>componentWillUpdate()</td><td>组件将要更新</td></tr><tr><td>render() =====&gt; 必须使用的一个</td><td></td></tr><tr><td>componentDidUpdate()</td><td></td></tr></tbody></table><p><code>shouldComponentUpdate()🔥</code></p><p>默认属性是true，如果写出这个要加上return true还是false，判断可不可以更新</p><ol start="3"><li>卸载组件: 由<code>ReactDOM.unmountComponentAtNode()</code>触发</li></ol><p> <code>componentWillUnmount()</code>  =====&gt; 常用</p><p>一般在这个钩子中做一些<strong>收尾</strong>的事，例如：关闭定时器、取消订阅消息</p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F(%E6%97%A7).png" alt="react生命周期(旧)" style="zoom:75%;" /><h3 id="2-react生命周期-新"><a href="#2-react生命周期-新" class="headerlink" title="2.react生命周期(新)"></a>2.react生命周期(新)</h3><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F(%E6%96%B0).png" alt="react生命周期(新)" style="zoom:50%;" /><p><code>componentWillMount()</code></p><p><code>componentWillUpdate()</code></p><p><code>componentWillReceiveProps()</code></p><p>被取消，第一个新增的是</p><p><code>getDerivedStateFromProps</code> ，这个没用什么用</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//若state的值在任何时候都取决于props，那么可以使用getDerivedStateFromProps</span></span><br><span class="line"><span class="keyword">static</span> <span class="title function_">getDerivedStateFromProps</span>(<span class="params">props,state</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getDerivedStateFromProps&#x27;</span>,props,state);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>getSnapshotBeforeUpdate()</code>，这个可以拿到更新之前的数据，<code>Snapshot</code>是快照的意思，把更新前的拍下来</p><h2 id="5-Dom的diff算法"><a href="#5-Dom的diff算法" class="headerlink" title="5.Dom的diff算法"></a>5.Dom的diff算法</h2><blockquote><p>这个东西，一般是在遍历的时候使用。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">persons</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">personObj,index</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;personObj.name&#125;---&#123;personObj.age&#125;<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><p>我们习惯用index，做为li的key值，<code>这样会有很大的隐患</code></p><p><strong>为什么？</strong></p><p><strong>虚拟DOM中key的作用：</strong></p><p>简单的说: key是虚拟DOM对象的<code>标识</code>。</p><p>详细的说: 当状态中的数据发生变化时，react会根据【新数据】生成【新的虚拟DOM】, 随后React进行【新虚拟DOM】与【旧虚拟DOM】的diff比较，比较规则如下：</p><p>a. 旧虚拟DOM中找到了与新虚拟DOM相同的key：</p><p>​     (1).若虚拟DOM中内容没变, 直接使用之前的真实DOM</p><p>​     (2).若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM</p><p> b. 旧虚拟DOM中未找到与新虚拟DOM相同的key</p><p>  根据数据创建新的真实DOM，随后渲染到到页面</p><p><strong>看一个例子：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">state = &#123;</span><br><span class="line"><span class="attr">persons</span>:[</span><br><span class="line">&#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">name</span>:<span class="string">&#x27;小张&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;,</span><br><span class="line">&#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">name</span>:<span class="string">&#x27;小李&#x27;</span>,<span class="attr">age</span>:<span class="number">19</span>&#125;,</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">add = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;persons&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line"><span class="keyword">const</span> p = &#123;<span class="attr">id</span>:persons.<span class="property">length</span>+<span class="number">1</span>,<span class="attr">name</span>:<span class="string">&#x27;小王&#x27;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">persons</span>:[p,...persons]&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>展示人员信息<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.add&#125;</span>&gt;</span>添加一个小王<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>使用index（索引值）作为key<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&#123;</span></span><br><span class="line"><span class="language-xml">this.state.persons.map((personObj,index)=&gt;&#123;</span></span><br><span class="line"><span class="language-xml">return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;personObj.name&#125;---&#123;personObj.age&#125;<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&#125;)</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>初始数据：</p><p> <code>&#123;id:1,name:&#39;小张&#39;,age:18&#125;,</code></p><p> <code>&#123;id:2,name:&#39;小李&#39;,age:19&#125;,</code></p><p>初始的虚拟DOM：</p><p> <code>&lt;li key=0&gt;小张---18&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</code></p><p> <code>&lt;li key=1&gt;小李---19&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</code></p><p>更新后的数据：</p><p><code>&#123;id:3,name:&#39;小王&#39;,age:20&#125;,</code></p><p><code>&#123;id:1,name:&#39;小张&#39;,age:18&#125;,</code></p><p><code>&#123;id:2,name:&#39;小李&#39;,age:19&#125;,</code></p><p>更新数据后的虚拟DOM：</p><p><code>&lt;li key=0&gt;小王---20&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</code></p><p><code>&lt;li key=1&gt;小张---18&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</code></p><p><code>&lt;li key=2&gt;小李---19&lt;input type=&quot;text&quot;/&gt;&lt;/li&gt;</code></p><ol><li>我们更新后，所有的数据key都改变，我们需要都更新Dom，这样影响效率</li><li>输入类的DOM，我们输进去的东西会留在input里，对比两个dom，我们发现<code>&lt;input type=&quot;text&quot;/&gt;</code>是相同的，于是，就直接渲染来用</li></ol><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211202201351230.png" alt="image-20211202201351230"></p><p><strong>用index作为key可能会引发的问题：</strong></p><ol><li>若对数据进行：逆序添加、逆序删除等破坏顺序操作:</li></ol><p>会产生没有必要的真实DOM更新 ==&gt; 界面效果没问题, 但效率低。</p><ol start="2"><li>如果结构中还包含输入类的DOM：</li></ol><p>会产生错误DOM更新 ==&gt; 界面有问题。                       </p><ol start="3"><li>注意！如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，</li></ol><p>仅用于渲染列表用于展示，使用index作为key是没有问题的。   </p><p><strong>开发中如何选择key?:</strong></p><p>  1.最好使用每条数据的唯一标识作为key, 比如id、手机号、身份证号、学号等唯一值。</p><p>  2.如果确定只是简单的展示数据，用index也是可以的。</p><p>2.用index作为key可能会引发的问题：</p><p>若对数据进行：逆序添加、逆序删除等破坏顺序操作:</p><p>会产生没有必要的真实DOM更新 ==&gt; 界面效果没问题, 但效率低。</p><p>如果结构中还包含输入类的DOM：</p><p>会产生错误DOM更新 ==&gt; 界面有问题。                        </p><p>注意！如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，</p><p>仅用于渲染列表用于展示，使用index作为key是没有问题的。</p><p>​          </p>]]></content>
      
      
      <categories>
          
          <category> react &amp; vite </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>剑指offer</title>
      <link href="/2022/07/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%89%91%E6%8C%87offer/"/>
      <url>/2022/07/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%89%91%E6%8C%87offer/</url>
      
        <content type="html"><![CDATA[<h1 id="剑指offer"><a href="#剑指offer" class="headerlink" title="剑指offer"></a>剑指offer</h1><h1 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h1><h2 id="反转链表"><a href="#反转链表" class="headerlink" title="反转链表"></a>反转链表</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用栈</span></span><br><span class="line"><span class="keyword">var</span> reverseList = <span class="keyword">function</span>(<span class="params">head</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> p1 = head;</span><br><span class="line"><span class="keyword">let</span> tmp = [];</span><br><span class="line"><span class="keyword">while</span>(p1)&#123;</span><br><span class="line">tmp.<span class="title function_">push</span>(p1.<span class="property">val</span>);</span><br><span class="line">p1 = p1.<span class="property">next</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p2 = head;</span><br><span class="line"><span class="keyword">while</span>(tmp.<span class="property">length</span>)&#123;</span><br><span class="line">p2.<span class="property">val</span> = tmp.<span class="title function_">pop</span>();</span><br><span class="line">p2 = p2.<span class="property">next</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> head;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//迭代</span></span><br><span class="line"><span class="keyword">var</span> reverseList = <span class="keyword">function</span>(<span class="params">head</span>) &#123;</span><br><span class="line">    <span class="comment">//注意这个算法,反转</span></span><br><span class="line"><span class="keyword">let</span> pre = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> cur = head;</span><br><span class="line"><span class="keyword">while</span>(cur)&#123;</span><br><span class="line">    <span class="keyword">let</span> tmp = cur.<span class="property">next</span>;</span><br><span class="line">    cur.<span class="property">next</span> = pre;</span><br><span class="line">    pre = cur;</span><br><span class="line">    cur = tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pre;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//递归</span></span><br><span class="line"><span class="keyword">var</span> reverseList = <span class="keyword">function</span>(<span class="params">head</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(head == <span class="literal">null</span> || head.<span class="property">next</span> == <span class="literal">null</span>)<span class="comment">//递归终止</span></span><br><span class="line"><span class="keyword">return</span> head;</span><br><span class="line"><span class="keyword">let</span> node = <span class="title function_">reverseList</span>(head.<span class="property">next</span>);<span class="comment">//reverseList(head) = reverseList(head.next)+反转head</span></span><br><span class="line">head.<span class="property">next</span>.<span class="property">next</span> = head;</span><br><span class="line">head.<span class="property">next</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">return</span> node;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="合并两个链表"><a href="#合并两个链表" class="headerlink" title="合并两个链表"></a>合并两个链表</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mergeTwoLists = <span class="keyword">function</span>(<span class="params">l1, l2</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> pre = <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> l = pre;</span><br><span class="line"><span class="keyword">while</span>(l1&amp;&amp;l2)&#123;</span><br><span class="line">    <span class="keyword">if</span>(l1.<span class="property">val</span>&lt;l2.<span class="property">val</span>)&#123;</span><br><span class="line">        l.<span class="property">next</span> = l1;</span><br><span class="line">        l1 = l1.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        l.<span class="property">next</span> = l2;</span><br><span class="line">        l2 = l2.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    l = l.<span class="property">next</span>;</span><br><span class="line">&#125;</span><br><span class="line">l.<span class="property">next</span> = l1?<span class="attr">l1</span>:l2;</span><br><span class="line"><span class="keyword">return</span> pre.<span class="property">next</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="两个链表的第一个公共节点"><a href="#两个链表的第一个公共节点" class="headerlink" title="两个链表的第一个公共节点"></a>两个链表的第一个公共节点</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getIntersectionNode = <span class="keyword">function</span>(<span class="params">headA, headB</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> cur1 = headA;</span><br><span class="line">    <span class="keyword">let</span> cur2 = headB;</span><br><span class="line"><span class="keyword">while</span>(cur1 != cur2)&#123;</span><br><span class="line">    cur1 = cur1?cur1.<span class="property">next</span>:headB;</span><br><span class="line">    cur2 = cur2?cur2.<span class="property">next</span>:headA;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> cur2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="复杂链表的复制"><a href="#复杂链表的复制" class="headerlink" title="复杂链表的复制"></a>复杂链表的复制</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> copyRandomList = <span class="keyword">function</span>(<span class="params">head</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> node = head;</span><br><span class="line">    <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">    <span class="keyword">while</span>(node)&#123;<span class="comment">//哈希表中复制每一个原来链表的值</span></span><br><span class="line">        map.<span class="title function_">set</span>(node,<span class="keyword">new</span> <span class="title class_">Node</span>(node.<span class="property">val</span>));</span><br><span class="line">        node = node.<span class="property">next</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    node = head;</span><br><span class="line">    <span class="keyword">while</span>(node)&#123;<span class="comment">//把哈希表中的node的next，random对应上去</span></span><br><span class="line">        map.<span class="title function_">get</span>(node).<span class="property">next</span> = map.<span class="title function_">get</span>(node.<span class="property">next</span>)?map.<span class="title function_">get</span>(node.<span class="property">next</span>):<span class="literal">null</span>;</span><br><span class="line">        map.<span class="title function_">get</span>(node).<span class="property">random</span> = map.<span class="title function_">get</span>(node.<span class="property">random</span>)?map.<span class="title function_">get</span>(node.<span class="property">random</span>):<span class="literal">null</span>;</span><br><span class="line">        node = node.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> map.<span class="title function_">get</span>(head);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="栈与队列"><a href="#栈与队列" class="headerlink" title="栈与队列"></a>栈与队列</h1><h2 id="用两个栈实现队列"><a href="#用两个栈实现队列" class="headerlink" title="用两个栈实现队列"></a><a href="https://leetcode-cn.com/problems/yong-liang-ge-zhan-shi-xian-dui-lie-lcof/">用两个栈实现队列</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义两个栈</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">CQueue</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">stack1</span> = [];</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">stack2</span> = [];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//向目标队列尾部插入整数，想当于push到一个栈里</span></span><br><span class="line"><span class="title class_">CQueue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">appendTail</span> = <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">stack1</span>.<span class="title function_">push</span>(value);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//若队列中没有元素，deleteHead 操作返回 -1 </span></span><br><span class="line"><span class="comment">//如果没有-1，有stack1，pop搞到第二个中</span></span><br><span class="line"><span class="title class_">CQueue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">deleteHead</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="property">length</span>)&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="variable language_">this</span>.<span class="property">stack1</span>.<span class="property">length</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">stack1</span>.<span class="title function_">pop</span>());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="property">length</span>)</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">let</span> tmp = <span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="title function_">pop</span>();</span><br><span class="line"><span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="包含min函数的栈"><a href="#包含min函数的栈" class="headerlink" title="包含min函数的栈"></a><a href="https://leetcode-cn.com/problems/bao-han-minhan-shu-de-zhan-lcof/">包含min函数的栈</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MinStack</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">stack1</span> = [];</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">stack2</span> = [];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//另外的栈用来存最小的数</span></span><br><span class="line"><span class="title class_">MinStack</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">stack1</span>.<span class="title function_">push</span>(x);</span><br><span class="line"><span class="keyword">if</span>(x&lt;<span class="variable language_">this</span>.<span class="property">stack2</span>[<span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="property">length</span>-<span class="number">1</span>]||!<span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="property">length</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="title function_">push</span>(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">stack2</span>[<span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="property">length</span>-<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MinStack</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">pop</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">stack1</span>.<span class="title function_">pop</span>();</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="title function_">pop</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MinStack</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">top</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">stack1</span>[<span class="variable language_">this</span>.<span class="property">stack1</span>.<span class="property">length</span>-<span class="number">1</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MinStack</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">min</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">stack2</span>[<span class="variable language_">this</span>.<span class="property">stack2</span>.<span class="property">length</span>-<span class="number">1</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="栈的压入、弹出序列"><a href="#栈的压入、弹出序列" class="headerlink" title=" 栈的压入、弹出序列"></a><a href="https://leetcode-cn.com/problems/zhan-de-ya-ru-dan-chu-xu-lie-lcof/"> 栈的压入、弹出序列</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> validateStackSequences = <span class="keyword">function</span>(<span class="params">pushed, popped</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> stack = [];</span><br><span class="line">    <span class="comment">//创建一个辅助栈，把pushed的数push进去，如果和popped的第一个数一样就弹出去</span></span><br><span class="line"><span class="keyword">for</span>(num <span class="keyword">of</span> pushed)&#123;</span><br><span class="line">    stack.<span class="title function_">push</span>(num);</span><br><span class="line"><span class="keyword">while</span>(stack.<span class="property">length</span> &amp;&amp; stack[stack.<span class="property">length</span>-<span class="number">1</span>]==popped[i])&#123;</span><br><span class="line">        stack.<span class="title function_">pop</span>();</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> !stack.<span class="property">length</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="队列的最大值"><a href="#队列的最大值" class="headerlink" title="队列的最大值"></a><a href="https://leetcode-cn.com/problems/dui-lie-de-zui-da-zhi-lcof/">队列的最大值</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MaxQueue</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">queue1</span> = [];</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">queue2</span> = [];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MaxQueue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">max_value</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">queue2</span>.<span class="property">length</span>)</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">queue2</span>[<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">MaxQueue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push_back</span> = <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">queue1</span>.<span class="title function_">push</span>(value);</span><br><span class="line"> <span class="comment">//保持这个队列是单调递减的</span></span><br><span class="line"><span class="keyword">while</span>(<span class="variable language_">this</span>.<span class="property">queue2</span>.<span class="property">length</span>&amp;&amp;<span class="variable language_">this</span>.<span class="property">queue2</span>[<span class="variable language_">this</span>.<span class="property">queue2</span>.<span class="property">length</span>-<span class="number">1</span>]&lt;value)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">queue2</span>.<span class="title function_">pop</span>();</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">queue2</span>.<span class="title function_">push</span>(value);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">MaxQueue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">pop_front</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">queue1</span>.<span class="property">length</span>)</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//和queue1保持一致</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">queue1</span>[<span class="number">0</span>] == <span class="variable language_">this</span>.<span class="property">queue2</span>[<span class="number">0</span>])</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue2</span>.<span class="title function_">shift</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">queue1</span>.<span class="title function_">shift</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="树"><a href="#树" class="headerlink" title="树"></a>树</h1><h2 id="重建二叉树"><a href="#重建二叉树" class="headerlink" title="重建二叉树"></a><a href="https://leetcode-cn.com/problems/zhong-jian-er-cha-shu-lcof/">重建二叉树</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buildTree = <span class="keyword">function</span>(<span class="params">preorder, inorder</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (!preorder.<span class="property">length</span> || !inorder.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">let</span> val = preorder[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> node = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(val);</span><br><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;  <span class="comment">// i有两个含义，一个是根节点在中序遍历结果中的下标，另一个是当前左子树的节点个数</span></span><br><span class="line"><span class="keyword">for</span>(;i&lt;inorder.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(inorder[i] == val)</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">// slice方法是左闭右开的</span></span><br><span class="line">  node.<span class="property">left</span> = <span class="title function_">buildTree</span>(preorder.<span class="title function_">slice</span>(<span class="number">1</span>, i + <span class="number">1</span>), inorder.<span class="title function_">slice</span>(<span class="number">0</span>, i));</span><br><span class="line">  node.<span class="property">right</span> = <span class="title function_">buildTree</span>(preorder.<span class="title function_">slice</span>(i + <span class="number">1</span>), inorder.<span class="title function_">slice</span>(i + <span class="number">1</span>));</span><br><span class="line"><span class="keyword">return</span> node;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="树的子结构"><a href="#树的子结构" class="headerlink" title="树的子结构"></a><a href="https://leetcode-cn.com/problems/shu-de-zi-jie-gou-lcof/">树的子结构</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isSubStructure = <span class="keyword">function</span>(<span class="params">A, B</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(!B||!A)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_">ismatch</span>(A,B) &amp;&amp; A.<span class="property">val</span> == B.<span class="property">val</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="title function_">isSubStructure</span>(A.<span class="property">left</span>,B)||<span class="title function_">isSubStructure</span>(A.<span class="property">right</span>,B));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="comment">//函数判断，A，B是不是一样</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ismatch</span>(<span class="params">A,B</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(!B)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(B&amp;&amp;!A)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span>(A.<span class="property">val</span> == B.<span class="property">val</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="title function_">ismatch</span>(A.<span class="property">left</span>,B.<span class="property">left</span>) &amp;&amp; <span class="title function_">ismatch</span>(A.<span class="property">right</span>,B.<span class="property">right</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="二叉树的镜像"><a href="#二叉树的镜像" class="headerlink" title="二叉树的镜像"></a><a href="https://leetcode-cn.com/problems/er-cha-shu-de-jing-xiang-lcof/">二叉树的镜像</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mirrorTree = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> tmp = [root];</span><br><span class="line"><span class="keyword">while</span>(tmp.<span class="property">length</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> node = tmp.<span class="title function_">shift</span>();</span><br><span class="line">    node.<span class="property">left</span> &amp;&amp; tmp.<span class="title function_">push</span>(node.<span class="property">left</span>);</span><br><span class="line">    node.<span class="property">right</span> &amp;&amp; tmp.<span class="title function_">push</span>(node.<span class="property">right</span>);</span><br><span class="line">    [node.<span class="property">left</span>,node.<span class="property">right</span>] = [node.<span class="property">right</span>,node.<span class="property">left</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="对称的二叉树"><a href="#对称的二叉树" class="headerlink" title="对称的二叉树"></a><a href="https://leetcode-cn.com/problems/dui-cheng-de-er-cha-shu-lcof/">对称的二叉树</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isSymmetric = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(!root)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="title function_">ismatch</span>(root.<span class="property">left</span>,root.<span class="property">right</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ismatch</span>(<span class="params">A,B</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!B&amp;&amp;!A)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(!B&amp;&amp;A)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(!A&amp;&amp;B)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//这句话让递归对象变成了A.left,B.right</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_">ismatch</span>(A.<span class="property">left</span>,B.<span class="property">right</span>) || !<span class="title function_">ismatch</span>(A.<span class="property">right</span>,B.<span class="property">left</span>))</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> A.<span class="property">val</span> == B.<span class="property">val</span> ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="从上到下打印二叉树-II"><a href="#从上到下打印二叉树-II" class="headerlink" title="从上到下打印二叉树 II"></a><a href="https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-ii-lcof/">从上到下打印二叉树 II</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> levelOrder = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!root)</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line"><span class="keyword">let</span> res = [];</span><br><span class="line"><span class="keyword">let</span> tmp = [root];</span><br><span class="line"><span class="keyword">while</span>(tmp.<span class="property">length</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> m = [];</span><br><span class="line">    <span class="keyword">let</span> n = tmp.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">     <span class="keyword">let</span> node = tmp.<span class="title function_">shift</span>();</span><br><span class="line">     node.<span class="property">left</span> &amp;&amp; tmp.<span class="title function_">push</span>(node.<span class="property">left</span>);</span><br><span class="line">     node.<span class="property">right</span> &amp;&amp; tmp.<span class="title function_">push</span>(node.<span class="property">right</span>);</span><br><span class="line">     m.<span class="title function_">push</span>(node.<span class="property">val</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    res.<span class="title function_">push</span>(m);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="二叉搜索树的后序遍历序列"><a href="#二叉搜索树的后序遍历序列" class="headerlink" title="二叉搜索树的后序遍历序列"></a><a href="https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-hou-xu-bian-li-xu-lie-lcof/">二叉搜索树的后序遍历序列</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> verifyPostorder = <span class="keyword">function</span>(<span class="params">postorder</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> n = postorder.<span class="property">length</span>;</span><br><span class="line"><span class="keyword">let</span> root = postorder[n-<span class="number">1</span>];</span><br><span class="line"><span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span>(n&lt;=<span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(postorder[i]&gt;=root)&#123;</span><br><span class="line">        index = i;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = index;i&lt;n-<span class="number">1</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(postorder[i]&lt;root)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> left = postorder.<span class="title function_">slice</span>(<span class="number">0</span>,index);</span><br><span class="line"><span class="keyword">let</span> right = postorder.<span class="title function_">slice</span>(index,n-<span class="number">1</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="title function_">verifyPostorder</span>(left)&amp;&amp;<span class="title function_">verifyPostorder</span>(right);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//也可以把这个单独封装成一个递归函数，就不需要slice来判断左右区间了</span></span><br><span class="line"><span class="keyword">var</span> verifyPostorder = <span class="keyword">function</span>(<span class="params">postorder</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="title function_">recur</span>(<span class="number">0</span>,postorder.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//判断postorder的i到j区间是不是二叉搜索树</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">recur</span>(<span class="params">i,j</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&gt;=j)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> p = i;</span><br><span class="line"><span class="keyword">while</span>(postorder[p]&lt;postorder[j]) p++;</span><br><span class="line"><span class="comment">//标记分隔左右区间</span></span><br><span class="line"><span class="keyword">let</span> m = p;</span><br><span class="line"><span class="keyword">while</span>(postorder[p]&gt;postorder[j]) p++;</span><br><span class="line"><span class="comment">//判断是否满足，以及他的左右子树</span></span><br><span class="line"><span class="keyword">return</span> p == j&amp;&amp;<span class="title function_">recur</span>(i,m-<span class="number">1</span>)&amp;&amp;<span class="title function_">recur</span>(m,j-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//做一个递减辅助栈</span></span><br><span class="line"><span class="keyword">var</span> verifyPostorder = <span class="keyword">function</span>(<span class="params">postorder</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> root = <span class="title class_">Number</span>.<span class="property">MAX_VALUE</span></span><br><span class="line">    <span class="keyword">var</span> stack = [] </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = postorder.<span class="property">length</span> - <span class="number">1</span>;i &gt;= <span class="number">0</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(postorder[i] &gt; root) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">while</span>(stack.<span class="property">length</span> &amp;&amp; postorder[i] &lt; stack[stack.<span class="property">length</span> -<span class="number">1</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            root = stack.<span class="title function_">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        stack.<span class="title function_">push</span>(postorder[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    re</span><br><span class="line">    </span><br><span class="line">    turn <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="二叉树中和为某一值的路径"><a href="#二叉树中和为某一值的路径" class="headerlink" title="二叉树中和为某一值的路径"></a><a href="https://leetcode-cn.com/problems/er-cha-shu-zhong-he-wei-mou-yi-zhi-de-lu-jing-lcof/">二叉树中和为某一值的路径</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pathSum = <span class="keyword">function</span> (<span class="params">root, sum</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) <span class="keyword">return</span> [];</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">dfs</span> = (<span class="params">root, sum,path</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 到了叶子节点并且当前节点的值跟剩余sum相等，则推入结果集中</span></span><br><span class="line">     path.<span class="title function_">push</span>(root.<span class="property">val</span>);</span><br><span class="line">    sum =  sum - root.<span class="property">val</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> === sum &amp;&amp; !root.<span class="property">left</span> &amp;&amp; !root.<span class="property">right</span>) &#123;</span><br><span class="line">      res.<span class="title function_">push</span>([...path]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 递归的去左右子树当中查找路径</span></span><br><span class="line">    <span class="keyword">if</span> (root.<span class="property">left</span>) <span class="title function_">dfs</span>(root.<span class="property">left</span>,sum,[...path]);</span><br><span class="line">    <span class="keyword">if</span> (root.<span class="property">right</span>) <span class="title function_">dfs</span>(root.<span class="property">right</span>, sum,[...path]);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">dfs</span>(root, sum, []);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="二叉搜索树与双向链表"><a href="#二叉搜索树与双向链表" class="headerlink" title="二叉搜索树与双向链表"></a><a href="https://leetcode-cn.com/problems/er-cha-sou-suo-shu-yu-shuang-xiang-lian-biao-lcof/">二叉搜索树与双向链表</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> treeToDoublyList = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> head = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> pre = head;</span><br><span class="line"><span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">   <span class="title function_">dfs</span>(root);</span><br><span class="line">  </span><br><span class="line">    head.<span class="property">left</span> = pre;</span><br><span class="line">    pre.<span class="property">right</span> = head;</span><br><span class="line">   <span class="keyword">return</span> head;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dfs</span>(<span class="params">cur</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(!cur) <span class="keyword">return</span>;</span><br><span class="line"><span class="title function_">dfs</span>(cur.<span class="property">left</span>);<span class="comment">//这里cur会一直走到左边最小的数</span></span><br><span class="line">    <span class="comment">//如果pre是null，我们建立head节点，不是，就是建立双向链表</span></span><br><span class="line">  <span class="keyword">if</span>(pre)&#123;</span><br><span class="line">         pre.<span class="property">right</span> = cur;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">     head = cur;</span><br><span class="line">        cur.<span class="property">left</span> = pre;</span><br><span class="line">        pre = cur;</span><br><span class="line"><span class="title function_">dfs</span>(cur.<span class="property">right</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="二叉树的深度"><a href="#二叉树的深度" class="headerlink" title="二叉树的深度"></a><a href="https://leetcode-cn.com/problems/er-cha-shu-de-shen-du-lcof/">二叉树的深度</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxDepth = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="title function_">maxDepth</span>(root.<span class="property">left</span>),<span class="title function_">maxDepth</span>(root.<span class="property">right</span>))+<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个方法是递归回溯</span></span><br><span class="line"><span class="keyword">var</span> maxDepth = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span>,deep = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">dfs</span> = (<span class="params">root</span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">deep++;</span><br><span class="line">max = <span class="title class_">Math</span>.<span class="title function_">max</span>(max,deep);</span><br><span class="line"><span class="title function_">dfs</span>(root.<span class="property">left</span>);</span><br><span class="line"><span class="title function_">dfs</span>(root.<span class="property">right</span>);</span><br><span class="line">deep--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">dfs</span>(root);</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="平衡二叉树"><a href="#平衡二叉树" class="headerlink" title="平衡二叉树"></a><a href="https://leetcode-cn.com/problems/ping-heng-er-cha-shu-lcof/">平衡二叉树</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isBalanced = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line">    <span class="comment">//这里是求每一棵树的深度</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deep</span>(<span class="params">root</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="title function_">deep</span>(root.<span class="property">right</span>),<span class="title function_">deep</span>(root.<span class="property">left</span>))+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title function_">deep</span>(root.<span class="property">left</span>)-<span class="title function_">deep</span>(root.<span class="property">right</span>))&gt;<span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="title function_">isBalanced</span>(root.<span class="property">left</span>) &amp;&amp; <span class="title function_">isBalanced</span>(root.<span class="property">right</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isBalanced = <span class="keyword">function</span>(<span class="params">root</span>) &#123; </span><br><span class="line">   <span class="keyword">const</span> <span class="title function_">dfs</span> = (<span class="params">root</span>)=&gt;&#123;</span><br><span class="line">     <span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">let</span> left =  <span class="title function_">dfs</span>(root.<span class="property">left</span>)+<span class="number">1</span>;</span><br><span class="line">     <span class="keyword">let</span> right = <span class="title function_">dfs</span>(root.<span class="property">right</span>)+<span class="number">1</span>;</span><br><span class="line">       <span class="comment">//left-right就是dfs(root.left)-dfs(root.right)，左子树的深度减右子树</span></span><br><span class="line">     <span class="keyword">if</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(left-right)&gt;<span class="number">1</span>)&#123;</span><br><span class="line">         ans = <span class="literal">false</span>;</span><br><span class="line">     &#125;</span><br><span class="line">       <span class="comment">//返回的是以root为根的数的深度</span></span><br><span class="line">     <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(left,right);</span><br><span class="line">   &#125;;</span><br><span class="line"><span class="keyword">let</span> ans = <span class="literal">true</span>;</span><br><span class="line"><span class="title function_">dfs</span>(root);</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="二叉搜索树的最近公共祖先"><a href="#二叉搜索树的最近公共祖先" class="headerlink" title="二叉搜索树的最近公共祖先"></a><a href="https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-zui-jin-gong-gong-zu-xian-lcof/">二叉搜索树的最近公共祖先</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lowestCommonAncestor = <span class="keyword">function</span>(<span class="params">root, p, q</span>) &#123;  </span><br><span class="line">    <span class="keyword">if</span>(p.<span class="property">val</span> &gt; root.<span class="property">val</span> &amp;&amp; q.<span class="property">val</span> &gt; root.<span class="property">val</span> ) </span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">lowestCommonAncestor</span>(root.<span class="property">right</span>, p, q);</span><br><span class="line">    <span class="keyword">if</span>(q.<span class="property">val</span> &lt; root.<span class="property">val</span> &amp;&amp; p.<span class="property">val</span> &lt; root.<span class="property">val</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">lowestCommonAncestor</span>(root.<span class="property">left</span>, p, q);</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="🔥二叉树的最近公共祖先"><a href="#🔥二叉树的最近公共祖先" class="headerlink" title="🔥二叉树的最近公共祖先"></a>🔥<a href="https://leetcode-cn.com/problems/er-cha-shu-de-zui-jin-gong-gong-zu-xian-lcof/">二叉树的最近公共祖先</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lowestCommonAncestor = <span class="keyword">function</span>(<span class="params">root, p, q</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!root||root == p||root == q) <span class="keyword">return</span> root;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="title function_">lowestCommonAncestor</span>(root.<span class="property">left</span>,p,q);</span><br><span class="line">    <span class="keyword">let</span> right = <span class="title function_">lowestCommonAncestor</span>(root.<span class="property">right</span>,p,q);</span><br><span class="line">    <span class="keyword">if</span>(!left) <span class="keyword">return</span> right;</span><br><span class="line">    <span class="keyword">if</span>(!right) <span class="keyword">return</span> left;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="🔥序列化二叉树"><a href="#🔥序列化二叉树" class="headerlink" title="🔥序列化二叉树"></a>🔥<a href="https://leetcode-cn.com/problems/xu-lie-hua-er-cha-shu-lcof/">序列化二叉树</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//序列化DFS（递归）</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">serialize</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;                  <span class="comment">// 遍历到 null 节点</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;X&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> left = <span class="title function_">serialize</span>(root.<span class="property">left</span>);   <span class="comment">// 左子树的序列化结果</span></span><br><span class="line">  <span class="keyword">const</span> right = <span class="title function_">serialize</span>(root.<span class="property">right</span>); <span class="comment">// 右子树的序列化结果</span></span><br><span class="line">  <span class="keyword">return</span> root.<span class="property">val</span> + <span class="string">&#x27;,&#x27;</span> + left + <span class="string">&#x27;,&#x27;</span>+ right; <span class="comment">// 按  根,左,右  拼接字符串</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//反序列化</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">deserialize</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> list = data.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>);   <span class="comment">// split成数组</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">buildTree</span> = (<span class="params">list</span>) =&gt; &#123;   <span class="comment">// 基于list构建当前子树</span></span><br><span class="line">    <span class="keyword">const</span> rootVal = list.<span class="title function_">shift</span>(); <span class="comment">// 弹出首项，获取它的“数据”</span></span><br><span class="line">    <span class="keyword">if</span> (rootVal == <span class="string">&quot;X&quot;</span>) &#123;         <span class="comment">// 是X，返回null节点</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> root = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(rootVal); <span class="comment">// 不是X，则创建节点</span></span><br><span class="line">    root.<span class="property">left</span> = <span class="title function_">buildTree</span>(list);        <span class="comment">// 递归构建左子树</span></span><br><span class="line">    root.<span class="property">right</span> = <span class="title function_">buildTree</span>(list);       <span class="comment">// 递归构建右子树</span></span><br><span class="line">    <span class="keyword">return</span> root;                        <span class="comment">// 返回当前构建好的root</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">buildTree</span>(list); <span class="comment">// 构建的入口</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p> BFS 解法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//序列化的代码</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">serialize</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> queue = [root];</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line">  <span class="keyword">while</span> (queue.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> node = queue.<span class="title function_">shift</span>(); <span class="comment">// 考察出列的节点</span></span><br><span class="line">    <span class="keyword">if</span> (node) &#123;                 <span class="comment">// 是真实节点，带出子节点入列</span></span><br><span class="line">      res.<span class="title function_">push</span>(node.<span class="property">val</span>);       <span class="comment">// 节点值推入res</span></span><br><span class="line">      queue.<span class="title function_">push</span>(node.<span class="property">left</span>);    <span class="comment">// 子节点入列，不管是不是null节点都入列</span></span><br><span class="line">      queue.<span class="title function_">push</span>(node.<span class="property">right</span>);    </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;                    <span class="comment">// 是null节点，没有子节点入列</span></span><br><span class="line">      res.<span class="title function_">push</span>(<span class="string">&#x27;X&#x27;</span>);            <span class="comment">// X 推入res</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">join</span>(<span class="string">&#x27;,&#x27;</span>);  <span class="comment">// 转成字符串</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//反序列化 代码</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">deserialize</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (data == <span class="string">&#x27;X&#x27;</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> list = data.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>);  <span class="comment">// 序列化字符串split成数组</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> root = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(list[<span class="number">0</span>]); <span class="comment">// 获取首项，构建根节点</span></span><br><span class="line">  <span class="keyword">const</span> queue = [root];          <span class="comment">// 根节点推入队列</span></span><br><span class="line">  <span class="keyword">let</span> cursor = <span class="number">1</span>;                <span class="comment">// 初始指向list第二项</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (cursor &lt; list.<span class="property">length</span>) &#123; <span class="comment">// 指针越界，即扫完了序列化字符串</span></span><br><span class="line">    <span class="keyword">const</span> node = queue.<span class="title function_">shift</span>();  <span class="comment">// 考察出列的节点</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> leftVal = list[cursor];      <span class="comment">// 它的左儿子的值</span></span><br><span class="line">    <span class="keyword">const</span> rightVal = list[cursor + <span class="number">1</span>]; <span class="comment">// 它的右儿子的值</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (leftVal != <span class="string">&#x27;X&#x27;</span>) &#123;              <span class="comment">// 是真实节点</span></span><br><span class="line">      <span class="keyword">const</span> leftNode = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(leftVal); <span class="comment">// 创建左儿子节点</span></span><br><span class="line">      node.<span class="property">left</span> = leftNode;                   <span class="comment">// 认父亲</span></span><br><span class="line">      queue.<span class="title function_">push</span>(leftNode);                   <span class="comment">// 自己也是父亲，入列</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (rightVal != <span class="string">&#x27;X&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> rightNode = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(rightVal);</span><br><span class="line">      node.<span class="property">right</span> = rightNode;</span><br><span class="line">      queue.<span class="title function_">push</span>(rightNode);</span><br><span class="line">    &#125;</span><br><span class="line">    cursor += <span class="number">2</span>; <span class="comment">// 一次考察一对儿子，指针加2</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> root;  <span class="comment">// BFS结束，构建结束，返回根节点</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="查找算法"><a href="#查找算法" class="headerlink" title="查找算法"></a>查找算法</h1><h2 id="数组中重复的数字"><a href="#数组中重复的数字" class="headerlink" title="数组中重复的数字"></a><a href="https://leetcode-cn.com/problems/shu-zu-zhong-zhong-fu-de-shu-zi-lcof/">数组中重复的数字</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> findRepeatNumber = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> num <span class="keyword">of</span> nums)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!map[num])&#123;</span><br><span class="line">        map[num] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="在排序数组中查找数字-I"><a href="#在排序数组中查找数字-I" class="headerlink" title=" 在排序数组中查找数字 I"></a><a href="https://leetcode-cn.com/problems/zai-pai-xu-shu-zu-zhong-cha-zhao-shu-zi-lcof/"> 在排序数组中查找数字 I</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> search = <span class="keyword">function</span>(<span class="params">nums, target</span>) &#123;</span><br><span class="line">    <span class="comment">//这是一个音有序的数组</span></span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>,j = nums.<span class="property">length</span>-<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span>(i&lt;=j)&#123;</span><br><span class="line">       <span class="keyword">let</span> mid = <span class="built_in">parseInt</span>(i+(j-i)/<span class="number">2</span>);</span><br><span class="line">      <span class="comment">//找到第一个比target要大的数i</span></span><br><span class="line">        <span class="keyword">if</span>(nums[mid]&lt;=target)</span><br><span class="line">            i=mid+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            j=mid-<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">let</span> right = i;</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(i&lt;=j)&#123;</span><br><span class="line">       <span class="keyword">let</span> mid = <span class="built_in">parseInt</span>(i+(j-i)/<span class="number">2</span>);</span><br><span class="line">      <span class="comment">//找到第一个比target要小的数j</span></span><br><span class="line">        <span class="keyword">if</span>(nums[mid]&lt;target)</span><br><span class="line">            i=mid+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            j=mid-<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> left = j;</span><br><span class="line">    <span class="keyword">return</span> right-left-<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="0～n-1中缺失的数字"><a href="#0～n-1中缺失的数字" class="headerlink" title="0～n-1中缺失的数字"></a><a href="https://leetcode-cn.com/problems/que-shi-de-shu-zi-lcof/">0～n-1中缺失的数字</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> missingNumber = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> l = <span class="number">0</span>, r = nums.<span class="property">length</span> - <span class="number">1</span>, m</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        m = (l + r)&gt;&gt;<span class="number">1</span></span><br><span class="line">        nums[m] === m </span><br><span class="line">        ? l = m + <span class="number">1</span></span><br><span class="line">        : r = m - <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="二维数组中的查找"><a href="#二维数组中的查找" class="headerlink" title="二维数组中的查找"></a><a href="https://leetcode-cn.com/problems/er-wei-shu-zu-zhong-de-cha-zhao-lcof/">二维数组中的查找</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> findNumberIn2DArray = <span class="keyword">function</span>(<span class="params">matrix, target</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!matrix.<span class="property">length</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">let</span> x = matrix.<span class="property">length</span>,y = matrix[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span> ; j = y-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; x &amp;&amp; j &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(matrix[i][j] == target)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(matrix[i][j] &lt; target)</span><br><span class="line">        i++;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        j--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode-cn.com/problems/di-yi-ge-zhi-chu-xian-yi-ci-de-zi-fu-lcof/">第一个只出现一次的字符</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstUniqChar = <span class="keyword">function</span>(<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!s.<span class="property">length</span>) <span class="keyword">return</span> <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="keyword">for</span>(item <span class="keyword">of</span> s)&#123;</span><br><span class="line">    map.<span class="title function_">set</span>(item,(map.<span class="title function_">get</span>(item)||<span class="number">0</span>)+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(item <span class="keyword">of</span> s)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(map.<span class="title function_">get</span>(item) == <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h1><h2 id="斐波那契数列"><a href="#斐波那契数列" class="headerlink" title="斐波那契数列"></a><a href="https://leetcode-cn.com/problems/fei-bo-na-qi-shu-lie-lcof/">斐波那契数列</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fib = <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> dp = [];</span><br><span class="line">     dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">     dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">2</span>;i &lt;= n;i++)&#123;</span><br><span class="line">dp[i] = dp[i-<span class="number">1</span>] + dp[i-<span class="number">2</span>];</span><br><span class="line">dp[i] = dp[i] % <span class="number">1000000007</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> right;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fib = <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> l = <span class="number">0</span>,r = <span class="number">0</span>,sum = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">2</span>;i &lt;= n;i++)&#123;</span><br><span class="line">l = r;</span><br><span class="line">r = sum;</span><br><span class="line">sum = (l + r) % <span class="number">1000000007</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="股票的最大利润"><a href="#股票的最大利润" class="headerlink" title="股票的最大利润"></a><a href="https://leetcode-cn.com/problems/gu-piao-de-zui-da-li-run-lcof/">股票的最大利润</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> minnum = prices[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(num <span class="keyword">of</span> prices)&#123;</span><br><span class="line"><span class="keyword">if</span>(num &lt; minnum) minnum = num;</span><br><span class="line"><span class="keyword">if</span>(max &lt; (num - minnum)) max = num - minnum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="连续子数组的最大和"><a href="#连续子数组的最大和" class="headerlink" title=" 连续子数组的最大和"></a><a href="https://leetcode-cn.com/problems/lian-xu-zi-shu-zu-de-zui-da-he-lcof/"> 连续子数组的最大和</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxSubArray = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> res = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">//用前面的数来更新后面的，num[i]表示到i最大的字数组相加</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>;i &lt; nums.<span class="property">length</span>;i++)&#123;</span><br><span class="line">nums[i] = <span class="title class_">Math</span>.<span class="title function_">max</span>(nums[i],nums[i] + nums[i-<span class="number">1</span>]);</span><br><span class="line">res = <span class="title class_">Math</span>.<span class="title function_">max</span>(nums[i],res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="礼物的最大价值"><a href="#礼物的最大价值" class="headerlink" title="礼物的最大价值"></a><a href="https://leetcode-cn.com/problems/li-wu-de-zui-da-jie-zhi-lcof/">礼物的最大价值</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxValue = <span class="keyword">function</span>(<span class="params">grid</span>) &#123;</span><br><span class="line"><span class="keyword">const</span> x = grid.<span class="property">length</span>, y = grid[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>;i &lt; x;i++)&#123;</span><br><span class="line">grid[i][<span class="number">0</span>] += grid[i-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">1</span>;j &lt; y;j++)&#123;</span><br><span class="line">    grid[<span class="number">0</span>][j] += grid[<span class="number">0</span>][j-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>;i &lt; x;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">1</span>;j &lt; y;j++)&#123;</span><br><span class="line">    grid[i][j] += <span class="title class_">Math</span>.<span class="title function_">max</span>(grid[i][j-<span class="number">1</span>],grid[i-<span class="number">1</span>][j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> grid[x-<span class="number">1</span>][y-<span class="number">1</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="把数字翻译成字符串"><a href="#把数字翻译成字符串" class="headerlink" title="把数字翻译成字符串"></a><a href="https://leetcode-cn.com/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof/">把数字翻译成字符串</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> translateNum = <span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = num.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">let</span> dp = [];</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">2</span>;i &lt;= arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">let</span> tmp = arr.<span class="title function_">slice</span>(i-<span class="number">2</span>,i)</span><br><span class="line">        <span class="keyword">if</span>(tmp &lt;= <span class="number">25</span> &amp;&amp; tmp &gt;= <span class="number">10</span>)&#123;</span><br><span class="line">            dp[i] = dp[i-<span class="number">1</span>] + dp[i-<span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        dp[i] = dp[i-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[arr.<span class="property">length</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="最长不含重复字符的子字符串"><a href="#最长不含重复字符的子字符串" class="headerlink" title=" 最长不含重复字符的子字符串"></a><a href="https://leetcode-cn.com/problems/zui-chang-bu-han-zhong-fu-zi-fu-de-zi-zi-fu-chuan-lcof/"> 最长不含重复字符的子字符串</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lengthOfLongestSubstring = <span class="keyword">function</span>(<span class="params">s</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> res = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i &lt; s.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> tmp =arr.<span class="title function_">indexOf</span>(s[i]) </span><br><span class="line">    <span class="keyword">if</span>(tmp != -<span class="number">1</span>)</span><br><span class="line"> arr.<span class="title function_">splice</span>(<span class="number">0</span>,tmp + <span class="number">1</span>);</span><br><span class="line">        arr.<span class="title function_">push</span>(s[i]);</span><br><span class="line">        res = <span class="title class_">Math</span>.<span class="title function_">max</span>(arr.<span class="property">length</span>,res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="🔥正则表达式匹配"><a href="#🔥正则表达式匹配" class="headerlink" title="🔥正则表达式匹配"></a>🔥<a href="https://leetcode-cn.com/problems/zheng-ze-biao-da-shi-pi-pei-lcof/">正则表达式匹配</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isMatch = <span class="keyword">function</span>(<span class="params">s, p</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> m = s.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">let</span> n = p.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">let</span> dp = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123;<span class="attr">length</span>: m+<span class="number">1</span>&#125;,<span class="function"><span class="params">x</span>=&gt;</span><span class="keyword">new</span> <span class="title class_">Array</span>(n+<span class="number">1</span>).<span class="title function_">fill</span>(<span class="literal">false</span>));</span><br><span class="line">    <span class="comment">//这个代码还可以这样写</span></span><br><span class="line">     <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="title class_">Array</span>(m + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="literal">false</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="title class_">Array</span>(n + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="literal">false</span>));</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= m;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(p[j-<span class="number">1</span>] === <span class="string">&quot;*&quot;</span>) &#123;</span><br><span class="line">                dp[i][j] = dp[i][j-<span class="number">2</span>];</span><br><span class="line">                <span class="keyword">if</span>(<span class="title function_">match</span>(s,p,i,j-<span class="number">1</span>)) &#123;</span><br><span class="line">                    dp[i][j] = dp[i][j] || dp[i-<span class="number">1</span>][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="title function_">match</span>(s,p,i,j)) &#123;</span><br><span class="line">                    dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m][n];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">match</span> = (<span class="params">s,p,i,j</span>)=&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(i === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(p[j-<span class="number">1</span>] === <span class="string">&#x27;.&#x27;</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> s[i-<span class="number">1</span>] === p[j-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="丑数"><a href="#丑数" class="headerlink" title="丑数"></a><a href="https://leetcode-cn.com/problems/chou-shu-lcof/">丑数</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//我们把只包含质因子 2、3 和 5 的数称作丑数（Ugly Number</span></span><br><span class="line"><span class="keyword">var</span> nthUglyNumber = <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">0</span>, b = <span class="number">0</span>,c = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> dp = [];</span><br><span class="line"><span class="keyword">let</span> i;</span><br><span class="line">dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//我们只用三个数来存2,3,5不同的后续增量</span></span><br><span class="line"><span class="keyword">for</span>( i = <span class="number">1</span>;i &lt; n;i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> n1 = dp[a]*<span class="number">2</span>,n2 = dp[b]*<span class="number">3</span>,n3 = dp[c]*<span class="number">5</span>;</span><br><span class="line">     dp[i] = <span class="title class_">Math</span>.<span class="title function_">min</span>(n1,<span class="title class_">Math</span>.<span class="title function_">min</span>(n2,n3));</span><br><span class="line">    <span class="keyword">if</span>(dp[i] == n1) a++;</span><br><span class="line">    <span class="keyword">if</span>(dp[i] == n2) b++;</span><br><span class="line">    <span class="keyword">if</span>(dp[i] == n3) c++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dp[n-<span class="number">1</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="🔥n个骰子的点数"><a href="#🔥n个骰子的点数" class="headerlink" title="🔥n个骰子的点数"></a>🔥<a href="https://leetcode-cn.com/problems/nge-tou-zi-de-dian-shu-lcof/">n个骰子的点数</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dicesProbability = <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> dp = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">6</span>*n).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>;i &lt;= <span class="number">6</span>;i++)&#123;</span><br><span class="line">    dp[i] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">2</span>;i &lt;= n;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">6</span>*i ;j &gt;= i;j--)&#123;</span><br><span class="line">dp[j] = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> cur = <span class="number">1</span>;cur &lt;= <span class="number">6</span>;cur++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(j-cur &lt; i-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    dp[j] += dp[j-cur];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> res = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = n;i &lt;= <span class="number">6</span>*n;i++)&#123;</span><br><span class="line">    res.<span class="title function_">push</span>(dp[i]/<span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">6</span>,n));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>二叉树</title>
      <link href="/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
      <url>/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="树的存储结构"><a href="#树的存储结构" class="headerlink" title="树的存储结构"></a>树的存储结构</h1><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/93145f9ad1d0407c9ebbf69661332134.png" alt="img"></p><h2 id="双亲表示法-顺序存储"><a href="#双亲表示法-顺序存储" class="headerlink" title="双亲表示法(顺序存储)"></a>双亲表示法(顺序存储)</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/30d45c60ea844f35a0924817399c1f4d.png" alt="img"></p><p>若我们要新增数据元素，无需按逻辑上的次序存储，只需要存储其父节点的数组下标即可</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/868eca1c0ff540c2aa368a777000c9b2.png" alt="img"></p><h2 id="孩子兄弟表示法-链式存储-🔥"><a href="#孩子兄弟表示法-链式存储-🔥" class="headerlink" title="孩子兄弟表示法(链式存储)🔥"></a>孩子兄弟表示法(链式存储)🔥</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/28ba9fed59e54e5e99116dff91671757.png" alt="img"></p><ul><li><p>左指针指向第一个孩子结点，右指针指向兄弟结点</p></li><li><p>A 是根节点，A的第一个孩子是B，所以A左连接B，B的兄弟结点是C，所以让B右连接C，D是C的兄弟结点，所以让C右连接D。</p></li><li><p>B的第一个孩子是E，所以让B左连接E，E的兄弟结点是F，所以让E右连接F。</p></li><li><p>E的第一个孩子是K，所以让E左连接K</p></li><li><p>C的第一个孩子是G，所以让C左连接G</p></li><li><p>D的第一个孩子是H，所以让D左连接H，I、J都是是H的兄弟结点，所以让H右连接I、J<br><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/00008d6df29245b3a700f13e09fddc2b.png" alt="img"></p></li></ul><p>森林和二叉树的转换</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/4ef45bf6314f40fa9b6b44cf56b1bc1e.png" alt="img"></p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/9478025d3696471cb6ddbd1878a68c06.png" alt="img"></p><h1 id="二叉排序树（BST）"><a href="#二叉排序树（BST）" class="headerlink" title="二叉排序树（BST）"></a>二叉排序树（BST）</h1><h2 id="二叉排序树的查找"><a href="#二叉排序树的查找" class="headerlink" title="二叉排序树的查找"></a>二叉排序树的查找</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/faac0b58a2c343f6bf73b48843bd606f.png" alt="img"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 二叉排序树结点</span></span><br><span class="line"> <span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span> &#123;</span></span><br><span class="line">     <span class="type">int</span> key;</span><br><span class="line">     TreeNode *left;</span><br><span class="line">     TreeNode *right;</span><br><span class="line">     TreeNode(<span class="type">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) &#123;&#125;</span><br><span class="line"> &#125;;</span><br><span class="line">TreeNode* root = new TreeNode(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在二叉排序树中查找值为key的结点(传入根节点指针和值)</span></span><br><span class="line">TreeNode* <span class="title function_">BST_Search</span><span class="params">(TreeNode*T,<span class="type">int</span> key)</span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(T!=<span class="literal">NULL</span>&amp;&amp;key!=T-&gt;key)&#123;<span class="comment">// 若树空或等于根结点,则结束循环</span></span><br><span class="line">        <span class="keyword">if</span>(key&lt;T-&gt;key)&#123;</span><br><span class="line">            T=T-&gt;lchild;<span class="comment">// 小于,则在左子树上查找</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            T=T-&gt;rchild;<span class="comment">// 大于,则在右子树上查找</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> T;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在二叉排序树中查找值为key的结点(递归实现)</span></span><br><span class="line">TreeNode* <span class="title function_">BST_Search</span><span class="params">(TreeNode*T,<span class="type">int</span> key)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T==<span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>; <span class="comment">// 查找失败</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(key==T-&gt;key)&#123;</span><br><span class="line">        <span class="keyword">return</span> T;<span class="comment">// 查找成功</span></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(key&lt;T-&gt;key)&#123;</span><br><span class="line">        <span class="keyword">return</span> BSTSearch(T-&gt;lchild,key);<span class="comment">// 在左子树中找</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BSTSearch(T-&gt;rchild,key);<span class="comment">// 在右子树中找</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二叉排序树的插入"><a href="#二叉排序树的插入" class="headerlink" title="二叉排序树的插入"></a>二叉排序树的插入</h2><p>若原二叉排序树为空，则直接插入结点；否则，若关键字k小于根节点值，则插入到左子树，若关键字k大于根节点值，则插入到右子树。</p><blockquote><p>注意：新插入的结点一定是叶子结点</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在二叉排序树插入关键字为k的新结点(递归实现)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">BST_Insert</span><span class="params">(TreeNode* T,<span class="type">int</span> k)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T==<span class="literal">NULL</span>)&#123;<span class="comment">// 原树为空,新插入的结点为根结点</span></span><br><span class="line">        T=(TreeNode)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(TreeNode));</span><br><span class="line">        T-&gt;key=k;</span><br><span class="line">        T-&gt;lchild=T-&gt;rchild=<span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;<span class="comment">// 返回1,插入成功</span></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(k==T-&gt;key)&#123;<span class="comment">// 树中存在相同关键字的结点,插入失败</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;        </span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(k&lt;T-&gt;key)&#123;<span class="comment">// 插入到T的左子树</span></span><br><span class="line">        <span class="keyword">return</span> BST_Insert(T-&gt;lchild,k);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;<span class="comment">// 插入到T的右子树</span></span><br><span class="line">        <span class="keyword">return</span> BST_Insert(T-&gt;rchild,k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二叉排序树的删除"><a href="#二叉排序树的删除" class="headerlink" title="二叉排序树的删除"></a>二叉排序树的删除</h2><ol><li><p>若被删除结点z是<code>叶子结点</code>，则直接删除，不会破坏二叉排序树的性质</p></li><li><p>若结点z只有<code>一棵左子树或右子树</code>，则让z的子树成为z父结点的子树，替代z的位置</p></li><li><p>若结点z有左、右两棵子树</p><p>删除有两种方式:</p><p>第一种我们可以使用结点z的<code>直接后继</code>替代z(也就是z结点右子树中第一个被中序遍历的结点(或者说右子树中值最小的结点)){z的后继:<code>z的右子树中最左下结点</code>(该结点一定没有左子树)}</p><p>第二种我们可以使用结点z的直接前驱替代z(也就是z结点左子树中最后一个被中序遍历的结点(或者说左子树中值最大的结点)){z的前驱:<code>z的左子树中最右下结点</code>（该结点一定没有右子树}</p></li></ol><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/0af5a19a804f46adbf1beefe5180f080.png" alt="img"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/02ab2aaba7834b3a91d8e64cc55a6148.png" alt="img"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/59fe490daa3b45b6862a6eae1bf0ec86.png" alt="img"></p><h1 id="平衡二叉树"><a href="#平衡二叉树" class="headerlink" title="平衡二叉树"></a>平衡二叉树</h1><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/bbb944fa48664ea3bfb1b7143301b6a3.png" alt="img"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/98f5047630c94ca29f4fbe996b42b69c.png" alt="img"></p><p>最小不平衡子树：例如上图的 66 和 70 结点都不平衡，我们要找所含结点最小的，70有3个结点，66有5个结点，所以我们将70为根节点组成的子树称为最小不平衡子树。</p><h2 id="王卓平衡二叉树的调整"><a href="#王卓平衡二叉树的调整" class="headerlink" title="王卓平衡二叉树的调整"></a>王卓平衡二叉树的调整</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/39c1dec1b058451780ea0a9316e2a627.png" alt="img"></p><h1 id="哈夫曼树"><a href="#哈夫曼树" class="headerlink" title="哈夫曼树"></a>哈夫曼树</h1><h2 id="带权路径长度"><a href="#带权路径长度" class="headerlink" title="带权路径长度"></a>带权路径长度</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/f4938b54294e4564849dca4b2a5ebf39.png" alt="img"></p><p>结点的权：有某种现实含义的数值(如：表示结点的重要性等)</p><p>结点的带权路径长度：<code>从树的根到该结点的路径长度(经过的边数)与该结点上权值的乘积</code>。</p><ul><li>例如上图结点为3的带权路径长度 = 3 × 3 = 9</li></ul><p>树的带权路径长度：树中所有叶结点的带权路径长度之和</p><h2 id="哈夫曼树的定义"><a href="#哈夫曼树的定义" class="headerlink" title="哈夫曼树的定义"></a>哈夫曼树的定义</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/324ba529f727475d8ae68a5c26202b46.png" alt="img"></p><h2 id="哈夫曼树的构造"><a href="#哈夫曼树的构造" class="headerlink" title="哈夫曼树的构造"></a>哈夫曼树的构造</h2><p>1.构造森林全是根，2.选用两小造新树，3.删除两小添新人，4.重复2、3剩单根</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/27f0a4eaff544c958dba2635f0848b0c.png" alt="img"></p><h1 id="2-3-树"><a href="#2-3-树" class="headerlink" title="2-3 树"></a>2-3 树</h1><p>2-3 树本质也是一种<code>平衡搜索树</code>，但 2-3 树已经不是一棵二叉树了，因为 2-3 树允许存在 <code>3</code> 这种节点，3- 节点中可以存放两个元素，并且可以有三个子节点。</p><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><ol><li>在树上，最多有两个关键字，最多有三个孩子</li><li>2-3树是一种绝对平衡树</li></ol><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211141431636.png" alt="image-20211211141431636"></p><p>2-3树中的2代表一个节点有两个孩子，3代表一个节点有三个孩子。</p><h2 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h2><p>依次增加1，2，3，4，5，6，7这7个元素</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/6/4/16b22b34fee5909b~tplv-t2oaga2asx-watermark.awebp" alt="image"></p><p>小的数在左边，大的在右边，三个数一起时，中间的数上升</p><h2 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h2><p>2-3树的查找和二分搜索树类似，不过因为一个节点可能有2个元素，需要对这两个元素进行比较，分别前往这个节点的左，中，右孩子继续进行比较</p><h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><p>2-3树的删除稍微复杂一点，删除可分为两大情况，就是删除叶子节点和非叶子节点。</p><h3 id="删除叶子节点"><a href="#删除叶子节点" class="headerlink" title="删除叶子节点"></a>删除叶子节点</h3><h4 id="叶子节点为3节点"><a href="#叶子节点为3节点" class="headerlink" title="叶子节点为3节点"></a>叶子节点为3节点</h4><p>直接删除即可。如下图12可直接删除。</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a857435e5040f~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-24.png"></p><p>删除后，3节点成2节点。</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a857435e0ae22~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-25.png"></p><h4 id="叶子节点为2节点"><a href="#叶子节点为2节点" class="headerlink" title="叶子节点为2节点"></a>叶子节点为2节点</h4><p>这里需要区分临近兄弟节点的类型。先将节点删除。</p><p>1.兄弟节点为3节点 此时被删除后，节点会为空。通过向兄弟节点借一个最近的键值，然后再调整该节点与父节点的值。</p><p>比如在这颗树中删除7。</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a85743df5eced~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-26.png"></p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a8574488ae9bf~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-27.png"></p><p>调整大小，8，9交换，满足定义</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a85744b0c9c66~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-28.png"></p><p>2.兄弟节点为2节点，这时需要判断父节点类型</p><p>   a. 父节点为3节点 此时兄弟节点不够借，父节点降元，从3节点变成2节点，与兄弟节点合并。</p><p>比如从这棵树中删除36。</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a8574500b6147~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-29.png"></p><p>30与18合并，3节点变成2节点，删除完成</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a8574513dfc39~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-30.png"></p><p>b. 父节点为2节点 将父节点和兄弟节点合并，形成新的节点，这是把新节点当做当前节点，不断套用上述几种情况进行调整，直至平衡。这种情况下，若根节点是2节点，树的高度会减1。</p><blockquote><p> 从这颗树中删除12</p></blockquote><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a85745d0b80c3~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-31.png"></p><p>1.兄弟节点和父节点都为2节点，进行合并。此时新节点为[8,9]。</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a85745d681544~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-32.png"></p><p>2.当前节点(<code>[8,9]</code>)的父节点和兄弟节点都为2节点，还需进行合并（即节点<code>2</code>,<code>5</code>合并）合并完成如下图。</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a85746df352cd~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-34.png"></p><blockquote><p>从这棵树中删除30</p></blockquote><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a8574726add10~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-35.png"></p><p>1.节点30的父节点和兄弟节点为2节点，进行合并，此时[22,25]为新节点。</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a85747eb2213c~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-36.png"></p><p>2.把[22,25]看作当前节点，由于其兄弟节点为2节点，父节点为3节点，套用<code>2.a</code>中的情况，父节点降元，调整完成。</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a85748651da35~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-37.png"></p><h3 id="待删除的值在父节点"><a href="#待删除的值在父节点" class="headerlink" title="待删除的值在父节点"></a>待删除的值在父节点</h3><p>将该节点与其<code>前驱</code>或<code>后继</code>节点交换，然后删除交换后的叶子节点，此时转换成上一种情况的处理。</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a8574803c047e~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-38.png"></p><blockquote><p>从这颗树中删除节点5。</p></blockquote><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a85748a1cac78~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-39.png"></p><p>由于5的后继节点是7，先将值进行交换。这时候目的就是删除叶子<code>节点5</code>，于是可以转换成<code>其父节点和兄弟节点都为2节点</code>的情况进行调整。</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/1/168a85748df1fc70~tplv-t2oaga2asx-watermark.awebp" alt="QQ20190108-40.png"></p><h1 id="B树"><a href="#B树" class="headerlink" title="B树"></a>B树</h1><p>B树也称B-树,它是一颗多路平衡查找树。m阶B数的定义：</p><ol><li>树根要么没有孩子，要么至少有<code>两个孩子</code>。</li><li>除了树根和叶子节点，其他节点的孩子数目<code>不小于m/2的向上取整数</code>，不超过<code>m</code>。(2-3数就是一个三阶B树)</li><li>根节点的<strong>关键字</strong>数量范围：<code>1 &lt;= k &lt;= m-1</code>，非根节点的<strong>关键字</strong>数量范围：<code>m/2 &lt;= k &lt;= m-1</code>。</li><li>有k个关键字(关键字按递增次序排列)的非叶结点恰好有k+1个孩子。</li></ol><h2 id="B树有什么用？"><a href="#B树有什么用？" class="headerlink" title="B树有什么用？"></a>B树有什么用？</h2><p>B树大多用在磁盘上用于查找磁盘的地址。因为磁盘会有大量的数据，有可能没有办法一次将需要的所有数据加入到内存中，所以只能逐一加载磁盘页，每个磁盘页就对应一个节点，而对于B树来说，B树很好的将树的高度降低了，这样就会减少IO查询次数，虽然一次加载到内存的数据变多了，但速度绝对快于AVL或是红黑树的。</p><h1 id="B-树"><a href="#B-树" class="headerlink" title="B+树"></a>B+树</h1><p>B+树的性质：</p><ol><li>B树有的三条性质它都有</li><li>所有数据记录的信息都只存放在叶子节点中</li><li>我们在下面的B+树是，最多有4个孩子，数据记录为3~5。</li></ol><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211151748947.png" alt="image-20211211151748947"></p><h2 id="插入-1"><a href="#插入-1" class="headerlink" title="插入"></a>插入</h2><h3 id="数据记录没有超过上限"><a href="#数据记录没有超过上限" class="headerlink" title="数据记录没有超过上限"></a>数据记录没有超过上限</h3><blockquote><p>将45插入到这个4阶B+树</p></blockquote><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211152120528.png" alt="image-20211211152120528"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211152532632.png" alt="image-20211211152532632"></p><h3 id="数据记录超过上限"><a href="#数据记录超过上限" class="headerlink" title="数据记录超过上限"></a>数据记录超过上限</h3><blockquote><p>将26插入到这个4阶B+树</p></blockquote><p><img src="C:\Users\11793\AppData\Roaming\Typora\typora-user-images\image-20211211152605297.png" alt="image-20211211152605297"></p><p>将叶子结点分裂成等大的两部分</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211152721156.png" alt="image-20211211152721156"></p><p>增加连边，增加父节点关键字</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211152808339.png" alt="image-20211211152808339"></p><h3 id="连续分裂"><a href="#连续分裂" class="headerlink" title="连续分裂"></a>连续分裂</h3><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211153016789.png" alt="image-20211211153016789"></p><p>分裂叶子节点后，还要分裂父亲节点</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211153050928.png" alt="image-20211211153050928"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211153211891.png" alt="image-20211211153211891"></p><h2 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h2><h3 id="数据记录没有小于下限"><a href="#数据记录没有小于下限" class="headerlink" title="数据记录没有小于下限"></a>数据记录没有小于下限</h3><p><img src="C:\Users\11793\AppData\Roaming\Typora\typora-user-images\image-20211211155019985.png"></p><p><img src="C:\Users\11793\AppData\Roaming\Typora\typora-user-images\image-20211211155004952.png" alt="image-20211211155004952"></p><h3 id="数据记录小于下限"><a href="#数据记录小于下限" class="headerlink" title="数据记录小于下限"></a>数据记录小于下限</h3><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211155123123.png" alt="image-20211211155123123"></p><p>删除12后，数据记录小于下限</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211155135690.png" alt="image-20211211155135690"></p><p>从兄弟节点要一个数据过来</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211155156406.png" alt="image-20211211155156406"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211155205235.png" alt="image-20211211155205235"></p><p>删除33后，想要从兄弟节点要一个过来，发现兄弟节点也不行。就把他们两个合并。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211155220377.png" alt="image-20211211155220377"></p><p>最少要有两个孩子，在要一个叶子节点过来。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211211155233958.png" alt="image-20211211155233958"></p>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>栈</title>
      <link href="/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%88/"/>
      <url>/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<h1 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h1><p>栈：栈是<strong>只允许在一端进行插入(进栈)或删除操作(出栈)的线性表</strong></p><p><code>后进先出</code></p><p><strong>栈顶</strong>：允许插入和删除的一端</p><p><strong>栈底</strong>：不允许插入和删除的一端</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/1c580243a845455897c5404a89a6550b.png" alt="img"></p><p>我们c++提供了栈的相关方法</p><p><code>#include&lt;stack&gt;</code>就可以使用了</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始栈</span></span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="type">int</span>&gt; mystack;</span><br><span class="line"><span class="comment">//入栈</span></span><br><span class="line">mystack.push(<span class="number">10</span>);</span><br><span class="line">mystack.push(<span class="number">20</span>);</span><br><span class="line"><span class="comment">//出栈</span></span><br><span class="line">mystack.pop();</span><br><span class="line"><span class="comment">//栈的元素个数</span></span><br><span class="line">mystack.size()</span><br><span class="line"><span class="comment">//取栈顶元素</span></span><br><span class="line"><span class="type">int</span> number = mystack.top();</span><br></pre></td></tr></table></figure><h1 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h1><p><code>先进先出</code></p><p><code>#include&lt;queue&gt;</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">queue</span>&lt;<span class="type">int</span>&gt; myqueue;</span><br><span class="line">myqueue.size();</span><br><span class="line">myqueue.push(i);</span><br><span class="line">myqueue.empty();</span><br><span class="line">myqueue.pop();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>树</title>
      <link href="/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91/"/>
      <url>/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="树"><a href="#树" class="headerlink" title="树"></a>树</h1><h2 id="树的基本概念"><a href="#树的基本概念" class="headerlink" title="树的基本概念"></a>树的基本概念</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/b3f7147f34954012b4f8f693cce4dd9a.png" alt="img"><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/b9689d00d15347fea42ca70e5c6d78ce.png" alt="img"></p><h2 id="树的属性"><a href="#树的属性" class="headerlink" title="树的属性"></a>树的属性</h2><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/0762c28e06834f54b5d2606d947ea0fc.png" alt="img" style="zoom:75%;" /><p>结点的层次(深度)：默认从 <code>0</code> 开始</p><ul><li>深度为 0 是 A 结点</li><li>深度为 1 是 B、C、D结点</li></ul><p>树的高度：默认从 <code>1</code> 开始</p><ul><li>该树的高度为4</li></ul><p>结点的度：有几个孩子(分支) 就有几个度</p><ul><li>结点 B 有两个分支，结点 B 的度为 2</li><li>结点 C 有一个分支，结点 C 的度为 1</li></ul><p>树的度：各结点的度的最大值。也就是树中分支数最多</p><ul><li>结点 A 、D 的分支最多为 3 ，所以树的度为 3</li></ul><blockquote><p>注意：叶子结点的度 = 0，非叶子结点的度 &gt; 0</p></blockquote><h2 id="树的常考性质"><a href="#树的常考性质" class="headerlink" title="树的常考性质"></a>树的常考性质</h2><p>1.<strong>结点数 = 分支数 + 1</strong></p><p>结点的度 = 结点有几个孩子(分支)</p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/c8a5bce304a34d049a2a209bf60555b1.png" alt="img" style="zoom:50%;" /><p>2.<strong>度为 m 的树和 m 叉树</strong></p><ul><li>度为 m 的树：各结点的度的最大值为 m</li><li>m 叉树：每个结点最多只能有 m 个孩子的树</li></ul><table><thead><tr><th align="center">度为 m 的树</th><th align="center">m 叉树</th></tr></thead><tbody><tr><td align="center">任意结点的度 ≤ m(最多m个孩子)</td><td align="center">任意结点的度 ≤ m(最多 m 个孩子)</td></tr><tr><td align="center">至少有一个结点度 = m (有m个孩子)</td><td align="center">允许所有结点的度都 &lt; m</td></tr><tr><td align="center">一定是非空树，至少有 m+1 个结点</td><td align="center">可以是空树</td></tr></tbody></table><p>3.<strong>度为 m 的树第 i 层至多有 mi-1 个结点( i ≥ 1)</strong></p><p><strong>m 叉树第 i 层至多有 mi-1 个结点( i≥1)</strong></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/45d50ce039dd4f869c325b84e6a689ec.png" alt="img"></p><p>4.<strong>高度为 h 的 m 叉树至多有 (mh -1)/(m-1) 个结点</strong></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/063a1042df1b4b4f899b0196a6833436.png" alt="img"></p><p>5.<strong>高度为 h 的 m 叉树至少有 h 个结点</strong></p><p><strong>高度为 h、度为 m 的树至少有 h+m-1 个结点</strong></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/6f49b7774fad492cb60171fbaa60dcde.png" alt="img"></p><p>6.</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/832397f4b11743af9a84078dbad4f424.png" alt="![img](https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/832397f4b11743af9a84078dbad4f424.png)"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/2521da65e14d4ceea18d2f3a7de12ede.png" alt="img"></p><h1 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h1><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/62e5cc02d12a459397c45e5bf0009a35.png" alt="img"></p><h2 id="满二叉树"><a href="#满二叉树" class="headerlink" title="满二叉树"></a>满二叉树</h2><p>满二叉树：<strong>一棵高度为 h，且含有 2的h次方 -1 个结点的二叉树</strong></p><p>所有结点都填满</p><p><code>按层序从 1 开始编号，结点 i 的左孩子为 2i，右孩子为 2i+1，结点 i 的父节点为 [ i / 2] (如果有的话) [ i / 2 ]向下取整</code></p><h2 id="完全二叉树"><a href="#完全二叉树" class="headerlink" title="完全二叉树"></a>完全二叉树</h2><p>完全二叉树：只有最后一层的叶节点没有满，其他节点都是满的。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/80ce4e2c769f43c6a107f4894e5db6f9.png" alt="img"></p><ol><li>只有一个度为 1 的结点</li><li>按层序从 1 开始编号，结点 i 的左孩子为 2i，右孩子为 2i+1，结点 i 的父节点为 [ i / 2] (如果有的话) <strong>[ i / 2 ]向下取整</strong></li><li>i ≤ [ n / 2] 为分支结点, i &gt; [n / 2] 为叶子结点 <strong>[n / 2 ] 向下取整</strong></li><li>在完全二叉树中,如果某结点只有一个孩子,那么一定是左孩子</li></ol><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/bda57f091a6c4d2a9444574bb649b9d6.png" alt="img"></p><h2 id="二叉排序树"><a href="#二叉排序树" class="headerlink" title="二叉排序树"></a>二叉排序树</h2><ul><li>左子树上所有结点的关键字均<strong>小于根结点</strong>的关键字</li><li>右子树上所有结点的关键字均<strong>大于根节点</strong>的关键字</li></ul><h2 id="平衡二叉树"><a href="#平衡二叉树" class="headerlink" title="平衡二叉树"></a>平衡二叉树</h2><p>平衡二叉树：树上任一结点的<strong>左子树</strong>和<strong>右子树</strong>的<strong>深度之差不超过 1</strong></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/94d16352f2f2478f84bdf5d3f5589a72.png" alt="img"></p><h2 id="二叉树的定义"><a href="#二叉树的定义" class="headerlink" title="二叉树的定义"></a>二叉树的定义</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span> &#123;</span></span><br><span class="line">     <span class="type">int</span> val;</span><br><span class="line">     TreeNode *left;</span><br><span class="line">     TreeNode *right;</span><br><span class="line">     TreeNode(<span class="type">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) &#123;&#125;</span><br><span class="line"> &#125;;</span><br><span class="line">TreeNode* root = new TreeNode(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span>&#123;</span></span><br><span class="line">    ElemType data;<span class="comment">// 数据域</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">BiTNode</span> *<span class="title">lchild</span>,*<span class="title">rchild</span>;</span> <span class="comment">// 左、右孩子指针</span></span><br><span class="line">&#125;TreeNode；</span><br><span class="line">   <span class="comment">// 定义一棵空树</span></span><br><span class="line">BiTree root = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">// 插入根节点</span></span><br><span class="line">root = (BiTree) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(BiTNode));</span><br><span class="line">root-&gt;data = &#123;<span class="number">1</span>&#125;;<span class="comment">// 根节点数据域为 1</span></span><br><span class="line">root-&gt;lchild = <span class="literal">NULL</span>;<span class="comment">// 根节点左孩子指向NULL</span></span><br><span class="line">root-&gt;rchild = <span class="literal">NULL</span>;<span class="comment">// 根节点右孩子指向NULL</span></span><br></pre></td></tr></table></figure><h1 id="二叉树的遍历算法"><a href="#二叉树的遍历算法" class="headerlink" title="二叉树的遍历算法"></a>二叉树的遍历算法</h1><h2 id="先序遍历"><a href="#先序遍历" class="headerlink" title="先序遍历"></a>先序遍历</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 访问一个结点:打印字符</span></span><br><span class="line">Void <span class="title function_">visit</span><span class="params">(BiTNode *p)</span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,p-&gt;data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 先序遍历</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">PreOrder</span><span class="params">(BiTree T)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        visit(T);<span class="comment">// 访问根结点</span></span><br><span class="line">        PreOrder(T-&gt;lchild);<span class="comment">// 递归遍历左子树</span></span><br><span class="line">        PreOrder(T-&gt;rchild);<span class="comment">// 递归遍历右子树</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>中序遍历</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 中序遍历</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InOrder</span><span class="params">(BiTree T)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        InOrder(T -&gt; lchild);<span class="comment">// 递归遍历左子树</span></span><br><span class="line">        visit(T);<span class="comment">// 访问根节点</span></span><br><span class="line">        InOrder(T -&gt; rchild);<span class="comment">// 递归遍历右子树</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="后序遍历"><a href="#后序遍历" class="headerlink" title="后序遍历"></a>后序遍历</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 后序遍历</span></span><br><span class="line">Void <span class="title function_">PostOrder</span><span class="params">(BiTree T)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        PostOrder(T-&gt;lchild);<span class="comment">// 递归遍历左子树</span></span><br><span class="line">        PostOrder(T-&gt;rchild);<span class="comment">// 递归遍历右子树</span></span><br><span class="line">        visit(T);<span class="comment">// 访问根节点</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="求树的深度"><a href="#求树的深度" class="headerlink" title="求树的深度"></a>求树的深度</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 求树的深度</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">treeDepth</span><span class="params">(BiTree T)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T == <span class="literal">NULL</span>)&#123;<span class="comment">// 树是空树</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">// 深度为0</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="type">int</span> l = treeDepth(T-&gt;lchild);<span class="comment">// 求左子树的深度</span></span><br><span class="line">        <span class="type">int</span> r = treeDepth(T-&gt;rchild);<span class="comment">// 求右子树的深度</span></span><br><span class="line">        <span class="comment">// 树的深度 = Max(左子树深度,右子树深度)+1</span></span><br><span class="line">        <span class="keyword">return</span> l&gt;r ? l+<span class="number">1</span> : r+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="层序遍历"><a href="#层序遍历" class="headerlink" title="层序遍历"></a>层序遍历</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="type">void</span> <span class="title function_">LevelOrder</span><span class="params">(BiTree T)</span>&#123;</span><br><span class="line">    <span class="comment">//用一个辅助队列</span></span><br><span class="line">    <span class="built_in">queue</span>&lt;BiTree&gt;arr;</span><br><span class="line">     <span class="comment">//这个用来记录结果</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;res;</span><br><span class="line">    arr.push(T);</span><br><span class="line">     res.push(T.val)</span><br><span class="line">        <span class="keyword">while</span>(!arr.empty())&#123;</span><br><span class="line">            BiTree tmp = arr.top();</span><br><span class="line">            arr.pop();</span><br><span class="line">            <span class="keyword">if</span>(tmp-&gt;left!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">                arr.push(tmp-&gt;left);</span><br><span class="line">                 res.push(tmp-&gt;left-&gt;val);</span><br><span class="line">            &#125;</span><br><span class="line">               <span class="keyword">if</span>(tmp-&gt;right!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">                arr.push(tmp-&gt;right);</span><br><span class="line">                 res.push(tmp-&gt;right-&gt;val);</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="重建二叉树"><a href="#重建二叉树" class="headerlink" title="重建二叉树"></a>重建二叉树</h1><h2 id="前序-中序遍历序列"><a href="#前序-中序遍历序列" class="headerlink" title="前序+中序遍历序列"></a>前序+中序遍历序列</h2><ul><li>已知前序遍历序列为：A D B C E</li><li>已知中序遍历序列为：B D C A E</li></ul><p>由中序遍历序列首先推出根节点为 A ，(B D C) 均为左子树，E 为右子树。如下图</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/bbbe252d3a334dbb8f2adc863b746846.png" alt="img"></p><p>由前序遍历序列推出左子树的根节点为 D，则由中序序列推出结点 D 的左子树为 B，右子树为 C</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/4b86cb69ef32431796d2802d358a2d65.png" alt="img"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> preorder = [<span class="number">3</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">15</span>,<span class="number">7</span>], inorder = [<span class="number">9</span>,<span class="number">3</span>,<span class="number">15</span>,<span class="number">20</span>,<span class="number">7</span>]</span><br><span class="line">     </span><br><span class="line">var buildTree = function (preorder, inorder) &#123; </span><br><span class="line">   <span class="keyword">if</span> (!preorder.length || !inorder.length) &#123;</span><br><span class="line">    <span class="keyword">return</span> null;</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="comment">//首先找根节点</span></span><br><span class="line">     <span class="type">const</span> rootVal = preorder[<span class="number">0</span>];</span><br><span class="line"><span class="type">const</span> node = new TreeNode(rootVal);</span><br><span class="line">let i = <span class="number">0</span>; <span class="comment">// i有两个含义，一个是根节点在中序遍历结果中的下标，另一个是当前左子树的节点个数</span></span><br><span class="line"><span class="comment">//在中序遍历中找到根的下标</span></span><br><span class="line">  <span class="keyword">for</span> (; i &lt; inorder.length; ++i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (inorder[i] === rootVal) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// slice方法是左闭右开的</span></span><br><span class="line">  node.left = buildTree(preorder.slice(<span class="number">1</span>, i + <span class="number">1</span>), inorder.slice(<span class="number">0</span>, i));</span><br><span class="line">  node.right = buildTree(preorder.slice(i + <span class="number">1</span>), inorder.slice(i + <span class="number">1</span>));</span><br><span class="line">  <span class="keyword">return</span> node;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><h2 id="后序-中序遍历序列"><a href="#后序-中序遍历序列" class="headerlink" title="后序+中序遍历序列"></a>后序+中序遍历序列</h2><p>已知后序遍历序列：E F A H C I G B D (左 右 根)</p><p>已知中序遍历序列：E A F D H C B G I (左 根 右)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> buildTree = <span class="keyword">function</span> (<span class="params">inorder, postorder</span>) &#123; </span><br><span class="line">   <span class="keyword">if</span> (!postorder.<span class="property">length</span> || !inorder.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="keyword">const</span> n = postorder.<span class="title function_">size</span>();</span><br><span class="line"> <span class="comment">//首先找根节点</span></span><br><span class="line">     <span class="keyword">const</span> rootVal = postorder[n-<span class="number">1</span>];</span><br><span class="line"><span class="keyword">const</span> node = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(rootVal);</span><br><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>; <span class="comment">// i有两个含义，一个是根节点在中序遍历结果中的下标，另一个是当前左子树的节点个数</span></span><br><span class="line"><span class="comment">//在中序遍历中找到根的下标</span></span><br><span class="line">  <span class="keyword">for</span> (; i &lt; inorder.<span class="property">length</span>; ++i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (inorder[i] === rootVal) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// slice方法是左闭右开的</span></span><br><span class="line">  node.<span class="property">left</span> = <span class="title function_">buildTree</span>(inorder.<span class="title function_">slice</span>(<span class="number">0</span>, i), postorder.<span class="title function_">slice</span>(<span class="number">0</span>,i-<span class="number">1</span>));</span><br><span class="line">  node.<span class="property">right</span> = <span class="title function_">buildTree</span>(inorder.<span class="title function_">slice</span>(i + <span class="number">1</span>), postorder.<span class="title function_">slice</span>(i,n-<span class="number">1</span>));</span><br><span class="line">  <span class="keyword">return</span> node;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>线性表</title>
      <link href="/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%80%A7%E8%A1%A8/"/>
      <url>/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%80%A7%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h1><p>算法的时间复杂度：<code>算法时间开销T(n)与问题规模n</code>的关系（T代表”time”）</p><ol><li>只考虑阶数高的部分</li><li><strong>加法规则：多项相加，只保留最高阶的项，且系数变为1</strong></li><li><strong>乘法规则：多项相乘，都保留</strong></li></ol><table><thead><tr><th align="center">表达式</th><th align="center">时间复杂度</th></tr></thead><tbody><tr><td align="center">T1(n) = 3n+3</td><td align="center">T1(n) = O(n)</td></tr><tr><td align="center">T2(n) = n² + 3n + 1000</td><td align="center">T2(n) = O(n²)</td></tr><tr><td align="center">T3(n) = n3 + n2 + 99999</td><td align="center">T3(n) = O(n3)</td></tr><tr><td align="center">T4(n) = n3 + n2log2n</td><td align="center">T4(n) = O( n3 )</td></tr></tbody></table><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/e6c52e9dc91c49bfbabae62097f22706.png" alt="img"></p><ul><li>记忆口诀：<strong>常对幂指阶</strong></li><li><strong>常数级 &lt; 对数级 &lt; 幂数级 &lt; 指数级 &lt; 阶乘级的</strong></li></ul><h1 id="顺序表"><a href="#顺序表" class="headerlink" title="顺序表"></a>顺序表</h1><p><strong>定义</strong>：把用<code>顺序存储</code>的方式实现的线性表叫做顺序表</p><p><strong>顺序存储</strong>：把<code>逻辑上相邻</code>的元素存储在<code>物理位置</code>上也相邻的存储单元中，元素之间的关系由存储单元的邻接关系来体现</p><p><strong>顺序表有两种实现方式</strong>：<code>静态分配</code>实现和<code>动态分配</code>实现</p><h2 id="静态分配实现"><a href="#静态分配实现" class="headerlink" title="静态分配实现"></a>静态分配实现</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10;<span class="comment">//定义最大长度</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>&#123;</span><br><span class="line">    ElemType data[MaxSize];<span class="comment">//用静态的&quot;数组&quot;存放数据元素，ElemType是数据类型，如int，string</span></span><br><span class="line">    <span class="type">int</span> length;<span class="comment">//顺序表的当前长度</span></span><br><span class="line">&#125;SqList;<span class="comment">//顺序表的类型定义(静态分配方式)</span></span><br></pre></td></tr></table></figure><h3 id="初始化顺序表"><a href="#初始化顺序表" class="headerlink" title="初始化顺序表"></a>初始化顺序表</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10;<span class="comment">//定义最大长度</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    ElemType data[MaxSize];<span class="comment">//用静态的&quot;数组&quot;存放数据元素</span></span><br><span class="line">    <span class="type">int</span> length;<span class="comment">//顺序表的当前长度</span></span><br><span class="line">&#125;SqList;<span class="comment">//顺序表的类型定义</span></span><br><span class="line"><span class="comment">// 基本操作-初始化一个顺序表</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitList</span><span class="params">(SqList &amp;L)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;MaxSize;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        L.data[i] = <span class="number">0</span>;<span class="comment">//将所有数据元素设置为默认初始值</span></span><br><span class="line">    &#125;</span><br><span class="line">    L.length = <span class="number">0</span>;<span class="comment">//顺序表初始长度为0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    SqList L; <span class="comment">//声明一个顺序表</span></span><br><span class="line">    InitList(L);<span class="comment">//初始化顺序表</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="动态分配实现"><a href="#动态分配实现" class="headerlink" title="动态分配实现"></a>动态分配实现</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10;<span class="comment">//定义最大长度</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    ElemType *data;<span class="comment">//指针指向第一个数据元素</span></span><br><span class="line">    <span class="type">int</span> MaxSize;<span class="comment">//顺序表的最大容量</span></span><br><span class="line">    <span class="type">int</span> length;<span class="comment">//顺序表的当前长度</span></span><br><span class="line">&#125;SeqList;<span class="comment">//顺序表的类型定义(动态分配方式)</span></span><br></pre></td></tr></table></figure><p>初始化顺序表</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10;<span class="comment">//定义最大长度</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    ElemType *data;<span class="comment">//指针指向第一个数据元素</span></span><br><span class="line">    <span class="type">int</span> MaxSize;<span class="comment">//顺序表的最大容量</span></span><br><span class="line">    <span class="type">int</span> length;<span class="comment">//顺序表的当前长度</span></span><br><span class="line">&#125;SeqList;<span class="comment">//顺序表的类型定义</span></span><br><span class="line"><span class="comment">//基本操作-初始化一个顺序表</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitList</span><span class="params">(SeqList &amp;L)</span>&#123;</span><br><span class="line">    <span class="comment">//用malloc函数申请一片连续的存储空间</span></span><br><span class="line">    L.data=(ElemType *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ElemType)*InitSize);</span><br><span class="line">    L.length = <span class="number">0</span>;<span class="comment">//顺序表初始长度为0</span></span><br><span class="line">    L.MaxSize = InitSize;<span class="comment">//顺序表的最大长度</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 增加动态数组的长度</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">IncreaseSize</span><span class="params">(SeqList &amp;L,<span class="type">int</span> len)</span>&#123;</span><br><span class="line">    <span class="type">int</span> *p = L.data;<span class="comment">//让指针p指向顺序表中的第一个数据元素</span></span><br><span class="line">    L.data=(ElemType *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ElemType)*(L.MaxSize+len));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;L.length; i++)&#123;</span><br><span class="line">        L.data[i] = p[i];<span class="comment">//将数据复制到新区域</span></span><br><span class="line">    &#125;</span><br><span class="line">    L.MaxSize = L.MaxSize + len;<span class="comment">//顺序表最大长度增加 len</span></span><br><span class="line">    <span class="built_in">free</span>(p);<span class="comment">//释放原来的内存空间</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    SeqList L;<span class="comment">//声明一个顺序表</span></span><br><span class="line">    InitList(L);<span class="comment">//初始化顺序表</span></span><br><span class="line">    <span class="comment">// 往顺序表中随便插入几个元素</span></span><br><span class="line">    IncreaseSize(L,<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="单链表"><a href="#单链表" class="headerlink" title="单链表"></a>单链表</h1><p>顺序表：用顺序存储结构实现的线性表叫做顺序表</p><ul><li>顺序表优点：可随机存取，存储密度高</li><li>顺序表缺点：要求大片连续空间，改变容量不方便</li></ul><p>链表：用链式存储结构实现的线性表叫做链表，链表分为：</p><ul><li>单链表</li><li>双链表</li><li>循环链表</li><li>静态链表</li></ul><p>单链表优点：不要求大片连续空间，改变容量方便</p><p>单链表缺点：不可随机存取，要耗费一定空间存放指针</p><h2 id="单链表的定义"><a href="#单链表的定义" class="headerlink" title="单链表的定义"></a>单链表的定义</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结点结构体</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span>* <span class="title">next</span>;</span></span><br><span class="line">&#125; node;</span><br></pre></td></tr></table></figure><h2 id="创建结点"><a href="#创建结点" class="headerlink" title="创建结点"></a>创建结点</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建结点，这个结点的值是data</span></span><br><span class="line">Node* <span class="title function_">create_node</span><span class="params">(<span class="type">int</span> data)</span></span><br><span class="line">&#123;</span><br><span class="line">    Node* node = (Node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));<span class="comment">//申请内存</span></span><br><span class="line">    node-&gt;data = data;</span><br><span class="line">    node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="定义链表和创建节点的综合写法"><a href="#定义链表和创建节点的综合写法" class="headerlink" title="定义链表和创建节点的综合写法"></a>定义链表和创建节点的综合写法</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> &#123;</span></span><br><span class="line">     <span class="type">int</span> val;</span><br><span class="line">     ListNode *next;</span><br><span class="line">     ListNode() : val(<span class="number">0</span>), next(nullptr) &#123;&#125;</span><br><span class="line">     ListNode(<span class="type">int</span> x) : val(x), next(nullptr) &#123;&#125;</span><br><span class="line">     ListNode(<span class="type">int</span> x, ListNode *next) : val(x), next(next) &#123;&#125;</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure><p>我们注意到这种写法我们没有开内存，所以我们要用new关键字</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ListNode* dummy = new ListNode(<span class="number">0</span>, head);<span class="comment">//创建节点dummy,值为0,dummy后面的节点是</span></span><br></pre></td></tr></table></figure><h2 id="创建长度为num的链表"><a href="#创建长度为num的链表" class="headerlink" title="创建长度为num的链表"></a>创建长度为num的链表</h2><h3 id="尾插法"><a href="#尾插法" class="headerlink" title="尾插法"></a>尾插法</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Node* <span class="title function_">create_list</span><span class="params">(<span class="type">int</span> num)</span></span><br><span class="line">&#123;</span><br><span class="line">    Node* head = create_node(<span class="number">0</span>);</span><br><span class="line">    Node* tmp = head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= num; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        Node* node = create_node(i);<span class="comment">//创建新结点</span></span><br><span class="line">        tmp-&gt;next = node;<span class="comment">//头结点的下一个结点等于新结点</span></span><br><span class="line">        tmp = node;<span class="comment">//tmp指针指向新结点</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="头插法"><a href="#头插法" class="headerlink" title="头插法"></a>头插法</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Node* <span class="title function_">create_list</span><span class="params">(<span class="type">int</span> num)</span></span><br><span class="line">&#123;</span><br><span class="line">    Node* head = create_node(<span class="number">0</span>);</span><br><span class="line">     <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= num; ++i)</span><br><span class="line">     &#123;</span><br><span class="line">      Node* node = create_node(i);<span class="comment">//创建新结点</span></span><br><span class="line">      node-&gt;next = head-&gt;next;</span><br><span class="line">  head-&gt;next= node;</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="keyword">return</span> head-&gt;next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="显示链表的数据"><a href="#显示链表的数据" class="headerlink" title="显示链表的数据"></a>显示链表的数据</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//显示链表的数据</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">show_list</span><span class="params">(Node* head)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span>(head)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, head-&gt;data);</span><br><span class="line">        head = head-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取链表长度"><a href="#获取链表长度" class="headerlink" title="获取链表长度"></a>获取链表长度</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">size_t</span> <span class="title function_">list_len</span><span class="params">(Node* head)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(head)</span><br><span class="line">    &#123;</span><br><span class="line">        head = head-&gt;next;</span><br><span class="line">        len++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在链表指定位置插入一个结点-返回头结点"><a href="#在链表指定位置插入一个结点-返回头结点" class="headerlink" title="在链表指定位置插入一个结点 返回头结点"></a>在链表指定位置插入一个结点 返回头结点</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Node* <span class="title function_">list_insert</span><span class="params">(Node* head, <span class="type">int</span> index, <span class="type">int</span> data)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//判断链表是否为空以及插入的位置是否超出链表的范围</span></span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">NULL</span> || index &gt; list_len(head) || index &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//插入0位置，即插入一个头结点</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(index == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Node* node = create_node(data);</span><br><span class="line">        node-&gt;next = head;<span class="comment">//新结点的下一个结点等于头结点</span></span><br><span class="line">        head = node;<span class="comment">//头结点等于新结点</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Node* tmp = head;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;index<span class="number">-1</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            tmp = tmp-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        Node* node = create_node(data);</span><br><span class="line">        node-&gt;next = tmp-&gt;next;</span><br><span class="line">        tmp-&gt;next = node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="删除指定位置的一个结点-返回头结点"><a href="#删除指定位置的一个结点-返回头结点" class="headerlink" title="删除指定位置的一个结点 返回头结点"></a>删除指定位置的一个结点 返回头结点</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">   Node* <span class="title function_">list_delete</span><span class="params">(Node* head, <span class="type">int</span> index)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">NULL</span> || index &gt;= list_len(head) || index &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//判断链表是否为空以及插入的位置是否超出链表的范围</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(index == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Node* tmp = head;</span><br><span class="line">        head = tmp-&gt;next;<span class="comment">//头结点等于第二结点</span></span><br><span class="line">        <span class="built_in">free</span>(tmp);<span class="comment">//释放删除结点的内存</span></span><br><span class="line">        tmp = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Node* node = head;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;index<span class="number">-1</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    Node* tmp = node-&gt;next;</span><br><span class="line">    node-&gt;next = tmp-&gt;next;</span><br><span class="line">    <span class="built_in">free</span>(tmp);<span class="comment">//释放删除结点的内存</span></span><br><span class="line">    tmp = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="双链表"><a href="#双链表" class="headerlink" title="双链表"></a>双链表</h1><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/d08c34eae1a54f0eb8047fe3667a99fd.png" alt="img"></p><h2 id="定义双链表"><a href="#定义双链表" class="headerlink" title="定义双链表"></a>定义双链表</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title function_">ListNode</span><span class="params">(val)</span> &#123;</span><br><span class="line">  <span class="type">int</span> val;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> *<span class="title">next</span>;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> *<span class="title">prev</span>;</span></span><br><span class="line">&#125;node;</span><br></pre></td></tr></table></figure><h2 id="双链表的初始化"><a href="#双链表的初始化" class="headerlink" title="双链表的初始化"></a>双链表的初始化</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/e5a0c01544fb418482e3b6a227c54219.png" alt="img"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个我们就直接写了</span></span><br><span class="line">node* L;</span><br><span class="line">L-&gt;data = <span class="number">0</span>;</span><br><span class="line">L-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">L-&gt;prev = <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure><h1 id="循环链表"><a href="#循环链表" class="headerlink" title="循环链表"></a>循环链表</h1><h2 id="循环单链表"><a href="#循环单链表" class="headerlink" title="循环单链表"></a>循环单链表</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/a17301cb73224cf29f24794cb17d5261.png" alt="img"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个一句话</span></span><br><span class="line">node* head;</span><br><span class="line">node* tmp = head;</span><br><span class="line"><span class="keyword">while</span>(tmp-&gt;next!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">    tmp = tmp-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">tmp-&gt;next = head;</span><br></pre></td></tr></table></figure><h2 id="循环双链表"><a href="#循环双链表" class="headerlink" title="循环双链表"></a>循环双链表</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/99273f7aa25c42d6bc82e1abd5528efd.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>图</title>
      <link href="/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%9B%BE/"/>
      <url>/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="图"><a href="#图" class="headerlink" title="图"></a>图</h1><h2 id="图的定义"><a href="#图的定义" class="headerlink" title="图的定义"></a>图的定义</h2><p>图：G=(V,E) Graph=(Vertex,Edge)</p><ul><li>V：顶点(数据元素)的有穷非空集合</li><li>E：边的有穷集合</li></ul><h2 id="图的术语"><a href="#图的术语" class="headerlink" title="图的术语"></a>图的术语</h2><p>完全图：任意两个点都有一条边相连</p><p>邻接：有边/弧相连的两个顶点之间的关系</p><p>顶点的度：与该顶点相关联的边的数目</p><ul><li>有向图中，顶点的度等于该顶点的入度和出度之和。</li><li>顶点v的入度是以v为终点的有向边的条数</li><li>顶点v的出度是以v为始点的有向边的条数</li></ul><p>路径：接续的边构成的顶点序列。</p><p>路径长度：路径上边或弧的数目/权值之和。</p><p>简单路径：除路径起点和终点可以相同外，其余顶点均不相同的路径。</p><p>简单回路(简单环)：除路径起点和终点相同外，其余顶点均不相同的路径。</p><p>连通图：无向图中称为连通图，有向图中称为强连通图</p><ul><li>在无向图G=(V,{E})中，若对任何两个顶点v、u都存在从v到u的路径，则称G为连通图</li><li>在有向图G=(V,{E})中，若对任何两个顶点v、u都存在从v到u的路径，则称G为强连通图</li></ul><ol><li>极大连通子图：该子图是G连通子图，将G的任何不在该子图中的顶点加入，子图不再连通。</li><li>极小连通子图：该子图是G的连通子图，在该子图中删除任何一条边该子图不再连通。</li></ol><h2 id="图的存储结构"><a href="#图的存储结构" class="headerlink" title="图的存储结构"></a>图的存储结构</h2><h3 id="邻接矩阵"><a href="#邻接矩阵" class="headerlink" title="邻接矩阵"></a>邻接矩阵</h3><h4 id="无向图的邻接矩阵表示法"><a href="#无向图的邻接矩阵表示法" class="headerlink" title="无向图的邻接矩阵表示法"></a>无向图的邻接矩阵表示法</h4><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/53b06ad6cf3d478ea27fdfaa3100f6b5.png" alt="img"></p><h4 id="有向图的邻接矩阵表示法"><a href="#有向图的邻接矩阵表示法" class="headerlink" title="有向图的邻接矩阵表示法"></a>有向图的邻接矩阵表示法</h4><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/133acd8d81ce40e4ab28eb370e2daf28.png" alt="img"></p><ul><li>有向图的邻接矩阵<strong>可能是不对称</strong>的。</li><li>顶点的出度 = 第 i 行元素之和</li><li>顶点的入度 = 第 i 列元素之和</li><li>顶点的度 = 第i行元素之和+第i列元素之和</li></ul><h4 id="网-有权图-的邻接矩阵表示法"><a href="#网-有权图-的邻接矩阵表示法" class="headerlink" title="网(有权图)的邻接矩阵表示法"></a>网(有权图)的邻接矩阵表示法</h4><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/25b5f56cd4a8428d9540b9480ac38d38.png" alt="img"></p><h3 id="邻接表-链式-表示法"><a href="#邻接表-链式-表示法" class="headerlink" title="邻接表(链式)表示法"></a>邻接表(链式)表示法</h3><h4 id="无向图的邻接表"><a href="#无向图的邻接表" class="headerlink" title="无向图的邻接表"></a>无向图的邻接表</h4><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/2f8a86f095094ed685074057b602164c.png" alt="img"></p><h4 id="有向图的邻接表"><a href="#有向图的邻接表" class="headerlink" title="有向图的邻接表"></a>有向图的邻接表</h4><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/9ed88ca06c4b4dcdaf1efc28ac61a034.png" alt="img"></p><p>特点：找出度易，找入度难。</p><ul><li>顶点Vi的出度为第i个单链表中的结点个数</li><li>顶点Vi的入度为整个单链表中邻接点域值是 i-1 的结点个数。</li></ul><h3 id="十字链表"><a href="#十字链表" class="headerlink" title="十字链表"></a>十字链表</h3><h3 id="邻接多重表"><a href="#邻接多重表" class="headerlink" title="邻接多重表"></a>邻接多重表</h3><h2 id="图的遍历"><a href="#图的遍历" class="headerlink" title="图的遍历"></a>图的遍历</h2><h3 id="深度优先搜索DFS"><a href="#深度优先搜索DFS" class="headerlink" title="深度优先搜索DFS"></a>深度优先搜索DFS</h3><h3 id="广度优先搜索BFS"><a href="#广度优先搜索BFS" class="headerlink" title="广度优先搜索BFS"></a>广度优先搜索BFS</h3><h2 id="图的应用"><a href="#图的应用" class="headerlink" title="图的应用"></a>图的应用</h2><h3 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h3><p>生成树：所有顶点均由边链接在一起，但不存在回路的图。(将所有顶点都保持连通，边数最少，没有回路)</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/f2ffee7c155d4cb9a36b2f4623ab8a51.png" alt="img"></p><p>一个图可以有许多棵不同的生成树</p><p>所有生成树具有以下共同特点：</p><ol><li><p>生成树的顶点个数与图的顶点个数相同</p></li><li><p>生成树是图的极小连通子图，去掉一条边则非连通</p></li><li><p>一个有n个顶点的连通图的生成树有 n-1 条边（含有n个顶点，n-1条边的图不一定是生成树。）</p></li><li><p>在生成树中再加一条边必然形成回路</p></li><li><p>生成树中任意两个顶点间的路径是唯一的</p></li></ol><h2 id="构造最小生成树"><a href="#构造最小生成树" class="headerlink" title="构造最小生成树"></a>构造最小生成树</h2><p>构造最小生成树的算法很多，其中多数算法都利用了 MST 的性质。</p><p>MST性质：设N=(V,E)是一个连通网，U是顶点集V的一个非空子集。若边(u,v)是一条具有最小权值的边，其中u∈U，v∈V-U，则必存在一棵包含边(u,v)的最小生成树。</p><h3 id="Prim算法"><a href="#Prim算法" class="headerlink" title="Prim算法"></a>Prim算法</h3><p>算法思想:</p><ol><li><p>设N=(V,E)是连通网，TE是N上最小生成树中边的集合</p></li><li><p>初始令 U={u0}，(u0∈V)，TE={}。</p></li><li><p>在所有 u ∈ U，v∈V-U的边(u,v)∈E中，找一条代价最小的边(u0,v0)</p></li><li><p>将(u0,v0)并入集合TE，同时v0并入U0</p></li><li><p>重复上述操作直至U=V为止，则T=(V,TE)为N的最小生成树。</p></li></ol><p>例如：</p><p>我们要构造如下图的最小生成树，我们选取一个顶点，这个顶点就是U集合，其他顶点就是V-U集合</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/1f29adf312d34dc39ddaa35033faa998.png" alt="img"></p><p>在U集合当中的顶点和V-U集合当中的顶点中找一条权值最小的边，将边关联的顶点选取到我们的U集合，其他顶点为V-U集合</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/b34ab3c37f0049de9bd8632543427ec6.png" alt="img"></p><p>之后在U集合当中的顶点和V-U集合当中的顶点中找一条权值最小的边，V1到V2为6，V1到V4为5，V3到V2为5，V3到V4为5，V3到V5为6，V3到V6为4。所以选取权值最小的边4，其关联的顶点为V6，将其加入到U集合中。此时U集合为{V1,V3,V6}</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/58f1504b02814209817824a63114020c.png" alt="img"></p><p>重复上述操作，V1周边的权值为6，5，V3周边的权值为5,5,6，V6周边的权值为6，V4周边不能选(一旦选了有回路成环了)</p><p>我们选择权值最小的V3到V2的5，将V2加入到U集合中</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/6d11af0d5ffb4e8381813902c43af443.png" alt="img"></p><h3 id="Kruskal算法"><a href="#Kruskal算法" class="headerlink" title="Kruskal算法"></a>Kruskal算法</h3><p>算法思想：</p><ul><li><p>设连通网 N=(V,E)，令最小生成树初始状态为只有 n 个顶点而无边的非连通图 T=(V,{}),每个顶点自成一个连通分量</p></li><li><p>在E中选取代价最小的边，若该边依附的顶点落在T中不同的连通分量上(即：不能形成环)，则将此边加入到T中；否则，舍去此边，选取下一条代价最小的边。</p></li><li><p>以此类推，直到T中所有顶点都在同一连通分量上为止。</p></li></ul><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/04c645880c0243329236512015eda460.png" alt="img"></p><p>将所有顶点不连通，选择权最小的连接，且不能形成环。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/998575ede77f4b8bbc433b00b11628e4.png" alt="img"></p><h2 id="最短路径"><a href="#最短路径" class="headerlink" title="最短路径"></a>最短路径</h2><p><strong>在有向网中A点(源点)到达B点(终点)的多条路径中，寻找一条各边权值之和最小的路径。即最短路径。</strong></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/3df4725e2ae5467fa1c9cf71781ff0fc.png" alt="img"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/299a03e07430456dbe3fed06989a1971.png" alt="img"></p><p><code>单源最短路径 - 用 Dijkstra 迪杰斯特拉算法</code></p><p><code>所有顶点间的最短路径 - 用 Floyd 弗洛伊德算法</code></p><h3 id="Dijkstra算法"><a href="#Dijkstra算法" class="headerlink" title="Dijkstra算法"></a>Dijkstra算法</h3><p>1.把V分成两组：</p><p>(1)S：已求出最短路径的顶点的集合</p><p>(2)T=V-S：尚未确定最短路径的顶点集合</p><p>2.将T中顶点按最短路径递增的次序加入到S中，保证：</p><p>(1)从源点V0到S中各顶点的最短路径长度都不大于从V0到T中的任何顶点的最短路径长度。</p><p>(2)每个顶点对应一个距离值：</p><p> S中顶点：从V0到此顶点的最短路径长度</p><p> T中顶点：从V0到此顶点的只包括S中顶点作中间顶点的最短路径长度。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/059bfe0e4114433a8e34f9f0edf4e416.png" alt="img"></p><ul><li>初始时令 S = {V0}，T={其余顶点}</li><li>记录V0到其他顶点的距离：若&lt;V0,Vi&gt;存在，则为其权值，若不存在，则为∞。使用辅助数组D存放。</li><li>把最小的v2放进去</li></ul><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/f7a0ea642d2844ebbfbd7ba991b8a910.png" alt="img"></p><p>更新v2加入后，别的边的最短路径</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/0ecaf4f9edeb44f08618fa45721f1e08.png" alt="img"></p><p>把最短的v1加进去，更新</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/b719e447c1e74e6bb8cea8f595600d78.png" alt="img"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/f0b27073d5c3487fb13ef7250cf88b7d.png" alt="img"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/cf6ef361ce4a488890fd6f651775c883.png" alt="img"></p><h3 id="Floyd算法"><a href="#Floyd算法" class="headerlink" title="Floyd算法"></a>Floyd算法</h3><p>算法思想：逐个顶点试探，从Vi到Vj的所有可能存在的路径中，选出一条长度最短的路径。</p><p>先做一个n阶的矩阵，把对角线上的值全部设置成0，边的值改上去，无法连通就是∞</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211208215126646.png" alt="image-20211208215126646"></p><p>然后，我们来依次添加节点，就是画框框，看对角线，注意，一层一层得画，有几个节点画几层</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211208220249473.png" alt="image-20211208220249473"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211208220305145.png" alt="image-20211208220305145"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211208220320507.png" alt="image-20211208220320507"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211208220346554.png" alt="image-20211208220346554"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211208220359944.png" alt="image-20211208220359944"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211208220413387.png" alt="image-20211208220413387"></p><h3 id="拓扑排序"><a href="#拓扑排序" class="headerlink" title="拓扑排序"></a>拓扑排序</h3><p>应用场景：</p><p><strong>在每个项目开始时，能够保证它的前驱活动都已完成，从而使整个工程顺利进行。</strong></p><p>步骤：</p><ol><li>预处理得到每个点的入度</li><li>将入度为0的点放到一个容器里，方便后续处理的时候拿出。(<code>待执行的容器</code>)</li><li>然后就需要把某些点拿出去执行了。</li><li>更新 C1 所指向的那些点也就是 <code>C3 和 C8</code> 的 <code>入度</code> 了</li><li>C8入度为0，放人queue中，在执行，一直到queue为空</li></ol><blockquote><p>【划重点】当我们把 C1 拿出来执行，意味着「以 C1 为顶点」的「指向其他点」的「边」都消失了，也就是 C1 的出度变成了 0.</p></blockquote><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/007S8ZIlgy1giqqzs9yzsg30u00miqv5.gif" alt="step1"></p>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>node</title>
      <link href="/2022/04/08/%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/node/"/>
      <url>/2022/04/08/%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/node/</url>
      
        <content type="html"><![CDATA[<h1 id="node"><a href="#node" class="headerlink" title="node"></a>node</h1><h1 id="JavaScript模块化"><a href="#JavaScript模块化" class="headerlink" title="JavaScript模块化"></a>JavaScript模块化</h1><p>ES Module模块采用export和import关键字来实现模块化</p><ul><li><code>export</code>负责将模块内的内容导出</li><li><code>import</code>负责从其他模块导入内容</li></ul><h2 id="export关键字"><a href="#export关键字" class="headerlink" title="export关键字"></a>export关键字</h2><p><code>export</code>关键字将一个模块中的变量、函数、类等导出</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// info.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> name = <span class="string">&#x27;why&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> height = <span class="number">1.88</span></span><br></pre></td></tr></table></figure><p>上面的代码还有另外一种写法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// info.js</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;why&#x27;</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line"><span class="keyword">let</span> height = <span class="number">1.88</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span>&#123;name,age,height&#125;</span><br></pre></td></tr></table></figure><h2 id="导出函数或类"><a href="#导出函数或类" class="headerlink" title="导出函数或类"></a>导出函数或类</h2><p>上面我们主要是输出变量，也可以输出函数或者输出类</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">content</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(content);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">run</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;在奔跑&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的代码也可以写成这种形式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">content</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(content);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name,age</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;在奔跑&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;test,<span class="title class_">Person</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="export-default"><a href="#export-default" class="headerlink" title="export default"></a>export default</h2><ul><li>某些情况下，一个模块中包含某个功能，我们并不希望给这个功能命名，而是让导入者可以自己来命名</li><li>这个时候就可以使用 <code>export default</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// info.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;default function&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们来到 <code>main.js</code> 中，这样使用就可以了</p><p>这里的 <code>myFunc</code> 是我自己命名的，你可以根据需要命名它对应的名字</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> myFunc form <span class="string">&#x27;./info.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">myFunc</span>()</span><br></pre></td></tr></table></figure><p>另外，需要注意：</p><p><code>export default</code> 在同一个模块中，不允许同时存在多个</p><h2 id="ES6-import的使用"><a href="#ES6-import的使用" class="headerlink" title="ES6 import的使用"></a>ES6 import的使用</h2><p>我们使用 export 指令导出了模块对外提供的接口，下面我们就可以通过 <code>import</code> 命令来加载对应的这个模块了</p><ul><li>首先，我们需要在 HTML 代码中引入两个js文件，并且类型需要设置为 module</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src = <span class="string">&quot;info.js&quot;</span> type = <span class="string">&quot;module&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span> = <span class="string">&quot;main.js&quot;</span> <span class="attr">type</span> = <span class="string">&quot;module&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><code>import</code> 指令用于导入模块中的内容，比如 <code>main.js</code> 的代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name,age,height&#125; <span class="keyword">from</span> <span class="string">&quot;./info.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name,age,height);</span><br></pre></td></tr></table></figure><p>如果我们希望某个模块中所有的信息都导入，一个个导入显然有些麻烦</p><ul><li>p通过<code>*</code>可以导入模块中所有的export变量</li><li>p但是通常情况下我们需要给<code>*</code>起一个别名，方便后续的使用</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> info <span class="keyword">from</span> <span class="string">&#x27;./info.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">name</span>,info.<span class="property">age</span>,info.<span class="property">height</span>);</span><br></pre></td></tr></table></figure><h1 id="✍Node是什么"><a href="#✍Node是什么" class="headerlink" title="✍Node是什么"></a>✍Node是什么</h1><p>Node 是一个基于 Chrome V8 引擎的 JavaScript 代码运行环境。</p><p>浏览器（软件）能够运行JavaScript代码，浏览器就是JavaScript代码的运行环境</p><p>Node（软件）能够运行JavaScript代码，Node就是JavaScript代码的运行环境</p><p>Node文档中文网：<a href="http://nodejs.cn/api/url.html#url_new_url_input_base">http://nodejs.cn/api/url.html#url_new_url_input_base</a></p><h2 id="Node使用"><a href="#Node使用" class="headerlink" title="Node使用"></a>Node使用</h2><p>1.新建 app.js</p><p>2.输入代码块 <code>node-http-server</code>,自动生成 Node 结构（安装插件：Node-snippets就可以快捷生成）</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220317151155184.png" alt="image-20220317151155184"></p><p>3.在终端使用 <code>node app.js</code> 运行程序</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/2becf15aab2d49e99b732ac741b7e885.png" alt="img"></p><h2 id="解析第一个Node程序"><a href="#解析第一个Node程序" class="headerlink" title="解析第一个Node程序"></a>解析第一个Node程序</h2><p>1.引入 http 模块</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br></pre></td></tr></table></figure><p>2.创建服务器</p><p>接下来我们使用 <code>http.createServer()</code> 方法创建服务器，并使用 <code>listen</code> 方法绑定 3000 端口。函数通过 request、response 参数来接收和响应数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//表示引入http模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    request    获取客户端(浏览器)传过来的信息</span></span><br><span class="line"><span class="comment">    response   给浏览器响应信息</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">request, response</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//发送响应头</span></span><br><span class="line">  <span class="comment">//设置HTTP头部,状态码是200,文件类型是 html,字符集是 utf8 </span></span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html;charset=UTF-8&#x27;</span>&#125;);</span><br><span class="line">    </span><br><span class="line">  <span class="comment">//表示给我们页面上面输出一句话并且结束响应</span></span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3000</span>);  <span class="comment">//监听端口</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">write</span>(<span class="string">&quot;&lt;head&gt; &lt;meta charset=&#x27;UTF-8&#x27;&gt;&lt;/head&gt;&quot;</span>); <span class="comment">//解决乱码  </span></span><br></pre></td></tr></table></figure><h2 id="创建服务器"><a href="#创建服务器" class="headerlink" title="创建服务器"></a>创建服务器</h2><p>创建服务器对象，我们是通过 createServer 来完成的</p><ul><li>req：request请求对象，包含请求相关的信息</li><li>res：response响应对象，包含我们要发送给客户端的信息</li></ul><p>旧版本 Node 的 url 用法如下：</p><table><thead><tr><th align="center">url模块的使用</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">url.parse()</td><td align="center">解析 url(第二个参数为true,可以将 query 里面的数据转换为对象)</td></tr><tr><td align="center">url.format(urlObject)</td><td align="center">是上面 url.parse() 操作的逆向操作</td></tr><tr><td align="center">url.resolve(from,to)</td><td align="center">添加或者替换地址</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> api = <span class="string">&#x27;http://www.itying.com?name=zhangsan&amp;age=20&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//console.log(url.parse(api, true));</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getValue = url.<span class="title function_">parse</span>(api, <span class="literal">true</span>).<span class="property">query</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(getValue);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6中模板字符串写法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`姓名：<span class="subst">$&#123;getValue.name&#125;</span>--年龄:<span class="subst">$&#123;getValue.age&#125;</span>`</span>);</span><br></pre></td></tr></table></figure><p>新版本 Node 的 url 用法如下：</p><ul><li>```<br>new URL(input,[,base])<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  - `input` 类型：String，要解析的绝对或相对的输入网址。如果 input 是相对的，则需要 base。如果 input 是绝对的，则忽略 base。</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">const myURL = new URL(&#x27;/foo&#x27;, &#x27;https://example.org/&#x27;);</span><br><span class="line">// https://example.org/foo</span><br><span class="line">const url = require(&#x27;url&#x27;);</span><br><span class="line"></span><br><span class="line">const myURL = new URL(</span><br><span class="line">    &quot;http://localhost:3000/p/a/t/h?name=zhangsan&amp;age=20#hash&quot;);</span><br><span class="line"></span><br><span class="line">console.log(myURL);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>searchParams 可以获取到 url 参数的 value</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myURL = <span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;https://example.org/?abc=123&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myURL.<span class="property">searchParams</span>.<span class="title function_">get</span>(<span class="string">&#x27;abc&#x27;</span>));</span><br><span class="line"><span class="comment">// 打印 123</span></span><br><span class="line"></span><br><span class="line">myURL.<span class="property">searchParams</span>.<span class="title function_">append</span>(<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;xyz&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myURL.<span class="property">href</span>);</span><br><span class="line"><span class="comment">// 打印 https://example.org/?abc=123&amp;abc=xyz</span></span><br><span class="line"></span><br><span class="line">myURL.<span class="property">searchParams</span>.<span class="title function_">delete</span>(<span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line">myURL.<span class="property">searchParams</span>.<span class="title function_">set</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myURL.<span class="property">href</span>);</span><br><span class="line"><span class="comment">// 打印 https://example.org/?a=b</span></span><br></pre></td></tr></table></figure><h1 id="同步与异步"><a href="#同步与异步" class="headerlink" title="同步与异步"></a>同步与异步</h1><h2 id="同步API、异步API"><a href="#同步API、异步API" class="headerlink" title="同步API、异步API"></a>同步API、异步API</h2><ul><li><strong>同步API可以从返回值中拿到API执行的结果, 但是异步API是不可以的</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 同步</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span> (n1, n2) &#123; </span><br><span class="line">  <span class="keyword">return</span> n1 + n2;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">const</span> result = sum (<span class="number">10</span>, <span class="number">20</span>);<span class="comment">// 30</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getMsg</span> () &#123; </span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; </span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">msg</span>: <span class="string">&#x27;Hello Node.js&#x27;</span> &#125;</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">  <span class="comment">// return undefined;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> msg = getMsg (); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><ul><li><strong>同步API从上到下依次执行，前面代码会阻塞后面代码的执行</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;for循环后面的代码&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li><strong>异步API不会等待API执行完成后再向下执行代码</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;代码开始执行&#x27;</span>); </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2秒后执行的代码&#x27;</span>)&#125;, <span class="number">2000</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&quot;0秒&quot;后执行的代码&#x27;</span>)&#125;, <span class="number">0</span>); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;代码结束执行&#x27;</span>);</span><br><span class="line"><span class="comment">//代码开始执行</span></span><br><span class="line"><span class="comment">//代码结束执行</span></span><br><span class="line"><span class="comment">//&quot;0秒&quot;后执行的代码</span></span><br><span class="line"><span class="comment">//2秒后执行的代码</span></span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/6d86977de88c4ee49cfefba1458a11ee.png" alt="img"></p><h2 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h2><p>自己定义函数让别人去调用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// getData函数定义</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span> (callback) &#123;&#125;</span><br><span class="line"><span class="comment">// getData函数调用</span></span><br><span class="line">getData ( <span class="function">() =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure><p>getData 函数有一个形参 <code>callback</code>，传递的实参是一个函数，将一个函数作为另外一个函数的形参，则此形参就叫做回调函数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">    <span class="title function_">callback</span>(<span class="string">&#x27;123&#x27;</span>);<span class="comment">// 使用callback可以调用下面的匿名函数function,并给callback传递参数</span></span><br><span class="line">    <span class="comment">//callback函数被调用了</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line"><span class="title function_">getData</span>(<span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;callback函数被调用了&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">    <span class="comment">// 123</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>我们可以调用 callback 回调函数将异步API执行的结果传递出来</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getMsg</span> (callback) &#123;</span><br><span class="line">    <span class="comment">// 调用callback将异步API执行的结果传递出来</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        callback (&#123; <span class="attr">msg</span>: <span class="string">&#x27;Hello Node.js&#x27;</span> &#125;)</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line">getMsg (<span class="keyword">function</span> (<span class="params">msg</span>) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">    <span class="comment">// &#123; msg: &#x27;Hello Node.js&#x27; &#125;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="Nodejs里面的异步API"><a href="#Nodejs里面的异步API" class="headerlink" title="Nodejs里面的异步API"></a>Nodejs里面的异步API</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./demo.txt&#x27;</span>,<span class="function">(<span class="params">err,result</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure><ul><li>读取文件是需要时间的，文件读取的结果不能通过返回值的方式获取，需要通过回调函数。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> server = http.<span class="title function_">createServer</span>();</span><br><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure><ul><li>事件监测也是异步API</li></ul><blockquote><p>如果异步API后面代码的执行依赖当前异步API的执行结果，但实际上后续代码在执行的时候异步API还没有返回结果，这个问题要怎么解决呢？</p></blockquote><p>例如，我们需要依次读取A文件、B文件、C文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./1.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result1</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./2.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result2</span>)=&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./3.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,(err,result3)=&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(result3);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>Promise 出现的目的是解决 Node.js 异步编程中回调地狱的问题。</p><p>实际上，Promise 本身是一个构造函数，我们要解决回调地狱的问题，需要先使用 new 运算符创建 Promise 实例，在创建 Promise 实例的过程中，需要传入一个匿名函数，在匿名函数中有两个参数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(成功了做的事)</span><br><span class="line">       .<span class="title function_">catch</span>(失败了做的事)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>&#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">reject</span>(<span class="string">&#x27;失败了&#x27;</span>) </span><br><span class="line">        &#125; </span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result) <span class="comment">// &#123;name: &#x27;张三&#x27;&#125;)</span></span><br><span class="line">       .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(error); <span class="comment">// 失败了)</span></span><br></pre></td></tr></table></figure><p>例如，我们需要依次读取A文件、B文件、C文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">p1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./1.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(result);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">p2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./2.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(result);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">p3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    lreturn <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./3.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(result);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">p1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">r1</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(r1);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">p2</span>();         <span class="comment">//返回一个promise对象</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">r2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(r2);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">p3</span>();</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">r3</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(r3);</span><br><span class="line">    <span class="keyword">return</span> p3;</span><br><span class="line">&#125;)<span class="title class_">ES7</span>异步函数</span><br></pre></td></tr></table></figure><h2 id="ES7异步函数"><a href="#ES7异步函数" class="headerlink" title="ES7异步函数"></a>ES7异步函数</h2><p>异步函数是异步编程语法的终极解决方案，它可以让我们将异步代码写成同步的形式，让代码不再有回调函数嵌套，使代码变得清晰明了。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span> () &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="async关键字"><a href="#async关键字" class="headerlink" title="async关键字"></a>async关键字</h3><p>异步（Asynchronous）</p><ol><li>普通函数定义前加<code>async</code>关键字 普通函数变成异步函数</li><li>异步函数默认返回<code>promise</code>对象</li><li>在异步函数内部使用return关键字进行结果返回 结果会被包裹在promise对象中 <code>return</code>关键字代替了<code>resolve</code>方法</li><li>在异步函数内部使用<code>throw</code>关键字抛出程序异常</li><li>调用异步函数再链式调用<code>then</code>方法获取异步函数执行结果</li><li>调用异步函数再链式调用<code>catch</code>方法获取异步函数执行的错误信息</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 普通函数定义前加async关键字，普通函数变成异步函数</span></span><br><span class="line"><span class="comment">// 2. 异步函数默认的返回值是promise 对象</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&#x27;发生了一些错误&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn ().<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data); <span class="comment">//123</span></span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);    <span class="comment">//发生了一些错误</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="await关键字"><a href="#await关键字" class="headerlink" title="await关键字"></a>await关键字</h3><ul><li><strong>await关键字只能出现在异步函数中</strong></li><li><strong>await promise</strong> await后面只能写promise对象 写其他类型的API是不可以的</li><li><strong>await关键字是暂停异步函数向下执行 直到promise返回结果</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">p1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;p1&#x27;</span>;<span class="comment">// 返回的是 promise 对象</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">p2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;p2&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">p3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;p3&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">await</span> <span class="title function_">p1</span>();</span><br><span class="line">   <span class="keyword">await</span> <span class="title function_">p2</span>();</span><br><span class="line">   <span class="keyword">await</span> <span class="title function_">p3</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">run</span>();</span><br></pre></td></tr></table></figure><p>简单理解：</p><ul><li>async 是让方法变成异步</li><li>await 是等待异步方法执行完成</li></ul><h2 id="Node-js全局对象global"><a href="#Node-js全局对象global" class="headerlink" title="Node.js全局对象global"></a>Node.js全局对象global</h2><p>在浏览器中全局对象是 <code>window</code>，在 Node 中全局对象是 <code>global</code>。</p><p>Node 中全局对象有以下方法，可以在任何地方使用，global 可以省略</p><table><thead><tr><th align="center">方法</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">console.log()</td><td align="center">在控制台输出</td></tr><tr><td align="center">setTimeout()</td><td align="center">设置超时定时器</td></tr><tr><td align="center">clearTimeout()</td><td align="center">清除超时定时器</td></tr><tr><td align="center">setInterval()</td><td align="center">设置间歇定时器</td></tr><tr><td align="center">clearInterval()</td><td align="center">清除间歇定时器</td></tr></tbody></table><p>注意：Node中不存在 BOM、DOM，所以全局对象是 global。但是在 DOM、BOM 中也有这些方法，只是全局对象是 window。</p><h2 id="获取异步方法里面的数据"><a href="#获取异步方法里面的数据" class="headerlink" title="获取异步方法里面的数据"></a>获取异步方法里面的数据</h2><h3 id="回调函数获取"><a href="#回调函数获取" class="headerlink" title="回调函数获取"></a>回调函数获取</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 回调函数 获取异步方法里面的数据</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params">callbck</span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> name=<span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line">        <span class="title function_">callbck</span>(name);</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//外部获取异步方法里面的数据</span></span><br><span class="line"><span class="title function_">getData</span>(<span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(data+<span class="string">&#x27;111&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="Promise获取"><a href="#Promise获取" class="headerlink" title="Promise获取"></a>Promise获取</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Promise来处理异步  resolve 成功的回调函数   reject失败的回调函数</span></span><br><span class="line"><span class="keyword">var</span> p=<span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"> <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">var</span> name=<span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line">     <span class="keyword">if</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()&lt;<span class="number">0.7</span>)&#123;</span><br><span class="line">        <span class="title function_">resolve</span>(name);</span><br><span class="line">     &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="string">&#x27;失败&#x27;</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Async、Await使用"><a href="#Async、Await使用" class="headerlink" title="Async、Await使用"></a>Async、Await使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//普通方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;您好nodejs&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">test</span>());<span class="comment">// 您好nodejs</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//异步方法</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;   </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;您好nodejs&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">test</span>());  <span class="comment">//  Promise &#123; &#x27;您好nodejs&#x27; &#125;</span></span><br></pre></td></tr></table></figure><p>async 是让方法变成异步，它返回的是 Promise，那我们要获取 Promise 对象里面的字符串要如何做呢？</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误用法</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;   <span class="comment">//  Promise &#123; &#x27;您好nodejs&#x27; &#125;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;您好nodejs&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">await</span> <span class="title function_">test</span>());  <span class="comment">//错误  : await必须得用在async的方法里面</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步方法</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;您好nodejs&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 正确获取异步方法里面的数据</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> data=<span class="keyword">await</span> <span class="title function_">test</span>();  <span class="comment">//获取异步方法里面的数据</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">main</span>();</span><br></pre></td></tr></table></figure><p>我们当然最好是要返回的是 Promise 对象，否则也没必要将方法变为异步了。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// async 封装一个异步函数</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;  </span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> name=<span class="string">&#x27;张三 222&#x27;</span>;   </span><br><span class="line">            <span class="title function_">resolve</span>(name);</span><br><span class="line">        &#125;,<span class="number">1000</span>);</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> data=<span class="keyword">await</span> <span class="title function_">test</span>();  <span class="comment">//获取异步方法里面的数据</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">main</span>();</span><br></pre></td></tr></table></figure><h1 id="内置模块Path"><a href="#内置模块Path" class="headerlink" title="内置模块Path"></a>内置模块Path</h1><h2 id="path常见的API"><a href="#path常见的API" class="headerlink" title="path常见的API"></a>path常见的API</h2><ul><li>从路径中获取信息<ul><li>dirname：获取文件的父文件夹</li><li>basename：获取文件名</li><li>extname：获取文件扩展名</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.获取路径的信息</span></span><br><span class="line"><span class="keyword">const</span> filepath = <span class="string">&#x27;/User/why/abc.txt&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">dirname</span>(filepath)); <span class="comment">// /User/why</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">basename</span>(filepath)); <span class="comment">// abc.txt</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">extname</span>(filepath)); <span class="comment">// .txt</span></span><br></pre></td></tr></table></figure><ul><li><code>path.join([...paths])</code> 方法使用平台特定的分隔符把全部给定的 <code>path</code> 片段连接到一起，并规范化生成的路径。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./02art-template.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">path.<span class="title function_">join</span>(<span class="string">&#x27;/foo&#x27;</span>,<span class="string">&#x27;bar&#x27;</span>,<span class="string">&#x27;./baz&#x27;</span>);</span><br><span class="line"><span class="comment">// &#x27;foo/bar/baz&#x27;</span></span><br><span class="line"></span><br><span class="line">path.<span class="title function_">join</span>(<span class="string">&#x27;/foo&#x27;</span>,<span class="string">&#x27;bar&#x27;</span>,<span class="string">&#x27;/baz&#x27;</span>,<span class="string">&#x27;..&#x27;</span>);</span><br><span class="line"><span class="comment">// &#x27;foo/bar&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><code>path.resolve([...paths])</code> 把一个路径或路径片段的序列解析为一个绝对路径</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;/sxt&#x27;</span>, <span class="string">&#x27;qianduan&#x27;</span>, <span class="string">&#x27;zhongji&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> info1 = path.<span class="title function_">resolve</span>(...arr);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info1);</span><br><span class="line"><span class="comment">// D:\sxt\qianduan\zhongji</span></span><br></pre></td></tr></table></figure><ul><li><code>path.extname()</code> 获取文件(可以是一个路径文件)的扩展名</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">extname</span>(<span class="string">&#x27;hello.md&#x27;</span>)); <span class="comment">// md</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径信息的扩展名</span></span><br><span class="line"><span class="keyword">let</span> strPath = <span class="string">&quot;http://www.xinhuanet.html&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">extname</span>(strPath)); <span class="comment">// html</span></span><br></pre></td></tr></table></figure><h1 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h1><p>路由指的就是针对不同请求的URL，处理不同的业务逻辑。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220317161511622.png" alt="image-20220317161511622"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html;charset=UTF-8&#x27;</span> &#125;);</span><br><span class="line">    <span class="comment">// 解构写法,相当于 request.url</span></span><br><span class="line">    <span class="keyword">const</span> &#123; url &#125; = request;</span><br><span class="line">    <span class="keyword">if</span> (url == <span class="string">&#x27;/&#x27;</span> || url == <span class="string">&#x27;index&#x27;</span>) &#123;</span><br><span class="line">        response.<span class="title function_">end</span>(<span class="string">&#x27;欢迎来到首页&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (url == <span class="string">&#x27;/list&#x27;</span>) &#123;</span><br><span class="line">        response.<span class="title function_">end</span>(<span class="string">&#x27;欢迎来到列表页&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        response.<span class="title function_">end</span>(<span class="string">&#x27;抱歉，您访问的页面出游了~&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server running at http://127.0.0.1:3000/&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h2><p>在客户端和服务器之间进行请求 - 响应时，两种最常被用到的方法是：GET 和 POST</p><p>GET - 从指定的资源请求数据。(一般用于获取数据)<br>request.url 获取请求地址<br>request.method 获取请求方法<br>POST - 向指定的资源提交要被处理的数据。(一般用于提交数据)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//发送响应头</span></span><br><span class="line">    <span class="comment">//设置HTTP头部,状态码是200,文件类型是 html,字符集是 utf8 </span></span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html;charset=UTF-8&#x27;</span> &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">url</span>); <span class="comment">// 获取请求地址/index.html</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">method</span>); <span class="comment">// 获取请求方法GET/POST</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//表示给我们页面上面输出一句话并且结束响应</span></span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3000</span>); <span class="comment">//监听端口</span></span><br></pre></td></tr></table></figure><h2 id="GET请求"><a href="#GET请求" class="headerlink" title="GET请求"></a>GET请求</h2><p>参数被放置在浏览器地址栏中，例如：<a href="http://localhost:3000/?name=zhangsan&amp;age=20">http://localhost:3000/?name=zhangsan&amp;age=20</a></p><p>参数获取需要借助系统模块url，url模块用来处理url地址</p><p>request.url 获取 /name=zhangsan&amp;age=20</p><p>request.headers.host 获取 127.0.0.1:3000</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myURL = <span class="keyword">new</span> <span class="title function_">URL</span>(url, <span class="string">`http://&#123;host&#125;`</span>);</span><br></pre></td></tr></table></figure><p>如上获取到 url 对象，再从对象中获取参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html;charset=UTF-8&#x27;</span> &#125;);</span><br><span class="line">    <span class="comment">// 解构写法,相当于 request.url</span></span><br><span class="line">    <span class="keyword">const</span> &#123; url &#125; = request;</span><br><span class="line">    <span class="comment">// 解构写法,相当于 request.headers.host</span></span><br><span class="line">    <span class="keyword">const</span> &#123; host &#125; = request.<span class="property">headers</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (url !== <span class="string">&#x27;/favicion.ico&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> myURL = <span class="keyword">new</span> <span class="title function_">URL</span>(url, <span class="string">`http://&#123;host&#125;`</span>);</span><br><span class="line">        response.<span class="title function_">write</span>(<span class="string">`name: <span class="subst">$&#123;myURL.searchParams.get(<span class="string">&quot;name&quot;</span>)&#125;</span>,age: <span class="subst">$&#123;myURL.searchParams.get(<span class="string">&quot;age&quot;</span>)&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server running at http://127.0.0.1:3000/&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="Post请求"><a href="#Post请求" class="headerlink" title="Post请求"></a>Post请求</h2><ul><li>参数被放置在请求体中进行传输</li><li>获取 POST 参数需要使用 data 事件和 end 事件</li><li>使用 querystring 系统模块将参数转化为对象格式</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">// 处理请求参数模块</span></span><br><span class="line"><span class="keyword">const</span> queryString = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">request, response</span>) &#123;</span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;);</span><br><span class="line">  <span class="comment">// data 当请求参数传递的时候触发data事件</span></span><br><span class="line">  <span class="comment">// end 当请求参数传递完成的时候触发end事件</span></span><br><span class="line">  <span class="keyword">let</span> postParams = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  request.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>,<span class="function">(<span class="params">params</span>)=&gt;</span>&#123;</span><br><span class="line">    postParams += params;</span><br><span class="line">  &#125;)</span><br><span class="line">  request.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(postParams);            <span class="comment">// 接收到的是一个字符串</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(queryString.<span class="title function_">parse</span>(postParams));        <span class="comment">// 使用queryString将字符串转化为对象    </span></span><br><span class="line">  </span><br><span class="line">&#125;)</span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端工具 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>express</title>
      <link href="/2022/04/08/%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/express/"/>
      <url>/2022/04/08/%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/express/</url>
      
        <content type="html"><![CDATA[<h1 id="express"><a href="#express" class="headerlink" title="express"></a>express</h1><p>Express 是一个基于<a href="https://so.csdn.net/so/search?q=Node&spm=1001.2101.3001.7020">Node</a>.js 平台，快速、开放、极简的web 开发框架，它提供一系列强大的特性，帮助你创建各种Web 和移动设备应用。</p><ul><li>英文官网：<a href="http://expressjs.com/">http://expressjs.com/</a></li><li>中文官网：<a href="https://www.expressjs.com.cn/">https://www.expressjs.com.cn/</a></li></ul><h2 id="Express安装"><a href="#Express安装" class="headerlink" title="Express安装"></a>Express安装</h2><p>安装 Expresss 框架，就是使用 npm 的命令</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express --save</span><br></pre></td></tr></table></figure><ul><li>–save 参数，表示自动修改 <code>package.json</code> 文件，自动添加依赖项目</li></ul><h2 id="Express简单使用"><a href="#Express简单使用" class="headerlink" title="Express简单使用"></a>Express简单使用</h2><p>app.get 主要用来显示数据</p><p>app.post 主要用于增加数据</p><p>app.put 主要用于修改数据</p><p>app.delete 主要用于删除数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入 express 框架</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">// 实例化 express 赋值给 app</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">// 配置路由,匹配URI地址实现不同的功能</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/doLogin&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;执行登录&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">put</span>(<span class="string">&#x27;/editUser&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;修改用户&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">delete</span>(<span class="string">&#x27;/deleteUser&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;删除用户&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 监听端口</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><h3 id="路由配置多级目录"><a href="#路由配置多级目录" class="headerlink" title="路由配置多级目录"></a>路由配置多级目录</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置路由,匹配URI地址实现不同的功能</span></span><br><span class="line"><span class="comment">// 路由里面配置多级目录  http://localhost:3000/admin/user/edit</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/admin/user/add&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;admin user add&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入 express 框架</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">// 实例化 express 赋值给 app</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">// 配置路由,匹配URI地址实现不同的功能</span></span><br><span class="line"><span class="comment">// app.get 主要用来显示数据</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/article&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;新闻页面&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//动态路由  配置路由的时候也要注意顺序</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/article/:id&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> id = req.<span class="property">params</span>[<span class="string">&quot;id&quot;</span>]; <span class="comment">//获取动态路由</span></span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;动态路由&quot;</span> + id);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/article/add&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;article add&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 监听端口</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>GET传值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入 express 框架</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">// 实例化 express 赋值给 app</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">// 配置路由,匹配URI地址实现不同的功能</span></span><br><span class="line"><span class="comment">//get 传值  http://localhost:3000/product?name=zhangsan&amp;age=20</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/product&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> query = req.<span class="property">query</span>; <span class="comment">//获取get传值</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(query);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;name:&quot;</span> + query.<span class="property">name</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;age:&quot;</span> + query.<span class="property">age</span>);</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;name:&quot;</span> + query.<span class="property">name</span> + <span class="string">&quot;age:&quot;</span> + query.<span class="property">age</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/// 监听端口</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><h2 id="Express中EJS的使用"><a href="#Express中EJS的使用" class="headerlink" title="Express中EJS的使用"></a>Express中EJS的使用</h2><p>EJS 是后台模板，可以把我们数据库和文件读取的数据显示到 HTML页面上面。它是一个第三方模块，需要通过 npm 安装。Express 框架里面集成了 EJS 模板引擎，所以我们来看下两者结合的使用。</p><p>1.安装</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install ejs --save</span><br></pre></td></tr></table></figure><p>2.配置ejs <code>app.set(&quot;view engine&quot;,&quot;ejs)</code></p><p>3.使用ejs（默认加载模板引擎的文件夹是views，所以 index 前面不需要加 views）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">render</span>(<span class="string">&quot;index&quot;</span>,&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">//配置模板引擎</span></span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&quot;view engine&quot;</span>,<span class="string">&quot;ejs&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问127.0.0.1:3000/  渲染的是index模板</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    </span><br><span class="line">    res.<span class="title function_">render</span>(<span class="string">&quot;index&quot;</span>,&#123;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口  端口号建议写成3000以上</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>之后我们在 <code>views</code> 文件夹下新建 <code>index.ejs</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;我是一个ejs模板引擎&lt;/h2&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>这样我们就把我们自己写的HTML代码显示到HTML页面上</p><h3 id="EJS常用标签"><a href="#EJS常用标签" class="headerlink" title="EJS常用标签"></a>EJS常用标签</h3><ul><li>&lt;% %&gt; 流程控制标签</li><li>&lt;%= %&gt;输出标签(原文输出 HTML 标签)</li><li>&lt;%- %&gt;输出标签(HTML会被浏览器解析)</li></ul><h3 id="绑定数据"><a href="#绑定数据" class="headerlink" title="绑定数据"></a>绑定数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">//配置模板引擎</span></span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&quot;view engine&quot;</span>,<span class="string">&quot;ejs&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问127.0.0.1:3000/  渲染的是index模板</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> title = <span class="string">&quot;你好ejs&quot;</span>;<span class="comment">// 假如这个数据是从数据库获取到的</span></span><br><span class="line">    res.<span class="title function_">render</span>(<span class="string">&quot;index&quot;</span>,&#123;</span><br><span class="line"><span class="attr">title</span>: title, <span class="comment">// 这样就绑定到 index.ejs 模板里面了</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口  端口号建议写成3000以上</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>接下来我们去 index.ejs 里面输出这个数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;我是一个ejs模板引擎&lt;/h2&gt;</span><br><span class="line">    &lt;p&gt;&lt;%=title%&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220317210559599.png" alt="image-20220317210559599"></p><h3 id="绑定对象"><a href="#绑定对象" class="headerlink" title="绑定对象"></a>绑定对象</h3><p>我们也可以绑定对象中的数据并将其渲染到 html 页面。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">//配置模板引擎</span></span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&quot;view engine&quot;</span>, <span class="string">&quot;ejs&quot;</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/news&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> userinfo = &#123;</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">    &#125;;</span><br><span class="line">    res.<span class="title function_">render</span>(<span class="string">&quot;news&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">userinfo</span>: userinfo,<span class="comment">// 绑定 userinfo 对象数据</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><h3 id="输出-HTML标签"><a href="#输出-HTML标签" class="headerlink" title="输出 HTML标签"></a>输出 HTML标签</h3><p>我们也可以输出 HTML标签，既可以原格式输出，又可以解析 <code>HTML</code> 标签输出。</p><blockquote><p>&lt;%= %&gt;输出标签(原文输出 HTML 标签)</p><p>&lt;%- %&gt;输出标签(HTML会被浏览器解析)</p></blockquote><h3 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h3><p>类似于C++的语法，但是左右会加尖括号</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;条件判断&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">&lt;%<span class="keyword">if</span>(flag==<span class="literal">true</span>)&#123;%&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>flag=true<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line">&lt;%&#125;%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%<span class="keyword">if</span>(score&gt;=<span class="number">60</span>)&#123;%&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>及格<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;%&#125;<span class="keyword">else</span>&#123;%&gt;</span><br><span class="line">   不及格</span><br><span class="line">&lt;%&#125;%&gt;</span><br></pre></td></tr></table></figure><h3 id="循环遍历"><a href="#循环遍历" class="headerlink" title="循环遍历"></a>循环遍历</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>循环遍历<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;%for(let i=0;i&lt;list.length;i++)&#123;%&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">                &lt;%=list[i]%&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;%&#125;%&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;%for(let i=0;i&lt;newsList.length;i++)&#123;%&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">                &lt;%=newsList[i].title%&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;%&#125;%&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="引入模板"><a href="#引入模板" class="headerlink" title="引入模板"></a>引入模板</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- include(&#x27;footer.ejs&#x27;) %&gt;</span><br></pre></td></tr></table></figure><h3 id="ejs后缀修改为html"><a href="#ejs后缀修改为html" class="headerlink" title="ejs后缀修改为html"></a>ejs后缀修改为html</h3><p>这是一个小技巧，看着.ejs 的后缀总觉得不爽，使用如下方法，可以将模板文件的后缀换成我们习惯的.html。</p><p>1.在 app.js 的头上定义ejs</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ejs = <span class="built_in">require</span>(<span class="string">&#x27;ejs&#x27;</span>);</span><br></pre></td></tr></table></figure><p>2.注册html 模板引擎代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">engine</span>(<span class="string">&#x27;html&#x27;</span>,ejs__express)</span><br></pre></td></tr></table></figure><p>3.将模板引擎转换成 html 代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">set</span>(<span class="string">&#x27;view engine&#x27;</span>,<span class="string">&#x27;html&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Express.static托管静态文件</p><p>我们的静态资源 img、css 等要如何引入呢？</p><p>1.调用 express.static 中间件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;static&#x27;</span>))</span><br></pre></td></tr></table></figure><p>现在，static 目录下面的文件就可以访问了</p><p>2.在 ejs 里面正常引入css 即可</p><h2 id="Express中间件"><a href="#Express中间件" class="headerlink" title="Express中间件"></a>Express中间件</h2><p>中间件简单来说就是一个用作判断的东西，如果满足我们就next()</p><p><strong>Express 应用可使用如下几种中间件</strong></p><ul><li>应用级中间件</li><li>路由级中间件（用的少）</li><li>错误处理中间件</li><li>内置中间件</li><li>第三方中间件</li></ul><p>应用级中间件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、应用级中间件 (用于权限判断)</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req,res,next</span>)=&gt;</span>&#123;<span class="comment">// 匹配任何路由</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Date</span>()); </span><br><span class="line">    <span class="title function_">next</span>();<span class="comment">// 表示匹配完成这个中间件之后程序继续向下执行</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="路由中间件"><a href="#路由中间件" class="headerlink" title="路由中间件"></a>路由中间件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2、路由级中间件(用的比较少)</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/news/add&quot;</span>,<span class="function">(<span class="params">req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;执行增加新闻&quot;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;执行增加新闻&quot;</span>)</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="错误处理中间件"><a href="#错误处理中间件" class="headerlink" title="错误处理中间件"></a>错误处理中间件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3、错误处理中间件  </span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line">   res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">send</span>(<span class="string">&quot;404&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="内置中间件"><a href="#内置中间件" class="headerlink" title="内置中间件"></a>内置中间件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 内置服务</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/static&#x27;</span>,express.<span class="title function_">static</span>(<span class="string">&#x27;./static&#x27;</span>))</span><br></pre></td></tr></table></figure><h3 id="获取GET请求参数"><a href="#获取GET请求参数" class="headerlink" title="获取GET请求参数"></a>获取GET请求参数</h3><p>GET 请求的参数在 URL 中，在原生 Node中，需要使用 url 模块来识别参数字符串。在 Express 中，不需要使用 <code>url</code>模块了，可以直接使用 <code>req.query</code> 对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// http://127.0.0.1:3000/?name=zhangsan&amp;age=20</span></span><br><span class="line">    <span class="keyword">let</span> query = req.<span class="property">query</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(query);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(query.<span class="property">name</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(query.<span class="property">age</span>);</span><br><span class="line">    res.<span class="title function_">send</span>(req.<span class="property">query</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><h3 id="获取POST请求参数"><a href="#获取POST请求参数" class="headerlink" title="获取POST请求参数"></a>获取POST请求参数</h3><p>获取 POST 请求参数需要加载第三方中间件 body-parser</p><p>首先下载 body-parse</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install body-parser --save</span><br></pre></td></tr></table></figure><p>引入中间件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var bodyParser = require(&#x27;body-parser&#x27;)</span><br></pre></td></tr></table></figure><p>配置中间件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.use(bodyParser.urlencoded(&#123; extended: false &#125;))</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.json())</span><br></pre></td></tr></table></figure><p>接收 post 数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.body</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置第三方中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">json</span>())</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&quot;/doLogin&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// req.body 获取post传值</span></span><br><span class="line">    <span class="keyword">var</span> body = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">    res.<span class="title function_">send</span>(body);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口  端口号建议写成3000以上</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220317213532665.png" alt="image-20220317213532665"></p>]]></content>
      
      
      <categories>
          
          <category> 前端工具 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Ajax</title>
      <link href="/2022/04/08/%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/Ajax/"/>
      <url>/2022/04/08/%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/Ajax/</url>
      
        <content type="html"><![CDATA[<h1 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h1><p>AJAX 全称为 <code>Asynchronous JavaScript And XML</code>，就是异步的 <code>JS</code> 和 <code>XML</code>。<br>通过 AJAX 可以在浏览器中向服务器发送异步请求，最大的优势：<code>无刷新获取数据</code>。</p><p>Ajax 相当于浏览器发送请求与接收响应的代理人，以实现在不影响用户浏览页面的情况下，局部更新页面数据，从而提高用户体验</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/568aa71079ab4b6a973fddc68a6fc2fb.png" alt="img"></p><h1 id="Ajax的特点"><a href="#Ajax的特点" class="headerlink" title="Ajax的特点"></a>Ajax的特点</h1><h2 id="AJAX-的优点"><a href="#AJAX-的优点" class="headerlink" title="AJAX 的优点"></a>AJAX 的优点</h2><ol><li>可以无需刷新页面而与服务器端进行通信。</li><li>允许你根据用户事件来更新部分页面内容。</li></ol><h2 id="AJAX-的缺点"><a href="#AJAX-的缺点" class="headerlink" title="AJAX 的缺点"></a>AJAX 的缺点</h2><ol><li>没有浏览历史，不能回退</li><li>存在跨域问题(同源)</li><li>SEO 不友好</li></ol><h1 id="http了解"><a href="#http了解" class="headerlink" title="http了解"></a>http了解</h1><p>HTTP（hypertext transport protocol）协议『超文本传输协议』，协议详细规定了浏览器和万维网服务器之间互相通信的规则。</p><h2 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h2><table><thead><tr><th>请求</th><th>内容</th></tr></thead><tbody><tr><td>行</td><td>POST  /s?ie=utf-8  HTTP/1.1</td></tr><tr><td>头</td><td>Host: atguigu.com                                                                            Cookie: name=guigu                                                                            Content-type: application/x-www-form-urlencoded                                             User-Agent: chrome 83</td></tr><tr><td>空行</td><td></td></tr><tr><td>体</td><td>username=admin&amp;password=admin</td></tr></tbody></table><p>请求行为get，体为空</p><p>为post，体可以不为空</p><h2 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h2><p>行    HTTP/1.1  200(状态码)  OK</p><p>头    Content-Type: text/html;charset=utf-8</p><p>​    Content-length: 2048</p><p>​    Content-encoding: gzip</p><p>空行   </p><p>体   </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>尚硅谷<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line">        &lt;/html&gt;</span><br></pre></td></tr></table></figure><h1 id="express的基本使用"><a href="#express的基本使用" class="headerlink" title="express的基本使用"></a>express的基本使用</h1><p>先初始化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init --yes</span><br></pre></td></tr></table></figure><p>安装express框架</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express</span><br></pre></td></tr></table></figure><p>在服务器端创建路由：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 引入express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建应用对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 创建路由规则</span></span><br><span class="line"><span class="comment">// request 是对请求报文的封装</span></span><br><span class="line"><span class="comment">// response 是对响应报文的封装</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">request, response</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//设置响应</span></span><br><span class="line">    response.<span class="title function_">send</span>(<span class="string">&#x27;HELLO EXPRESS&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 监听端口启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8000</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;服务已经启动, 8000 端口监听中....&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>然后启动这个端口</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node 这个文件的名字</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220308194631981.png" alt="image-20220308194631981"></p><h1 id="Nodejs工具"><a href="#Nodejs工具" class="headerlink" title="Nodejs工具"></a>Nodejs工具</h1><h2 id="nodemon"><a href="#nodemon" class="headerlink" title="nodemon"></a>nodemon</h2><p><code>nodemon</code> 会不停的<code>watch</code>你应用下面的所有文件，发现有文件被修改，就重新载入程序文件这样就实现了部署，修改了程序文件后马上就能看到变更后的结果。麻麻再也不用担心我的重启<code>nodejs</code>了</p><p>安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nodemon </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nodemon app.js</span><br></pre></td></tr></table></figure><h1 id="Ajax的使用"><a href="#Ajax的使用" class="headerlink" title="Ajax的使用"></a>Ajax的使用</h1><h2 id="1-Ajax实现步骤"><a href="#1-Ajax实现步骤" class="headerlink" title="1.Ajax实现步骤"></a>1.Ajax实现步骤</h2><p>1.创建Ajax对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br></pre></td></tr></table></figure><p>2.告诉Ajax 请求地址以及请求方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">open</span>(method,url);</span><br></pre></td></tr></table></figure><p>3.发送请求</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">send</span>(body);</span><br></pre></td></tr></table></figure><p>4.获取服务器端给客户端的响应数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// xhr.responseText 接收文本格式的响应数据</span></span><br><span class="line">    <span class="comment">// xhr.responseXML 接收 xml 格式的响应数据</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-get请求"><a href="#2-get请求" class="headerlink" title="2.get请求"></a>2.get请求</h2><p>我们先要在<code>express</code>中创建get请求</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建路由</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/server&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//设置响应头  设置允许跨域</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//设置响应体</span></span><br><span class="line">    response.<span class="title function_">send</span>(<span class="string">&#x27;HELLO AJAX - 2&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>新建一个HTML文件，写<code>ajax</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 1.创建ajax对象</span></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    <span class="comment">// 2.告诉Ajax对象要向哪发送地址，以什么样的方式发送请求</span></span><br><span class="line">    <span class="comment">// (1)请求方式 (2)请求地址</span></span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&#x27;get&#x27;</span>,<span class="string">&#x27;http://localhost:8000/server&#x27;</span>);</span><br><span class="line">    <span class="comment">// 3.发送请求</span></span><br><span class="line">    xhr.<span class="title function_">send</span>();</span><br><span class="line">    <span class="comment">// 4.获取服务器端响应到客户端的数据</span></span><br><span class="line"> <span class="comment">// on  when 当....时候</span></span><br><span class="line"><span class="comment">// readystate 是 xhr 对象中的属性, 表示状态 0 1 2 3 4</span></span><br><span class="line"><span class="comment">// change  改变</span></span><br><span class="line">       xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="comment">//判断 (服务端返回了所有的结果)</span></span><br><span class="line">                <span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="number">4</span>)&#123;</span><br><span class="line">                    <span class="comment">//判断响应状态码 200  404  403 401 500</span></span><br><span class="line">                    <span class="comment">// 2xx 成功</span></span><br><span class="line">                    <span class="keyword">if</span>(xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>)&#123;</span><br><span class="line">                        <span class="comment">//处理结果  行 头 空行 体</span></span><br><span class="line">                        <span class="comment">//响应 </span></span><br><span class="line">                        <span class="comment">// console.log(xhr.status);//状态码</span></span><br><span class="line">                        <span class="comment">// console.log(xhr.statusText);//状态字符串</span></span><br><span class="line">                        <span class="comment">// console.log(xhr.getAllResponseHeaders());//所有响应头</span></span><br><span class="line">                        <span class="comment">// console.log(xhr.response);//响应体</span></span><br><span class="line">                        <span class="comment">//设置 result 的文本</span></span><br><span class="line">                        result.<span class="property">innerHTML</span> = xhr.<span class="property">response</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220308203936974.png" alt="image-20220308203936974"></p><h2 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h2><p>我们先要在<code>express</code>中创建post请求</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/server&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//设置响应头  设置允许跨域</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//设置响应体</span></span><br><span class="line">    response.<span class="title function_">send</span>(<span class="string">&#x27;HELLO AJAX POST&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 创建对象</span></span><br><span class="line">  <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">  <span class="comment">//2. 初始化 设置类型与 URL</span></span><br><span class="line">  xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://127.0.0.1:8000/server&#x27;</span>);</span><br><span class="line">  <span class="comment">//设置请求头</span></span><br><span class="line">  xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>,<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>);</span><br><span class="line">  xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;atguigu&#x27;</span>);</span><br><span class="line">  <span class="comment">//3. 发送</span></span><br><span class="line">  xhr.<span class="title function_">send</span>(<span class="string">&#x27;a=100&amp;b=200&amp;c=300&#x27;</span>);</span><br><span class="line">  <span class="comment">// xhr.send(&#x27;a:100&amp;b:200&amp;c:300&#x27;);</span></span><br><span class="line">  <span class="comment">// xhr.send(&#x27;1233211234567&#x27;);</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">//4. 事件绑定</span></span><br><span class="line">  xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="comment">//判断</span></span><br><span class="line">      <span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="number">4</span>)&#123;</span><br><span class="line">          <span class="keyword">if</span>(xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>)&#123;</span><br><span class="line">              <span class="comment">//处理服务端返回的结果</span></span><br><span class="line">              result.<span class="property">innerHTML</span> = xhr.<span class="property">response</span>;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="请求头"><a href="#请求头" class="headerlink" title="请求头"></a>请求头</h2><p>我们可以设置请求头</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置请求头</span></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>,<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>);</span><br><span class="line"><span class="comment">//自定义的会报错</span></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;atguigu&#x27;</span>);</span><br></pre></td></tr></table></figure><p>设置了以下，自定义的就不报错了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以接收任意类型的请求 </span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/server&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//设置响应头  设置允许跨域</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//响应头</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//设置响应体</span></span><br><span class="line">    response.<span class="title function_">send</span>(<span class="string">&#x27;HELLO AJAX POST&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="JSON格式"><a href="#JSON格式" class="headerlink" title="JSON格式"></a><code>JSON</code>格式</h2><ol><li>在真实的项目中，服务器端大多数情况下会以 <code>JSON</code> 对象作为响应数据的格式。</li><li>当客户端拿到响应数据时，要将 JSON 数据和 <code>HTML</code> 字符串进行拼接，然后将拼接的结果展示在页面中。</li><li>在 <code>http</code> 请求与响应的过程中，无论是请求参数还是响应内容，如果是对象类型，最终都会被转换为对象字符串进行传输。</li></ol><p>先在express中发出json格式的对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JSON 响应</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/json-server&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//设置响应头  设置允许跨域</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//响应头</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="comment">//响应一个数据</span></span><br><span class="line">    <span class="keyword">const</span> data = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//send()这里面只能是一个字符串，data是一个对象，要把他转化成字符串</span></span><br><span class="line">    <span class="comment">//对对象进行字符串转换</span></span><br><span class="line">    <span class="keyword">let</span> str = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data);</span><br><span class="line">    <span class="comment">//设置响应体</span></span><br><span class="line">    response.<span class="title function_">send</span>(str);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>在HTML中接收数据</p><p>手动化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">response</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">result.<span class="property">innerHTML</span> = data.<span class="property">name</span>;</span><br></pre></td></tr></table></figure><p>自动化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//设置响应体数据的类型</span></span><br><span class="line">            xhr.<span class="property">responseType</span> = <span class="string">&#x27;json&#x27;</span>;</span><br><span class="line"><span class="comment">// 2. 自动转换</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">response</span>);</span><br><span class="line">            result.<span class="property">innerHTML</span> = xhr.<span class="property">response</span>.<span class="property">name</span>; </span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送请求</span></span><br><span class="line">     <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">     <span class="comment">//设置响应体数据的类型</span></span><br><span class="line">     xhr.<span class="property">responseType</span> = <span class="string">&#x27;json&#x27;</span>;</span><br><span class="line">     <span class="comment">//初始化</span></span><br><span class="line">     xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;http://127.0.0.1:8000/json-server&#x27;</span>);</span><br><span class="line">     <span class="comment">//发送</span></span><br><span class="line">     xhr.<span class="title function_">send</span>();</span><br><span class="line">     <span class="comment">//事件绑定</span></span><br><span class="line">     xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">         <span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="number">4</span>)&#123;</span><br><span class="line">             <span class="keyword">if</span>(xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>)&#123;</span><br><span class="line">                 <span class="comment">// 1. 手动对数据转化</span></span><br><span class="line">                 <span class="comment">// let data = JSON.parse(xhr.response);</span></span><br><span class="line">                 <span class="comment">// console.log(data);</span></span><br><span class="line">                 <span class="comment">// result.innerHTML = data.name;</span></span><br><span class="line">                 <span class="comment">// 2. 自动转换</span></span><br><span class="line">                 <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">response</span>);</span><br><span class="line">                 result.<span class="property">innerHTML</span> = xhr.<span class="property">response</span>.<span class="property">name</span>;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><h2 id="处理ie缓存问题"><a href="#处理ie缓存问题" class="headerlink" title="处理ie缓存问题"></a>处理ie缓存问题</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&#x27;http://127.0.0.1:8000/ie?t=&#x27;</span>+<span class="title class_">Date</span>.<span class="title function_">now</span>());</span><br></pre></td></tr></table></figure><p>给他加一个时间戳，这里浏览器每次刷新都不一样</p><h2 id="超时与网络异常"><a href="#超时与网络异常" class="headerlink" title="超时与网络异常"></a>超时与网络异常</h2><p>在express中设置延时响应</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//延时响应</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/delay&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//设置响应头  设置允许跨域</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//设置响应体</span></span><br><span class="line">        response.<span class="title function_">send</span>(<span class="string">&#x27;延时响应&#x27;</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//超时设置 2s 设置</span></span><br><span class="line"> xhr.<span class="property">timeout</span> = <span class="number">2000</span>;</span><br><span class="line"> <span class="comment">//超时回调</span></span><br><span class="line"> xhr.<span class="property">ontimeout</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="title function_">alert</span>(<span class="string">&quot;网络异常, 请稍后重试!!&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//网络异常回调</span></span><br><span class="line"> xhr.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="title function_">alert</span>(<span class="string">&quot;你的网络似乎出了一些问题!&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="取消请求"><a href="#取消请求" class="headerlink" title="取消请求"></a>取消请求</h2><p>这个调用<code>ajax</code>中的<code>abort</code>方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取元素对象</span></span><br><span class="line"><span class="keyword">const</span> btns = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> x = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">btns[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    x = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    x.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&#x27;http://127.0.0.1:8000/delay&#x27;</span>);</span><br><span class="line">    x.<span class="title function_">send</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// abort</span></span><br><span class="line">btns[<span class="number">1</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    x.<span class="title function_">abort</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="重复请求问题"><a href="#重复请求问题" class="headerlink" title="重复请求问题"></a>重复请求问题</h2><p>当用户一直点一个按钮，会发送很多相同的请求</p><p>我们可以在他发送下一个相同请求时，删除上一个请求，保持高效</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取元素对象</span></span><br><span class="line"><span class="keyword">const</span> btns = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> x = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">//标识变量</span></span><br><span class="line"><span class="keyword">let</span> isSending = <span class="literal">false</span>; <span class="comment">// 是否正在发送AJAX请求</span></span><br><span class="line"></span><br><span class="line">btns[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//判断标识变量</span></span><br><span class="line">    <span class="keyword">if</span>(isSending) x.<span class="title function_">abort</span>();<span class="comment">// 如果正在发送, 则取消该请求, 创建一个新的请求</span></span><br><span class="line">    x = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    <span class="comment">//修改 标识变量的值</span></span><br><span class="line">    isSending = <span class="literal">true</span>;</span><br><span class="line">    x.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&#x27;http://127.0.0.1:8000/delay&#x27;</span>);</span><br><span class="line">    x.<span class="title function_">send</span>();</span><br><span class="line">    x.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(x.<span class="property">readyState</span> === <span class="number">4</span>)&#123;</span><br><span class="line">            <span class="comment">//修改标识变量</span></span><br><span class="line">            isSending = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// abort</span></span><br><span class="line">btns[<span class="number">1</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    x.<span class="title function_">abort</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="jQuery中的Ajax"><a href="#jQuery中的Ajax" class="headerlink" title="jQuery中的Ajax"></a>jQuery中的Ajax</h1><p><code>jQuery</code>中简化了<code>ajax</code>的方法，方便更好书写和使用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">eq</span>(<span class="number">2</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="comment">//url</span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;http://127.0.0.1:8000/jquery-server&#x27;</span>,</span><br><span class="line">        <span class="comment">//参数</span></span><br><span class="line">        <span class="attr">data</span>: &#123;<span class="attr">a</span>:<span class="number">100</span>, <span class="attr">b</span>:<span class="number">200</span>&#125;,</span><br><span class="line">        <span class="comment">//请求类型</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">        <span class="comment">//响应体结果</span></span><br><span class="line">        <span class="attr">dataType</span>: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">        <span class="comment">//成功的回调</span></span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//超时时间</span></span><br><span class="line">        <span class="attr">timeout</span>: <span class="number">2000</span>,</span><br><span class="line">        <span class="comment">//失败的回调</span></span><br><span class="line">        <span class="attr">error</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;出错啦!!&#x27;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//头信息</span></span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="attr">c</span>:<span class="number">300</span>,</span><br><span class="line">            <span class="attr">d</span>:<span class="number">400</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="axios中的Ajax"><a href="#axios中的Ajax" class="headerlink" title="axios中的Ajax"></a>axios中的Ajax</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://github.com/axios/axios</span></span><br><span class="line">       <span class="keyword">const</span> btns = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//配置 baseURL</span></span><br><span class="line">       axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;http://127.0.0.1:8000&#x27;</span>;</span><br><span class="line">   </span><br><span class="line">       btns[<span class="number">2</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">           <span class="title function_">axios</span>(&#123;</span><br><span class="line">               <span class="comment">//请求方法</span></span><br><span class="line">               method : <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">               <span class="comment">//url</span></span><br><span class="line">               <span class="attr">url</span>: <span class="string">&#x27;/axios-server&#x27;</span>,</span><br><span class="line">               <span class="comment">//url参数</span></span><br><span class="line">               <span class="attr">params</span>: &#123;</span><br><span class="line">                   <span class="attr">vip</span>:<span class="number">10</span>,</span><br><span class="line">                   <span class="attr">level</span>:<span class="number">30</span></span><br><span class="line">               &#125;,</span><br><span class="line">               <span class="comment">//头信息</span></span><br><span class="line">               <span class="attr">headers</span>: &#123;</span><br><span class="line">                   <span class="attr">a</span>:<span class="number">100</span>,</span><br><span class="line">                   <span class="attr">b</span>:<span class="number">200</span></span><br><span class="line">               &#125;,</span><br><span class="line">               <span class="comment">//请求体参数</span></span><br><span class="line">               <span class="attr">data</span>: &#123;</span><br><span class="line">                   <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">                   <span class="attr">password</span>: <span class="string">&#x27;admin&#x27;</span></span><br><span class="line">               &#125;,</span><br><span class="line">               </span><br><span class="line"><span class="comment">// `validateStatus` 定义对于给定的HTTP 响应状态码是 resolve 或 reject  promise 。如果 `validateStatus` 返回 `true` (或者设置为 `null` 或 `undefined`)，promise 将被 resolve; 否则，promise 将被 rejecte</span></span><br><span class="line">               </span><br><span class="line">                 <span class="attr">validateStatus</span>: <span class="keyword">function</span> (<span class="params">status</span>) &#123;</span><br><span class="line">                     <span class="keyword">return</span> status &gt;= <span class="number">200</span> &amp;&amp; status &lt; <span class="number">300</span>; <span class="comment">// default</span></span><br><span class="line">                  &#125;,</span><br><span class="line">     </span><br><span class="line">                  <span class="attr">responseType</span>: <span class="string">&#x27;json&#x27;</span>, <span class="comment">// default</span></span><br><span class="line">               </span><br><span class="line">           &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">               <span class="comment">//响应状态码</span></span><br><span class="line">               <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">status</span>);</span><br><span class="line">               <span class="comment">//响应状态字符串</span></span><br><span class="line">               <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">statusText</span>);</span><br><span class="line">               <span class="comment">//响应头信息</span></span><br><span class="line">               <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">headers</span>);</span><br><span class="line">               <span class="comment">//响应体</span></span><br><span class="line">               <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span><br><span class="line">           &#125;)</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端工具 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>webpack</title>
      <link href="/2022/04/08/%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/webpack/"/>
      <url>/2022/04/08/%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/webpack/</url>
      
        <content type="html"><![CDATA[<h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h2 id="webpack-是什么"><a href="#webpack-是什么" class="headerlink" title="webpack 是什么"></a>webpack 是什么</h2><p>webpack 是一种前端资源构建工具，一个静态模块打包器(module bundler)。</p><ul><li><code>前端资源构建工具</code>： 浏览器有些语言不能识别，比如js，less，webpack可以将其转化成可以识别的语言，css等。</li><li><code>静态模块打包器(module bundler)</code>： </li></ul><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220328145135635.png" alt="image-20220328145135635"></p><p>引入的文件我们称为依赖，如jq，less等，他们合在一起叫<code>chunk块</code>，打包成一些可以识别的语言，</p><p>输出为<code>bundle</code></p><h2 id="webpack-五个核心概念"><a href="#webpack-五个核心概念" class="headerlink" title="webpack 五个核心概念"></a>webpack 五个核心概念</h2><p><strong>Entry</strong><br>  入口(Entry)指示 webpack 以哪个文件为入口起点开始打包，分析构建内部依赖图。</p><p><strong>Output</strong><br>  输出(Output)指示 webpack 打包后的资源 bundles 输出到哪里去，以及如何命名。</p><p><strong>Loader</strong>(翻译)<br>  Loader 让 webpack 能够去处理那些非 JavaScript 文件(webpack 自身只理解<br>JavaScript)</p><p><strong>Plugins</strong><br>  插件(Plugins)可以用于执行范围更广的任务。插件的范围包括，从打包优化和压缩，<br>一直到重新定义环境中的变量等。</p><p><strong>Mode</strong><br>  模式(Mode)指示 webpack 使用相应模式的配置。</p><p>development：生产模式，能让代码本地调试<br>运行的环境</p><p>production： 开发模式，能让代码优化上线<br>运行的环境</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>初始化 package.json</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure><p>下载并安装 webpack</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli -g</span><br><span class="line">npm install webpack webpack-cli -D</span><br></pre></td></tr></table></figure><p>开发环境指令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack src/js/index.js -o build/js/built.js --mode=development</span><br></pre></td></tr></table></figure><p>功能：webpack 能够编译打包 js 和 json 文件，并且能将 es6 的模块化语法转换成<br>浏览器能识别的语法。</p><p>当我们使用这个指令时， webpack会以 ./src/index.js 为入口文件开始打包，打包后输出到 ./build/built.js</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220328151350982.png" alt="image-20220328151350982"></p><p>在这里是打包后的</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220328151423474.png" alt="image-20220328151423474"></p><p>生产环境指令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack src/js/index.js -o build/js/built.js --mode=production</span><br></pre></td></tr></table></figure><p>功能：在开发配置功能上多一个功能，压缩代码。</p><p><strong>注意：</strong></p><ol><li><p>webpack能处理js/json资源，不能处理css/img等其他资源</p></li><li><p>生产环境和开发环境将ES6模块化编译成浏览器能识别的模块化~</p></li><li><p>生产环境比开发环境多一个压缩js代码。</p></li></ol><h2 id="打包样式资源"><a href="#打包样式资源" class="headerlink" title="打包样式资源"></a>打包样式资源</h2><p>我们知道webpack不能处理css/img等样式资源，这时我们需要用到他的loader。</p><p>首先需要在外面新建一个webpack.config.js,</p><p>在这里面配置webpack要做的事情。</p><p>首先下载安装 loader 包</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i css-loader style-loader less-loader less -D</span><br></pre></td></tr></table></figure><p>在配置loader(css)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// loader的配置</span></span><br><span class="line"> <span class="attr">module</span>: &#123;</span><br><span class="line">   <span class="attr">rules</span>: [</span><br><span class="line">     <span class="comment">// 详细loader配置</span></span><br><span class="line">     <span class="comment">// 不同文件必须配置不同loader处理</span></span><br><span class="line">     &#123;</span><br><span class="line">       <span class="comment">// 匹配哪些文件</span></span><br><span class="line">       <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">       <span class="comment">// 使用哪些loader进行处理</span></span><br><span class="line">       <span class="attr">use</span>: [</span><br><span class="line">         <span class="comment">// use数组中loader执行顺序：从右到左，从下到上 依次执行</span></span><br><span class="line">         <span class="comment">// 创建style标签，将js中的样式资源插入进行，添加到head中生效</span></span><br><span class="line">         <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">         <span class="comment">// 将css文件变成commonjs模块加载js中，里面内容是样式字符串</span></span><br><span class="line">         <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">       ]</span><br><span class="line">     &#125;</span><br><span class="line">       &#125;  </span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><p> __dirname nodejs的变量，代表当前文件的目录绝对路径</p><p>use数组中loader执行顺序：从右到左，从下到上 依次执行</p><p>在配置loader(less)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">     <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">     <span class="attr">use</span>: [</span><br><span class="line">       <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">       <span class="comment">// 将less文件编译成css文件</span></span><br><span class="line">       <span class="comment">// 需要下载 less-loader和less</span></span><br><span class="line">       <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">     ]</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  webpack.config.js  webpack的配置文件</span></span><br><span class="line"><span class="comment">    作用: 指示 webpack 干哪些活（当你运行 webpack 指令时，会加载里面的配置）</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    所有构建工具都是基于nodejs平台运行的~模块化默认采用commonjs。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// resolve用来拼接绝对路径的方法</span></span><br><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// webpack配置</span></span><br><span class="line">  <span class="comment">// 入口起点</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 输出</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">// 输出文件名</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;built.js&#x27;</span>,</span><br><span class="line">    <span class="comment">// 输出路径</span></span><br><span class="line">    <span class="comment">// __dirname nodejs的变量，代表当前文件的目录绝对路径</span></span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;build&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// loader的配置</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">// 详细loader配置</span></span><br><span class="line">      <span class="comment">// 不同文件必须配置不同loader处理</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 匹配哪些文件</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// 使用哪些loader进行处理</span></span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// use数组中loader执行顺序：从右到左，从下到上 依次执行</span></span><br><span class="line">          <span class="comment">// 创建style标签，将js中的样式资源插入进行，添加到head中生效</span></span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 将css文件变成commonjs模块加载js中，里面内容是样式字符串</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 将less文件编译成css文件</span></span><br><span class="line">          <span class="comment">// 需要下载 less-loader和less</span></span><br><span class="line">          <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// plugins的配置</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 详细plugins的配置</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 模式</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>, <span class="comment">// 开发模式</span></span><br><span class="line">  <span class="comment">// mode: &#x27;production&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="打包-HTML-资源"><a href="#打包-HTML-资源" class="headerlink" title="打包 HTML 资源"></a>打包 HTML 资源</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220328164939019.png" alt="image-20220328164939019"></p><p>这个不在是样式资源，我们需要用到<code>plugin</code></p><p> <code>loader: 1. 下载  2. 使用（配置loader）</code></p><p> <code>plugins: 1. 下载  2. 引入  3. 使用</code></p><p>下载安装 plugin 包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev html-webpack-plugin</span><br></pre></td></tr></table></figure><p>引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br></pre></td></tr></table></figure><p>在plugins的配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// plugins的配置</span><br><span class="line">plugins: [</span><br><span class="line">  // 详细plugins的配置</span><br><span class="line">  // html-webpack-plugin</span><br><span class="line">  // 功能：默认会创建一个空的HTML，自动引入打包输出的所有资源（JS/CSS）</span><br><span class="line">  // 需求：需要有结构的HTML文件</span><br><span class="line">  new HtmlWebpackPlugin(&#123;</span><br><span class="line">      // 复制 &#x27;./src/index.html&#x27; 文件，并自动引入打包输出的所有资源（JS/CSS）</span><br><span class="line">      template: &#x27;./src/index.html&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  loader: 1. 下载   2. 使用（配置loader）</span></span><br><span class="line"><span class="comment">  plugins: 1. 下载  2. 引入  3. 使用</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;built.js&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;build&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">// loader的配置</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// plugins的配置</span></span><br><span class="line">    <span class="comment">// html-webpack-plugin</span></span><br><span class="line">    <span class="comment">// 功能：默认会创建一个空的HTML，自动引入打包输出的所有资源（JS/CSS）</span></span><br><span class="line">    <span class="comment">// 需求：需要有结构的HTML文件</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 复制 &#x27;./src/index.html&#x27; 文件，并自动引入打包输出的所有资源（JS/CSS）</span></span><br><span class="line">        <span class="comment">//复制到bulid/built.js中</span></span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="打包图片资源"><a href="#打包图片资源" class="headerlink" title="打包图片资源"></a>打包图片资源</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220328164952520.png" alt="image-20220328164952520"></p><p>下载安装 loader 包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev html-loader url-loader file-loader</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端工具 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vuex</title>
      <link href="/2022/04/08/vue/Vuex/"/>
      <url>/2022/04/08/vue/Vuex/</url>
      
        <content type="html"><![CDATA[<h1 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex --save</span><br></pre></td></tr></table></figure><h2 id="什么是Vuex"><a href="#什么是Vuex" class="headerlink" title="什么是Vuex"></a>什么是Vuex</h2><p>Vuex 是一个专为 Vue.js 应用程序开发的<strong>状态管理模式</strong>。</p><ul><li>它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</li><li>Vuex 也集成到 Vue 的官方调试工具 <a href="https://github.com/vuejs/vue-devtools">devtools</a><a href="https://github.com/vuejs/vue-devtools"> extension</a>，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。</li></ul><p><strong>状态管理</strong></p><p>多个组件共享的变量全部存储在一个对象里面，然后，将这个对象放在顶层的<code>Vue实例</code>中，让其他组件可以使用</p><p>并且它里面所有的属性都是<code>响应式</code></p><h2 id="单界面的状态管理"><a href="#单界面的状态管理" class="headerlink" title="单界面的状态管理"></a>单界面的状态管理</h2><p>我们知道，要在单个组件中进行状态管理是一件非常简单的事情。</p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220407164902905.png" alt="image-20220407164902905" style="zoom:50%;" /><p>这图片中的三种东西如下：</p><ul><li>State：状态</li><li>View：视图层，可以针对 State 的变化，显示不同的信息</li><li>Actions：这里的Actions主要是用户的各种操作：点击、输入等等，会导致状态的变化</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>当前计数:&#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter+=1&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span>    </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter-=1&quot;</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;HelloWorld&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">counter</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>这个案例中</p><p>counter需要某种方式被记录下来，也就是我们的State。</p><p>counter目前的值需要被显示在界面中，也就是我们的View部分。</p><p>界面发生某些操作时（我们这里是用户的点击，也可以是用户的input），需要去更新状态，也就是我们的Actions。</p><h2 id="多界面状态管理"><a href="#多界面状态管理" class="headerlink" title="多界面状态管理"></a>多界面状态管理</h2><ul><li>多个视图都依赖同一个状态(一个状态改了，多个界面需要进行更新)</li><li>不同界面的 Actions 都想修改同一个状态(Home.vue 需要修改，Profile.vue 也需要修改这个状态)</li></ul><p>就是一个属性，所有视图都要用</p><p>全局单例模式(大管家)</p><ul><li>我们现在要做的就是将共享的状态抽取出来，交给我们的大管家，统一进行管理。</li><li>之后，你们每个视图，按照我<strong>规定好的</strong>规定，进行访问和修改等操作。</li></ul><p>具体操作：</p><p>1.我们创建一个文件夹 src/store，并且在其中创建一个 index.js 文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.安装插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"><span class="comment">// 2.创建对象</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">increment</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            state.<span class="property">count</span>++</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">decrement</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            state.<span class="property">count</span>--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出store对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><p>2.来到 src/main.js文件，导入store对象，并且挂载到new Vue中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="comment">// 1.导入store对象</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="comment">// 2.挂载 store</span></span><br><span class="line">    store,</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>3.这样，在其他Vue组件中，我们就可以通过 <code>this.$store</code>的方式，获取到这个store对象了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span>-1&lt;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">count</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">count</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">increment</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">decrement</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;decrement&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>使用步骤小结：</p><ol><li><p>提取出一个公共的 store 对象，用于保存在多个组件中共享的状态</p></li><li><p>将 store 对象放置在 <code>new Vue</code> 对象中，这样可以保证在所有的组件中都可以使用到</p></li><li><p>在其他组件中使用 store 对象中保存的状态即可</p><p>  通过 <code>this.$store.state</code> 属性的方式来访问状态</p><p>  通过 <code>this.$store.commit(&#39;mutation中方法&#39;)</code> 来修改状态</p></li><li><p>我们通过提交 mutation 的方式，而非直接改变 <code>store.state.count</code></p></li><li><p>这是因为 Vuex 可以更明确的追踪状态的变化，所以不要直接改变 store.state.count 的值</p></li></ol><h2 id="Vuex核心概念"><a href="#Vuex核心概念" class="headerlink" title="Vuex核心概念"></a>Vuex核心概念</h2><p>Vuex有几个比较核心的概念:</p><ul><li>State</li><li>Getters</li><li>Mutation</li><li>Action</li><li>Module</li></ul><h3 id="State-单-状态树"><a href="#State-单-状态树" class="headerlink" title="State 单-状态树"></a>State 单-状态树</h3><p>Vuex提出使用单一状态树, 什么是单一状态树呢？</p><ul><li><p>英文名称是Single Source of Truth，也可以翻译成单一数据源。</p></li><li><p>如果你的状态信息是保存到多个Store对象中的，那么之后的管理和维护等等都会变得特别困难，<code>所以Vuex也使用了单一状态树来管理应用层级的全部状态</code>。单一状态树能够让我们最直接的方式找到某个状态的片段，而且在之后的维护和调试过程中，也可以非常方便的管理和维护。</p></li></ul><h3 id="Getters基本使用"><a href="#Getters基本使用" class="headerlink" title="Getters基本使用"></a>Getters基本使用</h3><p>有时候，我们需要从 store 中获取一些 state 变异后的状态，比如下面的 Store</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.安装插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"><span class="comment">// 2.创建对象</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">students</span>: [</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">100</span>,<span class="attr">name</span>: <span class="string">&#x27;why&#x27;</span>,<span class="attr">age</span>: <span class="number">18</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">111</span>,<span class="attr">name</span>: <span class="string">&#x27;kobe&#x27;</span>,<span class="attr">age</span>: <span class="number">21</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">112</span>,<span class="attr">name</span>: <span class="string">&#x27;lucy&#x27;</span>,<span class="attr">age</span>: <span class="number">25</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">113</span>,<span class="attr">name</span>: <span class="string">&#x27;lilei&#x27;</span>,<span class="attr">age</span>: <span class="number">2</span>&#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">       <span class="comment">// 获取年龄大于20的学生对象</span></span><br><span class="line">       <span class="title function_">more20stu</span>(<span class="params">state</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span> state.<span class="property">students</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">s</span> =&gt;</span> s.<span class="property">age</span> &gt;<span class="number">20</span>)</span><br><span class="line">       &#125; </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出store对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><h4 id="Getters作为参数和传递参数"><a href="#Getters作为参数和传递参数" class="headerlink" title="Getters作为参数和传递参数"></a>Getters作为参数和传递参数</h4><p>如果我们已经有了一个获取所有年龄大于20岁学生的列表 getters，那么代码可以这样来写</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">     <span class="comment">// 获取年龄大于20的学生对象</span></span><br><span class="line">     <span class="title function_">more20stu</span>(<span class="params">state</span>)&#123;</span><br><span class="line">         <span class="keyword">return</span> state.<span class="property">students</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">s</span> =&gt;</span> s.<span class="property">age</span> &gt;<span class="number">20</span>)</span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="comment">// 获取年龄大于20的学生个数</span></span><br><span class="line">     <span class="title function_">more20stuLength</span>(<span class="params">state,getters</span>) &#123;</span><br><span class="line">         <span class="keyword">return</span> getters.<span class="property">more20stu</span>.<span class="property">length</span></span><br><span class="line">     &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>getters 默认是不能传递参数的, 如果希望传递参数, 那么只能让getters本身返回另一个函数.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">   <span class="comment">// 获取年龄大于20的学生对象</span></span><br><span class="line">   <span class="title function_">more20stu</span>(<span class="params">state</span>)&#123;</span><br><span class="line">       <span class="keyword">return</span> state.<span class="property">students</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">s</span> =&gt;</span> s.<span class="property">age</span> &gt;<span class="number">20</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// 获取年龄大于20的学生个数</span></span><br><span class="line">   <span class="title function_">more20stuLength</span>(<span class="params">state,getters</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> getters.<span class="property">more20stu</span>.<span class="property">length</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// 让用户自己决定获取年龄大于多少</span></span><br><span class="line">   <span class="title function_">moreAgeStu</span>(<span class="params">state</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">age</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span> state.<span class="property">students</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">s</span> =&gt;</span> s.<span class="property">age</span> &gt; age)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>这样我们在其他 .vue 组件中就可以传入年龄数值筛选了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.getters.more20stu&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.getters.more20stuLength&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.getters.moreAgeStu(8)&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// @ is an alias to /src</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">HelloWorld</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/HelloWorld.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">HelloWorld</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="Mutation状态更新"><a href="#Mutation状态更新" class="headerlink" title="Mutation状态更新"></a>Mutation状态更新</h3><ul><li>Vuex的store状态的更新唯一方式：提交<strong>Mutation</strong></li><li>Mutation主要包括两部分：<ul><li>字符串的<strong>事件类型（type）</strong></li><li>一个<strong>回调函数(handler)</strong> 该回调函数的第一个参数就是 state</li></ul></li></ul><p>1.mutation 的定义方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.安装插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"><span class="comment">// 2.创建对象</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">increment</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            state.<span class="property">count</span>++</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">decrement</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            state.<span class="property">count</span>--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">       </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出store对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><p>2.通过 mutation 更新</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span>-1&lt;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">count</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">count</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">increment</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">decrement</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;decrement&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><code>注意state里面的数据只能写在compute里面，这样才能及时更新。</code></p><h4 id="mapState"><a href="#mapState" class="headerlink" title="mapState"></a>mapState</h4><p>mapState是state的语法糖</p><p> 在使用mapState之前,要导入这个辅助函数.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123;count&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &#123;&#123;dataCount&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;sex&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;from&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;myCmpted&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  data () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">str</span>: <span class="string">&#x27;国籍&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">dataCount</span>: <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">count</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: <span class="title function_">mapState</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">count</span>: <span class="string">&#x27;count&#x27;</span>, <span class="comment">// 第一种写法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">sex</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">sex</span>, <span class="comment">// 第二种写法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">from</span>: <span class="keyword">function</span> (<span class="params">state</span>) &#123; <span class="comment">// 用普通函数this指向vue实例,要注意</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">str</span> + <span class="string">&#x27;:&#x27;</span> + state.<span class="property">from</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 注意下面的写法看起来和上面相同,事实上箭头函数的this指针并没有指向vue实例,因此不要滥用箭头函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// from: (state) =&gt; this.str + &#x27;:&#x27; + state.from</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">myCmpted</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 这里不需要state,测试一下computed的原有用法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> <span class="string">&#x27;测试&#x27;</span> + <span class="variable language_">this</span>.<span class="property">str</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    increment () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    decrement () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;decrement&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  created () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 写个定时器，发现computed依旧保持了只要内部有相关属性发生改变不管是当前实例data中的改变，还是vuex中的值改变都会触发dom和值更新</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">str</span> = <span class="string">&#x27;国家&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;, <span class="number">1000</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Mutation传递参数"><a href="#Mutation传递参数" class="headerlink" title="Mutation传递参数"></a>Mutation传递参数</h4><p>在通过mutation更新数据的时候, 有可能我们希望携带一些<strong>额外的参数</strong>，参数被称为 mutation 的载荷(Payload)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">state</span>)&#123;</span><br><span class="line">        state.<span class="property">count</span>++</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">decrement</span>(<span class="params">state</span>)&#123;</span><br><span class="line">        state.<span class="property">count</span>--</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">incrementCount</span>(<span class="params">state,count</span>)&#123;</span><br><span class="line">        state.<span class="property">counter</span> += count</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>我们在其他 .vue 组件中来修改状态</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span>-1&lt;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addCount(5)&quot;</span>&gt;</span>+5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addCount(10)&quot;</span>&gt;</span>+5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">increment</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">decrement</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;decrement&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">addCount</span>(<span class="params">count</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;incrementCount&#x27;</span>,count)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>但是如果参数不是一个呢？</p><p>比如我们有很多参数需要传递，这个时候，我们通常会以对象的形式传递，也就是 payload 是一个对象。</p><p>这个时候可以再从对象中取出相关的信息。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">increment</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            state.<span class="property">count</span>++</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">decrement</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            state.<span class="property">count</span>--</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">incrementCount</span>(<span class="params">state,count</span>)&#123;</span><br><span class="line">            state.<span class="property">counter</span> += count</span><br><span class="line">        &#125;,</span><br><span class="line">         <span class="title function_">addStudent</span>(<span class="params">state,stu</span>)&#123;</span><br><span class="line">            state.<span class="property">students</span>.<span class="title function_">push</span>(stu)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>我们在其他 .vue 组件中来修改状态</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span>-1&lt;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addCount(5)&quot;</span>&gt;</span>+5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addCount(10)&quot;</span>&gt;</span>+5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addStudent&quot;</span>&gt;</span>添加学生<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">increment</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">decrement</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;decrement&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">addCount</span>(<span class="params">count</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;incrementCount&#x27;</span>,count)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">addStudent</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">const</span> stu = &#123;<span class="attr">id</span>: <span class="number">114</span>, <span class="attr">name</span>: <span class="string">&#x27;alan&#x27;</span>,<span class="attr">age</span>: <span class="number">35</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;addStudent&#x27;</span>,stu)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="Mutation提交风格"><a href="#Mutation提交风格" class="headerlink" title="Mutation提交风格"></a>Mutation提交风格</h4><p>上面的通过 <strong>commit</strong> 进行提交是一种普通的方式</p><p>Vue 还提供了另外一种风格，它是一个包含 type 属性的对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addCount</span>(<span class="params">count</span>)&#123;</span><br><span class="line">    <span class="comment">// 1.普通的提交封装</span></span><br><span class="line">    <span class="comment">// this.$store.commit(&#x27;incrementCount&#x27;,count)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.特殊的提交封装</span></span><br><span class="line">    <span class="variable language_">this</span>.&amp;store.<span class="title function_">commit</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;incrementCount&#x27;</span>,</span><br><span class="line">        count</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="Mutation响应规则"><a href="#Mutation响应规则" class="headerlink" title="Mutation响应规则"></a>Mutation响应规则</h4><p>Vuex 的 store 中的 state 是响应式的，当 state 中的数据发生改变时，Vue 组件会自动更新</p><p>这就要求我们必须遵守一些<code>Vuex</code>对应的规则：</p><ol><li>提前在 store 中初始化好所需的属性</li><li>当给 state 中的对象添加新属性时，使用下面的方式</li></ol><ul><li>方式一：使用 <code>Vue.set(obj,&#39;newProp&#39;,123)</code></li><li>方式二：用新对象给就旧对象重新赋值</li></ul><p>例如：</p><p>我们在 <code>index.js</code> 中增加 info 状态</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">info</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;why&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">       <span class="comment">// 方式一:Vue.set()</span></span><br><span class="line">       <span class="title class_">Vue</span>.<span class="title function_">set</span>(state.<span class="property">info</span>,<span class="string">&#x27;height&#x27;</span>,payload.<span class="property">height</span>)</span><br><span class="line">       <span class="comment">// 方式二:给 info 赋值一个新的对象</span></span><br><span class="line">       state.<span class="property">info</span> = &#123;...state.<span class="property">info</span>,<span class="string">&#x27;height&#x27;</span>:payload.<span class="property">height</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>我们在其他 .vue 组件中修改状态</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>我的个人信息: &#123;&#123;info&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateInfo&quot;</span>&gt;</span>更新信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">info</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">info</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">updateInfo</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;updateInfo&#x27;</span>,&#123;<span class="attr">height</span>: <span class="number">1.88</span>&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="Mutation常量类型-概念"><a href="#Mutation常量类型-概念" class="headerlink" title="Mutation常量类型-概念"></a>Mutation常量类型-概念</h4><p>我们来考虑下面的问题：</p><ul><li>在 mutation 中，我们定义了很多事件类型(也就是其中的方法名称)</li><li>当我们的项目增大时，Vuex 管理的状态越来越多，需要更新状态的情况越来越多, 那么意味着 Mutation 中的方法越来越多</li><li>方法过多，使用者需要花费大量的精力的经历去记住这些方法，甚至是多个文件间来回切换, 查看方法名称, 甚至如果不是复制的时候, 可能还会出现写错的情况.</li></ul><p>如何避免上述问题呢？</p><ul><li>在各种Flux实现中, 一种很常见的方案就是使用常量替代 Mutation 事件的类型</li><li>我们可以将这些常量放在一个单独的文件中, 方便管理以及让整个app所有的事件类型一目了然.</li></ul><p>具体怎么做呢？</p><ul><li>我们可以创建一个文件: mutation-types.js, 并且在其中定义我们的常量</li><li>定义常量时, 我们可以使用ES2015中的风格, 使用一个常量来作为函数的名称.</li></ul><h3 id="Action的基本定义"><a href="#Action的基本定义" class="headerlink" title="Action的基本定义"></a>Action的基本定义</h3><p>我们强调，不要在 Mutation 中进行异步操作，但是某些情况，我们确实希望在 Vuex 中进行一些异步操作，比如网络请求，必然是异步的，Action 类似于 Mutation，但是是用来代替 Mutation 进行异步操作的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.安装插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"><span class="comment">// 2.创建对象</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">       <span class="attr">count</span>: <span class="number">0</span>  </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">increment</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            state.<span class="property">count</span>++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="title function_">increment</span>(<span class="params">context</span>)&#123;</span><br><span class="line">            context.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">      </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出store对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><p>context 是什么？</p><ul><li>context 是 store 对象具有相同方法和属性的对象</li><li>也就是说，我们可以通过 context 去进行 commit 相关的操作，也可以获取 context.state 等。</li></ul><h4 id="Action的分发"><a href="#Action的分发" class="headerlink" title="Action的分发"></a>Action的分发</h4><p>在Vue组件中，如果我们调用 action 中的方法，那么就需要使用 dispatch</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同样的，也是支持传递 payload</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;increment&#x27;</span>, &#123;<span class="attr">cCount</span>: <span class="number">5</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.安装插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"><span class="comment">// 2.创建对象</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">       <span class="attr">count</span>: <span class="number">0</span>  </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">increment</span>(<span class="params">state,payload</span>)&#123;</span><br><span class="line">            state.<span class="property">count</span> += payload.<span class="property">cCount</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="title function_">increment</span>(<span class="params">context,payload</span>)&#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>,payload)</span><br><span class="line">            &#125;,<span class="number">1000</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">      </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出store对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><h4 id="Action返回的Promise"><a href="#Action返回的Promise" class="headerlink" title="Action返回的Promise"></a>Action返回的Promise</h4><p>在 Action 中，我们可以将异步操作放在一个 Promise 中，并且在成功或者失败之后，调用对应的 resolve 或 reject</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">context</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">                <span class="title function_">resolve</span>()</span><br><span class="line">            &#125;,<span class="number">1000</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>在其他 Vue 组件中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;increment&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;完成了更新操作&#x27;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="认识-Module"><a href="#认识-Module" class="headerlink" title="认识 Module"></a>认识 Module</h2><p>Module 是模块的意思，为什么在 Vuex 中我们要使用模块呢？</p><ul><li>Vue 使用单一状态树，那么也意味着很多状态都会交给 Vuex 来管理</li><li>当应用变得非常复杂时， store 对象就有可能变得相当臃肿</li><li>为了解决这个问题，Vuex 允许我们将 store 分割成某块，而每个模块拥有自己的 state、mutations、action、getters等</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ModuleA</span> = &#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ModuleB</span> = &#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        <span class="attr">a</span>: moduleA,</span><br><span class="line">        <span class="attr">b</span>: moduleB</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.<span class="property">state</span>.<span class="property">a</span><span class="comment">// -&gt; moduleA 的状态</span></span><br><span class="line">store.<span class="property">state</span>.<span class="property">b</span><span class="comment">// -&gt; moduleB 的状态</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vue-router路由</title>
      <link href="/2022/04/08/vue/Vue-router%E8%B7%AF%E7%94%B1/"/>
      <url>/2022/04/08/vue/Vue-router%E8%B7%AF%E7%94%B1/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue-router路由"><a href="#Vue-router路由" class="headerlink" title="Vue-router路由"></a>Vue-router路由</h1><h1 id="Vue-router中的编程式"><a href="#Vue-router中的编程式" class="headerlink" title="Vue-router中的编程式"></a>Vue-router中的编程式</h1><h2 id="声明式导航-amp-编程式导航"><a href="#声明式导航-amp-编程式导航" class="headerlink" title="声明式导航&amp;编程式导航"></a>声明式导航&amp;编程式导航</h2><p>在浏览器中，点击链接实现导航的方式，叫做<code>声明式导航</code>。例如：</p><ul><li>普通网页中点击 <code>&lt;a&gt;</code> 链接，vue 项目中点击 <code>&lt;router-link&gt;</code> 都属于声明式导航</li></ul><p>在浏览器中，调用<code>API方法</code>实现导航的方式，叫做<code>编程式导航</code>。例如：</p><ul><li>普通网页中调用 location.href 跳转到新页面的方式，属于编程式导航</li></ul><h2 id="编程式导航API"><a href="#编程式导航API" class="headerlink" title="编程式导航API"></a>编程式导航API</h2><p><code>this.$router.push(&#39;hash地址&#39;)</code></p><p>跳转到指定 hash 地址，并增加一条历史记录</p><p><code>this.$router.replace(&#39;hash地址&#39;)</code></p><p>跳转到指定的 hash 地址，并替换掉当前的历史记录</p><p><code>this.$router.go(数值n)</code></p><p>实现导航历史前进、后退</p><h3 id="router-push"><a href="#router-push" class="headerlink" title="$router.push"></a>$router.push</h3><p>通过 <code>this.$router.push()</code> 方法，可以跳转到指定的 hash 地址，从而展示对应的组件页面。示例代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Home组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;gotoMovie&quot;</span>&gt;</span> 跳转到Movie页面<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;Home&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">gotoMovie</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/movie&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="router-replace"><a href="#router-replace" class="headerlink" title="$router.replace"></a>$router.replace</h3><p>调用 this.$router.replace() 方法，可以跳转到指定的 hash 地址，从而展示对应的组件页面。</p><p>push 和 replace 的区别：</p><ul><li>push 会增加一条历史记录</li><li>replace 不会增加历史记录，而是替换掉当前的历史记录</li></ul><h3 id="router-go"><a href="#router-go" class="headerlink" title="$router.go"></a>$router.go</h3><p>调用 <code>this.$router.go()</code> 方法，可以在浏览历史中前进和后退，示例代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Home组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;goBack&quot;</span>&gt;</span> 后退 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;Home&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">goBack</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">// 后退到之前的组件页面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">go</span>(-<span class="number">1</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><blockquote><p>注意，一般只会前进和后退一层页面，因此 vue-router 提供了如下两个便捷方法：</p></blockquote><ol><li><p>```<br>$router.back()</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   - 在历史记录中， 后退到上一个页面</span><br><span class="line"></span><br><span class="line">2. ```</span><br><span class="line">   $router.forward()</span><br></pre></td></tr></table></figure><ul><li>在历史记录中， 前进到下一个页面</li></ul></li></ol><h2 id="URL的hash"><a href="#URL的hash" class="headerlink" title="URL的hash"></a>URL的hash</h2><ul><li>URL的hash也就是锚点(#), 本质上是改变 window.location 的 href 属性.</li><li>我们可以通过直接赋值 location.hash 来改变 href , 但是页面不发生刷新</li></ul><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/19ec20f16a23490ca66a02e7c73b1887.png" alt="img"></p><p>我们可以通过HTML5新增的两种方式来改变URL</p><h3 id="pushState"><a href="#pushState" class="headerlink" title="pushState"></a>pushState</h3><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/55ecf60edb8c466ca05eea65b8dd8122.png" alt="img"></p><h3 id="replaceState"><a href="#replaceState" class="headerlink" title="replaceState"></a>replaceState</h3><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/479dae734fb94ca7b36f1b85e35d14c3.png" alt="img"></p><h1 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>1.安装 vue-router</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router --save</span><br></pre></td></tr></table></figure><p>2.在模块化工程中使用它(因为它是一个插件，所以可以通过 Vue.use() 来安装路由功能</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.导入 Vue 和 VueRouter 的包</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.调用 Vue.use() 函数,把 VueRouter 安装为 Vue 的插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.创建 VueRouter 对象</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// 配置路由和组件之间的应用关系</span></span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 4.将 router 对象传入到 vue 实例</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>3.使用 vue-router 的步骤</p><ol><li>创建路由组件</li><li>配置路由映射：组件和路径映射关系</li><li>使用路由: 通过<code>&lt;router-link&gt;</code>和<code>&lt;router-view&gt;</code> 声明路由链接和占位符</li></ol><h2 id="使用vue-router"><a href="#使用vue-router" class="headerlink" title="使用vue-router"></a>使用vue-router</h2><p>在 src 源代码目录下，新建 router/index.js 路由模块，并初始化如下的代码：</p><p>如果我们在使用 vueCLI 初始化项目的时候安装了 router，那么就会自动生成 router 文件夹，里面有 index.js 如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.导入 Vue 和 VueRouter 的包</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.调用 Vue.use() 函数,把 VueRouter 安装为 Vue 的插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.创建 VueRouter 对象</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;About&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="comment">/* webp ackChunkName: &quot;about&quot; */</span> <span class="string">&#x27;../views/About.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// 配置路由和组件之间的应用关系</span></span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 4.将 router 对象传入到 vue 实例</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>在 src/ main.js 入口文件中，导入并挂载路由模块。示例代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">// 1.导入路由模块</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="comment">// 2.挂载路由模块</span></span><br><span class="line">  router,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>在App.vue 主组件中使用路由</p><ul><li><code>&lt;router-link&gt;</code> 声明路由链接</li><li><code>&lt;router-view&gt;</code> 占位符</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!-- 1.定义路由链接 --&gt;</span>  </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span> |</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--  2.定义路由的占位符 --&gt;</span>  </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="声明路由匹配规则"><a href="#声明路由匹配规则" class="headerlink" title="声明路由匹配规则"></a>声明路由匹配规则</h2><p>在 src/router/index.js 路由模块中，通过 routes 数组 声明路由的匹配规则。示例代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [<span class="comment">// 在 routes 数组中,声明路由的匹配规则</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// path 表示要匹配的 hash 地址,component 表示要展示的路由组件  </span></span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;About&#x27;</span>,</span><br><span class="line">    <span class="comment">// 这种方式是路由懒加载,后面有解释  </span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="comment">/* webp ackChunkName: &quot;about&quot; */</span> <span class="string">&#x27;../views/About.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="HTML5的History模式"><a href="#HTML5的History模式" class="headerlink" title="HTML5的History模式"></a>HTML5的History模式</h2><p>我们前面说过改变路径的方式有两种：</p><ul><li><p>URL 的 hash</p></li><li><p>HTML5的history</p></li></ul><p>默认情况下，路径的改变使用的 URL 的hash，如果希望使用 HTML5 的 history 模式，进行如下配置即可：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;    routes,    <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><h2 id="router-link补充"><a href="#router-link补充" class="headerlink" title="router-link补充"></a>router-link补充</h2><p>在前面的 <code>&lt;router-link&gt;</code> 中,我们只是使用了一个属性：<code>to</code> ，用于指定跳转的路径</p><p><code>&lt;router-link&gt;</code> 还有一些其他属性</p><p><code>tag</code> : 指定 <code>&lt;router-link&gt;</code> 之后渲染成什么组件，比如下面的代码会被渲染成一个 <li> 元素,而不是 <a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=<span class="string">&#x27;/home&#x27;</span>  tag=<span class="string">&#x27;li&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><p><code>replace</code> ：</p><p> <code>replace</code> 不会留下 history 记录，所以指定 replace 的情况下，后退键返回不能返回到上一个页面中</p><p><code>active-class</code> ：</p><p>当 <code>&lt;router-link&gt;</code> 对应的路由匹配成功时,会自动给当前元素设置一个 <code>router-link-active</code> 的 <code>class</code>，设置 active-class 可以修改默认的名称(一般不需要改)</p><ul><li>在进行高亮显示的导航菜单或者底部tabbar时, 会使用到该类</li><li>但是通常不会修改类的属性, 会直接使用默认的router-link-active即可</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!-- 1.定义路由链接 --&gt;</span>  </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span> <span class="attr">tag</span>=<span class="string">&#x27;li&#x27;</span> <span class="attr">replace</span> &gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--  2.定义路由的占位符 --&gt;</span>  </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.router-link-active</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">color</span>: red</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="路由代码跳转"><a href="#路由代码跳转" class="headerlink" title="路由代码跳转"></a>路由代码跳转</h2><p>有时候, 页面的跳转可能需要执行对应的JavaScript代码, 这个时候, 就可以使用第二种跳转方式了，也就是编程式导航。</p><p>例如，我们需要点击按钮然后进行跳转</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;homeClick&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;aboutClick&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &lt;!--  <span class="number">2.</span>定义路由的占位符 --&gt;  </span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">homeClick</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/home&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">aboutClick</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/about&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="Vue-router的常见用法"><a href="#Vue-router的常见用法" class="headerlink" title="Vue-router的常见用法"></a>Vue-router的常见用法</h1><h2 id="路由重定向"><a href="#路由重定向" class="headerlink" title="路由重定向"></a>路由重定向</h2><p>路由重定向指的是：用户在访问 地址 A 的时候，强制用户跳转到 地址 C ，从而展示特定的组件页面。</p><p>通过路由规则的 redirect 属性，指定一个新的路由地址，可以很方便地设置路由的重定向：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="comment">// 在 routes 数组中,声明路由的匹配规则</span></span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        <span class="comment">// 当用户访问 / 的时候,通过 redirect 属性跳转到 /home 对应的路由规则</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">            <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="路由的懒加载"><a href="#路由的懒加载" class="headerlink" title="路由的懒加载"></a>路由的懒加载</h2><p>路由懒加载的主要作用就是将路由对应的组件打包成一个个的js代码块.</p><p>只有在这个路由被访问到的时候, 才加载对应的组件</p><p>在ES6中, 我们可以有更加简单的写法来组织Vue异步组件和Webpack的代码分割</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = (<span class="params"></span>) =&gt; <span class="title function_">import</span>(<span class="string">&#x27;../components/Home.vue&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置路由相关的信息</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 原始路由加载</span></span><br><span class="line"><span class="comment">// import Home from &#x27;../components/Home&#x27;</span></span><br><span class="line"><span class="comment">// 路由懒加载(推荐)</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = (<span class="params"></span>) =&gt; <span class="title function_">imports</span>(<span class="string">&#x27;../components/Home&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.通过Vue.use(插件), 安装插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [<span class="comment">// 在 routes 数组中,声明路由的匹配规则</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// path 表示要匹配的 hash 地址,component 表示要展示的路由组件  </span></span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;About&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&#x27;../views/About.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// 配置路由和组件之间的应用关系</span></span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  <span class="attr">linkActiveClass</span>: <span class="string">&#x27;active&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.将router对象传入到Vue实例</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h2 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h2><p>我们在 src/router/index.js 中配置路由</p><p>使用英文的冒号 (: ) 来定义路由的参数项</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">User</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 User.vue 组件中,可以获取到 id 的值，从而展示对应的用户详情</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;User-container&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>User组件 ------- &#123;&#123;this.$route.params.id&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;User&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>我们也可以在主组件 App.vue 中获取到路由参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link v-<span class="attr">bind</span>:to=<span class="string">&quot; &#x27;/user&#x27; + id &quot;</span>&gt;用户&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="使用props接收路由参数"><a href="#使用props接收路由参数" class="headerlink" title="使用props接收路由参数"></a>使用props接收路由参数</h2><p>为了<strong>简化路由参数的获取形式</strong>，vue-router 允许在 路由规则中开启 props 传参 。</p><p>1.我们在 src/router/index.js 中配置路由</p><p>定义路由规则时，声明 <code>props: true</code> 选项</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">User</span>,</span><br><span class="line">    <span class="attr">props</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.在 User.vue 组件中,可以获取到 id 的值，从而展示对应的用户详情</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;User-container&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 2.直接使用 props 中接收的路由参数 --&gt;</span>  </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>User组件 ------- &#123;&#123;id&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;User&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">props</span>: [<span class="string">&#x27;id&#x27;</span>]<span class="comment">// 1.使用 props 接收路由规则中匹配到的参数项</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>3.在主组件 App.vue 中也可以获取到路由参数</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">v-bind:to</span>=<span class="string">&quot; &#x27;/user&#x27; + id &quot;</span>&gt;</span>用户<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="传递参数的方式"><a href="#传递参数的方式" class="headerlink" title="传递参数的方式"></a>传递参数的方式</h2><p>传递参数主要有两种类型: params 和 query</p><h3 id="params的类型"><a href="#params的类型" class="headerlink" title="params的类型"></a>params的类型</h3><ul><li>配置路由格式: <code>/router/:id</code></li><li>传递的方式: 在path后面跟上对应的值</li><li>传递后形成的路径: /router/123, /router/abc</li></ul><h3 id="query的类型"><a href="#query的类型" class="headerlink" title="query的类型"></a>query的类型</h3><ul><li>配置路由格式: /router, 也就是普通配置</li><li>传递的方式: 对象中使用query的key作为传递方式</li><li>传递后形成的路径: /router?id=123, /router?id=abc</li></ul><p>例如我们在 App.vue 里面向其他路由 ‘/profile’ 传递对象参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to =<span class="string">&quot;&#123;</span></span><br><span class="line"><span class="string">                   path:&#x27;/profile&#x27;, </span></span><br><span class="line"><span class="string">                   query:&#123;name: &#x27;why&#x27;,age: 18,height:1.88&#125;&#125;&quot;</span>&gt;</span><br><span class="line">&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><p>在 Profile.vue 组件里面也可以取到传递过来的参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是 Profile 组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;this.$route.query&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;this.$route.query.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;this.$route.query.age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;this.$route.query.height&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;Profile&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="router-和-route的区别"><a href="#router-和-route的区别" class="headerlink" title="$ router 和$route的区别"></a>$ router 和$route的区别</h2><ul><li><code>$router</code> 为VueRouter实例，想要导航到不同URL，则使用<code>$router.push</code>方法</li><li><code>$route</code>为当前 router 跳转对象里面可以获取name、path、query、params等</li></ul><h2 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h2><p>嵌套路由是一个很常见的功能，比如在home页面中, 我们希望通过 /home/news 和 /home/message 访问一些内容，</p><p>一个路径映射一个组件, 访问这两个路径也会分别渲染两个组件</p><p>实现嵌套路由有两个步骤：</p><ol><li>创建对应的子组件, 并且在路由映射中配置对应的子路由.，使用 children 属性声明子路由规则</li><li>在组件内部使用<router-view>标签.</li></ol><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220406085825078.png" alt="image-20220406085825078"></p><p>我们创建好 HomeNews.vue 和 HomeMessage.vue 后，在 src/router/index.js 中配置路由映射</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置路由相关的信息</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 路由懒加载(推荐)</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = (<span class="params"></span>) =&gt; <span class="title function_">imports</span>(<span class="string">&#x27;../components/Home&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">HomeNews</span> = (<span class="params"></span>) =&gt; <span class="title function_">imports</span>(<span class="string">&#x27;../components/HomeNews&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">HomeMessage</span> = (<span class="params"></span>) =&gt; <span class="title function_">imports</span>(<span class="string">&#x27;../components/HomeMessage&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.通过Vue.use(插件), 安装插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// Home 页面的路由规则(父级路由规则)</span></span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">    <span class="comment">// 通过 children 属性,嵌套声明子级路由规则  </span></span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">           <span class="comment">// 默认路径</span></span><br><span class="line">           <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">redirect</span>: <span class="string">&#x27;news&#x27;</span></span><br><span class="line">        &#125;，</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">HomeNews</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;messages&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">HomeMessage</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// 配置路由和组件之间的应用关系</span></span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  <span class="attr">linkActiveClass</span>: <span class="string">&#x27;active&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.将router对象传入到Vue实例</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h1 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h1><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/00872e4395704b439e8e95b8cc749a71.png" alt="img"></p><p>我们来考虑一个需求: 在一个SPA应用中, 如何改变网页的标题呢?</p><ul><li><p>网页标题是通过<title>来显示的, 但是SPA只有一个固定的HTML, 切换不同的页面时, 标题并不会改变.</p></li><li><p>但是我们可以通过JavaScript来修改<title>的内容 window.document.title = ‘新的标题’</p></li><li><p>那么在Vue项目中, 在哪里修改? 什么时候修改比较合适呢?</p></li></ul><p>什么是导航守卫?</p><ul><li>vue-router提供的导航守卫主要用来监听监听路由的进入和离开的.</li><li>vue-router提供了<code>beforeEach</code>和<code>afterEach</code>的钩子函数, 它们会在路由即将改变前和改变后触发</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置路由相关的信息</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;../components/Home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;../components/About&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&quot;../components/User&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.通过Vue.use(插件), 安装插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.创建VueRouter对象</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="comment">// redirect重定向</span></span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;首页&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;关于&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// 配置路由和组件之间的应用关系</span></span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 前置钩子hook(前置回调)</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,form,next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 从 from 跳转到 to</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.将router对象传入到Vue实例</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h2 id="全局前置守卫"><a href="#全局前置守卫" class="headerlink" title="全局前置守卫"></a>全局前置守卫</h2><p>每次发生路由的导航跳转时，都会触发全局前置守卫 。因此，在全局前置守卫中，程序员可以对每个路由进行访问权限的控制：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用路由实例对象的 beforeEach 方法,即可声明&quot;全局前置守卫&quot;</span></span><br><span class="line"><span class="comment">// 每次发生路由跳转的时候,都会触发这个方法</span></span><br><span class="line"><span class="comment">// 全局前置守卫</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// to 是将要访问的路由的信息对象</span></span><br><span class="line">    <span class="comment">// from 是将要离开的路由的信息对象</span></span><br><span class="line">    <span class="comment">// next 是一个函数,调用 next()表示放行,允许这次路由导航</span></span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure><p>导航钩子的三个参数解析：</p><p>to ： 即将要进入的目标的路由对象<br>from：当前导航即将要离开的路由对象<br>next：调用该方法后，才能进入下一个钩子<br>注意：如果是前置钩子beforeEach，必须要调用 next() 函数，如果是后置钩子afterEach，不需要主动调用 next() 函数</p><h2 id="next函数的三种调用方式"><a href="#next函数的三种调用方式" class="headerlink" title="next函数的三种调用方式"></a>next函数的三种调用方式</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/6d3c2e7c82694967a17a8a6bb97046b8.png" alt="img"></p><ul><li>当前用户拥有后台主页的访问权限，直接放行： <code>next()</code></li><li>当前用户没有后台主页的访问权限，强制其跳转到登录页面：<code>next(&#39;/login&#39;)</code></li><li>当前用户没有后台主页的访问权限，不允许跳转到后台主页：<code>next(false)</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>html的难点</title>
      <link href="/2022/04/08/html/html%E7%9A%84%E9%9A%BE%E7%82%B9/"/>
      <url>/2022/04/08/html/html%E7%9A%84%E9%9A%BE%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h1 id="html的难点"><a href="#html的难点" class="headerlink" title="html的难点"></a>html的难点</h1><h2 id="图像标签🔥"><a href="#图像标签🔥" class="headerlink" title="图像标签🔥"></a>图像标签🔥</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;pink1.jpg&quot; alt=&quot;我是林晓&quot;  title=&quot;我是林晓&quot; /&gt;</span><br></pre></td></tr></table></figure><p>src是<img>标签的必须属性，它用于指定图像文件的路径和文件</p><table><thead><tr><th align="center">属性</th><th align="center">属性值</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">src</td><td align="center">图片路径</td><td align="center">必须属性</td></tr><tr><td align="center">alt</td><td align="center">文本</td><td align="center">替换文本（当图片不能显示时候显示的文字）</td></tr><tr><td align="center">title</td><td align="center">文本</td><td align="center">提示文本（鼠标放到图像上，显示的文字）</td></tr></tbody></table><h2 id="超链接标签🔥"><a href="#超链接标签🔥" class="headerlink" title="超链接标签🔥"></a>超链接标签🔥</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;跳转目标&quot;</span> <span class="attr">target</span>=<span class="string">&quot;目标窗口的弹出方式&quot;</span>&gt;</span>文本或图像<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">属性</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">href</td><td align="center">用于指定链接目标的url地址。必须属性</td></tr><tr><td align="center">target</td><td align="center">用于指定连接页面的打开方式。<code>_self</code>为默认值，<code>_blank</code>为在新窗口中打开</td></tr></tbody></table><h2 id="锚点链接"><a href="#锚点链接" class="headerlink" title="锚点链接"></a>锚点链接</h2><p>作用：点击链接，可以快速定位到页面中的某个位置</p><ul><li>在链接文本的<code>href</code>属性中，设置属性值为 <strong>#名字</strong></li><li>找到目标位置标签，里面添加一个 <strong>id属性=刚才的名字</strong></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">&quot;#two&quot;</span>&gt;</span>第二季<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">id</span> = <span class="string">&quot;two&quot;</span>&gt;</span>第二季介绍<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="表格标签🔥"><a href="#表格标签🔥" class="headerlink" title="表格标签🔥"></a>表格标签🔥</h2><ul><li><p><code>table</code> 用来定义表格的标签</p></li><li><p><code>tr</code> 用来定义表格中的行，必须嵌套在<code>&lt;table&gt;&lt;/table&gt;</code> 标签中</p></li><li><p><code>td</code> 用来定义表格中的单元格，必须嵌套在<code>&lt;tr&gt;&lt;/tr&gt;</code> 标签中</p></li><li><p><code>th</code> 用来定义表格中的表头，表头单元格里面的内容加粗居中显示</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>  <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span>     <span class="tag">&lt;<span class="name">th</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">th</span>&gt;</span>    <span class="tag">&lt;<span class="name">th</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">th</span>&gt;</span>        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>  <span class="tag">&lt;<span class="name">td</span>&gt;</span>林晓<span class="tag">&lt;/<span class="name">td</span>&gt;</span>     <span class="tag">&lt;<span class="name">td</span>&gt;</span>男<span class="tag">&lt;/<span class="name">td</span>&gt;</span>     <span class="tag">&lt;<span class="name">td</span>&gt;</span>18<span class="tag">&lt;/<span class="name">td</span>&gt;</span>          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>  <span class="tag">&lt;<span class="name">td</span>&gt;</span>林晓<span class="tag">&lt;/<span class="name">td</span>&gt;</span>     <span class="tag">&lt;<span class="name">td</span>&gt;</span>男<span class="tag">&lt;/<span class="name">td</span>&gt;</span>     <span class="tag">&lt;<span class="name">td</span>&gt;</span>18<span class="tag">&lt;/<span class="name">td</span>&gt;</span>          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>  <span class="tag">&lt;<span class="name">td</span>&gt;</span>林晓<span class="tag">&lt;/<span class="name">td</span>&gt;</span>     <span class="tag">&lt;<span class="name">td</span>&gt;</span>男<span class="tag">&lt;/<span class="name">td</span>&gt;</span>     <span class="tag">&lt;<span class="name">td</span>&gt;</span>18<span class="tag">&lt;/<span class="name">td</span>&gt;</span>          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>                        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">&lt;/body</span><br></pre></td></tr></table></figure></li></ul><h3 id="表格属性"><a href="#表格属性" class="headerlink" title="表格属性"></a>表格属性</h3><p>表格标签的属性实际开发并不常用，因为基本都是通过后面的CSS来设置的</p><table><thead><tr><th align="center">属性名</th><th align="center">属性值</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">align</td><td align="center">left,center,right</td><td align="center">规定表格相对周围元素的对齐方式</td></tr><tr><td align="center">border</td><td align="center">1或者0</td><td align="center">规定表格单元是否拥有边框，默认为” “，表示没有边框</td></tr><tr><td align="center"><code>cellpadding</code></td><td align="center">像素值</td><td align="center">规定单元边沿与其内容之间的空白，默认1像素</td></tr><tr><td align="center"><code>cellspacing</code></td><td align="center">像素值</td><td align="center">规定单元格之间的空白，默认2像素</td></tr><tr><td align="center">width</td><td align="center">像素值或百分比</td><td align="center">规定表格的宽度</td></tr></tbody></table><h3 id="合并单元格"><a href="#合并单元格" class="headerlink" title="合并单元格"></a>合并单元格</h3><ul><li>跨行合并：<code>rowspan=“合并单元格的个数”</code></li><li>跨列合并：<code>colspan=&quot;合并单元格的个数&quot;</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span> = <span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="表单标签🔥"><a href="#表单标签🔥" class="headerlink" title="表单标签🔥"></a>表单标签🔥</h2><p>一个完整的表单通常由<strong>表单域，表单控件（表单元素）和提示信息</strong>3部分组成</p><h3 id="表单域🔥"><a href="#表单域🔥" class="headerlink" title="表单域🔥"></a>表单域🔥</h3><ul><li>表单域是一个包含表单元素的区域</li><li><code>&lt;form&gt;&lt;/from&gt;</code>标签用于定义表单域，会把它范围内的表单元素信息提交给服务器</li></ul><table><thead><tr><th align="center">属性</th><th align="center">属性值</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">action</td><td align="center">url地址</td><td align="center">用于指定接收并处理表单数据的服务器程序的url地址</td></tr><tr><td align="center">method</td><td align="center">get/post</td><td align="center">用于设置表单数据的提交方式，其取值为get或post</td></tr><tr><td align="center">name</td><td align="center">名称</td><td align="center">用于指定表单的名称，以区分同一个页面中的多个表单域</td></tr></tbody></table><h3 id="表单控件-表单元素-🔥"><a href="#表单控件-表单元素-🔥" class="headerlink" title="表单控件(表单元素)🔥"></a>表单控件(表单元素)🔥</h3><h4 id="input输入表单元素🔥"><a href="#input输入表单元素🔥" class="headerlink" title="input输入表单元素🔥"></a>input输入表单元素🔥</h4><ul><li><code>input</code>输入表单元素</li><li><code>input</code>是个单标签，<code>type</code> 属性设置不同的属性用来指定不同的控件类型(文本字段、复选框、单选按钮、按钮等)</li></ul><p>type 属性的属性值及描述如下：</p><table><thead><tr><th align="center">属性值</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">button</td><td align="center">定义可点击按钮(多数情况下，用于通过JavaScript启动脚本)</td></tr><tr><td align="center"><code>checkbox</code></td><td align="center">定义复选框</td></tr><tr><td align="center"><code>text</code></td><td align="center">定义单行的输入字段，用户可在其中输入文本。默认宽度为 20 个字符。</td></tr><tr><td align="center">hidden</td><td align="center">定义隐藏的输入字段</td></tr><tr><td align="center">image</td><td align="center">定义图像形式的提交按钮</td></tr><tr><td align="center"><code>password</code></td><td align="center">定义密码字段。该字段中的字符被掩码</td></tr><tr><td align="center"><code>radio</code></td><td align="center">定义单选按钮</td></tr><tr><td align="center">reset</td><td align="center">定义重置按钮。重置按钮会清楚表单中的所有数据</td></tr><tr><td align="center">submit</td><td align="center">定义提交按钮。提交按钮会把表单数据发送到服务器。</td></tr><tr><td align="center"><code>number</code></td><td align="center">限制用户输入必须为数字类型</td></tr><tr><td align="center"><code>tel</code></td><td align="center">手机号码</td></tr><tr><td align="center"><code>search</code></td><td align="center">搜索框</td></tr></tbody></table><p>除 type 属性外，<code>&lt;input&gt;</code> 标签还有很多其他很多属性，其常用属性如下：</p><table><thead><tr><th>属性</th><th>属性值</th><th>描述</th></tr></thead><tbody><tr><td>name</td><td>由用户自定义</td><td>定义 input 元素的名称</td></tr><tr><td>value</td><td>由用户自定义</td><td>规定 input 元素的值</td></tr><tr><td>checked</td><td>checked</td><td>规定此 input 元素首次加载时应当被选中</td></tr><tr><td>maxlength</td><td>正整数</td><td>规定输入字段中字符的最大长度</td></tr></tbody></table><ul><li>name 和 value 是每个表单元素都有的属性值，主要给后端人员使用。</li><li><code>name</code> 是表单元素的名字，要求 <code>单选框和复选框要有相同的name值</code></li><li>checked 属性主要针对于单选框和复选框，主要作用是一打开页面，就可以<code>默认选中某个表单元素</code></li></ul><h3 id="select下拉表单元素🔥"><a href="#select下拉表单元素🔥" class="headerlink" title="select下拉表单元素🔥"></a>select下拉表单元素🔥</h3><ul><li>下拉表单元素</li><li><code>&lt;select&gt;</code>中至少包含一对<code>&lt;option&gt;</code></li><li>在<code>&lt;option&gt;</code>中定义 <code>selected=&quot;selected&quot;</code> 时，当前项即为默认选中项。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>=<span class="string">&quot;selected&quot;</span>&gt;</span>选项1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">option</span>&gt;</span>选项2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">option</span>&gt;</span>选项3<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">       ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="textarea文本域元素🔥"><a href="#textarea文本域元素🔥" class="headerlink" title="textarea文本域元素🔥"></a><code>textarea</code>文本域元素🔥</h3><ul><li>用于定义多行文本输入的控件</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span></span><br><span class="line">    文本内容</span><br><span class="line"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="label🔥"><a href="#label🔥" class="headerlink" title="label🔥"></a>label🔥</h3><ul><li><code>label</code>标签用于绑定一个表单元素，当点击<code>&lt;lable&gt;</code>标签内的文本时，浏览器就会自动将焦点(光标)转到表单元素上，用来增加用户体验</li><li><code>label</code>标签的 for属性 应当与相关元素的id 属性相同</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;sex&quot;</span>&gt;</span> 男 <span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sex&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h2 id="新增语义化标签🔥"><a href="#新增语义化标签🔥" class="headerlink" title="新增语义化标签🔥"></a>新增语义化<a href="https://so.csdn.net/so/search?q=%E6%A0%87%E7%AD%BE&spm=1001.2101.3001.7020">标签</a>🔥</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/07df0702684841339d1b4884b4bdc677.png" alt="img"></p><table><thead><tr><th align="center">标签</th><th align="center">语义</th></tr></thead><tbody><tr><td align="center">header</td><td align="center">头部标签</td></tr><tr><td align="center"><code>nav</code></td><td align="center">导航标签</td></tr><tr><td align="center">article</td><td align="center">内容标签</td></tr><tr><td align="center">section</td><td align="center">定义文档某个区域</td></tr><tr><td align="center">aside</td><td align="center">侧边栏标签</td></tr><tr><td align="center">footer</td><td align="center">尾部标签</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> CSS &amp; HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>css的复习</title>
      <link href="/2022/04/08/css/css%E7%9A%84%E5%A4%8D%E4%B9%A0/"/>
      <url>/2022/04/08/css/css%E7%9A%84%E5%A4%8D%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="css的复习"><a href="#css的复习" class="headerlink" title="css的复习"></a>css的复习</h1><h2 id="CSS字体属性🔥"><a href="#CSS字体属性🔥" class="headerlink" title="CSS字体属性🔥"></a>CSS字体属性🔥</h2><table><thead><tr><th>属性</th><th>表示</th><th>注意点</th></tr></thead><tbody><tr><td>font-style</td><td>字体样式</td><td>记住倾斜是 italic，不倾斜是 normal，实际开发最常用 normal</td></tr><tr><td>font-weight</td><td>字体粗细</td><td>加粗是 700 或者 bold ，不加粗是 normal 或者 400，记住数字不加单位</td></tr><tr><td>font-size</td><td>字号</td><td>我们通常用的单位是 px ，一定要跟上单位</td></tr><tr><td>font-family</td><td>字体</td><td>实际工作中按照团队约定来写字体</td></tr><tr><td>font</td><td>字体连写</td><td>顺序：ont-style font-weight  font-size/line-height  font-family</td></tr></tbody></table><h2 id="CSS元素显示模式🔥"><a href="#CSS元素显示模式🔥" class="headerlink" title="CSS元素显示模式🔥"></a>CSS元素显示模式🔥</h2><p>块元素🔥</p><p>常见的块元素有<code>&lt;h1&gt;~&lt;h6&gt;、&lt;p&gt;、&lt;div&gt;、&lt;ul&gt;、&lt;ol&gt;、&lt;li&gt;</code>等，其中<code>&lt;div&gt;</code> 标签是最典型的块元素。</p><p>行内元素🔥</p><p>常见的行内元素有<code>&lt;a&gt;、&lt;strong&gt;、&lt;b&gt;、&lt;em&gt;、&lt;i&gt;、&lt;del&gt;、&lt;s&gt;、&lt;ins&gt;、&lt;u&gt;、&lt;span&gt;</code>等</p><p>行内块元素🔥</p><p>在行内元素中有几个特殊的标签 —— <code>&lt;img /&gt;、&lt;input /&gt;、&lt;td&gt;</code>，它们同时具有块元素和行内元素的特点</p><table><thead><tr><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>元素模式</td><td>元素排列</td><td>设置样式</td><td>默认宽度</td><td>包含</td></tr><tr><td>块级元素</td><td>一行只能放一个块级元素</td><td>可以设置宽度高度</td><td>容器的100%</td><td>容器级可以包含任何标签</td></tr><tr><td>行内元素</td><td>一行可以放多个行内元素</td><td>不可以直接设置宽度高度</td><td>它本身内容的宽度</td><td>容纳文本或其他行内元素</td></tr><tr><td>行内块元素</td><td>一行放多个行内块元素</td><td>可以设置宽度高度</td><td>它本身内容的宽度</td><td></td></tr></tbody></table><ul><li>转换为块元素： <code>display:block</code></li><li>转换为行内元素： <code>display:inline</code></li><li>转换为行内块元素: <code>display:inline-block</code></li></ul><h2 id="去掉-li-前面的小圆点"><a href="#去掉-li-前面的小圆点" class="headerlink" title="去掉 li 前面的小圆点"></a>去掉 li 前面的小圆点</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="text-align🔥"><a href="#text-align🔥" class="headerlink" title="text-align🔥"></a>text-align🔥</h2><p><code>text-align 属性用于设置文本内容的水平对齐方式</code></p><p>这个属性是对于三个元素都是有效的</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">text-align</span>:center;</span><br></pre></td></tr></table></figure><h2 id="line-height🔥"><a href="#line-height🔥" class="headerlink" title="line-height🔥"></a>line-height🔥</h2><p><code>line-height 属性用于设置行间的距离(行高)，可以控制文字行与行之间的距离</code></p><p><code>line-height</code> 和 height 一样时，文字高度水平</p><h2 id="边框border🔥"><a href="#边框border🔥" class="headerlink" title="边框border🔥"></a>边框border🔥</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border</span> : <span class="number">1px</span> soilid red;</span><br></pre></td></tr></table></figure><h3 id="边框会影响盒子实际大小🔥"><a href="#边框会影响盒子实际大小🔥" class="headerlink" title="边框会影响盒子实际大小🔥"></a>边框会影响盒子实际大小🔥</h3><p>边框会额外增加盒子的实际大小，因此我们有两种方案解决：</p><ol><li>测量盒子大小的时候，不量边框</li><li>如果测量的时候包含了边框，则需要 width/height 减去边框宽度</li></ol><h3 id="外边距典型应用🔥"><a href="#外边距典型应用🔥" class="headerlink" title="外边距典型应用🔥"></a>外边距典型应用🔥</h3><p>外边距可以让<strong>块级盒子水平居中</strong>，但是必须满足两个条件</p><ol><li>盒子必须制定了宽度(width)</li><li>盒子<strong>左右的外边距</strong>都设置为 auto</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="外边距合并🔥"><a href="#外边距合并🔥" class="headerlink" title="外边距合并🔥"></a>外边距合并🔥</h3><p>使用 margin 定义块级元素的垂直外边距时，可能会出现外边距的合并。</p><p>主要有两种情况：</p><ol><li>相邻块元素垂直外边距的合并</li><li>嵌套块元素垂直外边距的塌陷</li></ol><h4 id="相邻块元素垂直外边距的合并🔥"><a href="#相邻块元素垂直外边距的合并🔥" class="headerlink" title="相邻块元素垂直外边距的合并🔥"></a>相邻块元素垂直外边距的合并🔥</h4><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/7718ee0385bf4536b331b7e551b8449b.png" alt="img"></p><h4 id="嵌套块元素垂直外边距的塌陷🔥"><a href="#嵌套块元素垂直外边距的塌陷🔥" class="headerlink" title="嵌套块元素垂直外边距的塌陷🔥"></a>嵌套块元素垂直外边距的塌陷🔥</h4><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/0bc4b88590cd435bb8376893c2fe542e.png" alt="img"></p><p>解决方案：</p><ol><li>可以为父元素定义上边框</li><li>可以为父元素定义上内边距</li><li>可以为父元素添加 overflow: hidden</li></ol><p>还有其他方法，比如浮动、固定、绝对定位的盒子不会有塌陷问题。</p><h1 id="传统网页布局的三种方式🔥"><a href="#传统网页布局的三种方式🔥" class="headerlink" title="传统网页布局的三种方式🔥"></a>传统网页布局的三种方式🔥</h1><ul><li>普通流（标准流）</li><li>浮动</li><li>定位</li></ul><h2 id="浮动🔥"><a href="#浮动🔥" class="headerlink" title="浮动🔥"></a>浮动🔥</h2><ul><li>浮动最典型的应用：<strong>可以让多个块级元素一行内排列显示。</strong></li><li>网页布局第一准则：<strong>多个块级元素纵向排列找标准流，多个块级元素横向排列找浮动。</strong></li></ul><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/c6416c483c96451092a80ada9785b347.png" alt="img"></p><ol><li><strong>浮动元素会具有行内块元素特性</strong></li><li><strong>如果块级盒子没有设置宽度，默认宽度和父级一样宽，但是添加浮动后，它的大小根据内容来决定</strong></li><li><strong>如果行内元素有了浮动，则不需要转换块级\行内块元素就可以直接给高度和宽度</strong></li></ol><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/1eb22d8b2c8543d19d0078f8acc2575a.png" alt="img"></p><h3 id="浮动的注意点🔥"><a href="#浮动的注意点🔥" class="headerlink" title="浮动的注意点🔥"></a>浮动的注意点🔥</h3><ul><li>先用标准流的父元素排列上下位置，之后内部子元素采取浮动排列左右位置</li><li>一个元素浮动了，理论上其余兄弟元素也要浮动<ul><li>一个盒子里面有多个子盒子，如果其中一个盒子浮动了，那么其他兄弟也应该浮动</li></ul></li><li><code>浮动的盒子只会影响浮动盒子后面的标准流，不会影响前面的标准流</code></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.two</span>&#123;</span><br><span class="line">            <span class="attribute">float</span>: left;</span><br><span class="line">            <span class="attribute">color</span>: pink;</span><br><span class="line">             <span class="attribute">list-style</span>: none;</span><br><span class="line">        &#125;</span><br><span class="line">&lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">      &lt;<span class="selector-tag">li</span>&gt;one&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">      &lt;<span class="selector-tag">li</span> class=&quot;two&quot;&gt;two&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">      &lt;<span class="selector-tag">li</span>&gt;three&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">ul</span>&gt;</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220301143623354.png" alt="image-20220301143623354"></p><h3 id="清除浮动🔥"><a href="#清除浮动🔥" class="headerlink" title="清除浮动🔥"></a>清除浮动🔥</h3><p>由于父级盒子很多情况下，不方便给高度，但是子盒子浮动又不占有位置，最后父级盒子高度为0时，就会影响下面的标准流盒子。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/7ae44f5681f549a99c1b7d1f45e5205b.png" alt="img"></p><h4 id="额外标签法"><a href="#额外标签法" class="headerlink" title="额外标签法"></a>额外标签法</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">选择器 &#123;</span><br><span class="line">    <span class="attribute">clear</span>: 属性值;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">属性值</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">left</td><td align="center">不允许左侧有浮动元素(清除左侧浮动的影响)</td></tr><tr><td align="center">right</td><td align="center">不允许右侧有浮动元素(清除右侧浮动的影响)</td></tr><tr><td align="center">both</td><td align="center">同时清除左右两侧浮动的影响</td></tr></tbody></table><h4 id="after伪元素法🔥"><a href="#after伪元素法🔥" class="headerlink" title="after伪元素法🔥"></a>after伪元素法🔥</h4><p>:after 方式是额外标签法的升级版。也是给父元素添加</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">      <span class="comment">/* IE6,7专有*/</span></span><br><span class="line">      *zoom : <span class="number">1</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="双伪元素🔥"><a href="#双伪元素🔥" class="headerlink" title="双伪元素🔥"></a>双伪元素🔥</h4><ul><li>也是给父元素添加</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:before</span>,<span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">   <span class="attribute">content</span>:<span class="string">&quot;&quot;</span>;</span><br><span class="line">   <span class="attribute">display</span>:table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">     <span class="attribute">clear</span>:both;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">  *zoom:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="定位🔥"><a href="#定位🔥" class="headerlink" title="定位🔥"></a>定位🔥</h2><p><code>定位 = 定位模式 +边偏移</code></p><table><thead><tr><th align="center">position值</th><th align="center">语义</th></tr></thead><tbody><tr><td align="center">static</td><td align="center">静态定位</td></tr><tr><td align="center">relative</td><td align="center">相对定位</td></tr><tr><td align="center">absolute</td><td align="center">绝对定位</td></tr><tr><td align="center">fixed</td><td align="center">固定定位</td></tr></tbody></table><h3 id="相对定位relative🔥"><a href="#相对定位relative🔥" class="headerlink" title="相对定位relative🔥"></a>相对定位relative🔥</h3><p>原来在标准流的位置继续占有，后面的盒子仍然以标准流的方式对待。（不脱标，继续保留原来位置）</p><p><code>子绝父相</code></p><h3 id="绝对定位absolute🔥"><a href="#绝对定位absolute🔥" class="headerlink" title="绝对定位absolute🔥"></a>绝对定位absolute🔥</h3><p><code>绝对定位不再占用原先的位置（脱标）</code></p><p>绝对定位盒子水平居中🔥</p><p>加了绝对定位的盒子不能通过<code>margin: 0 auto</code>水平居中</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="comment">/* 1.left走50%，父容器宽度的一半 */</span></span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="comment">/* 2.margin 负值往左边走 自己盒子宽度的一半 */</span></span><br><span class="line">    <span class="attribute">margin-left</span>: -xx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="固定定位fixed🔥"><a href="#固定定位fixed🔥" class="headerlink" title="固定定位fixed🔥"></a>固定定位fixed🔥</h3><p>固定定位<strong>不再占有原先的位置</strong>(脱标)</p><h2 id="border-box🔥"><a href="#border-box🔥" class="headerlink" title="border-box🔥"></a>border-box🔥</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">box-sizing</span>: border-box;</span><br></pre></td></tr></table></figure><p>padding 和 border 就不会撑大盒子了(前提是 padding 和 border 不会超过 width 宽度)</p><h2 id="vertical-align🔥"><a href="#vertical-align🔥" class="headerlink" title="vertical-align🔥"></a>vertical-align🔥</h2><p><code>vertical-align</code>:</p><ul><li>使用场景：经常用于设置<strong>图片</strong>或者**表单（行内块元素）**和**文字垂直对齐**。</li><li>官方解释：用于设置一个元素的垂直对齐方式，但是它只针对于<strong>行内元素</strong>或者<strong>行内块元素</strong>有效</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vertical-align</span>: baseline | top | middle | bottom</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">值</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">baseline</td><td align="center">默认，元素放置在父元素的基线上</td></tr><tr><td align="center">top</td><td align="center">把元素的顶端与行中最高元素的顶端对齐（顶线对齐）</td></tr><tr><td align="center">middle</td><td align="center">把此元素放置在父元素的中部（中线对齐）</td></tr><tr><td align="center">bottom</td><td align="center">把元素的顶端与行中最低的元素的顶端对齐（底线对齐）</td></tr></tbody></table><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/159dbd0d98f941f5b17eb713341d3c64.png" alt="img"></p><p>此时可以给图片、表单这些行内块元素的 vertical-align 属性设置为 <code>middle</code> 就可以让文字和图片垂直居中对齐了。</p><h2 id="图片底侧空白缝隙解决🔥"><a href="#图片底侧空白缝隙解决🔥" class="headerlink" title="图片底侧空白缝隙解决🔥"></a>图片底侧空白缝隙解决🔥</h2><p>bug：图片底侧会有一个空白缝隙，原因是行内块元素会和文字的基线对齐（给图片加边框就可以看见）</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/6ab28389075f4478a70a11cae3e5a58e.png" alt="img"></p><ol><li>给图片添加 <code>vertical-align : middle | top |bottom</code> 等</li><li>把图片转换为块级元素 <code>display:block;</code>，因为块级元素不会有<code>vertical-align</code> 属性</li></ol><h2 id="文字围绕浮动元素🔥"><a href="#文字围绕浮动元素🔥" class="headerlink" title="文字围绕浮动元素🔥"></a>文字围绕浮动元素🔥</h2><p>巧妙运用浮动元素不会压住文字的特性</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/71377b1f43f34ff1aaf153cf1dceb0b6.png" alt="img"></p><h2 id="行内块巧妙运用🔥"><a href="#行内块巧妙运用🔥" class="headerlink" title="行内块巧妙运用🔥"></a>行内块巧妙运用🔥</h2><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/7d1aaaf6a6d549e7b1a90c25447fb370.png" alt="img"></p><p>页码在页面中间显示：</p><ol><li>把这些链接盒子转换为行内块，之后给父级指定 <code>text-align: center</code></li><li>利用行内块元素中间有缝隙，并且给父级添加 <code>text-align: center</code> ，行内块元素会水平居中</li></ol><h2 id="隐藏一个元素"><a href="#隐藏一个元素" class="headerlink" title="隐藏一个元素"></a>隐藏一个元素</h2><h3 id="display显示隐藏🔥"><a href="#display显示隐藏🔥" class="headerlink" title="display显示隐藏🔥"></a>display显示隐藏🔥</h3><p><code>display</code>属性用于设置一个元素应如何显示</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">display</span>: none;  <span class="comment">/*隐藏对象*/</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">display</span>: block; <span class="comment">/*除了转换为块级元素之外，同时还有显示元素的意思*/</span></span><br></pre></td></tr></table></figure><ul><li><strong>display隐藏元素后，不再占有原来的位置</strong></li></ul><h3 id="visibility显示隐藏🔥"><a href="#visibility显示隐藏🔥" class="headerlink" title="visibility显示隐藏🔥"></a>visibility显示隐藏🔥</h3><p><code>visibility</code>属性用于指定一个元素应可见还是隐藏</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">visibility</span>: visible; <span class="comment">/*元素可视*/</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">visibility</span>: hidden;  <span class="comment">/*元素隐藏*/</span></span><br></pre></td></tr></table></figure><ul><li><strong>visibility 隐藏元素后，继续占有原来的位置。</strong></li><li>如果隐藏元素想要原来位置， 就用 <code>visibility：hidden</code></li><li>如果隐藏元素不想要原来位置， 就用 <code>display：none</code> (用处更多 重点）</li></ul><p>overflow溢出显示隐藏🔥</p><p><code>overflow</code> 属性指定了如果内容溢出一个元素的框（超过其指定高度及宽度） 时，会发生什么。</p><table><thead><tr><th align="center">属性值</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">visible</td><td align="center">不剪切内容也不添加滚动条</td></tr><tr><td align="center">hidden</td><td align="center">不显示超过对象尺寸的内容，超出的部分隐藏掉</td></tr><tr><td align="center">scroll</td><td align="center">不管超出内容否，总是显示滚动条</td></tr><tr><td align="center">auto</td><td align="center">超出自动显示滚动条，不超出不显示滚动条</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> CSS &amp; HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>移动端css</title>
      <link href="/2022/04/08/css/%E7%A7%BB%E5%8A%A8%E7%AB%AFcss/"/>
      <url>/2022/04/08/css/%E7%A7%BB%E5%8A%A8%E7%AB%AFcss/</url>
      
        <content type="html"><![CDATA[<h1 id="移动端css"><a href="#移动端css" class="headerlink" title="移动端css"></a>移动端css</h1><h2 id="flex布局🔥"><a href="#flex布局🔥" class="headerlink" title="flex布局🔥"></a>flex布局🔥</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">display</span>： <span class="attribute">flex</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>属性</th><th>用法</th></tr></thead><tbody><tr><td>flex-direction</td><td>设置主轴的方向，column，row</td></tr><tr><td>justify-content</td><td>设置主轴上的子元素排列方式</td></tr><tr><td>flex-wrap</td><td>设置子元素是否换行</td></tr><tr><td>align-content</td><td>设置侧轴上的子元素的排列方式（多行）</td></tr><tr><td>align-items</td><td>设置侧轴上的子元素排列方式（单行）</td></tr><tr><td>flex-flow</td><td>复合属性，相当于同时设置了 flex-direction 和 flex-wrap</td></tr></tbody></table><h3 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h3><table><thead><tr><th align="center">属性值</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><strong>flex-start</strong></td><td align="center"><strong>默认值从头部开始，如果主轴是x轴，则从左到右</strong></td></tr><tr><td align="center">flex-end</td><td align="center">从尾部开始排列</td></tr><tr><td align="center"><strong>center</strong></td><td align="center"><strong>在主轴居中对齐(如果主轴是 x 轴则水平居中)</strong></td></tr><tr><td align="center"><strong>space-around</strong></td><td align="center"><strong>平分剩余空间</strong></td></tr><tr><td align="center"><strong>space-between</strong></td><td align="center"><strong>先两边贴边，再平分剩余空间🔥</strong></td></tr></tbody></table><h3 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h3><p><code>设置在父级属性上</code></p><p>该属性是控制子项在侧轴（默认是y轴）上的排列方式 在子项为单项（<strong>单行</strong>）的时候使用</p><table><thead><tr><th align="center">属性值</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><strong>flex-start</strong></td><td align="center"><strong>从上到下</strong></td></tr><tr><td align="center">flex-end</td><td align="center">从下到上</td></tr><tr><td align="center"><strong>center</strong></td><td align="center"><strong>挤在一起居中(垂直居中)</strong></td></tr><tr><td align="center"><strong>stretch</strong></td><td align="center"><strong>拉伸(默认值)</strong></td></tr></tbody></table><h3 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a>align-self</h3><p><code>设置在子级属性上</code></p><ul><li>align-self 属性允许单个项目有与其他项目不一样的对齐方式，可覆盖 align-items 属性。</li><li>默认值为 auto，表示继承父元素的 align-items 属性，如果没有父元素，则等同于 stretch。</li></ul><h3 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h3><p><code>设置在父级属性上</code></p><p>设置子项在侧轴上的排列方式 并且只能用于子项出现 <strong>换行</strong> 的情况（多行），在单行下是没有效果的。</p><table><thead><tr><th align="center">属性值</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><strong>flex-start</strong></td><td align="center"><strong>默认值在侧轴的头部开始排列</strong></td></tr><tr><td align="center">flex-end</td><td align="center">在侧轴的尾部开始排列</td></tr><tr><td align="center"><strong>center</strong></td><td align="center"><strong>在侧轴中间显示</strong></td></tr><tr><td align="center"><strong>space-around</strong></td><td align="center"><strong>子项在侧轴平分剩余空间</strong></td></tr><tr><td align="center"><strong>space-between</strong></td><td align="center"><strong>子项在侧轴先分布在两头，再平分剩余空间</strong></td></tr><tr><td align="center"><strong>stretch</strong></td><td align="center"><strong>设置子项元素高度平分父元素高度</strong></td></tr></tbody></table><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/480258f6f7254d57ad0de8720a68705c.png" alt="img"></p><h3 id="order属性定义项目的排列顺序"><a href="#order属性定义项目的排列顺序" class="headerlink" title="order属性定义项目的排列顺序"></a>order属性定义项目的排列顺序</h3><p>数值越小，排列越靠前，默认为0。</p><p>注意：和 z-index 不一样。</p><h2 id="grid布局🔥"><a href="#grid布局🔥" class="headerlink" title="grid布局🔥"></a>grid布局🔥</h2>]]></content>
      
      
      <categories>
          
          <category> CSS &amp; HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vue组件化开发</title>
      <link href="/2022/04/06/vue/vue%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/"/>
      <url>/2022/04/06/vue/vue%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1 id="vue组件化开发"><a href="#vue组件化开发" class="headerlink" title="vue组件化开发"></a>vue组件化开发</h1><h2 id="组件化开发步骤"><a href="#组件化开发步骤" class="headerlink" title="组件化开发步骤"></a>组件化开发步骤</h2><ol><li>注册组件：调用 <code>Vue.component()</code> 方法注册组件</li><li>使用组件：在 <code>Vue</code> 实例的作用范围内使用组件</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--调用全局注册组件--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">msg</span>: <span class="string">&#x27;你好,Vue3！&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 2.定义一个组件(全局组件)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     app.<span class="title function_">component</span>(<span class="string">&#x27;button-counter&#x27;</span>,&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           <span class="attr">count</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="attr">template</span>: <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">        &lt;button @click=&quot;count++&quot;&gt;你点击了&#123;&#123;count&#125;&#125;次&lt;/button&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">       `</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 3. 挂载vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220320135413123.png" alt="image-20220320135413123"></p><h2 id="全局组件"><a href="#全局组件" class="headerlink" title="全局组件"></a>全局组件</h2><p>如下代码，我们在 app 下注册了一个全局组件，这意味着该组件可以在app实例内部任意地方使用：我们可以在 app 实例下使用，也可以在 home 实例下使用，也可以在 message 实例下使用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;home&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>消息<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--调用全局注册组件--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">msg</span>: <span class="string">&#x27;你好,Vue3！&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 2.定义一个组件(全局组件)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     app.<span class="title function_">component</span>(<span class="string">&#x27;button-counter&#x27;</span>,&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           <span class="attr">count</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="attr">template</span>: <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">        &lt;button @click=&quot;count++&quot;&gt;你点击了&#123;&#123;count&#125;&#125;次&lt;/button&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">       `</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 3. 挂载vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p>当然我们全局组件之间可以相互使用，使用方式如下：我们在定义第二个全局组件，若向使用第一个全局组件，只需要将第一个全局组件的名称标签写入模板template中即可</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义第二个全局组件</span></span><br><span class="line"> app.<span class="title function_">component</span>(<span class="string">&#x27;lk-box&#x27;</span>,&#123;</span><br><span class="line">   <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">       &lt;div style=&quot;width: 200px;height: 200px;background-color:pink;&quot;&gt;</span></span><br><span class="line"><span class="string">       盒子组件</span></span><br><span class="line"><span class="string">       &lt;button-counter&gt;&lt;/button-counter&gt;</span></span><br><span class="line"><span class="string">       &lt;/div&gt;</span></span><br><span class="line"><span class="string">      `</span></span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure><h2 id="局部组件🔥"><a href="#局部组件🔥" class="headerlink" title="局部组件🔥"></a>局部组件🔥</h2><p>如下代码，局部组件是使用一个常量来接收，我们将此局部组件通过 <code>components</code> 可以将其挂载在app实例中，这样我们在 app 实例里面就可以使用了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">lk-count</span>&gt;</span><span class="tag">&lt;/<span class="name">lk-count</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 注册一个局部组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> <span class="title class_">Counter</span> = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">count</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">template</span>: <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">        &lt;button @click=&quot;count++&quot;&gt;你点击了&#123;&#123;count&#125;&#125;次&lt;/button&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">       `</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">msg</span>: <span class="string">&#x27;你好,Vue3！&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="comment">// 组件选项</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;lk-count&#x27;</span>: <span class="title class_">Counter</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 挂载vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="组件标签化"><a href="#组件标签化" class="headerlink" title="组件标签化"></a>组件标签化</h2><p><code>template</code> 模块写法不够清晰，如果我们能将其中的HTML分离出来写，然后挂载到对应的组件上，必然结构会变得非常清晰</p><p>Vue 提供了两种方案来定义HTML模板内容</p><ul><li><strong>使用 &lt; script &gt; 标签</strong></li><li><strong>使用 &lt; template &gt; 标签</strong></li></ul><h3 id="使用script标签"><a href="#使用script标签" class="headerlink" title="使用script标签"></a>使用script标签</h3><p>就是在组件中定义一个id</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Counter</span> = &#123;</span><br><span class="line">   <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> &#123;</span><br><span class="line">       <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// 使用#id</span></span><br><span class="line">   <span class="attr">template</span>: <span class="string">&#x27;#mycount&#x27;</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>在实例上挂载这一段html</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/x-template&quot;</span> id=<span class="string">&quot;mycount&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>你点击了&#123;&#123;count&#125;&#125;次<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="使用template标签🔥"><a href="#使用template标签🔥" class="headerlink" title="使用template标签🔥"></a>使用template标签🔥</h3><p>我们使用 template 标签将其抽离</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册一个局部组件</span></span><br><span class="line"> <span class="keyword">const</span> <span class="title class_">Counter</span> = &#123;</span><br><span class="line">   <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> &#123;</span><br><span class="line">       <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">template</span>: <span class="string">&#x27;#mycount&#x27;</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template id=<span class="string">&quot;mycount&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>你点击了&#123;&#123;count&#125;&#125;次<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><blockquote><p>这里就不用再加type属性了，比较简单</p></blockquote><h2 id="组件数据存放🔥"><a href="#组件数据存放🔥" class="headerlink" title="组件数据存放🔥"></a>组件数据存放🔥</h2><blockquote><p>问题：组件可以访问<code>Vue</code>实例数据吗？</p></blockquote><ul><li><p>结论：组件不能直接访问<code>Vue</code>实例中的 data</p></li><li><p>组件是一个单独功能模块的封装：</p></li><li><p>这个模块有属于自己的 HTML 模板，也应该有属于自己的数据 data</p></li></ul><blockquote><p>组件自己的数据存放在哪呢？</p></blockquote><ul><li><p>组件对象也有一个 data 属性(也可以有 methods 属性)</p></li><li><p>只是这个 data 属性必须是一个函数</p></li><li><p>而且这个函数返回一个对象，对象内部保存着数据</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册一个局部组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Counter</span> = &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;button @click=&quot;count++&quot;&gt;你点击了&#123;&#123;count&#125;&#125;次&lt;/button&gt;</span></span><br><span class="line"><span class="string">   `</span>,</span><br><span class="line">  <span class="attr">methods</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>为什么 data 在组件中必须是一个函数呢？</p></blockquote><ul><li>首先，如果不算是一个函数，<code>Vue</code> 直接就会报错</li><li>其次，原因是在于 <code>Vue</code> 让每个组件对象都返回一个新的对象，因为如果是同一个对象，组件在多次使用后会相互影响</li></ul><h2 id="组件通信props"><a href="#组件通信props" class="headerlink" title="组件通信props"></a>组件通信props</h2><p>组件通信的常用方式有4种：</p><ol><li>props</li><li>自定义事件</li><li>消息订阅与发布</li><li>vuex</li></ol><p>子组件是不能引用父组件或者Vue实例的数据的</p><p>但是，在开发中，往往一些数据确实需要从上层传递到下层</p><ul><li><p>比如在一个页面中，我们从服务器请求到了很多的数据</p></li><li><p>其中的一部分数据，并非是我们整个页面的大组件来展示的，而是需要下面的子组件进行展示</p></li><li><p>这个时候，并不会让子组件再次发送一个网络请求，而是直接让大组件(父组件) 将数据传递给小组件(子组件)</p></li></ul><p>组件中，使用选项 <code>props</code> 来声明需要从父级接收到的数据(properties)</p><p><code>props</code> 的值有两种方式：</p><ul><li>方式一：字符串数组，数组中的字符串就是传递时的名称</li><li>方式二：对象，对象可以设置传递时的类型，也可以设置默认值等。</li></ul><h3 id="props传数组"><a href="#props传数组" class="headerlink" title="props传数组"></a>props传数组</h3><p>我们的数据是从服务器端返回的，那么我们就需要动态绑定数据，代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!--3.使用组件,v-bind动态绑定--&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">lk-box</span> <span class="attr">:brand</span>=<span class="string">&quot;msg1&quot;</span> <span class="attr">:colleges</span>=<span class="string">&quot;msg2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">lk-box</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;brand&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in colleges&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 1.注册一个局部组件(子组件)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title class_">Box</span> = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 子组件接收数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">props</span>: [<span class="string">&#x27;brand&#x27;</span>,<span class="string">&#x27;colleges&#x27;</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">template</span>: <span class="string">&#x27;#box&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 2.将子组件在父组件里面注册</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">msg1</span>: <span class="string">&#x27;技能掌握&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">msg2</span>: [<span class="string">&#x27;Web&#x27;</span>,<span class="string">&#x27;Python&#x27;</span>,<span class="string">&#x27;Java&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="string">&#x27;lk-box&#x27;</span>: <span class="title class_">Box</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 挂载vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="props传对象"><a href="#props传对象" class="headerlink" title="props传对象"></a>props传对象</h3><ul><li>在前面，我们的 <code>props</code> 选项是使用一个数组</li><li>除了数组之外，我们也可以使用对象，当需要对<code>props</code> 进行类型等验证时，就需要对象写法了</li></ul><h4 id="1、类型限制"><a href="#1、类型限制" class="headerlink" title="1、类型限制"></a>1、类型限制</h4><p>我们可以在 props 里面限制父组件给子组件传递的数据类型</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!--父组件模板--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">cpn</span> <span class="attr">:cmessage</span>=<span class="string">&quot;message&quot;</span> <span class="attr">:cmovies</span>=<span class="string">&quot;movies&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cpn</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!--子组件模板--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;cpn&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;cmovies&#125;&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;cmessage&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 父传子: props</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> cpn = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">template</span>: <span class="string">&#x27;#cpn&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 1.类型限制</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">cmovies</span>: <span class="title class_">Array</span>,<span class="comment">// 限制父组件传的是数组类型</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">cmessage</span>: <span class="title class_">String</span>,<span class="comment">// 限制父组件传的是字符串类型</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// root组件,我们当作父组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">message</span>: <span class="string">&#x27;你好啊&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">movies</span>: [<span class="string">&#x27;海王&#x27;</span>, <span class="string">&#x27;海贼王&#x27;</span>, <span class="string">&#x27;海尔兄弟&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//对象字面量增强写法的属性增强写法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      cpn</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 挂载vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="2、默认值和必传值"><a href="#2、默认值和必传值" class="headerlink" title="2、默认值和必传值"></a>2、默认值和必传值</h4><ul><li><code>type</code> : 限制的类型</li><li><code>default</code>: 如果没有传值,给一个默认值<ul><li><strong>注意</strong>:类型是对象或者数组时, 默认值必须是一个函数</li></ul></li><li><code>required</code> : 必须的,即意味着这个值是必须要传递的,不传就报错</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cmessage</span>: &#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="title class_">String</span>,         <span class="comment">// 类型限制为 String</span></span><br><span class="line">       <span class="attr">default</span>: <span class="string">&#x27;aaaaaaaa&#x27;</span>,  <span class="comment">// 如果没有传值,则给一个默认值</span></span><br><span class="line">       <span class="attr">required</span>: <span class="literal">true</span>        <span class="comment">// required 必须的,即意味着这个值是必须要传递的,不传就报错</span></span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><h3 id="子级向父级传递"><a href="#子级向父级传递" class="headerlink" title="子级向父级传递"></a>子级向父级传递</h3><p>需要使用自定义事件来完成</p><p>自定义事件的流程：</p><ul><li>在子组件中，通过<code>$emit()</code> 来发射事件</li><li>在父组件中，通过<code>v-on</code> 来监听子组件事件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">btnClick</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;点击了&#x27;</span>);</span><br><span class="line">        <span class="comment">// 发射事件</span></span><br><span class="line">        <span class="comment">// 第一个参数是自定义事件的名称,第二个参数是自定义事件的参数</span></span><br><span class="line">     <span class="variable language_">this</span>.$emit(<span class="string">&#x27;boxClick&#x27;</span>,<span class="string">&#x27;秦晓&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//父组件</span></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">boxFunc</span>(<span class="params">item</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;子组件中的按钮发生了点击&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span> style=<span class="string">&quot;background-color:blue; width: 300px; height: 300px;padding: 20px;&quot;</span>&gt;</span><br><span class="line">  &lt;!--父组件监听子组件事件--&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">lk-box</span> @<span class="attr">box-click</span>=<span class="string">&quot;boxFunc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">lk-box</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--子组件--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color:red;width: 200px;height: 200px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>如果我们想传递多个参数，我们可以以一个对象或者数组的形式传递，例如我们传递一个对象：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">btnClick</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;点击了&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> dataObj = &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;秦晓&#x27;</span>,</span><br><span class="line">          <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 发射事件</span></span><br><span class="line">        <span class="variable language_">this</span>.$emit(<span class="string">&#x27;boxClick&#x27;</span>,dataObj);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>父子组件相互访问</p><p>有时候我们需要父组件直接访问子组件，子组件直接访问父组件，或者是子组件访问根组件。</p><ul><li>父组件访问子组件：使用 <code>$children(Vue3.x已经废弃)</code> 或 <code>$refs</code></li><li>子组件访问父组件：使用<code>$parent</code></li></ul><h4 id="父组件访问子组件"><a href="#父组件访问子组件" class="headerlink" title="父组件访问子组件"></a>父组件访问子组件</h4><blockquote><p><code>$refs</code> 的使用🔥</p></blockquote><ul><li><code>$refs</code> 和 ref 指令通常是一起使用的</li><li>首先，我们通过 ref 给某一个子组件绑定一个特定的 ID</li><li>其次，通过<code>this.$refs.ID</code>就可以访问到该组件了<ul><li>接着使用 <code>this.$refs.ID.xx</code> 就可以拿到该组件里面的属性数据了</li></ul></li></ul><p>例如下方代码，我们给子组件使用 <code>ref=&quot;box1&quot;</code> 绑定ID，在父组件里面使用 <code>this.$refs.box1</code> 就可以拿到该组件，接着使用<code>this.$refs.box1.msg</code> 拿到该组件的 <code>msg</code> 属性数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!--父组件--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">lk-box</span> <span class="attr">ref</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">lk-box</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getChildComponent&quot;</span>&gt;</span>获取子组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!--子组件--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color:red;width: 200px;height: 200px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 定义局部组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title class_">Box</span> = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="attr">msg</span>: <span class="string">&#x27;春风十里&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="title function_">btnClick</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="title function_">alert</span>(<span class="string">&#x27;点击了按钮&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">template</span>: <span class="string">&#x27;#box&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 父组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">msg</span>: <span class="string">&#x27;你好Vue3！&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="string">&#x27;lk-box&#x27;</span>: <span class="title class_">Box</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 获取子组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">getChildComponent</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// this.$refs.box1 相当于拿到了子组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// this.$refs.box1.msg 就是拿到了子组件里面的 msg 数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// this.$refs.box1.btnClick 就是拿到了子组件里面的 btnClick 方法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">box1</span>.<span class="property">msg</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 挂载vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="子组件访问父组件"><a href="#子组件访问父组件" class="headerlink" title="子组件访问父组件"></a>子组件访问父组件</h4><p>如果我们想在子组件中直接访问父组件，可以通过 <code>$parent</code> ,如果想访问根组件，可以通过 <code>$root</code></p><ul><li><p>尽管在 Vue 开发中，我们允许通过 <code>$parent</code> 来访问父组件，但是在真实开发中尽量不要这要做</p></li><li><p>子组件应该尽量避免直接访问父组件的数据，因为这样耦合度太高了</p></li><li><p>因为子组件一般会复用，如果我们将子组件放入另外一个组件之内，很可能该父组件没有对应的属性，往往会引起问题</p></li></ul><p>例如如下代码，我们做了三层嵌套，最外层是根组件<code>Vue</code>实例，第二层是<code>div</code>盒子，最里面一层是 button 按钮。我们现在想点击 最里面的 <code>button</code> 来拿到div父组件或者root根组件。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!--父组件--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">lk-box</span>&gt;</span><span class="tag">&lt;/<span class="name">lk-box</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!--子组件<span class="number">1</span>--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>点击了按钮&#123;&#123;count&#125;&#125;次<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!--子组件<span class="number">2</span>--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color:red; width: 200px; height: 200px&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">lk-button</span>&gt;</span><span class="tag">&lt;/<span class="name">lk-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 定义局部组件1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title class_">LKButton</span> = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="attr">count</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">template</span>: <span class="string">&#x27;#box1&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">btnClick</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 子组件访问父组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// this.$parent 可以拿到该组件的父组件,也就是button子组件的父组件div</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(this.$parent);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.<span class="property">count</span>++;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$parent</span>.<span class="property">count</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 子组件访问根组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// this.$root 可以拿到根组件,也就是vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(this.$root);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$root</span>.<span class="property">msg</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 定义局部组件2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title class_">LKBox</span> = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">count</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">template</span>: <span class="string">&#x27;#box2&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="string">&#x27;lk-button&#x27;</span>: <span class="title class_">LKButton</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 父组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">msg</span>: <span class="string">&#x27;你好Vue3！&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="string">&#x27;lk-box&#x27;</span>: <span class="title class_">LKBox</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 挂载vue实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>VueCLI</title>
      <link href="/2022/04/06/vue/VueCLI/"/>
      <url>/2022/04/06/vue/VueCLI/</url>
      
        <content type="html"><![CDATA[<h1 id="VueCLI"><a href="#VueCLI" class="headerlink" title="VueCLI"></a>VueCLI</h1><h2 id="Vue组件的三个组成部分"><a href="#Vue组件的三个组成部分" class="headerlink" title="Vue组件的三个组成部分"></a>Vue组件的三个组成部分</h2><p>每个 .Vue 组件都是由三部分组成，分别是</p><ul><li>template -&gt; 组件的模板结构</li><li>script -&gt; 组件的 JavaScript 行为</li><li>style -&gt; 组件的样式</li></ul><p>默认情况下，写在.vue 组件中的样式会全局生效，因此很容易造成多个组件之间的样式冲突问题。</p><p>导致组件之间样式冲突的根本原因是：</p><ol><li>单页面应用程序中，所有组件的DOM 结构，都是基于唯一的index.html页面进行呈现的</li><li>每个组件中的样式，都会影响整个index.html 页面中的DOM元素</li></ol><p>为了提高开发效率和开发体验，vue为style节点提供了<code>scoped</code>属性，从而防止组件之间的样式冲突问题</p><h2 id="deep-样式穿透"><a href="#deep-样式穿透" class="headerlink" title="/deep/样式穿透"></a>/deep/样式穿透</h2><ul><li>如果给当前组件的style 节点添加了scoped 属性，则当前组件的样式对其子组件是不生效的。</li><li>如果想让某些样式对子组件生效，可以使用 <code>/deep/ 深度选择器</code>。</li></ul><h2 id="使用组件的三个步骤"><a href="#使用组件的三个步骤" class="headerlink" title="使用组件的三个步骤"></a>使用组件的三个步骤</h2><p> 1.导入需要使用的 .vue组件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Left</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Left&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Right</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Right&#x27;</span></span><br></pre></td></tr></table></figure><p>2.注册组件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="comment">// 2.注册组件</span></span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="comment">// &#x27;Left&#x27;: Left 简化写法如下,对象里面键值一样的话直接写一个就行</span></span><br><span class="line">    <span class="title class_">Left</span>,</span><br><span class="line">    <span class="title class_">Right</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.以标签形式,使用注册好的组件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Left</span>&gt;&lt;/<span class="title class_">Left</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Right</span>&gt;</span><span class="tag">&lt;/<span class="name">Right</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="Vue-CLI2"><a href="#Vue-CLI2" class="headerlink" title="Vue CLI2"></a>Vue CLI2</h1><h2 id="安装Vue脚手架"><a href="#安装Vue脚手架" class="headerlink" title="安装Vue脚手架"></a>安装Vue脚手架</h2><p>全局安装 cli</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure><p>这样安装的是脚手架的最新版本，如果我们想安装脚手架 2 版本呢？</p><p>全局安装脚手架2版本，这样的话我们就既可以用脚手架2的版本，也可以用脚手架最新的版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli-init</span><br></pre></td></tr></table></figure><ul><li>Vue CLI2 初始化项目命令</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init webpack my-project</span><br></pre></td></tr></table></figure><ul><li>Vue CLI 3 初始化项目命令</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create my-project</span><br></pre></td></tr></table></figure><ul><li>查看 VueCLI 版本（注意 V 要大写）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue -V</span><br></pre></td></tr></table></figure><h2 id="Vue-CLI2-初始化项目"><a href="#Vue-CLI2-初始化项目" class="headerlink" title="Vue CLI2 初始化项目"></a>Vue CLI2 初始化项目</h2><p>在终端输入 <code>vue init webpack my-project</code></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/4c3509b8b4ec48e8b68b3c99ef3ac80b.png" alt="img"></p><p>cd 到对应目录，在终端输入 <code>npm run dev</code> 就可以运行了</p><h3 id="关闭Eslint"><a href="#关闭Eslint" class="headerlink" title="关闭Eslint"></a>关闭Eslint</h3><p>若我们在初始化项目时候开启了 ESlint 代码检测，我们不想用的时候方法如下：</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220321143812727.png" alt="image-20220321143812727"></p><h1 id="Vue-CLI3"><a href="#Vue-CLI3" class="headerlink" title="Vue CLI3"></a>Vue CLI3</h1><p>Vue-cli 3 与 2 版本有很大区别</p><ul><li><p>vue-cli 3 是基于 webpack 4 打造，vue-cli 2 还是 webapck 3</p></li><li><p>vue-cli 3 的设计原则是“0配置”，移除的配置文件根目录下的，build和config等目录</p></li><li><p>vue-cli 3 提供了 vue ui 命令，提供了可视化配置，更加人性化</p></li><li><p>移除了static文件夹，新增了public文件夹，并且index.html移动到public中</p></li></ul><blockquote><p>Vue CLI 3 初始化项目命令：</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create my-project</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/be762a2d5692497eae10c02f3a7c5c59.png" alt="img"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/ecf83eff085b4097b65ba4b82a3c6e91.png" alt="img"></p><h2 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h2><p>使用 Vue CLI3 初始化项目之后，运行项目。只需要看 package.json 下的 scripts 就知道运行命令</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220321144432283.png" alt="image-20220321144432283"></p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><ul><li>方式一：启动图形化界面 <code>Vue ui</code></li><li>方式二：自定义配置 vue.config.js</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Vue-CLI4"><a href="#Vue-CLI4" class="headerlink" title="Vue CLI4"></a>Vue CLI4</h1><p>在工程化的项目中，vue 要做的事情很单纯：通过 main.js 把 App.vue 渲染到 index.html 的指定区域中。</p><p>其中：</p><ul><li>App.vue 用来编写待渲染的模板结构</li><li>index.html 中需要预留一个el 区域</li><li>main.js 把App.vue 渲染到了index.html 所预留的区域中</li></ul><h2 id="安装VueCLI4"><a href="#安装VueCLI4" class="headerlink" title="安装VueCLI4"></a>安装VueCLI4</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure><p>查看版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue --version</span><br></pre></td></tr></table></figure><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><ol><li>在控制台输入如下命令会创建 hello-world 项目</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create hello-world</span><br></pre></td></tr></table></figure><p>会弹出如下选择预设</p><p>箭头上下键控制选择，选择 Manually select features 手动配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? Please pick a preset: (Use arrow keys)</span><br><span class="line">Default ([Vue 2] babel, eslint) </span><br><span class="line">Default (Vue 3) ([Vue 3] babel, eslint) </span><br><span class="line">Manually select features </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vue基础</title>
      <link href="/2022/04/06/vue/vue%E5%9F%BA%E7%A1%80/"/>
      <url>/2022/04/06/vue/vue%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="vue基础"><a href="#vue基础" class="headerlink" title="vue基础"></a>vue基础</h1><h1 id="Vue3-x安装"><a href="#Vue3-x安装" class="headerlink" title="Vue3.x安装"></a>Vue3.x安装</h1><p>直接CDN引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 开发环境版本,包含了有帮助的命令行警告 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- 生产环境版本,优化了尺寸和速度 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/npm/vue@2.6.12&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>下载和引入</p><ul><li>开发环境下载：<a href="https://vuejs.org/js/vue.js">https://vuejs.org/js/vue.js</a></li><li>生产环境下载：<a href="https://vuejs.org/js/vue.min.js">https://vuejs.org/js/vue.min.js</a></li><li>下载完成后使用 script 标签的外部引用即可</li></ul><p>NPM安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">最新稳定版</span></span><br><span class="line"><span class="meta">$ </span><span class="language-bash">npm install vue</span></span><br></pre></td></tr></table></figure><p>后续通过 webpack 和 CLI 使用时我们使用该方式。</p><h2 id="vscode配置模板"><a href="#vscode配置模板" class="headerlink" title="vscode配置模板"></a>vscode配置模板</h2><p>打开VSCODE编辑器，依次选择“文件 -&gt; 首选项 -&gt; 用户代码”，此时，会弹出一个搜索框，我们输入vue</p><p>选择vue后，VSCODE会自动打开一个名字为vue.json的文件，复制以下内容到这个文件中：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;Print to console&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;prefix&quot;</span>: <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">    <span class="string">&quot;body&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;&lt;!-- $0 --&gt;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&lt;template&gt;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;  &lt;div&gt;&lt;/div&gt;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&lt;/template&gt;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&lt;script&gt;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;export default &#123;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;  data () &#123;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;    return &#123;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;    &#125;;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;  &#125;,&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;  components: &#123;&#125;,&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;  computed: &#123;&#125;,&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;  mounted: &#123;&#125;,&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;  methods: &#123;&#125;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&#125;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&lt;/script&gt;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&lt;style lang=&#x27;scss&#x27; scoped&gt;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&lt;/style&gt;&quot;</span></span><br><span class="line">  ],</span><br><span class="line">    <span class="string">&quot;description&quot;</span>: <span class="string">&quot;Log output to console&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们新建一个vue文件，输入vue按下enter，就会自动生成内容</p><h2 id="内容渲染指令"><a href="#内容渲染指令" class="headerlink" title="内容渲染指令"></a>内容渲染指令</h2><p><code>v-once</code>展示的部分数据不会随着Vue的响应式而发生变化</p><p><code>v-text</code>将数据显示在界面中，与Mustache比较相似，但会<code>覆盖元素内默认的值</code>，不推荐使用</p><p><code>v-html</code></p><ul><li>如果我们直接通过<code>&#123;&#123;&#125;&#125;` 来输出，会将HTML代码也一起输出- `v-html`会按照HTML格式进行解析  `v-pre`跳过这个元素和它子元素的编译过程，用于显示原本的 Mustache 语法`v-cloak`，也叫作斗篷，用作遮住没有解析的数据在实际开发中，我们data里面的数据可能是从服务器端获取来的，如果网络不好获取的比较慢，浏览器可能会直接显示出未编译的Mustache标签。那么页面在渲染时可能会先显示 `&#123;&#123;message&#125;&#125;</code> 之后变为 你好Vue3！。这种效果不是我们想要的，我们可以给标签添加 ~ 来避免这种效果。解决办法：</li></ul><ol><li>加上<code>v-clock</code> 属性,并加上css。</li><li>vue解析之前有 <code>v-clock</code> 属性时，让其不显示</li><li>Vue解析之后没有<code>v-clock</code> 属性，再让其显示</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-attr">[v-cloak]</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">display</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-cloak</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 在vue解析之前, div中有一个属性v-cloak</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 在vue解析之后, div中没有一个属性v-cloak</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">message</span>: <span class="string">&#x27;你好Vue3!&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;, <span class="number">1000</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="属性绑定指令"><a href="#属性绑定指令" class="headerlink" title="属性绑定指令"></a>属性绑定指令</h2><h3 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h3><p>前面的指令主要作用是将值插入到我们的模板的内容当中，但是，除了内容需要动态来决定外，某些属性我们也希望动态来绑定。</p><ul><li><strong>绑定 href、src</strong> </li><li>**绑定 class **</li><li><strong>绑定style</strong></li></ul><h4 id="绑定-href、src-用法"><a href="#绑定-href、src-用法" class="headerlink" title="绑定 href、src 用法"></a>绑定 href、src 用法</h4><p>在实际开发中，照片img的url值可能也是由服务器端获取，a标签的href值可能也是由服务器端获取的，那么我们如何动态绑定呢？例如我们看下面的例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">message</span>: <span class="string">&#x27;你好Vue3！&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">url</span>: <span class="string">&#x27;http://www.baidu.com&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220318131749600.png" alt="image-20220318131749600"></p><p>如上图，我们给a标签的href是不能直接写url的，因为它不会解析。这个时候就需要给href前添加<code>v-bind</code>指令了。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><strong>语法糖写法如下</strong>： <code>:href=&quot;url&quot;</code></p><h4 id="绑定-class-用法"><a href="#绑定-class-用法" class="headerlink" title="绑定 class 用法"></a>绑定 class 用法</h4><p>我们让 message 的字体颜色为红色,样式是从服务器端获取的arg1,那么如果我们直接写 <code>class=&quot;arg1&quot;</code> 是不会解析为 <code>class=red</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;arg1&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">message</span>: <span class="string">&#x27;你好Vue3！&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">arg1</span>: <span class="string">&#x27;red&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220318132154271.png" alt="image-20220318132154271"></p><p>如果我们使用v-bind绑定写为 <code>:class=&quot;arg1&quot;</code>,那么就会解析为 <code>class=&quot;red&quot;</code></p><p><strong>V-bind 对象语法</strong></p><ul><li>当服务器端传给我们很多样式的时候，我们可以采用<strong>对象语法(class 后面跟的是一个对象)</strong></li><li>这个语法我们可以动态的使某个属性是否显示，如点击变色，我们只需要在定义一个属性为ture，点击相反，在挂上去</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  &lt;!--  &#123;类名<span class="number">1</span>: 布尔值,类名<span class="number">2</span>: 布尔值,类名<span class="number">3</span>: 布尔值&#125;--&gt;</span><br><span class="line">  &lt;!--  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;arg1: true, arg2: true&#125;&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span> --&gt;</span><br><span class="line">  &lt;!--上述有一点,类名,而类名我使用arg1是不出效果的,因为是单页面演示,此处不知道为什么,而使用style中定义的类名red、fontSize就出效果--&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;red: true, fontSize: true&#125;&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">message</span>: <span class="string">&#x27;你好Vue3！&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">arg1</span>: <span class="string">&#x27;red&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">arg2</span>: <span class="string">&#x27;fontSize&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><strong>v-bind 数组语法(class 后面跟的是一个数组)</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">&quot;[arg1,arg2]&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">message</span>: <span class="string">&#x27;你好Vue3！&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">arg1</span>: <span class="string">&#x27;red&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">arg2</span>: <span class="string">&#x27;fontSize&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="绑定style"><a href="#绑定style" class="headerlink" title="绑定style"></a>绑定style</h4><p>我们可以利用 <code>v-bind: style</code> 来绑定一些CSS内联样式</p><p>在写CSS属性名的时候，比如 font-size</p><ul><li>我们可以使用驼峰式：<code>fontSize</code></li><li>或短横线分隔(记得用单引号括起来) <code>&#39;font-size&#39;</code></li></ul><p>若我们使用<code>v-bind</code>来绑定 style 样式,使用方式如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;fontSize: &#x27;50px&#x27;&#125;&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>如果我们的属性值是由外部服务器传来的，那么我们的属性值可以不用加单引号</p><h3 id="计算属性computed"><a href="#计算属性computed" class="headerlink" title="计算属性computed"></a>计算属性computed</h3><p>计算属性指的是通过一系列运算之后，最终得到一个属性值。这个动态计算出来的属性值可以被模板结构或methods 方法使用。</p><p>如果我们要得到秦🔥晓，我们在method中这样使用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  &lt;!-- <span class="number">2.</span>函数用法 --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;getFullName()&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">firstName</span>: <span class="string">&#x27;秦&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">lastName</span>: <span class="string">&#x27;晓&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="title function_">getFullName</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27;🔥&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p>在<code>计算属性computed</code>中，我们使用不加括号</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- 3.计算属性 --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">firstName</span>: <span class="string">&#x27;秦&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">lastName</span>: <span class="string">&#x27;晓&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">computed</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">fullName</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//注意:计算属性本质上还是属性,所以命名为属性,只是写法为函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//属性命名-fullName</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//函数命名-getFullName</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27;🔥&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="事件监听指令"><a href="#事件监听指令" class="headerlink" title="事件监听指令"></a>事件监听指令</h2><p>在前端开发中，我们经常需要监听点击、拖拽、键盘事件等等，这个时候需要使用 <code>v-on</code></p><ul><li>作用：绑定事件监听器</li><li>缩写：<code>@</code></li></ul><table><thead><tr><th align="center">DOM对象</th><th align="center">vue事件绑定</th></tr></thead><tbody><tr><td align="center">onclick</td><td align="center">v-on:click</td></tr><tr><td align="center">oninput</td><td align="center">v-on:input</td></tr><tr><td align="center">onkeyup</td><td align="center">v-on:keyup</td></tr></tbody></table><p>在使用 v-on 绑定事件时：</p><ol><li>如果事件函数后有括号，如：<code>@click=&quot;btn1Click()&quot;</code>,则默认什么都不传递</li><li>如果事件函数后无括号，如:<code>@click=&quot;btn1Click&quot;</code> ,则默认传递事件对象</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btn1Click()&quot;</span>&gt;</span>按钮一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btn2Click&quot;</span>&gt;</span>按钮二<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">count</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="title function_">btn1Click</span>(<span class="params">args</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="variable language_">console</span>.<span class="title function_">log</span>(args);   <span class="comment">// undefined</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="title function_">btn2Click</span>(<span class="params">args</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="variable language_">console</span>.<span class="title function_">log</span>(args);   <span class="comment">// 事件对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220318145531352.png" alt="image-20220318145531352"></p><p>当然我们也可以传递动态参数，例如传递data实例中的count：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btn1Click(123,&#x27;abc&#x27;,true,count)&quot;</span>&gt;</span>按钮一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">count</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="title function_">btn1Click</span>(<span class="params">arg1,arg2,arg3,arg4</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="variable language_">console</span>.<span class="title function_">log</span>(arg1, arg2, arg3,arg4);   <span class="comment">// 123 &#x27;abc&#x27; true 0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p>当我们带参数又要带有事件参数时,我们要使用 <code>$event</code>（传递对象）</p><h3 id="v-on修饰符"><a href="#v-on修饰符" class="headerlink" title="v-on修饰符"></a>v-on修饰符</h3><p><code>@click.stop</code>，阻止冒泡</p><p><code>@click.prevent</code>，阻止默认事件</p><p><code>@click.once</code>，响应一次</p><p><a href="mailto:&#x31;&#46;&#x40;&#x63;&#x6c;&#x69;&#99;&#x6b;&#46;&#x73;&#116;&#111;&#112;">&#x31;&#46;&#x40;&#x63;&#x6c;&#x69;&#99;&#x6b;&#46;&#x73;&#116;&#111;&#112;</a></p><p>对于如下代码，我们点击按钮，会冒泡至父盒子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;box&quot;</span> @click=<span class="string">&quot;boxClick&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>在我们之前的做法中，我们是拿到事件对象，使用 <code>event.stopPropagation()</code>来阻止冒泡的，代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">btnClick</span>(<span class="params">event</span>)&#123;</span><br><span class="line">     event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击了按钮&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在Vue中我们使用的是给 <code>v-on</code>后面加修饰符，<code>@click.stop</code>来阻止冒泡，代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;box&quot;</span> @click=<span class="string">&quot;boxClick&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><a href="mailto:&#x32;&#x2e;&#64;&#x63;&#x6c;&#105;&#99;&#107;&#x2e;&#x70;&#114;&#101;&#118;&#101;&#110;&#116;">&#x32;&#x2e;&#64;&#x63;&#x6c;&#105;&#99;&#107;&#x2e;&#x70;&#114;&#101;&#118;&#101;&#110;&#116;</a></p><p>如下代码，我们点击提交，会先在控制台打印<code>表单提交</code>,然后默认跳转<code>http://www.jd.com</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;http://www.jd.com&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;doSubmit&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>可是如果我们想将表单的数据处理之后再提交，而不是直接提交，这个时候就要阻止表单提交默认事件了,我们之前的做法是先拿到事件对象<code>event</code>，然后<code>event.preventDefault()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">doSubmit</span>(<span class="params">event</span>)&#123;</span><br><span class="line">     <span class="comment">// 阻止默认事件</span></span><br><span class="line">     event.<span class="title function_">preventDefault</span>();</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;表单提交&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在Vue中我们可以在<code>v-on</code>之后加修饰符，<code>@click.prevent</code>来阻止默认事件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;http://www.jd.com&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;doSubmit&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>3.响应一次</p><p>有时候我们希望有些事件只被触发一次，使用<code>@click.once</code>。</p><p>条件渲染指令</p><p>条件渲染指令用来辅助开发者按需控制 DOM 的显示与隐藏 。</p><p><code>v - if、v-else-if、v-else</code></p><ul><li>这三个指令与JavaScript的条件语句 if、else、else if 类似</li><li>Vue 的条件指令可以根据表达式的值在DOM中渲染或销毁元素或组件</li></ul><p><code>v-show</code>的用法和<code>v-if</code>非常相似，也用于决定一个元素是否渲染：</p><ul><li><code>v-if</code> 指令会 动态地创建或移除 DOM 元素 ，从而控制元素在页面上的显示与隐藏</li><li><code>v-show</code> 指令会动态为元素 添加或移除 style=“display: none;” 样式 ，从而控制元素的显示与隐藏</li></ul><blockquote><p>开发中如何选择呢？</p></blockquote><ul><li>当需要在显示与隐藏之间切片很频繁时，使用 <code>v-show</code></li><li>当只有一次切换时，通过 <code>v-if</code></li></ul><h2 id="列表渲染指令"><a href="#列表渲染指令" class="headerlink" title="列表渲染指令"></a>列表渲染指令</h2><h3 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h3><p><strong>数组遍历</strong></p><p>我们将 data 传过来的数组在页面展示</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in person&quot;</span>&gt;</span>&#123;&#123;index&#125;&#125; -- &#123;&#123;item.name&#125;&#125; -- &#123;&#123;item.age&#125;&#125; -- &#123;&#123;item.address&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">person</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,age : <span class="number">20</span>,<span class="attr">address</span>: <span class="string">&#x27;北京&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;<span class="attr">name</span>: <span class="string">&#x27;张四&#x27;</span>,age : <span class="number">21</span>,<span class="attr">address</span>: <span class="string">&#x27;西安&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;<span class="attr">name</span>: <span class="string">&#x27;张五&#x27;</span>,age : <span class="number">22</span>,<span class="attr">address</span>: <span class="string">&#x27;天津&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><strong>对象遍历</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,key,index) in person&quot;</span>&gt;</span>&#123;&#123;index&#125;&#125; -- &#123;&#123;key&#125;&#125;:&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">person</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">name</span>: <span class="string">&#x27;秦&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">age</span>: <span class="number">20</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">friends</span>: [<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220318151542919.png" alt="image-20220318151542919"></p><h2 id="双向绑定指令"><a href="#双向绑定指令" class="headerlink" title="双向绑定指令"></a>双向绑定指令</h2><p><strong>v-model</strong><br>双向绑定指令也叫表单元素绑定，vue提供了 v-model 双向数据绑定 指令，用来辅助开发者在 不操作 DOM 的前提下， 快速获取表单的数据。</p><p>vue中使用 v-model 指令来实现表单元素和数据的<code>双向绑定</code>，经常用于表单 <code>input</code> 和 <code>textarea</code> 元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  </span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">message</span>: <span class="string">&#x27;你好Vue3!&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220320131601906.png" alt="image-20220320131601906"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220320131611084.png" alt="image-20220320131611084"></p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220320131625246.png" alt="image-20220320131625246"></p><h3 id="v-model原理"><a href="#v-model原理" class="headerlink" title="v-model原理"></a>v-model原理</h3><p><code>v-model</code> 其实是一个语法糖，它的背后本质上是包含两个操作：</p><ul><li><code>v-bind</code> 绑定一个 value 属性</li><li><code>v-on</code> 指令给当前元素绑定 input 事件</li></ul><p>就是说下面的代码，等同于下面的代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;message&quot;</span>&gt;</span><br><span class="line">&lt;!-- 等同于 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;message&quot;</span> <span class="attr">v-on:input</span>=<span class="string">&quot;message = $event.target.value&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="v-model与其他组合"><a href="#v-model与其他组合" class="headerlink" title="v-model与其他组合"></a>v-model与其他组合</h3><p><code>v-model:radio：</code>使得单选框只能选一个</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;sex&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;sex&quot;</span>&gt;</span>女<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>选择的性别是:&#123;&#123;sex&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><code>v-model：checkbox：</code></p><p>复选框分为两种情况：单个勾选框和多个勾选框</p><blockquote><p>单个勾选框</p></blockquote><ul><li><code>v-moduel</code> 即为布尔值</li><li>此时 input 的 value 并不影响<code>v-model</code>的值</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span>  <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>  <span class="attr">v-model</span>=<span class="string">&quot;isAgree&quot;</span>&gt;</span>同意会员协议<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>是否同意协议：&#123;&#123;isAgree ? &#x27;同意&#x27; : &#x27;不同意&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">isAgree</span>: <span class="string">&#x27;false&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\11793\AppData\Roaming\Typora\typora-user-images\image-20220320132340416.png" alt="image-20220320132340416"></p><blockquote><p>多个复选框</p></blockquote><ul><li>当是多个复选框时，因为可以选中多个，所以对应的 data 中属性是一个数组</li><li>当选中某一个时，就会将 input 的 value 添加到数组中</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">v-for</span>=<span class="string">&quot;item in originHobbies&quot;</span> <span class="attr">:for</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item&quot;</span> <span class="attr">:id</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;likes&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>您的爱好是: &#123;&#123;likes&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">originHobbies</span>: [<span class="string">&#x27;篮球&#x27;</span>, <span class="string">&#x27;足球&#x27;</span>, <span class="string">&#x27;乒乓球&#x27;</span>, <span class="string">&#x27;羽毛球&#x27;</span>, <span class="string">&#x27;台球&#x27;</span>, <span class="string">&#x27;高尔夫球&#x27;</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">likes</span>: []</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220320132441451.png" alt="image-20220320132441451"></p><h3 id="v-model-select"><a href="#v-model-select" class="headerlink" title="v-model:select"></a>v-model:select</h3><p>和 checkbox 一样，select 也分单选和多选两种情况</p><blockquote><p>单选：只能选中一个值</p></blockquote><ul><li><code>v-model</code> 绑定的是一个值</li><li>当我们选中 option 中的一个时，会将它对应的 vaule 赋值到 city 中</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>选择所在的城市:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;city&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;上海&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;北京&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;天津&quot;</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>选择的城市是:&#123;&#123;city&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">city</span>: <span class="string">&#x27;上海&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220320132753909.png" alt="image-20220320132753909"></p><blockquote><p>多选：可以选中多个值</p></blockquote><ul><li><code>v-model</code> 绑定的是一个数组</li><li>当选中多个值时，就会将选中的 option 对应的 value 添加到数组 mySelects中</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>选择所在的城市:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;cities&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;cities&quot;</span> <span class="attr">multiple</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;上海&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;北京&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;天津&quot;</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>选择的城市是:&#123;&#123;cities&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 1.创建Vue的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">cities</span>: []</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20220320132825843.png" alt="image-20220320132825843"></p><h3 id="v-model修饰符"><a href="#v-model修饰符" class="headerlink" title="v-model修饰符"></a>v-model修饰符</h3><p>为了方便对用户输入的内容进行处理，vue 为 v-model 指令提供了 3 个修饰符</p><table><thead><tr><th align="center">修饰符</th><th align="center">作用</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center">.number</td><td align="center">自动将用户的输入值转化为数值类型</td><td align="center"><input v-model.number = "age" /></td></tr><tr><td align="center">.trim</td><td align="center">自动过滤用户输入的首尾空白字符</td><td align="center"><input v-module.trim = "msg" /></td></tr><tr><td align="center">.lazy</td><td align="center">在 change 时而非 input 时更新</td><td align="center"><input v-model.lazy = "msg" /></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ES6</title>
      <link href="/2022/03/01/js/ES6/"/>
      <url>/2022/03/01/js/ES6/</url>
      
        <content type="html"><![CDATA[<h1 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h1><h1 id="ES6-1"><a href="#ES6-1" class="headerlink" title="ES6"></a>ES6</h1><h1 id="1、严格模式"><a href="#1、严格模式" class="headerlink" title="1、严格模式"></a>1、严格模式</h1><ol><li>JavaScript 除了提供正常模式外，还提供了严格模式</li><li>ES5 的严格模式是采用具有限制性 JavaScript 变体的一种方式，即在严格的条件下运行 JS 代码</li><li>严格模式在IE10 以上版本的浏览器才会被支持，旧版本浏览器会被忽略</li><li>严格模式对正常的JavaScript语义做了一些更改：</li></ol><ul><li>消除了Javascript 语法的一些不合理、不严谨之处，减少了一些怪异行为</li><li>消除代码运行的一些不安全之处，保证代码运行的安全</li><li>提高编译器效率，增加运行速度</li><li>禁用了在 ECMAScript 的未来版本中可能会定义的一些语法，为未来新版本的 Javascript 做好铺垫。比如一些保留字如：class, enum, export, extends, import, super 不能做变量名</li></ul><h2 id="1、开启严格模式"><a href="#1、开启严格模式" class="headerlink" title="1、开启严格模式"></a>1、开启严格模式</h2><ul><li>严格模式可以应用到<code>整个脚本</code>或<code>个别函数</code>中。</li><li>因此在使用时，我们可以将严格模式分为为<code>脚本开启严格模式</code>和为<code>函数开启严格模式</code>两种情况</li></ul><h3 id="1、为脚本开启严格模式"><a href="#1、为脚本开启严格模式" class="headerlink" title="1、为脚本开启严格模式"></a>1、为脚本开启严格模式</h3><ul><li>为整个脚本文件开启严格模式，需要在所有语句之前放一个特定语句</li><li><code>&quot;use strict&quot;</code> 或<code>&#39;use strict&#39;</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="string">&#x27;user strict&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这是严格模式。&quot;</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>因为”use strict”加了引号，所以老版本的浏览器会把它当作一行普通字符串而忽略。</p><p>有的 script 基本是严格模式，有的 script 脚本是正常模式，这样不利于文件合并，所以可以将整个脚本文件放在一个立即执行的匿名函数之中。这样独立创建一个作用域而不影响其他 script 脚本文件。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">     <span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">     <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;)();   </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="2、为函数开启严格模式"><a href="#2、为函数开启严格模式" class="headerlink" title="2、为函数开启严格模式"></a>2、为函数开启严格模式</h3><p>若要给某个函数开启严格模式，需要把<code>&quot;use strict&quot;</code>或<code>&#39;use strict&#39;</code>声明放在函数体所有语句之前</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 为某个函数开启严格模式 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 此时只是给fn函数开启严格模式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="string">&#x27;use strict&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 下面的代码按照严格模式执行</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 里面的还是按照普通模式执行</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>将<code>&quot;use strict&quot;</code> 放在函数体的第一行，则整个函数以 “严格模式”运行。</p><h2 id="2、严格模式中的变化"><a href="#2、严格模式中的变化" class="headerlink" title="2、严格模式中的变化"></a>2、严格模式中的变化</h2><h3 id="1、变量规定"><a href="#1、变量规定" class="headerlink" title="1、变量规定"></a>1、变量规定</h3><ul><li>在正常模式中，如果一个变量没有声明就赋值，默认是全局变量</li><li>严格模式禁止这种用法，变量都必须先用var 命令声明，然后再使用</li><li>严禁删除已经声明变量，例如，``delete x` 语法是错误的</li></ul><h3 id="2、严格模式下this指向问题"><a href="#2、严格模式下this指向问题" class="headerlink" title="2、严格模式下this指向问题"></a>2、严格模式下this指向问题</h3><ol><li>以前在全局作用域函数中的this指向window对象</li><li>严格模式下全局作用域中函数中的this 是 <code>undefined</code></li><li>以前构造函数时不加 new 也可以调用，当普通函数，this指向全局对象</li><li>严格模式下，如果构造函数不加 new 调用，this指向的是 undefined ，如果给它赋值，会报错</li><li>new 实例化的构造函数指向创建的对象实例</li><li>定时器this 还是指向window</li><li>事件、对象还是指向调用者</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="meta"></span></span></span></span><br><span class="line"><span class="meta"><span class="language-javascript"><span class="language-xml">        &#x27;use strict&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//3. 严格模式下全局作用域中函数中的 this 是 undefined。</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// undefined。</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">fn</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//4. 严格模式下,如果 构造函数不加new调用, this 指向的是undefined 如果给他赋值则 会报错.</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">sex</span> = <span class="string">&#x27;男&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// Star();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh.<span class="property">sex</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//5. 定时器 this 还是指向 window </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;, <span class="number">2000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p>3、函数变化</p><ol><li>函数不能有重名的<strong>参数</strong></li><li>函数必须声明在顶层，新版本的JavaScript会引入“块级作用域”（ES6中已引入）。为了与新版本接轨，<strong>不允许在非函数的代码块内声明函数</strong></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    <span class="comment">// 6. 严格模式下函数里面的参数不允许有重名</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a, a</span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(a + a);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// fn(1, 2);</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="2、闭包"><a href="#2、闭包" class="headerlink" title="2、闭包"></a>2、闭包</h1><h2 id="1、变量作用域"><a href="#1、变量作用域" class="headerlink" title="1、变量作用域"></a>1、变量作用域</h2><p>变量根据作用域的不同分为两种：全局变量和局部变量</p><ol><li>函数内部可以使用全局变量</li><li>函数外部不可以使用局部变量</li><li>当函数执行完毕，本作用域内的局部变量会销毁。</li></ol><h2 id="2、什么是闭包"><a href="#2、什么是闭包" class="headerlink" title="2、什么是闭包"></a>2、什么是闭包</h2><p>闭包指有权访问另一个函数作用域中的变量的函数</p><p><code>简单理解：一个作用域可以访问另外一个函数内部的局部变量</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">       <span class="comment">// 闭包（closure）指有权访问另一个函数作用域中变量的函数。</span></span><br><span class="line">       <span class="comment">// 闭包: 我们fn2 这个函数作用域 访问了另外一个函数 fn1 里面的局部变量 num</span></span><br><span class="line">       <span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;<span class="comment">// fn1就是闭包函数</span></span><br><span class="line">           <span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">           <span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>) &#123;</span><br><span class="line">               <span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">//10</span></span><br><span class="line">           &#125;</span><br><span class="line">           <span class="title function_">fn2</span>();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="title function_">fn1</span>();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3、闭包的作用"><a href="#3、闭包的作用" class="headerlink" title="3、闭包的作用"></a>3、闭包的作用</h2><p><code>延伸变量的作用范围</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">        <span class="comment">// 闭包（closure）指有权访问另一个函数作用域中变量的函数。</span></span><br><span class="line">        <span class="comment">// 一个作用域可以访问另外一个函数的局部变量 </span></span><br><span class="line">        <span class="comment">// 我们fn 外面的作用域可以访问fn 内部的局部变量</span></span><br><span class="line">        <span class="comment">// 闭包的主要作用: 延伸了变量的作用范围</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> f = <span class="title function_">fn</span>();</span><br><span class="line">        <span class="title function_">f</span>();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="4、闭包练习"><a href="#4、闭包练习" class="headerlink" title="4、闭包练习"></a>4、闭包练习</h2><h3 id="1、点击li输出索引号"><a href="#1、点击li输出索引号" class="headerlink" title="1、点击li输出索引号"></a>1、点击li输出索引号</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul <span class="keyword">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>榴莲<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>臭豆腐<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>鲱鱼罐头<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>大猪蹄子<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">   &lt;/ul&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="comment">// 闭包应用-点击li输出当前li的索引号</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="comment">// 1. 我们可以利用动态添加属性的方式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="keyword">var</span> lis = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.nav&#x27;</span>).<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;li&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           lis[i].<span class="property">index</span> = i;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           lis[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">               <span class="comment">// console.log(i);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">               <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">index</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="comment">// 2. 利用闭包的方式得到当前小li 的索引号</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           <span class="comment">// 利用for循环创建了4个立即执行函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           <span class="comment">// 立即执行函数也成为小闭包因为立即执行函数里面的任何一个函数都可以使用它的i这变量</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           (<span class="keyword">function</span>(<span class="params">i</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">               <span class="comment">// console.log(i);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">               lis[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                   <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">               &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           &#125;)(i);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="2、定时器中的闭包"><a href="#2、定时器中的闭包" class="headerlink" title="2、定时器中的闭包"></a>2、定时器中的闭包</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul <span class="keyword">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>榴莲<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>臭豆腐<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>鲱鱼罐头<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>大猪蹄子<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 闭包应用-3秒钟之后,打印所有li元素的内容</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> lis = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.nav&#x27;</span>).<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;li&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        (<span class="keyword">function</span>(<span class="params">i</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(lis[i].<span class="property">innerHTML</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;, <span class="number">3000</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)(i);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="3、浅拷贝和深拷贝"><a href="#3、浅拷贝和深拷贝" class="headerlink" title="3、浅拷贝和深拷贝"></a>3、浅拷贝和深拷贝</h1><ol><li>浅拷贝只是拷贝一层，更深层次对象级别的只<code>拷贝引用</code></li><li>深拷贝拷贝多层，每一级别的数据都会拷贝</li><li><code>Object.assign(target,....sources)</code> ES6新增方法可以<code>浅拷贝</code></li></ol><h2 id="1、浅拷贝"><a href="#1、浅拷贝" class="headerlink" title="1、浅拷贝"></a>1、浅拷贝</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 浅拷贝只是拷贝一层，更深层次对象级别的只拷贝引用</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span>,</span><br><span class="line">    <span class="attr">msg</span>: &#123;</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> o = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> obj)&#123;</span><br><span class="line">    <span class="comment">// k是属性名，obj[k]是属性值</span></span><br><span class="line">    o[k] = obj[k];</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o);</span><br><span class="line"><span class="comment">// 浅拷贝语法糖</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(o,obj);</span><br></pre></td></tr></table></figure><h2 id="2、深拷贝"><a href="#2、深拷贝" class="headerlink" title="2、深拷贝"></a>2、深拷贝</h2><ul><li>深拷贝会把数组和对象的所有元素也拷贝进去</li><li>浅拷贝只把数组和对象拷贝进去</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 深拷贝拷贝多层，每一级别的数据都会拷贝</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span>,</span><br><span class="line">    <span class="attr">msg</span>: &#123;</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">color</span>: [<span class="string">&#x27;pink&#x27;</span>,<span class="string">&#x27;red&#x27;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"><span class="comment">// 封装函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params">newobj,oldobj</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> oldobj)&#123;</span><br><span class="line">        <span class="comment">// 判断属性值属于简单数据类型还是复杂数据类型</span></span><br><span class="line">        <span class="comment">// 1.获取属性值   oldobj[k]</span></span><br><span class="line">        <span class="keyword">var</span> item = obldobj[k];</span><br><span class="line">        <span class="comment">// 2.判断这个值是否是数组</span></span><br><span class="line">        <span class="keyword">if</span>(item <span class="keyword">instanceof</span> <span class="title class_">Array</span>)&#123;</span><br><span class="line">            newobj[k] = [];</span><br><span class="line">            <span class="title function_">deepCopy</span>(newobj[k],item)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (item <span class="keyword">instanceof</span> <span class="title class_">Object</span>)&#123;</span><br><span class="line">              <span class="comment">// 3.判断这个值是否是对象</span></span><br><span class="line">            newobj[k] = &#123;&#125;;</span><br><span class="line">            <span class="title function_">deepCopy</span>(newobj[k],item)</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 4.属于简单数据类型</span></span><br><span class="line">            newobj[k] = item;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">deepCopy</span>(o,obj);</span><br></pre></td></tr></table></figure><h1 id="4、正则表达式"><a href="#4、正则表达式" class="headerlink" title="4、正则表达式"></a>4、正则表达式</h1><p>正则表达式是用于<strong>匹配字符串中字符组合</strong>的模式。<code>在JavaScript中，正则表达式也是对象。</code></p><p>正则表通常被用来<strong>检索、替换</strong>那些符合某个模式（规则）的文本。</p><p>例如验证表单：用户名表单只能输入英文字母、数字或者下划线，昵称输入框中可以输入中文(匹配)。此外，正则表达式还常用于过滤掉页面内容中的一些敏感词(替换)，或从字符串中获取我们想要的特定部分(提取)等 。</p><h2 id="1、创建正则表达式"><a href="#1、创建正则表达式" class="headerlink" title="1、创建正则表达式"></a>1、创建正则表达式</h2><p>在JavaScript中，可以通过两种方式创建正则表达式</p><ol><li>通过调用 RegExp 对象的构造函数创建</li><li>通过字面量创建</li></ol><h3 id="1、通过调用-RegExp-对象的构造函数创建"><a href="#1、通过调用-RegExp-对象的构造函数创建" class="headerlink" title="1、通过调用 RegExp 对象的构造函数创建"></a>1、通过调用 RegExp 对象的构造函数创建</h3><p>通过调用 RegExp 对象的构造函数创建</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="regexp">/表达式/</span>);</span><br></pre></td></tr></table></figure><h3 id="2、通过字面量创建"><a href="#2、通过字面量创建" class="headerlink" title="2、通过字面量创建"></a>2、通过字面量创建</h3><p>通过字面量创建</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 = <span class="regexp">/表达式/</span>;</span><br></pre></td></tr></table></figure><p>注释中间放表达式就是正则字面量</p><h3 id="3、测试正则表达式-test"><a href="#3、测试正则表达式-test" class="headerlink" title="3、测试正则表达式 test"></a>3、测试正则表达式 test</h3><p><code>test()</code>正则对象方法，用于检测字符串是否符合该规则，该对象会返回<code>true</code>或<code>false</code>,其参数是测试字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regexObj.<span class="title function_">test</span>(str)</span><br></pre></td></tr></table></figure><ul><li><code>regexObj</code> 写的是正则表达式</li><li><code>str</code> 我们要测试的文本</li><li>就是检测<code>str</code>文本是否符合我们写的正则表达式规范</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 利用 RegExp对象来创建 正则表达式</span></span><br><span class="line"><span class="keyword">var</span> regexp = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="regexp">/123/</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(regexp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 利用字面量创建 正则表达式</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/123/</span>;</span><br><span class="line"><span class="comment">// 3.test 方法用来检测字符串是否符合正则表达式要求的规范</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="number">123</span>));<span class="comment">//ture</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));<span class="comment">//flase</span></span><br></pre></td></tr></table></figure><h3 id="4-match提取实际匹配项"><a href="#4-match提取实际匹配项" class="headerlink" title="4. match提取实际匹配项"></a>4. match提取实际匹配项</h3><p><code>.match()</code> 方法提取找到的实际匹配项。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Hello, World!&quot;</span>.<span class="title function_">match</span>(<span class="regexp">/Hello/</span>);</span><br><span class="line"><span class="keyword">let</span> ourStr = <span class="string">&quot;Regular expressions&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> ourRegex = <span class="regexp">/expressions/</span>;</span><br><span class="line">ourStr.<span class="title function_">match</span>(ourRegex);</span><br></pre></td></tr></table></figure><p>这里第一个 <code>match</code> 将返回 <code>[&quot;Hello&quot;]</code> 第二个将返回 <code>[&quot;expressions&quot;]</code>。</p><p>请注意， <code>.match</code> 语法是目前为止一直使用的 <code>.test</code> 方法中的“反向”：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;string&#x27;</span>.<span class="title function_">match</span>(<span class="regexp">/regex/</span>);</span><br><span class="line"><span class="regexp">/regex/</span>.<span class="title function_">test</span>(<span class="string">&#x27;string&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="2、正则表达式中的特殊字符"><a href="#2、正则表达式中的特殊字符" class="headerlink" title="2、正则表达式中的特殊字符"></a>2、正则表达式中的特殊字符</h2><h3 id="1、边界符"><a href="#1、边界符" class="headerlink" title="1、边界符"></a>1、边界符</h3><p>正则表达式中的边界符(位置符)用来提示字符所处的位置，主要有两个字符</p><table><thead><tr><th align="center">边界符</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">^</td><td align="center">表示匹配行首的文本(以谁开始)</td></tr><tr><td align="center">$</td><td align="center">表示匹配行尾的文本(以谁结束)</td></tr></tbody></table><p><code>如果^ 和 $ 在一起，表示必须是精确匹配</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 边界符 ^ $</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/abc/</span>;   <span class="comment">//正则表达式里面不需要加引号，不管是数字型还是字符串型</span></span><br><span class="line"><span class="comment">// /abc/只要包含有abc这个字符串返回的都是true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;aabcd&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^abc/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));   <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>));<span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aabcd&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg1 = <span class="regexp">/^abc$/</span></span><br><span class="line"><span class="comment">// 以abc开头，以abc结尾，必须是abc</span></span><br></pre></td></tr></table></figure><h2 id="3、字符类"><a href="#3、字符类" class="headerlink" title="3、字符类"></a>3、字符类</h2><ul><li>字符类表示有一系列字符可供选择，只要匹配其中一个就可以了</li><li>所有可供选择的字符都放在方括号内</li></ul><h4 id="1-方括号"><a href="#1-方括号" class="headerlink" title="1.[] 方括号"></a>1.[] 方括号</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/[abc]/.<span class="title function_">test</span>(<span class="string">&#x27;andy&#x27;</span>);     <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="2-方括号内部-范围符"><a href="#2-方括号内部-范围符" class="headerlink" title="2.[-]方括号内部 范围符"></a>2.[-]方括号内部 范围符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^[a-z]$/.<span class="title function_">test</span>()</span><br></pre></td></tr></table></figure><p>方括号内部加上 <code>-</code> 表示范围，这里表示 <code>a - z</code> 26个英文字母都可以</p><h4 id="3-方括号内部-取反符"><a href="#3-方括号内部-取反符" class="headerlink" title="3.[^] 方括号内部 取反符"></a>3.[^] 方括号内部 取反符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/[^abc]/.<span class="title function_">test</span>(<span class="string">&#x27;andy&#x27;</span>)   <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>方括号内部加上 <code>^</code> 表示取反，只要包含方括号内的字符，都返回 <code>false</code></p><p><code>注意和边界符 ^ 区别，边界符写到方括号外面</code></p><h4 id="4-字符组合"><a href="#4-字符组合" class="headerlink" title="4.字符组合"></a>4.字符组合</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/[a-z1-<span class="number">9</span>]/.<span class="title function_">test</span>(<span class="string">&#x27;andy&#x27;</span>)    <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>方括号内部可以使用字符组合，这里表示包含 <code>a 到 z的26个英文字母和1到9的数字都可以</code></p><h2 id="4、量词符"><a href="#4、量词符" class="headerlink" title="4、量词符"></a>4、量词符</h2><p>量词符用来设定某个模式出现的<code>次数</code></p><table><thead><tr><th align="center">量词</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">*</td><td align="center">重复零次或更多次</td></tr><tr><td align="center">+</td><td align="center">重复一次或更多次</td></tr><tr><td align="center">?</td><td align="center">重复零次或一次</td></tr><tr><td align="center">{n}</td><td align="center">重复n次</td></tr><tr><td align="center">{n,}</td><td align="center">重复n次或更多次</td></tr><tr><td align="center">{n,m}</td><td align="center">重复n到m次</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^a&#123;3,&#125;$/</span>;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaaa&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaa&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line">       <span class="comment">//  &#123;3,16&#125;  大于等于3 并且 小于等于16</span></span><br><span class="line">       <span class="keyword">var</span> reg = <span class="regexp">/^a&#123;3,6&#125;$/</span>;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaaa&#x27;</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="5、用户名验证"><a href="#5、用户名验证" class="headerlink" title="5、用户名验证"></a>5、用户名验证</h2><p>功能需求：</p><ol><li><p>如果用户名输入合法, 则后面提示信息为 : 用户名合法,并且颜色为绿色</p></li><li><p>如果用户名输入不合法, 则后面提示信息为: 用户名不符合规范, 并且颜色为绿色</p></li></ol><p>分析：</p><ol><li><p>用户名只能为英文字母,数字,下划线或者短横线组成, 并且用户名长度为 6~16位.</p></li><li><p>首先准备好这种正则表达式模式 /$[a-zA-Z0-9-_]{6,16}^/</p></li><li><p>当表单失去焦点就开始验证.</p></li><li><p>如果符合正则规范, 则让后面的span标签添加 right 类.</p></li><li><p>如果不符合正则规范, 则让后面的span标签添加 wrong 类.</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;uname&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span>请输入用户名<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//  量词是设定某个模式出现的次数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> reg = <span class="regexp">/^[a-zA-Z0-9_-]&#123;6,16&#125;$/</span>; <span class="comment">// 这个模式用户只能输入英文字母 数字 下划线 短横线但是有边界符和[] 这就限定了只能多选1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// &#123;6,16&#125;  中间不要有空格</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(reg.test(&#x27;a&#x27;));</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(reg.test(&#x27;8&#x27;));</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(reg.test(&#x27;18&#x27;));</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(reg.test(&#x27;aa&#x27;));</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(&#x27;-------------&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(reg.test(&#x27;andy-red&#x27;));</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(reg.test(&#x27;andy_red&#x27;));</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(reg.test(&#x27;andy007&#x27;));</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(reg.test(&#x27;andy!007&#x27;));</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> uname = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.uname&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> span = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;span&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        uname.<span class="property">onblur</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span> (reg.<span class="title function_">test</span>(<span class="variable language_">this</span>.<span class="property">value</span>)) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;正确的&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                span.<span class="property">className</span> = <span class="string">&#x27;right&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                span.<span class="property">innerHTML</span> = <span class="string">&#x27;用户名格式输入正确&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误的&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                span.<span class="property">className</span> = <span class="string">&#x27;wrong&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                span.<span class="property">innerHTML</span> = <span class="string">&#x27;用户名格式输入不正确&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="6、括号总结"><a href="#6、括号总结" class="headerlink" title="6、括号总结"></a>6、括号总结</h2><ol><li><strong>大括号</strong> 量词符 里面面表示重复次数</li><li><strong>中括号</strong> 字符集合 匹配方括号中的任意字符</li><li><strong>小括号</strong> 表示优先级</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 大括号 量词符 里面表示重复次数</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^abc&#123;3&#125;$/</span>;   <span class="comment">// 它只是让c 重复3次 abccc</span></span><br><span class="line"><span class="comment">// 中括号 字符集合 匹配方括号中的任意字符</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^[abc]$/</span>;</span><br><span class="line"><span class="comment">// a || b || c</span></span><br><span class="line"><span class="comment">// 小括号 表示优先级</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^(abc)&#123;3&#125;$/</span>;  <span class="comment">//它是让 abc 重复3次</span></span><br></pre></td></tr></table></figure><h2 id="7、预定义类"><a href="#7、预定义类" class="headerlink" title="7、预定义类"></a>7、预定义类</h2><p>预定义类指的是<code>某些常见模式的简写写法</code></p><table><thead><tr><th align="center">预定类</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">\d</td><td align="center">匹配0-9之间的任一数字，相当于[0-9]</td></tr><tr><td align="center">\D</td><td align="center">匹配所有0-9以外的字符，相当于[ ^ 0-9]</td></tr><tr><td align="center">\w</td><td align="center">匹配任意的字母、数字和下划线,相当于[A-Za-z0-9_ ]</td></tr><tr><td align="center">\W</td><td align="center">除所有字母、数字、和下划线以外的字符，相当于[ ^A-Za-z0-9_ ]</td></tr><tr><td align="center">\s</td><td align="center">匹配空格（包括换行符，制表符，空格符等），相当于[\t\t\n\v\f]</td></tr><tr><td align="center">\S</td><td align="center">匹配非空格的字符，相当于[ ^ \t\r\n\v\f]</td></tr><tr><td align="center">.</td><td align="center">通配符 <code>.</code> 将匹配任何一个字符</td></tr></tbody></table><p>分析：</p><p>1.手机号码: <code>/^1[3|4|5|7|8][0-9]&#123;9&#125;$/</code></p><p>2.QQ: <code>[1-9][0-9]&#123;4,&#125;</code> (腾讯QQ号从10000开始)</p><p>3.昵称是中文: <code>^[\u4e00-\u9fa5]&#123;2,8&#125;$</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 座机号码验证:  全国座机号码  两种格式:   010-12345678  或者  0530-1234567</span></span><br><span class="line">  <span class="comment">// 正则里面的或者 符号  |  </span></span><br><span class="line">  <span class="comment">// var reg = /^\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;$/;</span></span><br><span class="line">  <span class="keyword">var</span> reg = <span class="regexp">/^\d&#123;3,4&#125;-\d&#123;7,8&#125;$/</span>;</span><br></pre></td></tr></table></figure><h2 id="8、正则表达式中的替换"><a href="#8、正则表达式中的替换" class="headerlink" title="8、正则表达式中的替换"></a>8、正则表达式中的替换</h2><h3 id="1、replace-替换"><a href="#1、replace-替换" class="headerlink" title="1、replace 替换"></a>1、replace 替换</h3><p><code>replace()</code>方法可以实现替换字符串操作，用来替换的参数可以是一个字符串或是一个正则表达式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stringObject.<span class="title function_">replace</span>(regexp/substr,replacement)</span><br></pre></td></tr></table></figure><ol><li>第一个参数: 被替换的字符串或者正则表达式</li><li>第二个参数：替换为的字符串</li><li>返回值是一个替换完毕的新字符串</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 替换 replace</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;andy和red&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">replace</span>(<span class="string">&#x27;andy&#x27;</span>,<span class="string">&#x27;baby&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newStr);<span class="comment">//baby和red</span></span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">replace</span>(<span class="regexp">/a*/</span>,<span class="string">&#x27;baby&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newStr);<span class="comment">//babyndy和red</span></span><br></pre></td></tr></table></figure><h3 id="2、正则表达式参数"><a href="#2、正则表达式参数" class="headerlink" title="2、正则表达式参数"></a>2、正则表达式参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/表达式/[<span class="keyword">switch</span>]</span><br></pre></td></tr></table></figure><p><code>switch</code>按照什么样的模式来匹配，有三种</p><ul><li><code>g</code>: 全局匹配</li><li><code>i</code>:忽略大小写</li><li><code>gi</code>: 全局匹配 + 忽略大小写</li></ul><p>9.<strong>正向先行断言和负向先行断言</strong></p><p>正向先行断言会查看并确保搜索匹配模式中的元素存在，但实际上并不匹配。 正向先行断言的用法是 <code>(?=...)</code>，其中 <code>...</code> 就是需要存在但不会被匹配的部分。</p><p>另一方面，负向先行断言会查看并确保搜索匹配模式中的元素不存在。 负向先行断言的用法是 <code>(?!...)</code>，其中 <code>...</code> 是希望不存在的匹配模式。 如果负向先行断言部分不存在，将返回匹配模式的其余部分。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> quit = <span class="string">&quot;qu&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> noquit = <span class="string">&quot;qt&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> quRegex= <span class="regexp">/q(?=u)/</span>;</span><br><span class="line"><span class="keyword">let</span> qRegex = <span class="regexp">/q(?!u)/</span>;</span><br><span class="line">quit.<span class="title function_">match</span>(quRegex);</span><br><span class="line">noquit.<span class="title function_">match</span>(qRegex);</span><br></pre></td></tr></table></figure><p>这两次 <code>match</code> 调用都将返回 <code>[&quot;q&quot;]</code>。</p><p>先行断言的更实际用途是检查一个字符串中的两个或更多匹配模式。 这里有一个简单的密码检查器，密码规则是 3 到 6 个字符且至少包含一个数字：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> password = <span class="string">&quot;abc123&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> checkPass = <span class="regexp">/(?=\w&#123;3,6&#125;)(?=\D*\d)/</span>;</span><br><span class="line">checkPass.<span class="title function_">test</span>(password);</span><br></pre></td></tr></table></figure><h1 id="9-解构赋值"><a href="#9-解构赋值" class="headerlink" title="9.解构赋值"></a>9.解构赋值</h1><p>解构赋值是 ES6 引入的新语法，用来从<code>数组和对象</code>中提取值，并优雅地对变量进行<code>赋值</code></p><h2 id="1-解构对象"><a href="#1-解构对象" class="headerlink" title="1.解构对象"></a>1.解构对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = user.<span class="property">name</span>;</span><br><span class="line"><span class="keyword">const</span> age = user.<span class="property">age</span>;</span><br><span class="line"><span class="comment">//ES6</span></span><br><span class="line"><span class="keyword">const</span> &#123; name, age &#125; = user;</span><br></pre></td></tr></table></figure><p><strong>使用解构赋值从嵌套对象中分配变量</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">johnDoe</span>: &#123; </span><br><span class="line">    <span class="attr">age</span>: <span class="number">34</span>,</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&#x27;johnDoe@freeCodeCamp.com&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>这是解构对象的属性值赋值给具有相同名字的变量：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="attr">johnDoe</span>: &#123; age, email &#125;&#125; = user;</span><br><span class="line"><span class="comment">//age: 34</span></span><br><span class="line"><span class="comment">//email: &#x27;johnDoe@freeCodeCamp.com&#x27;</span></span><br></pre></td></tr></table></figure><p>这是将对象的属性值赋值给具有不同名字的变量：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="attr">johnDoe</span>: &#123; <span class="attr">age</span>: userAge, <span class="attr">email</span>: userEmail &#125;&#125; = user;</span><br><span class="line"><span class="comment">//userAge: 34</span></span><br><span class="line"><span class="comment">//userEmail: &#x27;johnDoe@freeCodeCamp.com&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="2-解构数组"><a href="#2-解构数组" class="headerlink" title="2.解构数组"></a>2.解构数组</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [a, b] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b);</span><br></pre></td></tr></table></figure><p>控制台将显示 <code>a</code> 和 <code>b</code> 的值为 <code>1, 2</code>。数组的第一个值被赋值给变量 <code>a</code>，数组的第二个值被赋值给变量 <code>b</code>。 我们甚至能在数组解构中使用逗号分隔符，来获取任意一个想要的值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [a, b,,, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c);</span><br></pre></td></tr></table></figure><p>控制台将显示 <code>a</code>、<code>b</code> 和 <code>c</code> 的值为 <code>1, 2, 5</code>。</p><h1 id="10-Map和Set"><a href="#10-Map和Set" class="headerlink" title="10.Map和Set"></a>10.Map和Set</h1><h2 id="1-map"><a href="#1-map" class="headerlink" title="1.map"></a>1.map</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//建立一个map</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置值</span></span><br><span class="line">m.<span class="title function_">set</span>(<span class="string">&quot;a&quot;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//是否存在a</span></span><br><span class="line">m.<span class="title function_">has</span>(<span class="string">&quot;a&quot;</span>)<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">m.<span class="title function_">get</span>(<span class="string">&#x27;a&#x27;</span>)<span class="comment">//1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除a</span></span><br><span class="line">m.<span class="title function_">delete</span>(<span class="string">&#x27;a&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="2-set"><a href="#2-set" class="headerlink" title="2.set"></a>2.set</h2><p><code>Set</code>和<code>Map</code>类似，也是一组key的集合，但不存储value。由于key不能重复，所以，在<code>Set</code>中，没有重复的key。</p><p>重复元素在<code>Set</code>中自动被过滤</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ES5</title>
      <link href="/2022/03/01/js/ES5/"/>
      <url>/2022/03/01/js/ES5/</url>
      
        <content type="html"><![CDATA[<h1 id="ES5"><a href="#ES5" class="headerlink" title="ES5"></a>ES5</h1><h2 id="ECMAScript-和-JavaScript-的关系"><a href="#ECMAScript-和-JavaScript-的关系" class="headerlink" title="ECMAScript 和 JavaScript 的关系"></a>ECMAScript 和 JavaScript 的关系</h2><p>要讲清楚这个问题，需要回顾历史。1996 年 11 月，JavaScript 的创造者 Netscape 公司，决定将 JavaScript 提交给标准化组织 ECMA，希望这种语言能够成为国际标准。次年，ECMA 发布 262 号标准文件（ECMA-262）的第一版，规定了<code>浏览器脚本语言的标准</code>，并将这种语言称为 <code>ECMAScript</code>，这个版本就是 1.0 版。</p><p>该标准从一开始就是针对 JavaScript 语言制定的，但是之所以不叫 JavaScript，有两个原因。一是商标，Java 是 Sun 公司的商标，根据授权协议，只有 Netscape 公司可以合法地使用 JavaScript 这个名字，且 JavaScript 本身也已经被 Netscape 公司注册为商标。二是想体现这门语言的制定者是 ECMA，不是 Netscape，这样有利于保证这门语言的开放性和中立性。</p><p>因此，ECMAScript 和 JavaScript 的关系是，<code>前者是后者的规格，后者是前者的一种实现</code>（另外的 ECMAScript 方言还有 JScript 和 ActionScript）。日常场合，这两个词是可以互换的。</p><h1 id="ES5新增方法"><a href="#ES5新增方法" class="headerlink" title="ES5新增方法"></a>ES5新增方法</h1><p>ES5 给我们新增了一些方法，可以很方便的操作数组或者字符串</p><ul><li>数组方法</li><li>字符串方法</li><li>对象方法</li></ul><h2 id="1、数组方法"><a href="#1、数组方法" class="headerlink" title="1、数组方法"></a>1、数组方法</h2><p>迭代(遍历)方法：foreach() ，map()，filter()，some() ，every() ;</p><h3 id="1-forEach"><a href="#1-forEach" class="headerlink" title="1.forEach()"></a>1.forEach()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">currentValue,index,arr</span>))</span><br></pre></td></tr></table></figure><ul><li>currentValue : 数组当前项的值</li><li>index: 数组当前项的索引</li><li>arr: 数组对象本身</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// forEach 迭代(遍历) 数组</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> sum = <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        arr.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">value, index, array</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;每个数组元素&#x27;</span> + value);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;每个数组元素的索引号&#x27;</span> + index);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数组本身&#x27;</span> + array);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            sum += value;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(sum);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">输出是</span><br><span class="line">每个数组元素<span class="number">1</span></span><br><span class="line"> 每个数组元素的索引号<span class="number">0</span></span><br><span class="line"> 数组本身<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line"> 每个数组元素<span class="number">2</span></span><br><span class="line"> 每个数组元素的索引号<span class="number">1</span></span><br><span class="line"> 数组本身<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line"> 每个数组元素<span class="number">3</span></span><br><span class="line"> 每个数组元素的索引号<span class="number">2</span></span><br><span class="line"> 数组本身<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line"> <span class="number">6</span></span><br></pre></td></tr></table></figure><h3 id="2-map"><a href="#2-map" class="headerlink" title="2.map"></a>2.map</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">map</span>(<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item+<span class="number">1</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>遍历数组返回一个<strong>新的数组，不改变原数组</strong>，返回加工之后的值，参数为回调函数，回调函数有两个参数</p><ul><li>item: 数组中的元素</li><li>index: 元素的下标</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> persons = [<span class="string">&#x27;SunWuKong&#x27;</span>,<span class="string">&#x27;TangSeng&#x27;</span>,<span class="string">&#x27;ZhuBaJie&#x27;</span>,<span class="string">&#x27;ShaWuJing&#x27;</span>,<span class="string">&#x27;TangSeng&#x27;</span>]</span><br><span class="line"><span class="comment">/* const vPersons = persons.map((item,index) =&gt; &#123;</span></span><br><span class="line"><span class="comment">return item = &#x27;hello, \t&#x27; + item</span></span><br><span class="line"><span class="comment">&#125;) */</span></span><br><span class="line"><span class="comment">/* 使用单行箭头函数，省掉关键字return */</span></span><br><span class="line"><span class="keyword">const</span> vPersons = persons.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="string">&#x27;hello,&#x27;</span> + item)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(persons)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(vPersons)</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/20200713012126441.png" alt="img"></p><h3 id="3-indexOf-lastIndexOf"><a href="#3-indexOf-lastIndexOf" class="headerlink" title="3.indexOf/lastIndexOf"></a>3.indexOf/lastIndexOf</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">indexOf</span>(item)</span><br></pre></td></tr></table></figure><p>返回的是item在数组里的下标</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> persons = [<span class="string">&#x27;SunWuKong&#x27;</span>,<span class="string">&#x27;TangSeng&#x27;</span>,<span class="string">&#x27;ZhuBaJie&#x27;</span>,<span class="string">&#x27;ShaWuJing&#x27;</span>,<span class="string">&#x27;TangSeng&#x27;</span>]</span><br><span class="line"><span class="comment">// 因为方法在原型链上所以我们有两种使用的方法</span></span><br><span class="line"><span class="comment">// 1. Array.prototype.方法名.call(arr,数组中的元素)(了解)</span></span><br><span class="line"><span class="comment">// 2. arr.方法名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(persons.<span class="title function_">indexOf</span>(<span class="string">&#x27;TangSeng&#x27;</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// console.log(persons.lastIndexOf(&#x27;TangSeng&#x27;))</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">lastIndexOf</span>.<span class="title function_">call</span>(persons,<span class="string">&#x27;TangSeng&#x27;</span>))<span class="comment">//4</span></span><br></pre></td></tr></table></figure><h3 id="4-filter-筛选数组"><a href="#4-filter-筛选数组" class="headerlink" title="4.filter()筛选数组"></a>4.filter()筛选数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">currentValue,index,arr</span>))</span><br></pre></td></tr></table></figure><ul><li><code>filter()</code>方法创建一个<code>新的数组</code>，新数组中的元素是通过检查指定数组中符合条件的所有元素，主要用于筛选数组</li><li>注意它直接返回一个<code>新数组</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// filter 筛选数组</span></span><br><span class="line">  <span class="keyword">var</span> arr = [<span class="number">12</span>, <span class="number">66</span>, <span class="number">4</span>, <span class="number">88</span>, <span class="number">3</span>, <span class="number">7</span>];</span><br><span class="line">  <span class="keyword">var</span> newArr = arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">value, index</span>) &#123;</span><br><span class="line">      <span class="comment">// return value &gt;= 20;</span></span><br><span class="line">      <span class="keyword">return</span> value % <span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newArr);</span><br></pre></td></tr></table></figure><h3 id="5-some"><a href="#5-some" class="headerlink" title="5.some()"></a>5.some()</h3><ul><li><code>some()</code>方法用于检测数组中的元素是否满足指定条件（查找数组中是否有满足条件的元素）</li><li>注意它返回的是布尔值，如果查找到这个元素，就返回true，如果查找不到就返回false</li><li>如果找到第一个满足条件的元素，则终止循环，不再继续查找</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// some 查找数组中是否有满足条件的元素 </span></span><br><span class="line">       <span class="keyword">var</span> arr1 = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;pink&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>];</span><br><span class="line">       <span class="keyword">var</span> flag1 = arr1.<span class="title function_">some</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> value == <span class="string">&#x27;pink&#x27;</span>;</span><br><span class="line">       &#125;);</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(flag1);</span><br><span class="line">       <span class="comment">// 1. filter 也是查找满足条件的元素 返回的是一个数组 而且是把所有满足条件的元素返回回来</span></span><br><span class="line">       <span class="comment">// 2. some 也是查找满足条件的元素是否存在  返回的是一个布尔值 如果查找到第一个满足条件的元素就终止循环</span></span><br></pre></td></tr></table></figure><h2 id="2、字符串方法"><a href="#2、字符串方法" class="headerlink" title="2、字符串方法"></a>2、字符串方法</h2><h3 id="1-trim"><a href="#1-trim" class="headerlink" title="1.trim"></a>1.trim</h3><ul><li><code>trim()</code>方法会从一个字符串的两端删除空白字符</li><li><code>trim()</code>方法并不影响原字符串本身，它返回的是一个新的字符串</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = str.<span class="title function_">trim</span>();</span><br></pre></td></tr></table></figure><h3 id="2-split"><a href="#2-split" class="headerlink" title="2.split"></a>2.split</h3><p><code>split()</code>用于把字符串串分割成字符串数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;How are you doing today?&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>);</span><br></pre></td></tr></table></figure><p>输出为</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">How</span>,are,you,doing,today?</span><br></pre></td></tr></table></figure><h3 id="3-join"><a href="#3-join" class="headerlink" title="3.join"></a>3.join</h3><p>我们将一个字符串转换为数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str=<span class="string">&quot;2,2,3,5,6,6&quot;</span>; *<span class="comment">//这是一字符串* </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> strs= <span class="keyword">new</span> <span class="title class_">Array</span>(); *<span class="comment">//定义一数组* </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>反过来，我们想把数组拼接成字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">arr.<span class="title function_">join</span>(<span class="string">&quot;.&quot;</span>)</span><br><span class="line"><span class="comment">//&quot;1.2.3.4.5&quot;</span></span><br></pre></td></tr></table></figure><h3 id="4-substring"><a href="#4-substring" class="headerlink" title="4.substring"></a>4.substring</h3><p>substring(start,end)表示从start到end之间的字符串，<strong>包括start位置的字符但是不包括end位置的字符</strong>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> src=<span class="string">&quot;images/off_1.png&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(src.<span class="title function_">substring</span>(<span class="number">7</span>,<span class="number">10</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//弹出值为：off</span></span><br></pre></td></tr></table></figure><h3 id="5-substr"><a href="#5-substr" class="headerlink" title="5.substr"></a>5.substr</h3><p>substr(start,length)<strong>表示从start位置开始</strong></p><p><strong>符串</strong>。<code>要截start处的字符</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> src=<span class="string">&quot;images/off_1.png&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(src.<span class="title function_">substr</span>(<span class="number">7</span>,<span class="number">3</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//弹出值为：off</span></span><br></pre></td></tr></table></figure><h3 id="6-slice"><a href="#6-slice" class="headerlink" title="6.slice"></a>6.slice</h3><p>slice() 方法可从已有的数组中返回选定的元素。</p><p>slice() 方法可提取字符串的某个部分，并以新的字符串返回被提取的部分。</p><p>start要截，end不要</p><p><strong>注意：</strong> slice() 方法不会改变原始数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Lemon&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> citrus = fruits.<span class="title function_">slice</span>(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">//Orange,Lemon</span></span><br></pre></td></tr></table></figure><h3 id="6-splice"><a href="#6-splice" class="headerlink" title="6.splice"></a>6.splice</h3><p>splice() 方法用于添加或删除数组中的元素。</p><p><strong>注意：</strong>这种方法会改变原始数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">splice</span>(<span class="number">2</span>,<span class="number">0</span>,<span class="string">&quot;Lemon&quot;</span>,<span class="string">&quot;Kiwi&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Banana</span>,<span class="title class_">Orange</span>,<span class="title class_">Lemon</span>,<span class="title class_">Kiwi</span>,<span class="title class_">Apple</span>,<span class="title class_">Mango</span></span><br></pre></td></tr></table></figure><h2 id="3、对象方法"><a href="#3、对象方法" class="headerlink" title="3、对象方法"></a>3、对象方法</h2><h3 id="1-Object-create"><a href="#1-Object-create" class="headerlink" title="1 Object.create"></a>1 Object.create</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title class_">Object</span>.<span class="title function_">create</span>(person,&#123;</span><br><span class="line">    <span class="attr">gender</span>:&#123;</span><br><span class="line">        <span class="attr">value</span>:<span class="string">&quot;male&quot;</span>,</span><br><span class="line">        <span class="attr">writable</span>:<span class="literal">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>创建一个对象，为对象指定原型并返回，一共有两个参数</p><p>第一个参数：必须，原型对象</p><p>第二个参数：可选，是一个配置对象，为对象定义新的属性</p><ul><li><code>value</code> : 指定值</li><li><code>writable</code> : 标识当前属性值是否是可修改的, 默认为false</li><li><code>configurable</code>: 标识当前属性是否可以被删除 默认为false</li><li><code>enumerable：</code> 标识当前属性是否能用for in 枚举 默认为false</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;Jerry&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> createPerson = <span class="title class_">Object</span>.<span class="title function_">create</span>(person,&#123;</span><br><span class="line">    <span class="attr">gender</span>:&#123;</span><br><span class="line">        <span class="attr">value</span>:<span class="string">&quot;male&quot;</span>,</span><br><span class="line">        <span class="attr">writable</span>:<span class="literal">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(createPerson)</span><br><span class="line"><span class="comment">/* 删除 */</span></span><br><span class="line"><span class="keyword">delete</span> createPerson.<span class="property">gender</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(createPerson)</span><br></pre></td></tr></table></figure><h3 id="2-Object-keys"><a href="#2-Object-keys" class="headerlink" title="2.Object.keys()"></a>2.Object.keys()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)</span><br></pre></td></tr></table></figure><ol><li><code>Object.keys()</code>用于获取对象自身所有的属性</li><li>效果类似<code>for...in</code></li><li>返回一个由属性名组成的数组</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用于获取对象自身所有的属性</span></span><br><span class="line">    <span class="keyword">var</span> obj = &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">pname</span>: <span class="string">&#x27;小米&#x27;</span>,</span><br><span class="line">        <span class="attr">price</span>: <span class="number">1999</span>,</span><br><span class="line">        <span class="attr">num</span>: <span class="number">2000</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> arr = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line">    arr.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">        <span class="comment">// id</span></span><br><span class="line">        <span class="comment">// pname</span></span><br><span class="line">        <span class="comment">// price</span></span><br><span class="line">        <span class="comment">// num</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><h3 id="3-Object-defineProperty"><a href="#3-Object-defineProperty" class="headerlink" title="3.Object.defineProperty()"></a>3.Object.defineProperty()</h3><p><code>Object.defineProperty()</code>定义对象中新属性或修改原有的属性(了解)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj,prop,descriptor)</span><br></pre></td></tr></table></figure><ul><li>obj : 目标对象</li><li>prop : 需定义或修改的属性的名字</li><li>descriptor : 目标属性所拥有的特性</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Object.defineProperty() 定义新属性或修改原有的属性</span></span><br><span class="line">      <span class="keyword">var</span> obj = &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">pname</span>: <span class="string">&#x27;小米&#x27;</span>,</span><br><span class="line">          <span class="attr">price</span>: <span class="number">1999</span></span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="comment">// 1. 以前的对象添加和修改属性的方式</span></span><br><span class="line">      <span class="comment">// obj.num = 1000;</span></span><br><span class="line">      <span class="comment">// obj.price = 99;</span></span><br><span class="line">      <span class="comment">// console.log(obj);</span></span><br><span class="line">      <span class="comment">// 2. Object.defineProperty() 定义新属性或修改原有的属性</span></span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;num&#x27;</span>, &#123;</span><br><span class="line">          <span class="attr">value</span>: <span class="number">1000</span>,</span><br><span class="line">          <span class="attr">enumerable</span>: <span class="literal">true</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;price&#x27;</span>, &#123;</span><br><span class="line">          <span class="attr">value</span>: <span class="number">9.9</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;id&#x27;</span>, &#123;</span><br><span class="line">          <span class="comment">// 如果值为false 不允许修改这个属性值 默认值也是false</span></span><br><span class="line">          <span class="attr">writable</span>: <span class="literal">false</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      obj.<span class="property">id</span> = <span class="number">2</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;address&#x27;</span>, &#123;</span><br><span class="line">          <span class="attr">value</span>: <span class="string">&#x27;中国山东蓝翔技校xx单元&#x27;</span>,</span><br><span class="line">          <span class="comment">// 如果只为false 不允许修改这个属性值 默认值也是false</span></span><br><span class="line">          <span class="attr">writable</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="comment">// enumerable 如果值为false 则不允许遍历, 默认的值是 false</span></span><br><span class="line">          <span class="attr">enumerable</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="comment">// configurable 如果为false 则不允许删除这个属性 不允许在修改第三个参数里面的特性 默认为false</span></span><br><span class="line">          <span class="attr">configurable</span>: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">keys</span>(obj));</span><br><span class="line">      <span class="keyword">delete</span> obj.<span class="property">address</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line">      <span class="keyword">delete</span> obj.<span class="property">pname</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;address&#x27;</span>, &#123;</span><br><span class="line">          <span class="attr">value</span>: <span class="string">&#x27;中国山东蓝翔技校xx单元&#x27;</span>,</span><br><span class="line">          <span class="comment">// 如果值为false 不允许修改这个属性值 默认值也是false</span></span><br><span class="line">          <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="comment">// enumerable 如果值为false 则不允许遍历, 默认的值是 false</span></span><br><span class="line">          <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="comment">// configurable 如果为false 则不允许删除这个属性 默认为false</span></span><br><span class="line">          <span class="attr">configurable</span>: <span class="literal">true</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">address</span>);</span><br></pre></td></tr></table></figure><h2 id="4-JSON"><a href="#4-JSON" class="headerlink" title="4.JSON"></a>4.JSON</h2><p>ES5提供了<code>JSON</code>全局对象，用来序列化和反序列化对象为<code>JSON</code></p><blockquote><p><strong>序列化</strong>： 把对象转换为字节序列的过程称为对象的序列化</p></blockquote><h3 id="1-JSON-parse"><a href="#1-JSON-parse" class="headerlink" title="1.JSON.parse"></a>1.JSON.parse</h3><p>第一个参数：必须，字符串</p><p>第二个参数：可选，是一个函数，函数传递两个参数</p><ul><li><code>key</code>转换为对象的属性名</li><li><code>value</code>转换为对象的属性值</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&#x27;&#123;&quot;name&quot;: &quot;Jerry&quot;, &quot;age&quot;: 18,&quot;gender&quot;:&quot;male&quot;&#125;&#x27;</span>, <span class="keyword">function</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// 输出当前属性，最后一个为 &quot;&quot;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line"><span class="comment">/* 对于对象的属性值做修改 */</span></span><br><span class="line"><span class="keyword">return</span> value + <span class="string">&quot;OK&quot;</span>; <span class="comment">// 返回修改的值</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/image-20211204161451935.png" alt="image-20211204161451935"><br>这里最后输出一个空字符串，并最终输出整个对象，我们可以利用这个特性来返回对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&quot;&#123;...&#125;&quot;</span>,<span class="keyword">function</span>(<span class="params">key,value</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(key === <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-JSON-stringify"><a href="#2-JSON-stringify" class="headerlink" title="2.JSON.stringify"></a>2.JSON.stringify</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value[, replacer [, space]])</span><br></pre></td></tr></table></figure><p><strong>第一个参数：必须，要转化的数组或者对象（这个主要用）</strong></p><p>第二个参数：可选，是一个函数，或者数组（如果传递第二个参数，则返回值由你自己决定）</p><p>如果是一个函数，则参数与功能与<strong>JSON.parse</strong> 相同</p><p>第三个参数：可选，对于返回值进行格式化</p><ul><li>数字：表示缩进几个空格，最多缩进10个</li><li>非数字：比如\t</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;&#125;);                        <span class="comment">// &#x27;&#123;&#125;&#x27;</span></span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="literal">true</span>);                      <span class="comment">// &#x27;true&#x27;</span></span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="string">&quot;foo&quot;</span>);                     <span class="comment">// &#x27;&quot;foo&quot;&#x27;</span></span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>([<span class="number">1</span>, <span class="string">&quot;false&quot;</span>, <span class="literal">false</span>]);       <span class="comment">// &#x27;[1,&quot;false&quot;,false]&#x27;</span></span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">x</span>: <span class="number">5</span> &#125;);                  <span class="comment">// &#x27;&#123;&quot;x&quot;:5&#125;&#x27;</span></span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;Jerry&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(person)) <span class="comment">//&#123;&quot;name&quot;:&quot;Jerry&quot;,&quot;age&quot;:18&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript面向对象</title>
      <link href="/2022/03/01/js/JavaScript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
      <url>/2022/03/01/js/JavaScript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript面向对象"><a href="#JavaScript面向对象" class="headerlink" title="JavaScript面向对象"></a>JavaScript面向对象</h1><h1 id="1、面向对象"><a href="#1、面向对象" class="headerlink" title="1、面向对象"></a>1、面向对象</h1><h2 id="1、对象"><a href="#1、对象" class="headerlink" title="1、对象"></a>1、对象</h2><p>在 JavaScript 中，对象是一组无序的相关属性和方法的集合，所有的事物都是对象，例如字符串、数值、数组、函数等。</p><p>对象是由属性和方法组成的</p><ul><li>属性：事物的<strong>特征，在对象中用属性</strong>来表示</li><li>方法：事物的<strong>行为，在对象中用方法</strong>来表示</li></ul><h2 id="2、类"><a href="#2、类" class="headerlink" title="2、类"></a>2、类</h2><p>在 ES6 中新增加了类的概念，可以使用 class 关键字声明一个类，之后以这个类来实例化对象。</p><ul><li>类抽象了对象的公共部分，它泛指某一大类（class）</li><li>对象特指某一个，通过类实例化一个具体的对象</li></ul><h3 id="1、创建类"><a href="#1、创建类" class="headerlink" title="1、创建类"></a>1、创建类</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class name &#123;</span><br><span class="line">    // class body</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-创建实例"><a href="#2-创建实例" class="headerlink" title="2.创建实例"></a>2.创建实例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="variable constant_">XX</span> = <span class="keyword">new</span> <span class="title function_">name</span>();</span><br></pre></td></tr></table></figure><h3 id="3、构造函数"><a href="#3、构造函数" class="headerlink" title="3、构造函数"></a>3、构造函数</h3><p><code>constructor()</code>方法是类的构造函数(默认方法)，<code>用于传递参数,返回实例对象</code>，通过 new 命令生成对象实例时，自动调用该方法。如果没有显示定义, 类内部会自动给我们创建一个<code>constructor()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 1. 创建类 class  创建一个 明星类</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Star</span> &#123;</span><br><span class="line">        <span class="comment">// constructor 构造器或者构造函数</span></span><br><span class="line">        <span class="title function_">constructor</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 2. 利用类创建对象 new</span></span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">var</span> zxy = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;张学友&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ldh);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(zxy);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>类名首字母大写</li><li>类里面有个 constructor函数，可以接收传递过来的参数，同时返回实例对象</li><li>constructor函数只要 new 生成实例时，就会自动调用这个函数，如果我们不写这个函数，类也会自动生成这个函数</li><li>最后注意语法规范</li><li>创建类➡类名后面不要加小括号<br>生成实例➡类名后面加小括号<br>构造函数不需要加 function 关键字</li></ul><h3 id="4、类中添加方法"><a href="#4、类中添加方法" class="headerlink" title="4、类中添加方法"></a>4、类中添加方法</h3><p>语法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name,age</span>) &#123;   </span><br><span class="line">      <span class="comment">// constructor 称为构造器或者构造函数</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;你好&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;      </span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>); </span><br><span class="line">ldh.<span class="title function_">say</span>() </span><br></pre></td></tr></table></figure><p>注意： 方法之间不能加<code>逗号</code>分隔，同时方法不需要添加 <code>function</code> 关键字。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 1. 创建类 class  创建一个 明星类</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Star</span> &#123;</span><br><span class="line">        <span class="comment">// 类的共有属性放到 constructor 里面</span></span><br><span class="line">        <span class="title function_">constructor</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">sing</span>(<span class="params">song</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">uname</span> + song);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 2. 利用类创建对象 new</span></span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">var</span> zxy = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;张学友&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ldh);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(zxy);</span><br><span class="line"><span class="comment">// (1) 我们类里面所有的函数不需要写function </span></span><br><span class="line"><span class="comment">// (2) 多个函数方法之间不需要添加逗号分隔</span></span><br><span class="line">ldh.<span class="title function_">sing</span>(<span class="string">&#x27;冰雨&#x27;</span>);</span><br><span class="line">zxy.<span class="title function_">sing</span>(<span class="string">&#x27;李香兰&#x27;</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>类的共有属性放到constructor 里面</li><li>类里面的函数都不需要写 function 关键字</li></ul><h3 id="5-构造函数的简单写法"><a href="#5-构造函数的简单写法" class="headerlink" title="5.构造函数的简单写法"></a>5.构造函数的简单写法</h3><p>上面的构造函数我们需要把class、constructor都写出来，但我们经常选择省掉。</p><p>以下就是一个构造函数的示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">   &lt;script&gt;</span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">Bird</span>(<span class="params">name, color</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">color</span> = color;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">numLegs</span> = <span class="number">2</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sum</span> = <span class="keyword">function</span> (<span class="params">song</span>) &#123;  <span class="comment">//方法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>+song);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> swan = <span class="keyword">new</span> <span class="title class_">Bird</span>();</span><br><span class="line">swan.<span class="property">name</span> = <span class="string">&quot;Carlos&quot;</span>;</span><br><span class="line">swan.<span class="property">color</span> = <span class="string">&quot;white&quot;</span></span><br><span class="line">swan.<span class="title function_">sum</span>(<span class="string">&#x27;冰雨&#x27;</span>);</span><br><span class="line">    &lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3、类的继承"><a href="#3、类的继承" class="headerlink" title="3、类的继承"></a>3、类的继承</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 父类</span><br><span class="line">class Father &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">// 子类继承父类</span><br><span class="line">class Son extends Father &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看一个实例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 父类有加法方法</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">        <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">sum</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span> + <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 子类继承父类加法方法 同时 扩展减法方法</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Father</span> &#123;</span><br><span class="line">        <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">            <span class="comment">// 利用super 调用父类的构造函数</span></span><br><span class="line">            <span class="comment">// super 必须在子类this之前调用</span></span><br><span class="line">            <span class="variable language_">super</span>(x, y);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">subtract</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> son = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">    son.<span class="title function_">subtract</span>();</span><br><span class="line">    son.<span class="title function_">sum</span>();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="4、super关键字"><a href="#4、super关键字" class="headerlink" title="4、super关键字"></a>4、super关键字</h2><ul><li><code>super</code> 关键字用于访问和调用对象父类上的函数，可以调用父类的构造函数，也可以调用父类的普通函数</li></ul><h3 id="1、调用父类的构造函数"><a href="#1、调用父类的构造函数" class="headerlink" title="1、调用父类的构造函数"></a>1、调用父类的构造函数</h3><p>语法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">surname</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">surname</span> = surname;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类继承父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> entends <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">surname,firstname</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(surname);<span class="comment">//调用父类的 constructor(surname)</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">firstname</span> = firstname;<span class="comment">//定义子类独有的属性</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意：<strong>子类在构造函数中使用super,必须放到this前面（必须先调用父类的构造方法，在使用子类构造方法）</strong></p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">surname</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">surname</span> = surname;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">saySurname</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我的姓是&#x27;</span> + <span class="variable language_">this</span>.<span class="property">surname</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类继承父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> entends <span class="title class_">Father</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">surname,firstname</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(surname);<span class="comment">//调用父类的 constructor(surname)</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">firstname</span> = firstname;<span class="comment">//定义子类独有的属性</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">sayFirstname</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我的名字是:&#x27;</span> + <span class="variable language_">this</span>.<span class="property">firstname</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> damao = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;刘&#x27;</span>,<span class="string">&#x27;德华&#x27;</span>);</span><br><span class="line">damao.<span class="title function_">saySurname</span>();</span><br><span class="line">damao.<span class="title function_">sayFirstname</span>();</span><br></pre></td></tr></table></figure><h3 id="2、调用父类的普通函数"><a href="#2、调用父类的普通函数" class="headerlink" title="2、调用父类的普通函数"></a>2、调用父类的普通函数</h3><p>语法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;我是爸爸&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Father</span> &#123;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">// super.say() super调用父类的方法</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">say</span>() + <span class="string">&#x27;的儿子&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> damao = <span class="keyword">new</span> <span class="title class_">Son</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(damao.<span class="title function_">say</span>());</span><br></pre></td></tr></table></figure><ul><li>多个方法之间不需要添加逗号分隔</li><li>继承中属性和方法的查找原则：就近原则，先看子类，再看父类</li></ul><h3 id="3-三个注意点"><a href="#3-三个注意点" class="headerlink" title="3.三个注意点"></a>3.三个注意点</h3><ol><li>在ES6中类没有变量提升，所以必须先定义类，才能通过类实例化对象</li><li>类里面的共有属性和方法一定要加 <code>this</code>使用</li><li>类里面的<code>this</code>指向：<ul><li>constructor 里面的 <code>this</code>指向实例对象</li><li>方法里面的<code>this</code>指向这个方法的调用者</li></ul></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> that;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> _that;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">class</span> <span class="title class_">Star</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">constructor</span>(<span class="params">uname, age</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">// constructor 里面的this 指向的是 创建的实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                that = <span class="variable language_">this</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">this</span>.<span class="property">age</span> = age;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">// this.sing();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">this</span>.<span class="property">btn</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">this</span>.<span class="property">btn</span>.<span class="property">onclick</span> = <span class="variable language_">this</span>.<span class="property">sing</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">sing</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 这个sing方法里面的this 指向的是 btn 这个按钮,因为这个按钮调用了这个函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(that.<span class="property">uname</span>); </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">// that里面存储的是constructor里面的this</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">dance</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">// 这个dance里面的this 指向的是实例对象 ldh 因为ldh 调用了这个函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                _that = <span class="variable language_">this</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(that === ldh);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ldh.<span class="title function_">dance</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(_that === ldh);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 在 ES6 中类没有变量提升，所以必须先定义类，才能通过类实例化对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2. 类里面的共有的属性和方法一定要加this使用.</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h1 id="2、构造函数和原型"><a href="#2、构造函数和原型" class="headerlink" title="2、构造函数和原型"></a>2、构造函数和原型</h1><h2 id="1、概述"><a href="#1、概述" class="headerlink" title="1、概述"></a>1、概述</h2><p>创建对象有三种方式</p><ul><li><strong>对象字面量</strong></li><li><strong>new Object()</strong></li><li><strong>自定义构造函数</strong></li><li><strong>可以用<code>instanceof</code>来检查对象的类型</strong></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// <span class="number">1</span>. 利用 new <span class="selector-tag">Object</span>() 创建对象</span><br><span class="line"><span class="selector-tag">var</span> obj1 = new <span class="selector-tag">Object</span>();</span><br><span class="line"></span><br><span class="line">// <span class="number">2</span>. 利用对象字面量创建对象</span><br><span class="line"><span class="selector-tag">var</span> obj2 = &#123;&#125;；</span><br><span class="line"></span><br><span class="line">// <span class="number">3</span>.利用构造函数创建对象</span><br><span class="line">function Star(uname,age) &#123;</span><br><span class="line">    this<span class="selector-class">.uname</span> = uname;</span><br><span class="line">    this<span class="selector-class">.age</span> = age;</span><br><span class="line">    this<span class="selector-class">.sing</span> = function() &#123;</span><br><span class="line">        console<span class="selector-class">.log</span>(&#x27;我会唱歌&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">var</span> ldh = new Star(&#x27;刘德华&#x27;,<span class="number">18</span>);</span><br><span class="line"></span><br><span class="line">// <span class="number">4</span>.可以用instanceof来检查对象的类型</span><br><span class="line">ldh instanceof Star</span><br><span class="line">这个会返回true</span><br></pre></td></tr></table></figure><h2 id="2、构造函数"><a href="#2、构造函数" class="headerlink" title="2、构造函数"></a>2、构造函数</h2><ul><li><p><code>构造函数</code>是一种特殊的函数，主要用来初始化对象(为对象成员变量赋初始值)，它总与new一起使用</p></li><li><p>我们可以把对象中的一些公共的属性和方法抽取出来，然后封装到这个函数里面</p><p>new 在执行时会做四件事：</p></li><li><p>在内存中创建一个新的空对象。</p></li><li><p>让 this 指向这个新的对象。</p></li><li><p>执行构造函数里面的代码，给这个新对象添加属性和方法。</p></li><li><p>返回这个新对象（所以构造函数里面不需要 return ）。</p></li></ul><h3 id="1、静态成员和实例成员"><a href="#1、静态成员和实例成员" class="headerlink" title="1、静态成员和实例成员"></a>1、静态成员和实例成员</h3><p>JavaScript 的构造函数中可以添加一些成员，可以在构造函数本身上添加，也可以在构造函数内部的this上添加。通过这两种方式添加的成员，就分别称为<code>静态成员</code>和<code>实例成员</code>。</p><ul><li>静态成员: <code>构造函数外面的</code></li><li>实例成员: <code>在构造函数里面的，有this的，这个属性又叫做自身属性</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数中的属性和方法我们称为成员，成员可以添加</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname,age</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会唱歌&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>,<span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例成员就是构造函数内部通过this添加的成员  uname age sing  就是实例成员</span></span><br><span class="line"><span class="comment">// 实例成员只能通过实例化的对象来访问</span></span><br><span class="line">ldh.<span class="title function_">sing</span>();</span><br><span class="line"><span class="title class_">Star</span>.<span class="property">uname</span>; <span class="comment">// undefined     不可以通过构造函数来访问实例成员</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态成员就是在构造函数本身上添加的成员 sex 就是静态成员</span></span><br><span class="line"><span class="comment">// 静态成员只能通过构造函数来访问</span></span><br><span class="line"><span class="title class_">Star</span>.<span class="property">sex</span> = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="title class_">Star</span>.<span class="property">sex</span>;</span><br><span class="line">ldh.<span class="property">sex</span>; <span class="comment">// undefined  不能通过对象来访问</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ownProps = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> property <span class="keyword">in</span> idh) &#123;</span><br><span class="line">  <span class="keyword">if</span>(idh.<span class="title function_">hasOwnProperty</span>(property)) &#123;</span><br><span class="line">    ownProps.<span class="title function_">push</span>(property);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ownProps是[&quot;uname&quot;, &quot;age&quot;,&quot;sing&quot;]</span></span><br></pre></td></tr></table></figure><h3 id="2、构造函数的问题"><a href="#2、构造函数的问题" class="headerlink" title="2、构造函数的问题"></a>2、构造函数的问题</h3><p>构造函数方法很好用，但是<code>存在浪费内存的问题</code></p><p>每次实例化一个类，就要开一个内存</p><p><img src="https://img-blog.csdnimg.cn/080f8513ab074159abf16942fd009b2b.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><p><strong>我们希望所有的对象使用同一个函数，这样就比较节省内存</strong></p><h2 id="3、构造函数原型-prototype"><a href="#3、构造函数原型-prototype" class="headerlink" title="3、构造函数原型 prototype"></a>3、构造函数原型 prototype</h2><ul><li>构造函数通过<code>原型</code>分配的函数是所有对象所<code>共享的</code>,这样就解决了内存浪费问题</li><li>JavaScript 规定，每一个构造函数都有一个<code>prototype属性</code>，指向另一个<code>对象</code>，注意这个prototype就是一个对象，这个对象的所有属性和方法，都会被构造函数所拥有</li><li>我们可以把那些<code>不变的方法</code>，直接定义在prototype 对象上，这样所有对象的实例就可以<code>共享这些方法</code></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // <span class="number">1</span>. 构造函数的问题. </span><br><span class="line">        function Star(uname, age) &#123;</span><br><span class="line">    //公共属性定义到构造函数里面</span><br><span class="line">            this<span class="selector-class">.uname</span> = uname;</span><br><span class="line">            this<span class="selector-class">.age</span> = age;</span><br><span class="line">            // this<span class="selector-class">.sing</span> = function() &#123;</span><br><span class="line">            //     console<span class="selector-class">.log</span>(&#x27;我会唱歌&#x27;);</span><br><span class="line">            // &#125;</span><br><span class="line">        &#125;</span><br><span class="line">//公共的方法我们放到原型对象身上</span><br><span class="line">        Star<span class="selector-class">.prototype</span><span class="selector-class">.sing</span> = function() &#123;</span><br><span class="line">            console<span class="selector-class">.log</span>(&#x27;我会唱歌&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">var</span> ldh = new Star(&#x27;刘德华&#x27;, <span class="number">18</span>);</span><br><span class="line">        <span class="selector-tag">var</span> zxy = new Star(&#x27;张学友&#x27;, <span class="number">19</span>);</span><br><span class="line">        console<span class="selector-class">.log</span>(ldh<span class="selector-class">.sing</span> === zxy<span class="selector-class">.sing</span>);</span><br><span class="line">        ldh<span class="selector-class">.sing</span>();</span><br><span class="line">        zxy<span class="selector-class">.sing</span>();</span><br><span class="line">        // <span class="number">2</span>. 一般情况下,我们的公共属性定义到构造函数里面, 公共的方法我们放到原型对象身上</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>我们注意到，原型对象是在构造函数的外面定义的</p></blockquote><p>问答：原型是什么？</p><ul><li>一个对象，我们也称为 <code>prototype</code> 为原型对象</li></ul><p>问答：原型的作用是什么？</p><ul><li>共享方法</li></ul><h2 id="4、对象原型-proto"><a href="#4、对象原型-proto" class="headerlink" title="4、对象原型 __ proto __"></a>4、对象原型 <code>__ proto __</code></h2><ul><li>对象都会有一个属性 <code>_proto_</code> 指向构造函数的<code>prototype</code>原型对象，之所以我们对象可以使用构造函数prototype 原型对象的属性和方法，就是因为对象有<code>_proto_</code>原型的存在。</li><li><code>_proto_</code>对象原型和原型对象 prototype 是等价的</li><li><code>_proto_</code>对象原型的意义就在于为对象的查找机制提供一个方向，或者说一条路线，但是它是一个非标准属性，因此实际开发中，不可以使用这个属性，它只是内部指向原型对象 <code>prototype</code></li></ul><p><img src="https://img-blog.csdnimg.cn/e8e771c189c548f7b67209722f6289dc.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><blockquote><p>我们可以简单来理解一下，</p><p><code>prototype</code>：就是一个在构造函数外声明的对象，所有实例化的对象都可以使用这个东西</p><p><code>_proto_</code>：为什么迷宫实例化的对象都可以使用prototype呢，因为他们<code>自己有添加_proto_</code>，这个指向prototype</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">age</span> = age;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会唱歌&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> zxy = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;张学友&#x27;</span>, <span class="number">19</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ldh.<span class="title function_">sing</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh); </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 对象身上系统自己添加一个 __proto__ 指向我们构造函数的原型对象 prototype</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh.<span class="property">__proto__</span> === <span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 方法的查找规则: 首先先看ldh 对象身上是否有 sing 方法,如果有就执行这个对象上的sing</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 如果没有sing 这个方法,因为有 __proto__ 的存在,就去构造函数原型对象prototype身上去查找sing这个方法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="5、constructor-构造函数"><a href="#5、constructor-构造函数" class="headerlink" title="5、constructor 构造函数"></a>5、constructor 构造函数</h2><p><code>对象原型(_proto_)</code> 和构造函数<code>(prototype)原型对象</code> 里面都有一个属性constructor属性,<code>constructor</code> 我们称为构造函数，因为它指回构造函数本身。</p><blockquote><p>手动设置一个新对象的原型有一个重要的副作用。 它清除了 <code>constructor</code> 属性！</p><p>为了解决这个问题，凡是手动给新对象重新设置过原型对象的，都别忘记在原型对象中定义一个 <code>constructor</code> 属性：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">age</span> = age;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 很多情况下,我们需要手动的利用constructor 这个属性指回 原来的构造函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// Star.prototype.sing = function() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//     console.log(&#x27;我会唱歌&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// &#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// Star.prototype.movie = function() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//     console.log(&#x27;我会演电影&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 如果我们修改了原来的原型对象,给原型对象赋值的是一个对象,则必须手动的利用constructor指回原来的构造函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">constructor</span>: <span class="title class_">Star</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">sing</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会唱歌&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">movie</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会演电影&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> zxy = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;张学友&#x27;</span>, <span class="number">19</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/8ee8345e99974afd93ce053e7988712d.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><h2 id="6-isPrototypeOf"><a href="#6-isPrototypeOf" class="headerlink" title="6.isPrototypeOf"></a>6.isPrototypeOf</h2><p>对象也可直接从创建它的构造函数那里继承其 <code>prototype</code>。 请看下面的例子：<code>Bird</code> 构造函数创建了一个 <code>duck</code> 对象：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Bird</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> duck = <span class="keyword">new</span> <span class="title class_">Bird</span>(<span class="string">&quot;Donald&quot;</span>);</span><br></pre></td></tr></table></figure><p><code>duck</code> 从 <code>Bird</code> 构造函数那里继承了它的 <code>prototype</code>。 你可以使用 <code>isPrototypeOf</code> 方法来验证他们之间的关系：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Bird</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(duck);</span><br></pre></td></tr></table></figure><p>这将返回 <code>true</code>。</p><h2 id="7、原型链查找规则"><a href="#7、原型链查找规则" class="headerlink" title="7、原型链查找规则"></a>7、原型链查找规则</h2><ol><li>当访问一个对象的属性(包括方法)时，首先查找这个对象<code>自身</code>有没有该属性</li><li>如果没有就查找它的<code>原型</code>(也就是_proto_指向的prototype原型对象)</li><li>如果还没有就查找<code>原型对象的原型</code>(<code>Object的原型对象</code>)</li><li>依次类推一直找到Object为止(null)</li><li><code>__ proto __</code>对象原型的意义就在于为对象成员查找机制提供一个方向，或者说一条路线。</li></ol><p><img src="https://img-blog.csdnimg.cn/c1cbd18ff3444621bf151654714b85cd.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">age</span> = age;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会唱歌&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 只要是对象就有__proto__ 原型, 指向原型对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2.我们Star原型对象里面的__proto__原型指向的是 Object.prototype</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 3. 我们Object.prototype原型对象里面的__proto__原型  指向为 null</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="8、原型对象this指向"><a href="#8、原型对象this指向" class="headerlink" title="8、原型对象this指向"></a>8、原型对象this指向</h2><ul><li>构造函数中的 <code>this</code>指向我们的实例对象</li><li>原型对象里面放的是方法，这个方法里面的<code>this</code>指向的是这个方法的调用者，也就是这个实例对象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">age</span> = age;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> that;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会唱歌&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            that = <span class="variable language_">this</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 在构造函数中,里面this指向的是对象实例 ldh</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ldh.<span class="title function_">sing</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(that === ldh);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2.原型对象函数里面的this 指向的是 实例对象 ldh</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h1 id="3、继承"><a href="#3、继承" class="headerlink" title="3、继承"></a>3、继承</h1><h2 id="1、call"><a href="#1、call" class="headerlink" title="1、call()"></a>1、call()</h2><p><code>调用这个函数，并且修改函数运行时的 this 指向</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.<span class="title function_">call</span>(thisArg,arg1,arg2,......)</span><br></pre></td></tr></table></figure><ul><li><code>thisArg</code>：当前调用函数 this 的指向对象</li><li><code>arg1,arg2</code>： 传递的其他参数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// call 方法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">x, y</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我希望我的希望有希望&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);<span class="comment">// Object&#123;...&#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(x + y);<span class="comment">// 3</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> o = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// fn();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. call() 可以调用函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// fn.call();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2. call() 可以改变这个函数的this指向 此时这个函数的this 就指向了o这个对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        fn.<span class="title function_">call</span>(o, <span class="number">1</span>, <span class="number">2</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="2、借用构造函数继承父类型属性"><a href="#2、借用构造函数继承父类型属性" class="headerlink" title="2、借用构造函数继承父类型属性"></a>2、借用构造函数继承父类型属性</h2><p>核心原理: 通过 <code>call()</code> 把父类型的 this 指向子类型的 this，这样就可以实现子类型继承父类型的属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 借用父构造函数继承属性</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 父构造函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Father</span>(<span class="params">uname, age</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// this 指向父构造函数的对象实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">age</span> = age;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2 .子构造函数 </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">uname, age, score</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// this 指向子构造函数的对象实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title class_">Father</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, uname, age);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">score</span> = score;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> son = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>, <span class="number">100</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(son);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="3、借用原型对象继承父类型方法"><a href="#3、借用原型对象继承父类型方法" class="headerlink" title="3、借用原型对象继承父类型方法"></a>3、借用原型对象继承父类型方法</h2><p><code>一般情况下，对象的方法都在构造函数的原型对象中设置，通过构造函数无法继承父类方法</code><br>核心原理：</p><ol><li>将子类所共享的方法提取出来，让子类的 <code>prototype 原型对象 = new 父类()</code></li><li>本质： 子类原型对象等于是实例化父类，因为父类实例化之后另外开辟空间，就不会影响原来父类原型对象</li><li>将子类的<code>constructor</code>重新指向子类的构造函数</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 借用父构造函数继承属性</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 父构造函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Father</span>(<span class="params">uname, age</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// this 指向父构造函数的对象实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">age</span> = age;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">Father</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">money</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2 .子构造函数 </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">uname, age, score</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// this 指向子构造函数的对象实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title class_">Father</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, uname, age);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">score</span> = score;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// Son.prototype = Father.prototype;  这样直接赋值会有问题,如果修改了子原型对象,父原型对象也会跟着一起变化</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Father</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 如果利用对象的形式修改了原型对象,别忘了利用constructor 指回原来的构造函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Son</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 这个是子构造函数专门的方法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">exam</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;孩子要考试&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> son = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>, <span class="number">100</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(son);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Father</span>.<span class="property"><span class="keyword">prototype</span></span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="4-类的本质"><a href="#4-类的本质" class="headerlink" title="4.类的本质"></a>4.类的本质</h2><ul><li>class 本质还是 function</li><li>类的所有方法都定义在类的 prototype属性上</li><li>类创建的实例，里面也有_proto_指向类的prototype原型对象</li><li>所以 ES6 的类它的绝大部分功能，ES5都可以做到，新的class写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已。</li><li>所以 ES6 的类其实就是语法糖</li><li>语法糖：语法糖就是一种便捷写法，简单理解</li></ul><h1 id="4、函数进阶"><a href="#4、函数进阶" class="headerlink" title="4、函数进阶"></a>4、函数进阶</h1><h2 id="1、函数的定义方式"><a href="#1、函数的定义方式" class="headerlink" title="1、函数的定义方式"></a>1、函数的定义方式</h2><ol><li>函数声明方式 function 关键字(命名函数)</li><li>函数表达式(匿名函数)</li><li>new Function()</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&#x27;参数1&#x27;</span>,<span class="string">&#x27;参数2&#x27;</span>,.....,<span class="string">&#x27;函数体&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>Function 里面参数都必须是字符串格式</li><li>第三种方式执行效率低，也不方便书写，因此较少使用</li><li>所有函数都是 Function 的实例(对象)</li><li>函数也属于对象</li></ul><p><img src="https://img-blog.csdnimg.cn/41f3e6248b384edba0cef92f7557b9b3.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><blockquote><p><code>Function</code>相当于一个类，f是实例对象</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//  函数的定义方式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 自定义函数(命名函数) </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2. 函数表达式 (匿名函数)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> fun = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 3. 利用 new Function(&#x27;参数1&#x27;,&#x27;参数2&#x27;, &#x27;函数体&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//             Function 里面参数都必须是字符串格式，执行效率低，较少写</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> f = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;console.log(a + b)&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">f</span>(<span class="number">1</span>, <span class="number">2</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 4. 所有函数都是 Function 的实例(对象)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">dir</span>(f);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 5. 函数也属于对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(f <span class="keyword">instanceof</span> <span class="title class_">Object</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="2、函数的调用方式"><a href="#2、函数的调用方式" class="headerlink" title="2、函数的调用方式"></a>2、函数的调用方式</h2><ol><li>普通函数</li><li>对象的方法</li><li>构造函数</li><li>绑定事件函数</li><li>定时器函数</li><li>立即执行函数</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 函数的调用方式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 普通函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;人生的巅峰&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// fn();   fn.call()</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2. 对象的方法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> o = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">sayHi</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;人生的巅峰&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        o.<span class="title function_">sayHi</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 3. 构造函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params"></span>) &#123;&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">new</span> <span class="title class_">Star</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 4. 绑定事件函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// btn.onclick = function() &#123;&#125;;   // 点击了按钮就可以调用这个函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 5. 定时器函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// setInterval(function() &#123;&#125;, 1000);  这个函数是定时器自动1秒钟调用一次</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 6. 立即执行函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;人生的巅峰&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 立即执行函数是自动调用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="3、函数内this的指向"><a href="#3、函数内this的指向" class="headerlink" title="3、函数内this的指向"></a>3、函数内this的指向</h2><blockquote><p>this指向，是当我们调用函数的时候确定的，调用方式的不同决定了this的指向不同，一般我们指向我们的<code>调用者</code></p></blockquote><table><thead><tr><th align="center">调用方式</th><th align="center">this指向</th></tr></thead><tbody><tr><td align="center">普通函数调用</td><td align="center">window</td></tr><tr><td align="center">构造函数调用</td><td align="center">实例对象，原型对象里面的方法也指向实例对象</td></tr><tr><td align="center">对象方法调用</td><td align="center">该方法所属对象</td></tr><tr><td align="center">事件绑定方法</td><td align="center">绑定事件对象</td></tr><tr><td align="center">定时器函数</td><td align="center">window</td></tr><tr><td align="center">立即执行函数</td><td align="center">window</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 函数的不同调用方式决定了this 的指向不同</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 普通函数 this 指向window</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;普通函数的this&#x27;</span> + <span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">window</span>.<span class="title function_">fn</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2. 对象的方法 this指向的是对象 o</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> o = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">sayHi</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;对象方法的this:&#x27;</span> + <span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        o.<span class="title function_">sayHi</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 3. 构造函数 this 指向 ldh 这个实例对象 原型对象里面的this 指向的也是 ldh这个实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params"></span>) &#123;&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">               <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;构造函数的this:&#x27;</span> + <span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         ldh.<span class="title function_">sing</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 4. 绑定事件函数 this 指向的是函数的调用者 btn这个按钮对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;绑定时间函数的this:&#x27;</span> + <span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 5. 定时器函数 this 指向的也是window</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定时器的this:&#x27;</span> + <span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;, <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 6. 立即执行函数 this还是指向window</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;立即执行函数的this&#x27;</span> + <span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><blockquote><p>在这里我们需要注意，在严格模式下，普通函数的<code>this</code>是<code>没有定义的</code>，所有本该指向window的都不可以了。</p></blockquote><h2 id="4、改变函数内部this指向"><a href="#4、改变函数内部this指向" class="headerlink" title="4、改变函数内部this指向"></a>4、改变函数内部this指向</h2><p>JavaScript 为我们专门提供了一些函数方法来帮我们处理函数内部 this 的指向问题，常用的有 <code>bind(),call(),apply()</code>三种方法</p><h3 id="1、call-方法"><a href="#1、call-方法" class="headerlink" title="1、call() 方法"></a>1、call() 方法</h3><ul><li><p>call()方法调用一个对象，简单理解为调用函数的方式，但是它可以改变函数的this指向</p></li><li><p><code>fun.call(thisArg,arg1,arg2,.....)</code></p></li><li><p><code>thisArg</code>: 在 fun 函数运行时指定的 this 值</p></li><li><p><code>arg1,arg2</code>: 传递的其他参数</p></li><li><p>返回值就是函数的返回值，因为它就是调用函数</p></li><li><p>因此当我们想改变 this 指向，同时想调用这个函数的时候，可以使用 call，比如继承</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> o = &#123;</span><br><span class="line">            name: <span class="string">&#x27;andy&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function fn(<span class="selector-tag">a</span>, <span class="selector-tag">b</span>) &#123;</span><br><span class="line">            console<span class="selector-class">.log</span>(this);</span><br><span class="line">            console<span class="selector-class">.log</span>(<span class="selector-tag">a</span> + <span class="selector-tag">b</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        fn<span class="selector-class">.call</span>(o, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        // call 第一个可以调用函数 第二个可以改变函数内的this 指向</span><br><span class="line">        // call 的主要作用可以实现继承</span><br><span class="line">        function Father(uname, age, sex) &#123;</span><br><span class="line">            //这个this指向父实例对象</span><br><span class="line">            this<span class="selector-class">.uname</span> = uname;</span><br><span class="line">            this<span class="selector-class">.age</span> = age;</span><br><span class="line">            this<span class="selector-class">.sex</span> = sex;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function Son(uname, age, sex) &#123;</span><br><span class="line">            //这个this指向子实例对象</span><br><span class="line">            Father<span class="selector-class">.call</span>(this, uname, age, sex);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">var</span> son = new Son(&#x27;刘德华&#x27;, <span class="number">18</span>, &#x27;男&#x27;);</span><br><span class="line">        console<span class="selector-class">.log</span>(son);</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-apply-方法"><a href="#2-apply-方法" class="headerlink" title="2. apply()方法"></a>2. apply()方法</h3><p>apply()方法调用一个函数，简单理解为调用函数的方式，但是它可以改变函数的 this指向</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.apply(thisArg,[argsArray])</span><br></pre></td></tr></table></figure><p>返回值就是函数的返回值，因为它就是调用函数</p><p>因此 apply 主要跟数组有关系，比如使用 <code>Math.max()</code> 求数组的最大值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2. apply()  应用 运用的意思</span></span><br><span class="line">  <span class="keyword">var</span> o = &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// &#x27;pink&#x27;</span></span><br><span class="line">  &#125;;</span><br><span class="line">  fn.<span class="title function_">apply</span>(o, [<span class="string">&#x27;pink&#x27;</span>]);</span><br><span class="line">  <span class="comment">// 1. 也是调用函数 第二个可以改变函数内部的this指向</span></span><br><span class="line">  <span class="comment">// 2. 但是他的参数必须是数组(伪数组)</span></span><br><span class="line">  <span class="comment">// 3. apply 的主要应用 比如说我们可以利用 apply 借助于数学内置对象求数组最大值 </span></span><br><span class="line">  <span class="comment">// Math.max();</span></span><br><span class="line">  <span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">66</span>, <span class="number">3</span>, <span class="number">99</span>, <span class="number">4</span>];</span><br><span class="line">  <span class="keyword">var</span> arr1 = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;pink&#x27;</span>];</span><br><span class="line">  <span class="comment">// var max = Math.max.apply(null, arr);</span></span><br><span class="line">  <span class="keyword">var</span> max = <span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">apply</span>(<span class="title class_">Math</span>, arr);</span><br><span class="line">  <span class="keyword">var</span> min = <span class="title class_">Math</span>.<span class="property">min</span>.<span class="title function_">apply</span>(<span class="title class_">Math</span>, arr);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(max, min);</span><br></pre></td></tr></table></figure><h3 id="3、bind-方法"><a href="#3、bind-方法" class="headerlink" title="3、bind()方法"></a>3、bind()方法</h3><ul><li><code>bind()</code>方法不会调用函数。但是能改变函数内部 this指向</li><li><code>fun.bind(thisArg,arg1,arg2,....)</code></li><li>返回由指定的 <code>this</code>值和初始化参数改造的 <code>原函数拷贝</code></li><li>因此当我们只是想改变 <code>this</code> 指向，并且<code>不想调用这个函数的时候</code>，可以使用bind</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 改变函数内this指向  js提供了三种方法  call()  apply()  bind()</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 3. bind()  绑定 捆绑的意思</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> o = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a, b</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(a + b);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> f = fn.<span class="title function_">bind</span>(o, <span class="number">1</span>, <span class="number">2</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">f</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 不会调用原来的函数   可以改变原来函数内部的this 指向</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2. 返回的是原函数改变this之后产生的新函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 3. 如果有的函数我们不需要立即调用,但是又想改变这个函数内部的this指向此时用bind</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 4. 我们有一个按钮,当我们点击了之后,就禁用这个按钮,3秒钟之后开启这个按钮</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// var btn1 = document.querySelector(&#x27;button&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// btn1.onclick = function() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//     this.disabled = true; // 这个this 指向的是 btn 这个按钮</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//     // var that = this;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//     setTimeout(function() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//         // that.disabled = false; // 定时器函数里面的this 指向的是window</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//         this.disabled = false; // 此时定时器函数里面的this 指向的是btn</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//     &#125;.bind(this), 3000); // 这个this 指向的是btn 这个对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> btns = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;button&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            btns[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">this</span>.<span class="property">disabled</span> = <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="variable language_">this</span>.<span class="property">disabled</span> = <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;.<span class="title function_">bind</span>(<span class="variable language_">this</span>), <span class="number">2000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="4、总结"><a href="#4、总结" class="headerlink" title="4、总结"></a>4、总结</h3><p><code>call apply bind</code> 总结：</p><p>相同点：</p><p>都可以改变函数内部的 this指向<br>区别点：</p><ul><li><p>call和apply会调用函数，并且改变函数内部的this指向</p></li><li><p>call和apply传递的参数不一样，call 传递<code>参数</code>，apply 必须<code>数组</code>形式</p></li><li><p>bind<code>不会调用函数</code>，可以改变函数内部this指向</p><p>主要应用场景</p></li><li><p>call经常做<code>继承</code></p></li><li><p>apply经常跟<code>数组</code>有关系，比如借助于数学对线实现数组最大值与最小值</p></li><li><p>bind<code>不调用函数</code>，但是还想改变this指向，比如改变定时器内部的this指向</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Bom树</title>
      <link href="/2022/03/01/js/Bom%E6%A0%91/"/>
      <url>/2022/03/01/js/Bom%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript-Bom树"><a href="#JavaScript-Bom树" class="headerlink" title="JavaScript Bom树"></a>JavaScript Bom树</h1><p><img src="https://img-blog.csdnimg.cn/0f44250c831e4579aa3599072c855aeb.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70" alt="img"></p><h1 id="1、BOM概述"><a href="#1、BOM概述" class="headerlink" title="1、BOM概述"></a>1、BOM概述</h1><ul><li>BOM = Browser Object Model 👉浏览器对象模型</li><li>它提供了独立于内容而与浏览器窗口进行交互的对象，其核心对象是 window</li><li>BOM 由一系列相关的对象构成，并且每个对象都提供了很多方法与属性</li><li>BOM 缺乏标准，JavaScript 语法的标准化组织是 ECMA, DOM 的标准化组织是 W3C, BOM最初是Netscape 浏览器标准的一部分</li></ul><table><thead><tr><th align="center">DOM</th><th align="center">BOM</th></tr></thead><tbody><tr><td align="center">文档对象模型</td><td align="center">浏览器对象模型</td></tr><tr><td align="center">DOM 就是把<code>文档</code>当作一个对象来看待</td><td align="center">把<code>浏览器</code>当作一个对象来看待</td></tr><tr><td align="center">DOM 的顶级对象是 document</td><td align="center">BOM 的顶级对象是 window</td></tr><tr><td align="center">DOM 主要学习的是操作页面元素</td><td align="center">BOM 学习的是浏览器窗口交互的一些对象</td></tr><tr><td align="center">DOM 是 W3C 标准规范</td><td align="center">BOM 是浏览器厂商在各自浏览器上定义的，兼容性较差</td></tr></tbody></table><h2 id="1、BOM的构成"><a href="#1、BOM的构成" class="headerlink" title="1、BOM的构成"></a>1、BOM的构成</h2><p><img src="https://img-blog.csdnimg.cn/5c83bf307ec9486687a5f52312943ecb.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><ul><li>BOM 比 DOM 更大。它包含 DOM。</li><li>window 对象是浏览器的顶级对象，它具有双重角色</li><li>它是 JS 访问浏览器窗口的一个接口</li><li>它是一个全局对象。定义在全局作用域中的变量、函数都会变成 window 对象的属性和方法</li><li>在调用的时候可以省略 window，前面学习的对话框都属于 window 对象方法，如 alert()、prompt()等。</li><li>注意：window下的一个特殊属性 window.name</li></ul><h1 id="2、window-对象的常见事件"><a href="#2、window-对象的常见事件" class="headerlink" title="2、window 对象的常见事件"></a>2、window 对象的常见事件</h1><h2 id="1、窗口加载事件"><a href="#1、窗口加载事件" class="headerlink" title="1、窗口加载事件"></a>1、窗口加载事件</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">window<span class="selector-class">.onload</span> = function()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 或者</span><br><span class="line">window<span class="selector-class">.addEventListener</span>(&quot;load&quot;,function()&#123;&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>window.onload</code>是窗口（页面）加载事件，当文档内容完全加载完成会触发该事件（包括图像，脚本文件，CSS文件等），就调用的处理函数</p><p>注意：</p><ul><li>有了window.onload就可以把JS代码写到页面元素的上方</li><li>因为onload是等页面内容全部加载完毕，再去执行处理函数</li><li>window.onload 传统注册事件方式，只能写一次</li><li>如果有多个，会以最后一个window.onload为准</li><li>如果使用addEventListener 则没有限制</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br></pre></td></tr></table></figure><p>接收两个参数：</p><ul><li>DOMCountentLoaded事件触发时，仅当DOM加载完成，不包括样式表，图片，flash等等</li><li>如果页面的图片很多的话, 从用户访问到onload触发可能需要较长的时间</li><li>交互效果就不能实现，必然影响用户的体验，此时用 DOMContentLoaded事件比较合适。</li></ul><h2 id="2、区别"><a href="#2、区别" class="headerlink" title="2、区别"></a>2、区别</h2><ul><li><code>load</code>等页面内容全部加载完毕，包括页面dom元素，图片，flash，css等</li><li><code>DOMContentLoaded</code> 是DOM加载完毕，不包含图片 flash css 等就可以执行，加载速度比load更快一些</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// window.onload = function() &#123;</span></span><br><span class="line">    <span class="comment">//     var btn = document.querySelector(&#x27;button&#x27;);</span></span><br><span class="line">    <span class="comment">//     btn.addEventListener(&#x27;click&#x27;, function() &#123;</span></span><br><span class="line">    <span class="comment">//         alert(&#x27;点击我&#x27;);</span></span><br><span class="line">    <span class="comment">//     &#125;)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// window.onload = function() &#123;</span></span><br><span class="line">    <span class="comment">//     alert(22);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">        btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;点击我&#x27;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">alert</span>(<span class="number">22</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="number">33</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// load 等页面内容全部加载完毕，包含页面dom元素 图片 flash  css 等等</span></span><br><span class="line">        <span class="comment">// DOMContentLoaded 是DOM 加载完毕，不包含图片 falsh css 等就可以执行 加载速度比 load更快一些</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3、调整窗口大小事件"><a href="#3、调整窗口大小事件" class="headerlink" title="3、调整窗口大小事件"></a>3、调整窗口大小事件</h2><p><code>window.onresize</code> 是调整窗口大小加载事件，当触发时就调用的处理函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;);</span><br></pre></td></tr></table></figure><ul><li>只要窗口大小发生像素变化，就会触发这个事件</li><li>我们经常利用这个事件完成响应式布局。<code>window.innerWidth</code> 当前屏幕的宽度</li></ul><h2 id="4-总结"><a href="#4-总结" class="headerlink" title="4.总结"></a>4.总结</h2><p>这个是一些比较简单的事件，我们现在都不怎么常用了，更细节的会在vue的生命周期里介绍。</p><h1 id="3、定时器"><a href="#3、定时器" class="headerlink" title="3、定时器"></a>3、定时器</h1><p>window 对象给我们提供了两个定时器</p><ul><li><code>setTimeout()</code></li><li><code>setInterval()</code></li></ul><h2 id="1、setTimeout-定时器"><a href="#1、setTimeout-定时器" class="headerlink" title="1、setTimeout()定时器"></a>1、setTimeout()定时器</h2><p>setTimeout()方法用于设置一个定时器，该定时器在定时器到期后执行调用函数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(调用函数,[延迟的毫秒数]);</span><br></pre></td></tr></table></figure><p>注意：c</p><ul><li>window可以省略</li><li>这个调用函数</li><li><ul><li>可以直接写函数</li><li>或者写函数名</li><li>或者采取字符串 ‘函数名()’ （不推荐）</li></ul></li><li>延迟的毫秒数省略默认是0，如果写，必须是毫秒</li><li>因为定时器可能有很多，所以我们经常给定时器赋值一个标识符</li><li>setTimeout() 这个调用函数我们也称为回调函数 callback</li><li>普通函数是按照代码顺序直接调用，而这个函数，需要等待事件，事件到了才会去调用这个函数，因此称为回调函数。</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // <span class="number">1</span>. setTimeout </span><br><span class="line">        // 语法规范：  window<span class="selector-class">.setTimeout</span>(调用函数, 延时时间);</span><br><span class="line">        // <span class="number">1</span>. 这个window在调用的时候可以省略</span><br><span class="line">        // <span class="number">2</span>. 这个延时时间单位是毫秒 但是可以省略，如果省略默认的是<span class="number">0</span></span><br><span class="line">        // <span class="number">3</span>. 这个调用函数可以直接写函数 还可以写 函数名 还有一个写法 &#x27;函数名()&#x27;</span><br><span class="line">        // <span class="number">4</span>. 页面中可能有很多的定时器，我们经常给定时器加标识符 （名字)</span><br><span class="line">        // setTimeout(function() &#123;</span><br><span class="line">        //     console<span class="selector-class">.log</span>(&#x27;时间到了&#x27;);</span><br><span class="line"></span><br><span class="line">        // &#125;, <span class="number">2000</span>);</span><br><span class="line">        function callback() &#123;</span><br><span class="line">            console<span class="selector-class">.log</span>(&#x27;爆炸了&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">var</span> timer1 = setTimeout(callback, <span class="number">3000</span>);</span><br><span class="line">        <span class="selector-tag">var</span> timer2 = setTimeout(callback, <span class="number">5000</span>);</span><br><span class="line">        // setTimeout(&#x27;callback()&#x27;, <span class="number">3000</span>); // 我们不提倡这个写法</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="2、clearTimeout-停止定时器"><a href="#2、clearTimeout-停止定时器" class="headerlink" title="2、clearTimeout()停止定时器"></a>2、clearTimeout()停止定时器</h2><ul><li><code>clearTimeout()</code>方法取消了先前通过调用 <code>setTimeout()</code>建立的定时器</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.clearTimeout(timeoutID)</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：</p><ul><li><code>window</code>可以省略</li><li>里面的参数就是定时器的标识符</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击停止定时器<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;爆炸了&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;, <span class="number">5000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="built_in">clearTimeout</span>(timer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="3、setInterval-定时器"><a href="#3、setInterval-定时器" class="headerlink" title="3、setInterval()定时器"></a>3、setInterval()定时器</h2><ul><li><code>setInterval()</code>方法重复调用一个函数，每隔这个时间，就去调用一次回调函数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. setInterval </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 语法规范：  window.setInterval(调用函数, 延时时间);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;继续输出&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;, <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2. setTimeout  延时时间到了，就去调用这个回调函数，只调用一次 就结束了这个定时器</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 3. setInterval  每隔这个延时时间，就去调用这个回调函数，会调用很多次，重复调用这个函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="4、clearInterval-停止定时器"><a href="#4、clearInterval-停止定时器" class="headerlink" title="4、clearInterval()停止定时器"></a>4、clearInterval()停止定时器</h2><p>这个和clearTimeout一样</p><h2 id="5、this指向"><a href="#5、this指向" class="headerlink" title="5、this指向"></a>5、this指向</h2><p>this的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定this到底指向谁<br>现阶段，我们先了解一下几个this指向</p><p>全局作用域或者普通函数中this指向全局对象window(注意定时器里面的this指向window)<br>方法调用中谁调用this指向谁<br>构造函数中this指向构造函数实例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// this 指向问题 一般情况下this的最终指向的是那个调用它的对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 全局作用域或者普通函数中this指向全局对象window（ 注意定时器里面的this指向window）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">window</span>.<span class="title function_">fn</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;, <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2. 方法调用中谁调用this指向谁</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> o = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">sayHi</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// this指向的是 o 这个对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        o.<span class="title function_">sayHi</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// btn.onclick = function() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//     console.log(this); // this指向的是btn这个按钮对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// this指向的是btn这个按钮对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 3. 构造函数中this指向构造函数的实例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">Fun</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// this 指向的是fun 实例对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> fun = <span class="keyword">new</span> <span class="title class_">Fun</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="4、JS执行机制"><a href="#4、JS执行机制" class="headerlink" title="4、JS执行机制"></a>4、JS执行机制</h1><h2 id="1、JS是单线程"><a href="#1、JS是单线程" class="headerlink" title="1、JS是单线程"></a>1、JS是单线程</h2><ul><li><p>JavaScript 语言的一大特点就是单线程，也就是说，同一个时间只能做一件事。这是因为 Javascript 这门脚本语言诞生的使命所致——JavaScript 是为处理页面中用户的交互，以及操作 DOM 而诞生的。比如我们对某个 DOM 元素进行添加和删除操作，不能同时进行。 应该先进行添加，之后再删除。</p></li><li><p>单线程就意味着，所有任务需要排队，前一个任务结束，才会执行后一个任务。这样所导致的问题是： 如果 JS 执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞的感觉。</p></li></ul><h2 id="2-同步和异步"><a href="#2-同步和异步" class="headerlink" title="2.同步和异步"></a>2.同步和异步</h2><ul><li><p>同步:</p><ul><li>前一个任务结束后再执行后一个任务</li></ul></li><li><p>异步：</p><ul><li>在做这件事的同时，你还可以去处理其他事情</li></ul></li><li><p>同步任务都在主线程上执行，形成一个 <code>执行栈</code></p></li><li><p>JS中的异步是通过回调函数实现的</p></li><li><p>异步任务有以下三种类型</p><ul><li>普通事件，如<code>click</code>,<code>resize</code>等</li><li>资源加载，如<code>load</code>,<code>error</code>等</li><li>定时器，包括<code>setInterval</code>,<code>setTimeout</code>等</li></ul></li><li><p>异步任务相关回调函数添加到任务队列中</p></li></ul><p><img src="https://img-blog.csdnimg.cn/f0cc815b48574ce2bb068501a9394a5e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><ol><li>先执行执行栈中的同步任务</li><li>异步任务(回调函数)放入任务队列中</li><li>一旦执行栈中的所有同步任务执行完毕，系统就会按次序读取任务队列中的异步任务，于是被读取的异步任务结束等待状态，进入执行栈，开始执行</li></ol><p><img src="https://img-blog.csdnimg.cn/d337ebf7ba2c40c7a768fd91f6bfbf56.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><p><img src="https://img-blog.csdnimg.cn/eaabe7880146428fb68e6e64f23db40c.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><p>同步任务放在执行栈中执行，异步任务由异步进程处理放到任务队列中，执行栈中的任务执行完毕会去任务队列中查看是否有异步任务执行，由于主线程不断的重复获得任务、执行任务、再获取任务、再执行，所以这种机制被称为<code>事件循环</code>（ event loop）。</p><h1 id="5、location对象"><a href="#5、location对象" class="headerlink" title="5、location对象"></a>5、location对象</h1><p>window 对象给我们提供了一个 <code>location</code>属性用于获取或者设置窗体的url，并且可以解析url。因为这个属性返回的是一个对象，所以我们将这个属性也称为 location 对象。</p><h2 id="1、url"><a href="#1、url" class="headerlink" title="1、url"></a>1、url</h2><p>==统一资源定位符（uniform resouce locator）==是互联网上标准资源的地址。互联网上的每个文件都有一个唯一的 URL，它包含的信息指出文件的位置以及浏览器应该怎么处理它。</p><p>url 的一般语法格式为：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">protocol://host[:port]/path/[?query]#fragment</span><br><span class="line"></span><br><span class="line">http://www.itcast.cn/index.html?name=andy&amp;age=18#link</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">组成</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">protocol</td><td align="center">通信协议 常用的http,ftp,maito等</td></tr><tr><td align="center">host</td><td align="center">主机(域名) <a href="http://www.itheima.com/">www.itheima.com</a></td></tr><tr><td align="center">port</td><td align="center">端口号，可选</td></tr><tr><td align="center">path</td><td align="center">路径 由零或多个’/‘符号隔开的字符串</td></tr><tr><td align="center">query</td><td align="center">参数 以键值对的形式，通过&amp;符号分隔开来</td></tr><tr><td align="center">fragment</td><td align="center">片段 #后面内容 常见于链接 锚点</td></tr></tbody></table><h2 id="2、location对象属性"><a href="#2、location对象属性" class="headerlink" title="2、location对象属性"></a>2、location对象属性</h2><table><thead><tr><th align="center">location对象属性</th><th align="center">返回值</th></tr></thead><tbody><tr><td align="center">location.href</td><td align="center">获取或者设置整个URL</td></tr><tr><td align="center">location.host</td><td align="center">返回主机（域名）<a href="http://www.baidu.com/">www.baidu.com</a></td></tr><tr><td align="center">location.port</td><td align="center">返回端口号，如果未写返回空字符串</td></tr><tr><td align="center">location.pathname</td><td align="center">返回路径</td></tr><tr><td align="center">location.search</td><td align="center">返回参数</td></tr><tr><td align="center">location.hash</td><td align="center">返回片段 #后面内容常见于链接 锚点</td></tr></tbody></table><p>重点记住： <code>href</code>和<code>search</code></p><p>我们可以去修改这些location属性</p><p>需求：5s之后跳转页面</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">   &lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> timer = <span class="number">5</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span> (timer == <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                location.<span class="property">href</span> = <span class="string">&#x27;http://www.itcast.cn&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                div.<span class="property">innerHTML</span> = <span class="string">&#x27;您将在&#x27;</span> + timer + <span class="string">&#x27;秒钟之后跳转到首页&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                timer--;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;, <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="3、location对象方法"><a href="#3、location对象方法" class="headerlink" title="3、location对象方法"></a>3、location对象方法</h2><table><thead><tr><th align="center">location对象方法</th><th align="center">返回值</th></tr></thead><tbody><tr><td align="center">location.assign()</td><td align="center">跟href一样，可以跳转页面（也称为重定向页面）</td></tr><tr><td align="center">location.replace()</td><td align="center">替换当前页面，因为不记录历史，所以不能后退页面</td></tr><tr><td align="center">location.reload()</td><td align="center">重新加载页面，相当于刷新按钮或者 f5 ，如果参数为true 强制刷新 ctrl+f5</td></tr></tbody></table><p>这些方法有些原始，不常用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 记录浏览历史，所以可以实现后退功能</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// location.assign(&#x27;http://www.itcast.cn&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 不记录浏览历史，所以不可以实现后退功能</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// location.replace(&#x27;http://www.itcast.cn&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            location.<span class="title function_">reload</span>(<span class="literal">true</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h1 id="6、navigator对象"><a href="#6、navigator对象" class="headerlink" title="6、navigator对象"></a>6、navigator对象</h1><ul><li>navigator 对象包含有关浏览器的信息，它有很多属性</li><li>我们常用的是userAgent,该属性可以返回由客户机发送服务器的user-agent头部的值<br>下面前端代码可以判断用户是用哪个终端打开页面的，如果是用 PC 打开的，我们就跳转到 PC 端的页面，如果是用手机打开的，就跳转到手机端页面</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>((navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i</span>))) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;&quot;</span>;     <span class="comment">//手机</span></span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;&quot;</span>;     <span class="comment">//电脑</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h1 id="7、history对象"><a href="#7、history对象" class="headerlink" title="7、history对象"></a>7、history对象</h1><ul><li>window 对象给我们提供了一个 history 对象，与浏览器历史记录进行交互</li><li>该对象包含用户（在浏览器窗口中）访问过的 URL。</li></ul><table><thead><tr><th align="center">history对象方法</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">back()</td><td align="center">可以后退功能</td></tr><tr><td align="center">forward()</td><td align="center">前进功能</td></tr><tr><td align="center">go(参数)</td><td align="center">前进后退功能，参数如果是 1 前进1个页面 如果是 -1 后退1个页面</td></tr></tbody></table><blockquote><p>这个属性是用来让页面前进后退的</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;list.html&quot;</span>&gt;</span>点击我去往列表页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>前进<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// history.forward();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            history.<span class="title function_">go</span>(<span class="number">1</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>事件高级</title>
      <link href="/2022/03/01/js/%E4%BA%8B%E4%BB%B6%E9%AB%98%E7%BA%A7/"/>
      <url>/2022/03/01/js/%E4%BA%8B%E4%BB%B6%E9%AB%98%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript-事件高级"><a href="#JavaScript-事件高级" class="headerlink" title="JavaScript 事件高级"></a>JavaScript 事件高级</h1><h2 id="1-注册事件-绑定事件"><a href="#1-注册事件-绑定事件" class="headerlink" title="1.注册事件(绑定事件)"></a>1.注册事件(绑定事件)</h2><p>给元素添加事件，称为<code>注册事件</code>或者<code>绑定事件</code>。</p><p>注册事件有两种方式：<code>传统方式</code>和<code>方法监听</code>注册方式    </p><table><thead><tr><th align="center">传统注册方式</th><th align="center">方法监听注册方式</th></tr></thead><tbody><tr><td align="center">利用 on 开头的事件 onclick</td><td align="center">w3c 标准推荐方式</td></tr><tr><td align="center">&lt;button onclick = “alert(“hi”)”&gt;</button></td><td align="center">addEventListener() 它是一个方法</td></tr><tr><td align="center">btn.onclick = function() {}</td><td align="center">IE9 之前的 IE 不支持此方法，可使用 attachEvent() 代替</td></tr><tr><td align="center">特点：注册事件的唯一性</td><td align="center">特点：同一个元素同一个事件可以注册多个监听器</td></tr><tr><td align="center">同一个元素同一个事件只能设置一个处理函数，最后注册的处理函数将会覆盖前面注册的处理函数</td><td align="center">按注册顺序依次执行</td></tr></tbody></table><h3 id="1-addEventListener"><a href="#1-addEventListener" class="headerlink" title="1.addEventListener"></a>1.addEventListener</h3><ol><li><p>事件监听方式eventTarget.addEventListener()方法将指定的监听器注册到 eventTarget（目标对象）上</p></li><li><p>当该对象触发指定的事件时，就会执行事件处理函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eventTarget.<span class="title function_">addEventListener</span>(type,listener[,useCapture])</span><br></pre></td></tr></table></figure><p>该方法接收三个参数：</p></li></ol><ul><li>type:事件类型字符串，比如click,mouseover,注意这里不要带on</li><li>listener：事件处理函数，事件发生时，会调用该监听函数</li><li>useCapture：可选参数，是一个布尔值，默认是 false。学完 DOM 事件流后，我们再进一步学习</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>传统注册事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>方法监听注册事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>ie9 attachEvent<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> btns = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;button&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. 传统方式注册事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        btns[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">alert</span>(<span class="string">&#x27;hi&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        btns[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">alert</span>(<span class="string">&#x27;hao a u&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 2. 事件监听注册事件 addEventListener </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// (1) 里面的事件类型是字符串 所以加引号 而且不带on</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// (2) 同一个元素 同一个事件可以添加多个侦听器（事件处理程序）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        btns[<span class="number">1</span>].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">alert</span>(<span class="number">22</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        btns[<span class="number">1</span>].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">alert</span>(<span class="number">33</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 3. attachEvent ie9以前的版本支持</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        btns[<span class="number">2</span>].<span class="title function_">attachEvent</span>(<span class="string">&#x27;onclick&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">alert</span>(<span class="number">11</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-attachEvent事件监听方式-兼容"><a href="#2-attachEvent事件监听方式-兼容" class="headerlink" title="2.attachEvent事件监听方式(兼容)"></a>2.attachEvent事件监听方式(兼容)</h3><ol><li>eventTarget.attachEvent()方法将指定的监听器注册到 eventTarget（目标对象） 上</li><li>当该对象触发指定的事件时，指定的回调函数就会被执行</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eventTarget.<span class="title function_">attachEvent</span>(eventNameWithOn,callback)</span><br></pre></td></tr></table></figure><p>该方法接收两个参数：</p><ul><li>eventNameWithOn：事件类型字符串，比如 onclick 、onmouseover ，这里要带 on</li><li>callback： 事件处理函数，当目标触发事件时回调函数被调用</li><li>ie9以前的版本支持</li></ul><h3 id="3-注册事件兼容性解决方案"><a href="#3-注册事件兼容性解决方案" class="headerlink" title="3.注册事件兼容性解决方案"></a>3.注册事件兼容性解决方案</h3><p>兼容性处理的原则：首先照顾大多数浏览器，再处理特殊浏览器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addEventListener</span>(<span class="params">element, eventName, fn</span>) &#123;</span><br><span class="line">     <span class="comment">// 判断当前浏览器是否支持 addEventListener 方法</span></span><br><span class="line">     <span class="keyword">if</span> (element.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">       element.<span class="title function_">addEventListener</span>(eventName, fn);  <span class="comment">// 第三个参数 默认是false</span></span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.<span class="property">attachEvent</span>) &#123;</span><br><span class="line">       element.<span class="title function_">attachEvent</span>(<span class="string">&#x27;on&#x27;</span> + eventName, fn);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="comment">// 相当于 element.onclick = fn;</span></span><br><span class="line">       element[<span class="string">&#x27;on&#x27;</span> + eventName] = fn;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="2、删除事件-解绑事件"><a href="#2、删除事件-解绑事件" class="headerlink" title="2、删除事件(解绑事件)"></a>2、删除事件(解绑事件)</h2><h3 id="1-removeEventListener删除事件方式"><a href="#1-removeEventListener删除事件方式" class="headerlink" title="1.removeEventListener删除事件方式"></a>1.removeEventListener删除事件方式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eventTarget.<span class="title function_">removeEventListener</span>(type,listener[,useCapture]);</span><br></pre></td></tr></table></figure><p>该方法接收三个参数：</p><ul><li>type:事件类型字符串，比如click,mouseover,<code>注意这里不要带on</code></li><li>listener：事件处理函数，事件发生时，会调用该监听函数</li><li>useCapture：可选参数，是一个布尔值，默认是 false。学完 DOM 事件流后，我们再进一步学习</li></ul><h3 id="2-detachEvent删除事件方式-兼容"><a href="#2-detachEvent删除事件方式-兼容" class="headerlink" title="2.detachEvent删除事件方式(兼容)"></a>2.detachEvent删除事件方式(兼容)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eventTarget.<span class="title function_">detachEvent</span>(eventNameWithOn,callback);</span><br></pre></td></tr></table></figure><p>该方法接收两个参数：</p><ul><li>eventNameWithOn：事件类型字符串，比如 onclick 、onmouseover ，这里要带 on</li><li>callback： 事件处理函数，当目标触发事件时回调函数被调用</li><li>ie9以前的版本支持</li></ul><h3 id="3-传统事件删除方式"><a href="#3-传统事件删除方式" class="headerlink" title="3.传统事件删除方式"></a>3.传统事件删除方式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eventTarget.<span class="property">onclick</span> = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p>事件删除示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> divs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;div&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        divs[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">alert</span>(<span class="number">11</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 1. 传统方式删除事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            divs[<span class="number">0</span>].<span class="property">onclick</span> = <span class="literal">null</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2.removeEventListener 删除事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        divs[<span class="number">1</span>].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,fn);   <span class="comment">//里面的fn不需要调用加小括号</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">alert</span>(<span class="number">22</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        divs[<span class="number">1</span>].<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>,fn);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 3.IE9 中的删除事件方式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    divs[<span class="number">2</span>].<span class="title function_">attachEvent</span>(<span class="string">&#x27;onclick&#x27;</span>,fn1);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">alert</span>(<span class="number">33</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        divs[<span class="number">2</span>].<span class="title function_">detachEvent</span>(<span class="string">&#x27;onclick&#x27;</span>,fn1);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="4-删除事件兼容性解决方案"><a href="#4-删除事件兼容性解决方案" class="headerlink" title="4.删除事件兼容性解决方案"></a>4.删除事件兼容性解决方案</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function removeEventListener(element, eventName, fn) &#123;</span><br><span class="line">     // 判断当前浏览器是否支持 removeEventListener 方法</span><br><span class="line">     if (element<span class="selector-class">.removeEventListener</span>) &#123;</span><br><span class="line">       element<span class="selector-class">.removeEventListener</span>(eventName, fn);  // 第三个参数 默认是false</span><br><span class="line">     &#125; else if (element<span class="selector-class">.detachEvent</span>) &#123;</span><br><span class="line">       element<span class="selector-class">.detachEvent</span>(&#x27;on&#x27; + eventName, fn);</span><br><span class="line">     &#125; else &#123;</span><br><span class="line">       element<span class="selector-attr">[<span class="string">&#x27;on&#x27;</span> + eventName]</span> = null;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="3-DOM事件流"><a href="#3-DOM事件流" class="headerlink" title="3.DOM事件流"></a>3.DOM事件流</h2><ul><li><code>事件流</code>描述的是从页面中接收事件的顺序</li><li><code>事件</code>发生时会在元素节点之间按照特定的顺序传播，这个<code>传播过程</code>即<code>DOM事件流</code></li></ul><p><img src="https://img-blog.csdnimg.cn/063297f2336f43dfb246930ae877a9ad.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><ul><li><code>事件冒泡</code>： IE 最早提出，事件开始时由<code>最具体</code>的元素接收，然后逐级向上传播到到 DOM 最顶层节点的过程。（由具体的一个事件传上去）</li><li><code>事件捕获</code>： 网景最早提出，由 DOM 最顶层节点开始，然后逐级向下传播到到最具体的元素接收的过程。（从最上面传下来）</li></ul><h3 id="1-捕获阶段"><a href="#1-捕获阶段" class="headerlink" title="1.捕获阶段"></a>1.捕获阶段</h3><p>document -&gt; html -&gt; body -&gt; father -&gt; son<br>两个盒子嵌套，一个父盒子一个子盒子，我们的需求是当点击父盒子时弹出 father ，当点击子盒子时弹出 son</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;father&quot;&gt;</span><br><span class="line">        &lt;<span class="selector-tag">div</span> class=&quot;son&quot;&gt;son盒子&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // dom 事件流 三个阶段</span><br><span class="line">        // <span class="number">1</span>. JS 代码中只能执行捕获或者冒泡其中的一个阶段。</span><br><span class="line">        // <span class="number">2</span>. onclick 和 attachEvent（ie） 只能得到冒泡阶段。</span><br><span class="line">        // <span class="number">3</span>. 捕获阶段 如果addEventListener 第三个参数是 true 那么则处于捕获阶段  document -&gt; <span class="selector-tag">html</span> -&gt; <span class="selector-tag">body</span> -&gt; father -&gt; son</span><br><span class="line">        <span class="selector-tag">var</span> son = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-class">.son</span>&#x27;);</span><br><span class="line">        son<span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function() &#123;</span><br><span class="line">             alert(&#x27;son&#x27;);</span><br><span class="line">        &#125;, true);</span><br><span class="line">        <span class="selector-tag">var</span> father = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-class">.father</span>&#x27;);</span><br><span class="line">        father<span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function() &#123;</span><br><span class="line">            alert(&#x27;father&#x27;);</span><br><span class="line">        &#125;, true);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><p>但是因为DOM流的影响，我们点击子盒子，会先弹出 father，之后再弹出 son</p><p><img src="C:\Users\11793\AppData\Roaming\Typora\typora-user-images\image-20211127213951130.png" alt="image-20211127213951130"></p><p>这是因为捕获阶段由 DOM 最顶层节点开始，然后逐级向下传播到到最具体的元素接收</p><ul><li><p>document -&gt; html -&gt; body -&gt; father -&gt; son</p></li><li><p>先看 document 的事件，没有；再看 html 的事件，没有；再看 body 的事件，没有；再看 father 的事件，有就先执行；再看 son 的事件，再执行。</p></li></ul><h3 id="2-冒泡阶段"><a href="#2-冒泡阶段" class="headerlink" title="2.冒泡阶段"></a>2.冒泡阶段</h3><p>son -&gt; father -&gt;body -&gt; html -&gt; document</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;father&quot;&gt;</span><br><span class="line">        &lt;<span class="selector-tag">div</span> class=&quot;son&quot;&gt;son盒子&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">// <span class="number">4</span>. 冒泡阶段 如果addEventListener 第三个参数是 false 或者 省略 那么则处于冒泡阶段  son -&gt; father -&gt;<span class="selector-tag">body</span> -&gt; <span class="selector-tag">html</span> -&gt; document</span><br><span class="line">        <span class="selector-tag">var</span> son = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-class">.son</span>&#x27;);</span><br><span class="line">        son<span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function() &#123;</span><br><span class="line">            alert(&#x27;son&#x27;);</span><br><span class="line">        &#125;, false);</span><br><span class="line">        <span class="selector-tag">var</span> father = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-class">.father</span>&#x27;);</span><br><span class="line">        father<span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function() &#123;</span><br><span class="line">            alert(&#x27;father&#x27;);</span><br><span class="line">        &#125;, false);</span><br><span class="line">        document<span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function() &#123;</span><br><span class="line">            alert(&#x27;document&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><p>我们点击子盒子，会弹出 son、father、document</p><p>这是因为冒泡阶段开始时由最具体的元素接收，然后逐级向上传播到到 DOM 最顶层节点</p><p>son -&gt; father -&gt;body -&gt; html -&gt; document</p><h3 id="3-小结"><a href="#3-小结" class="headerlink" title="3.小结"></a>3.小结</h3><ul><li><p>JS 代码中只能执行捕获或者冒泡其中的一个阶段</p></li><li><p>onclick 和 attachEvent只能得到冒泡阶段</p></li><li><p>addEventListener(type,listener[,useCapture])第三个参数如果是 true，表示在事件捕获阶段调用事件处理程序；如果是 false (不写默认就是false),表示在事件冒泡阶段调用事件处理程序</p></li><li><p>实际开发中我们很少使用事件捕获，我们更关注事件冒泡。</p></li><li><p>有些事件是没有冒泡的，比如 onblur、onfocus、onmouseenter、onmouseleave</p></li></ul><h2 id="4-事件对象"><a href="#4-事件对象" class="headerlink" title="4.事件对象"></a>4.事件对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">eventTarget.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">   <span class="comment">// 这个 event 就是事件对象，我们还喜欢的写成 e 或者 evt </span></span><br><span class="line">&#125; </span><br><span class="line">eventTarget.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">   <span class="comment">// 这个 event 就是事件对象，我们还喜欢的写成 e 或者 evt  </span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>官方解释</code>：event 对象代表事件的状态，比如键盘按键的状态、鼠标的位置、鼠标按钮的状态</p><p>简单理解：</p><p>事件发生后，跟事件相关的一系列信息数据的集合都放到这个对象里面</p><p>这个对象就是事件对象 event，它有很多属性和方法，比如</p><ul><li>谁绑定了这个事件</li><li>鼠标触发事件的话，会得到鼠标的相关信息，如鼠标位置</li><li>键盘触发事件的话，会得到键盘的相关信息，如按了哪个键</li></ul><p>这个 event 是个形参，系统帮我们设定为事件对象，不需要传递实参过去</p><p>当我们注册事件时， event 对象就会被系统自动创建，并依次传递给事件监听器（事件处理函数）</p><p>这个event 就是一个大的东西，我们从中拿到自己想要的东西。</p><h3 id="1-事件对象的常见属性和方法"><a href="#1-事件对象的常见属性和方法" class="headerlink" title="1.事件对象的常见属性和方法"></a>1.事件对象的常见属性和方法</h3><table><thead><tr><th align="center">事件对象属性方法</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">e.target</td><td align="center">返回触发事件的对象 标准</td></tr><tr><td align="center">e.type</td><td align="center">返回事件的类型 比如click mouseover 不带on</td></tr><tr><td align="center">e.preventDefault()</td><td align="center">该方法阻止默认行为 标准 比如不让链接跳转</td></tr><tr><td align="center">e.stopPropagation()</td><td align="center">阻止冒泡 标准</td></tr></tbody></table><table><thead><tr><th align="center">e.srcElement</th><th align="center">返回触发事件的对象 非标准 ie6-8使用</th></tr></thead><tbody><tr><td align="center">e.cancelBubble</td><td align="center">该属性阻止冒泡，非标准，ie6-8使用</td></tr><tr><td align="center">e.returnValue</td><td align="center">该属性阻止默认行为 非标准，ie6-8使用</td></tr></tbody></table><p><code>e.target</code> 和 <code>this</code> 的区别：</p><ul><li>this 是事件绑定的元素， 这个函数的调用者（绑定这个事件的元素）</li><li>e.target 是事件触发的元素。</li></ul><h3 id="2-事件对象阻止默认行为"><a href="#2-事件对象阻止默认行为" class="headerlink" title="2.事件对象阻止默认行为"></a>2.事件对象阻止默认行为</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span>&gt;<span class="number">123</span>&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">a</span> href=&quot;http://www.baidu.com<span class="string">&quot;&gt;百度&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;form action=&quot;</span>http://www.baidu.com<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;input type=&quot;</span>submit<span class="string">&quot; value=&quot;</span>提交<span class="string">&quot; name=&quot;</span>sub<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;/form&gt;</span></span><br><span class="line"><span class="string">    &lt;script&gt;</span></span><br><span class="line"><span class="string">        // 常见事件对象的属性和方法</span></span><br><span class="line"><span class="string">        // 1. 返回事件类型</span></span><br><span class="line"><span class="string">        var div = document.querySelector(&#x27;div&#x27;);</span></span><br><span class="line"><span class="string">        div.addEventListener(&#x27;click&#x27;, fn);</span></span><br><span class="line"><span class="string">        div.addEventListener(&#x27;mouseover&#x27;, fn);</span></span><br><span class="line"><span class="string">        div.addEventListener(&#x27;mouseout&#x27;, fn);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        function fn(e) &#123;</span></span><br><span class="line"><span class="string">            console.log(e.type);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        // 2. 阻止默认行为（事件） 让链接不跳转 或者让提交按钮不提交</span></span><br><span class="line"><span class="string">        var a = document.querySelector(&#x27;a&#x27;);</span></span><br><span class="line"><span class="string">        a.addEventListener(&#x27;click&#x27;, function(e) &#123;</span></span><br><span class="line"><span class="string">                e.preventDefault(); //  dom 标准写法</span></span><br><span class="line"><span class="string">            &#125;)</span></span><br><span class="line"><span class="string">            // 3. 传统的注册方式</span></span><br><span class="line"><span class="string">        a.onclick = function(e) &#123;</span></span><br><span class="line"><span class="string">            // 普通浏览器 e.preventDefault();  方法</span></span><br><span class="line"><span class="string">            // e.preventDefault();</span></span><br><span class="line"><span class="string">            // 低版本浏览器 ie678  returnValue  属性</span></span><br><span class="line"><span class="string">            // e.returnValue;</span></span><br><span class="line"><span class="string">            // 我们可以利用return false 也能阻止默认行为 没有兼容性问题 特点： return 后面的代码不执行了， 而且只限于传统的注册方式</span></span><br><span class="line"><span class="string">            return false;</span></span><br><span class="line"><span class="string">            alert(11);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-阻止事件冒泡"><a href="#3-阻止事件冒泡" class="headerlink" title="3.阻止事件冒泡"></a>3.阻止事件冒泡</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;father&quot;&gt;</span><br><span class="line">        &lt;<span class="selector-tag">div</span> class=&quot;son&quot;&gt;son儿子&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // 常见事件对象的属性和方法</span><br><span class="line">        // 阻止冒泡  dom 推荐的标准 stopPropagation() </span><br><span class="line">        <span class="selector-tag">var</span> son = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-class">.son</span>&#x27;);</span><br><span class="line">        son<span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function(e) &#123;</span><br><span class="line">            alert(&#x27;son&#x27;);</span><br><span class="line">            e<span class="selector-class">.stopPropagation</span>(); // stop 停止  Propagation 传播</span><br><span class="line">            e<span class="selector-class">.cancelBubble</span> = true; // 非标准 cancel 取消 bubble 泡泡</span><br><span class="line">        &#125;, false);</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">var</span> father = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-class">.father</span>&#x27;);</span><br><span class="line">        father<span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function() &#123;</span><br><span class="line">            alert(&#x27;father&#x27;);</span><br><span class="line">        &#125;, false);</span><br><span class="line">        document<span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function() &#123;</span><br><span class="line">            alert(&#x27;document&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>阻止事件冒泡的兼容性解决方案</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(e &amp;&amp; e.<span class="property">stopPropagation</span>)&#123;</span><br><span class="line">      e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">cancelBubble</span> = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="4-e-target-与-this"><a href="#4-e-target-与-this" class="headerlink" title="4.e.target 与 this"></a>4.e.target 与 this</h3><blockquote><p>e.target 与 this 的区别</p></blockquote><ul><li><code>this</code>是事件绑定的元素，这个函数的调用者(绑定这个事件的元素)</li><li><code>e.target</code>是事件触发的元素</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span>&gt;<span class="number">123</span>&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;abc&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;abc&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;abc&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // 常见事件对象的属性和方法</span><br><span class="line">        // <span class="number">1</span>. e<span class="selector-class">.target</span> 返回的是触发事件的对象（元素）  this 返回的是绑定事件的对象（元素）</span><br><span class="line">        // 区别 ： e<span class="selector-class">.target</span> 点击了那个元素，就返回那个元素 this 那个元素绑定了这个点击事件，那么就返回谁</span><br><span class="line">        <span class="selector-tag">var</span> <span class="selector-tag">div</span> = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-tag">div</span>&#x27;);</span><br><span class="line">        <span class="selector-tag">div</span><span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function(e) &#123;</span><br><span class="line">            console<span class="selector-class">.log</span>(e<span class="selector-class">.target</span>);</span><br><span class="line">            console<span class="selector-class">.log</span>(this);</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="selector-tag">var</span> <span class="selector-tag">ul</span> = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-tag">ul</span>&#x27;);</span><br><span class="line">        <span class="selector-tag">ul</span><span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function(e) &#123;</span><br><span class="line">                // 我们给<span class="selector-tag">ul</span> 绑定了事件  那么this 就指向<span class="selector-tag">ul</span>  </span><br><span class="line">                console<span class="selector-class">.log</span>(this);</span><br><span class="line">                console<span class="selector-class">.log</span>(e<span class="selector-class">.currentTarget</span>);</span><br><span class="line">                // e<span class="selector-class">.target</span> 指向我们点击的那个对象 谁触发了这个事件 我们点击的是<span class="selector-tag">li</span> e<span class="selector-class">.target</span> 指向的就是<span class="selector-tag">li</span></span><br><span class="line">            //这里使用了事件委托，下面会说</span><br><span class="line">                console<span class="selector-class">.log</span>(e<span class="selector-class">.target</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">            // 了解兼容性</span><br><span class="line">            // <span class="selector-tag">div</span><span class="selector-class">.onclick</span> = function(e) &#123;</span><br><span class="line">            //     e = e || window<span class="selector-class">.event</span>;</span><br><span class="line">            //     <span class="selector-tag">var</span> target = e<span class="selector-class">.target</span> || e<span class="selector-class">.srcElement</span>;</span><br><span class="line">            //     console<span class="selector-class">.log</span>(target);</span><br><span class="line"></span><br><span class="line">        // &#125;</span><br><span class="line">        // <span class="number">2</span>. 了解 跟 this 有个非常相似的属性 currentTarget  ie678不认识</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="5-事件委托"><a href="#5-事件委托" class="headerlink" title="5.事件委托"></a>5.事件委托</h2><ul><li>事件委托也称为事件代理，在 jQuery 里面称为事件委派</li><li>事件委托的原理</li><li><strong>不是每个子节点单独设置事件监听器，而是事件监听器设置在其父节点上，然后利用冒泡原理影响设置每个子节点</strong></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;知否知否，点我应有弹框在手！&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;知否知否，点我应有弹框在手！&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;知否知否，点我应有弹框在手！&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;知否知否，点我应有弹框在手！&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;知否知否，点我应有弹框在手！&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // 事件委托的核心原理：给父节点添加侦听器， 利用事件冒泡影响每一个子节点</span><br><span class="line">        <span class="selector-tag">var</span> <span class="selector-tag">ul</span> = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-tag">ul</span>&#x27;);</span><br><span class="line">        <span class="selector-tag">ul</span><span class="selector-class">.addEventListener</span>(&#x27;click&#x27;, function(e) &#123;</span><br><span class="line">            // alert(&#x27;知否知否，点我应有弹框在手！&#x27;);</span><br><span class="line">            // e<span class="selector-class">.target</span> 这个可以得到我们点击的对象</span><br><span class="line">            e<span class="selector-class">.target</span><span class="selector-class">.style</span><span class="selector-class">.backgroundColor</span> = &#x27;pink&#x27;;</span><br><span class="line">            // 点了谁，就让谁的style里面的backgroundColor颜色变为pink</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>我们给ul注册了事件，当我们点击li时，会冒泡，li-&gt;ul,就会触发监听</p></blockquote><h2 id="6-鼠标事件"><a href="#6-鼠标事件" class="headerlink" title="6.鼠标事件"></a>6.鼠标事件</h2><table><thead><tr><th align="center">鼠标事件</th><th align="center">触发条件</th></tr></thead><tbody><tr><td align="center">onclick</td><td align="center">鼠标点击左键触发</td></tr><tr><td align="center">onmouseover</td><td align="center">鼠标经过触发</td></tr><tr><td align="center">onmouseout</td><td align="center">鼠标离开触发</td></tr><tr><td align="center">onfocus</td><td align="center">获得鼠标焦点触发</td></tr><tr><td align="center">onblur</td><td align="center">失去鼠标焦点触发</td></tr><tr><td align="center">onmousemove</td><td align="center">鼠标移动触发</td></tr><tr><td align="center">onmouseup</td><td align="center">鼠标弹起触发</td></tr><tr><td align="center">onmousedown</td><td align="center">鼠标按下触发</td></tr></tbody></table><h3 id="1-禁止鼠标右键与鼠标选中"><a href="#1-禁止鼠标右键与鼠标选中" class="headerlink" title="1.禁止鼠标右键与鼠标选中"></a>1.禁止鼠标右键与鼠标选中</h3><ul><li>contextmenu主要控制应该何时显示上下文菜单，主要用于程序员取消默认的上下文菜单</li><li>selectstart 禁止鼠标选中</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">   &lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">h1</span>&gt;我是一段不愿意分享的文字&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // <span class="number">1</span>. contextmenu 我们可以禁用右键菜单</span><br><span class="line">        document<span class="selector-class">.addEventListener</span>(&#x27;contextmenu&#x27;, function(e) &#123;</span><br><span class="line">                e<span class="selector-class">.preventDefault</span>(); // 阻止默认行为</span><br><span class="line">            &#125;)</span><br><span class="line">            // <span class="number">2</span>. 禁止选中文字 selectstart</span><br><span class="line">        document<span class="selector-class">.addEventListener</span>(&#x27;selectstart&#x27;, function(e) &#123;</span><br><span class="line">            e<span class="selector-class">.preventDefault</span>();</span><br><span class="line">   &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="2、鼠标事件对象"><a href="#2、鼠标事件对象" class="headerlink" title="2、鼠标事件对象"></a>2、鼠标事件对象</h3><p><strong>event</strong>对象代表事件的状态，跟事件相关的一系列信息的集合</p><p>现阶段我们主要是用鼠标事件对象 <strong>MouseEvent</strong> 和键盘事件对象 <strong>KeyboardEvent。</strong></p><table><thead><tr><th>鼠标事件对象</th><th>说明</th></tr></thead><tbody><tr><td>e.clientX</td><td>返回鼠标相对于浏览器窗口可视区的X坐标</td></tr><tr><td>e.clientY</td><td>返回鼠标相对于浏览器窗口可视区的Y坐标</td></tr><tr><td>e.pageX（重点）</td><td>返回鼠标相对于文档页面的X坐标 IE9+ 支持</td></tr><tr><td>e.pageY（重点）</td><td>返回鼠标相对于文档页面的Y坐标 IE9+ 支持</td></tr><tr><td>e.screenX</td><td>返回鼠标相对于电脑屏幕的X坐标</td></tr><tr><td>e.screenY</td><td>返回鼠标相对于电脑屏幕的Y坐标</td></tr></tbody></table><h3 id="2、常用的键盘事件"><a href="#2、常用的键盘事件" class="headerlink" title="2、常用的键盘事件"></a>2、常用的键盘事件</h3><table><thead><tr><th>键盘事件</th><th>触发条件</th></tr></thead><tbody><tr><td>onkeyup</td><td>某个键盘按键被松开时触发</td></tr><tr><td>onkeydown</td><td>某个键盘按键被按下时触发</td></tr><tr><td>onkeypress</td><td>某个键盘按键被按下时触发，但是它不识别功能键，比如 ctrl shift 箭头等</td></tr></tbody></table><ul><li>如果使用addEventListener 不需要加 on</li><li>onkeypress 和前面2个的区别是，它不识别功能键，比如左右箭头，shift 等</li><li>三个事件的执行顺序是： keydown – keypress — keyup</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">    &lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // 常用的键盘事件</span><br><span class="line">        //<span class="number">1</span>. keyup 按键弹起的时候触发 </span><br><span class="line">        // document<span class="selector-class">.onkeyup</span> = function() &#123;</span><br><span class="line">        //         console<span class="selector-class">.log</span>(&#x27;我弹起了&#x27;);</span><br><span class="line">    //     &#125;</span><br><span class="line">    document<span class="selector-class">.addEventListener</span>(&#x27;keyup&#x27;, function() &#123;</span><br><span class="line">        console<span class="selector-class">.log</span>(&#x27;我弹起了&#x27;);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    //<span class="number">3</span>. keypress 按键按下的时候触发  不能识别功能键 比如 ctrl shift 左右箭头啊</span><br><span class="line">    document<span class="selector-class">.addEventListener</span>(&#x27;keypress&#x27;, function() &#123;</span><br><span class="line">            console<span class="selector-class">.log</span>(&#x27;我按下了press&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">        //<span class="number">2</span>. keydown 按键按下的时候触发  能识别功能键 比如 ctrl shift 左右箭头啊</span><br><span class="line">    document<span class="selector-class">.addEventListener</span>(&#x27;keydown&#x27;, function() &#123;</span><br><span class="line">            console<span class="selector-class">.log</span>(&#x27;我按下了down&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">        // <span class="number">4</span>. 三个事件的执行顺序  keydown -- keypress -- keyup</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Dom树</title>
      <link href="/2022/03/01/js/Dom%E6%A0%91/"/>
      <url>/2022/03/01/js/Dom%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript-Dom树"><a href="#JavaScript-Dom树" class="headerlink" title="JavaScript Dom树"></a>JavaScript Dom树</h1><h1 id="DOM简介"><a href="#DOM简介" class="headerlink" title="DOM简介"></a>DOM简介</h1><h3 id="什么是DOM"><a href="#什么是DOM" class="headerlink" title="什么是DOM"></a>什么是DOM</h3><p>文档对象模型（Document Object Model，简称 DOM），是 W3C 组织推荐的处理可扩展标记语言（HTML或者XML）的标准编程接口</p><p>W3C 已经定义了一系列的 DOM 接口，通过这些 DOM 接口可以改变网页的内容、结构和样式。</p><p><img src="https://www.runoob.com/images/htmltree.gif" alt="img"></p><ul><li>文档：一个页面就是一个文档，DOM中使用doucument来表示</li><li>元素：页面中的所有标签都是元素，DOM中使用 element 表示</li><li>节点：网页中的所有内容都是节点（标签，属性，文本，注释等），DOM中使用node表示</li></ul><p>DOM 把以上内容都看做是对象</p><h2 id="事件概述"><a href="#事件概述" class="headerlink" title="事件概述"></a>事件概述</h2><p>JavaScript使我们有能力创建动态页面，而事件是可以被 JavaScript 侦测到的行为。</p><p>简单理解： 触发— 响应机制。</p><p>网页中的每个元素都可以产生某些可以触发 JavaScript 的事件，例如，我们可以在用户点击某按钮时产生一个事件，然后去执行某些操作。</p><h3 id="事件三要素"><a href="#事件三要素" class="headerlink" title="事件三要素"></a>事件三要素</h3><ol><li>事件源(谁)</li><li>事件类型(什么事件)</li><li>事件处理程序(做啥)</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 点击一个按钮，弹出对话框</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. 事件是有三部分组成  事件源  事件类型  事件处理程序   我们也称为事件三要素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//(1) 事件源 事件被触发的对象   谁  按钮</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//(2) 事件类型  如何触发 什么事件 比如鼠标点击(onclick) 还是鼠标经过 还是键盘按下</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//(3) 事件处理程序  通过一个函数赋值的方式 完成</span></span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;点秋香&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="执行事件的步骤"><a href="#执行事件的步骤" class="headerlink" title="执行事件的步骤"></a>执行事件的步骤</h3><ol><li>获取事件源</li><li>注册事件(绑定事件)</li><li>添加事件处理程序(采取函数赋值形式)</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 执行事件步骤</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 点击div 控制台输出 我被选中了</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. 获取事件源</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2.绑定事件 注册事件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// div.onclick </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3.添加事件处理程序 </span></span></span><br><span class="line"><span class="language-javascript">    div.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我被选中了&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="获取元素"><a href="#获取元素" class="headerlink" title="获取元素"></a>获取元素</h2><table><thead><tr><th align="center">元素值</th><th align="center">获取方式</th></tr></thead><tbody><tr><td align="center">ID</td><td align="center">doucument.getElementByld(‘id名’)</td></tr><tr><td align="center">标签名</td><td align="center">doucument.getElementsByTagName(‘标签名’)</td></tr><tr><td align="center">类名</td><td align="center">document.getElementsByClassName(‘类名’);</td></tr><tr><td align="center">body</td><td align="center">document.body</td></tr><tr><td align="center">html</td><td align="center">document.documentElement</td></tr></tbody></table><p>下面是例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lis = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(lis);</span><br></pre></td></tr></table></figure><blockquote><p>还可以通过通过H5新增方法获取</p></blockquote><h3 id="document-querySelector"><a href="#document-querySelector" class="headerlink" title="document.querySelector"></a>document.querySelector</h3><ul><li><p>根据指定选择器返回第一个元素对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;选择器&#x27;</span>);</span><br><span class="line"><span class="comment">// 切记里面的选择器需要加符号 </span></span><br><span class="line"><span class="comment">// 类选择器.box </span></span><br><span class="line"><span class="comment">// id选择器 #nav</span></span><br><span class="line"><span class="keyword">var</span> firstBox = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.box&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul><h3 id="document-querySelectorAll"><a href="#document-querySelectorAll" class="headerlink" title="document.querySelectorAll"></a>document.querySelectorAll</h3><p>根据指定选择器返回所有元素对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;选择器&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="绑定事件"><a href="#绑定事件" class="headerlink" title="绑定事件"></a>绑定事件</h2><h3 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h3><table><thead><tr><th align="center">鼠标事件</th><th align="center">触发条件</th></tr></thead><tbody><tr><td align="center">onclick</td><td align="center">鼠标点击左键触发</td></tr><tr><td align="center">onmouseover</td><td align="center">鼠标经过触发</td></tr><tr><td align="center">onmouseout</td><td align="center">鼠标离开触发</td></tr><tr><td align="center">onfocus</td><td align="center">获得鼠标焦点触发</td></tr><tr><td align="center">onblur</td><td align="center">失去鼠标焦点触发</td></tr><tr><td align="center">onmousemove</td><td align="center">鼠标移动触发</td></tr><tr><td align="center">onmouseup</td><td align="center">鼠标弹起触发</td></tr><tr><td align="center">onmousedown</td><td align="center">鼠标按下触发</td></tr></tbody></table><h2 id="操作元素"><a href="#操作元素" class="headerlink" title="操作元素"></a>操作元素</h2><h3 id="改变元素内容"><a href="#改变元素内容" class="headerlink" title="改变元素内容"></a>改变元素内容</h3><p>element.innerText</p><p>去除html标签，同时空格和换行也会去掉。</p><p>element.innerHTML</p><p>包括HTML标签，同时保留空格和换行</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        我是文字</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>123<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// innerText 和 innerHTML的区别 </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 1. innerText 不识别html标签,去除空格和换行</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        div.<span class="property">innerText</span> = <span class="string">&#x27;&lt;strong&gt;今天是：&lt;/strong&gt; 2019&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2. innerHTML 识别html标签 保留空格和换行的</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        div.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;strong&gt;今天是：&lt;/strong&gt; 2019&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 这两个属性是可读写的  可以获取元素里面的内容</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> p = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;p&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">innerText</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">innerHTML</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="改变元素样式"><a href="#改变元素样式" class="headerlink" title="改变元素样式"></a>改变元素样式</h3><p><strong>语法:</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property">style</span>.<span class="property">property</span>=<span class="keyword">new</span> style;</span><br><span class="line"><span class="comment">// element.style</span></span><br><span class="line">div.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;pink&#x27;</span>;</span><br><span class="line">div.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;250px&#x27;</span>;</span><br></pre></td></tr></table></figure><p>注意：</p><ol><li>JS里面的样式采取驼峰命名法，比如 fontSize ，backgroundColor</li><li>JS 修改 style 样式操作 ，产生的是行内样式，CSS权重比较高</li><li><code>如果样式修改较多，可以采取操作类名方式更改元素样式</code></li><li>class 因为是个保留字，因此使用className来操作元素类名属性</li><li>className 会直接更改元素的类名，会覆盖原先的类名</li></ol><h3 id="改变元素属性"><a href="#改变元素属性" class="headerlink" title="改变元素属性"></a>改变元素属性</h3><p>可以改变一些元素的属性</p><p>常用的有：</p><ul><li>input</li><li>display</li><li>img</li><li>className</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">div.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">div.<span class="property">className</span> = <span class="string">&quot;one&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="https://img-blog.csdnimg.cn/f6835ead437948e3804c4432ceb812ad.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><h2 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h2><p>自定义属性目的：</p><p>保存并保存数据，有些数据可以保存到页面中而不用保存到数据库中</p><p>有些自定义属性很容易引起歧义，不容易判断到底是内置属性还是自定义的，所以H5有了规定</p><h3 id="设置H5自定义属性"><a href="#设置H5自定义属性" class="headerlink" title="设置H5自定义属性"></a>设置H5自定义属性</h3><p>H5规定自定义属性 <code>data-</code>开头作为属性名并赋值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div data-index = <span class="string">&quot;1&quot;</span>&gt;&lt;/&gt;</span><br><span class="line"><span class="comment">// 或者使用JavaScript设置</span></span><br><span class="line">div.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-index&#x27;</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h3 id="获取H5自定义属性"><a href="#获取H5自定义属性" class="headerlink" title="获取H5自定义属性"></a>获取H5自定义属性</h3><p>兼容性获取 element.getAttribute(‘data-index’)<br>H5新增的：element.dataset.index 或element.dataset[‘index’] IE11才开始支持</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> getTime=&quot;<span class="number">20</span>&quot; data-index=&quot;<span class="number">2</span>&quot; data-list-name=&quot;andy&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="selector-tag">var</span> <span class="selector-tag">div</span> = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-tag">div</span>&#x27;);</span><br><span class="line">        console<span class="selector-class">.log</span>(<span class="selector-tag">div</span><span class="selector-class">.getAttribute</span>(&#x27;getTime&#x27;));</span><br><span class="line">        <span class="selector-tag">div</span><span class="selector-class">.setAttribute</span>(&#x27;data-<span class="selector-tag">time</span>&#x27;, <span class="number">20</span>);</span><br><span class="line">        console<span class="selector-class">.log</span>(<span class="selector-tag">div</span><span class="selector-class">.getAttribute</span>(&#x27;data-index&#x27;));</span><br><span class="line">        console<span class="selector-class">.log</span>(<span class="selector-tag">div</span><span class="selector-class">.getAttribute</span>(&#x27;data-list-name&#x27;));</span><br><span class="line">        // <span class="selector-tag">h5</span>新增的获取自定义属性的方法 它只能获取data-开头的</span><br><span class="line">        // dataset 是一个集合里面存放了所有以data开头的自定义属性</span><br><span class="line">        console<span class="selector-class">.log</span>(<span class="selector-tag">div</span><span class="selector-class">.dataset</span>);</span><br><span class="line">        console<span class="selector-class">.log</span>(<span class="selector-tag">div</span><span class="selector-class">.dataset</span><span class="selector-class">.index</span>);</span><br><span class="line">        console<span class="selector-class">.log</span>(<span class="selector-tag">div</span><span class="selector-class">.dataset</span><span class="selector-attr">[<span class="string">&#x27;index&#x27;</span>]</span>);</span><br><span class="line">        // 如果自定义属性里面有多个-链接的单词，我们获取的时候采取 驼峰命名法</span><br><span class="line">        console<span class="selector-class">.log</span>(<span class="selector-tag">div</span><span class="selector-class">.dataset</span><span class="selector-class">.listName</span>);</span><br><span class="line">        console<span class="selector-class">.log</span>(<span class="selector-tag">div</span><span class="selector-class">.dataset</span><span class="selector-attr">[<span class="string">&#x27;listName&#x27;</span>]</span>);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="移除属性"><a href="#移除属性" class="headerlink" title="移除属性"></a>移除属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;属性&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="节点操作"><a href="#节点操作" class="headerlink" title="节点操作"></a>节点操作</h2><p>获取元素通常使用两种方式：</p><table><thead><tr><th>1.利用DOM提供的方法获取元素</th><th>2.利用节点层级关系获取元素</th></tr></thead><tbody><tr><td>document.getElementById()</td><td>利用父子兄节点关系获取元素</td></tr><tr><td>document.getElementsByTagName()</td><td>逻辑性强，但是兼容性较差</td></tr><tr><td>document.querySelector 等</td><td></td></tr><tr><td>逻辑性不强，繁琐</td><td></td></tr></tbody></table><p>这两种方式都可以获取元素节点，我们后面都会使用，但是节点操作更简单</p><p>一般的，节点至少拥有三个基本属性</p><h3 id="节点概述"><a href="#节点概述" class="headerlink" title="节点概述"></a>节点概述</h3><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/htmltree.gif" alt="img"></p><p><strong>HTML文档可以说由节点构成的集合，三种常见的DOM节点:</strong></p><p><strong>1. 元素节点：</strong>上图中<html>、<body>、<p>等都是元素节点，即标签。</p><p>**2. 文本节点:**向用户展示的内容，如<li>…</li>中的JavaScript、DOM、CSS等文本。</p><p>**3. 属性节点:**元素属性，如<a>标签的链接属性href。</p><blockquote><p>一般的，节点至少拥有nodeType（节点类型）、nodeName（节点名称）和nodeValue（节点值）这三个基本属性。</p></blockquote><ul><li><p>元素节点：nodeType 为1</p></li><li><p>属性节点：nodeType 为2</p></li><li><p>文本节点：nodeType 为3(文本节点包括文字、空格、换行等)</p></li></ul><p>我们在实际开发中，节点操作主要操作的是元素节点</p><p>利用 DOM 树可以把节点划分为不同的层级关系，常见的是父子兄层级关系。</p><h3 id="父级节点"><a href="#父级节点" class="headerlink" title="父级节点"></a>父级节点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node.<span class="property">parentNode</span></span><br></pre></td></tr></table></figure><ul><li><p><code>parentNode</code>属性可以返回某节点的父结点，注意是最近的一个父结点</p></li><li><p>如果指定的节点没有父结点则返回null</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;!-- 节点的优点 --&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span>&gt;我是<span class="selector-tag">div</span>&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">span</span>&gt;我是<span class="selector-tag">span</span>&lt;/<span class="selector-tag">span</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;我是<span class="selector-tag">li</span>&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;我是<span class="selector-tag">li</span>&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;我是<span class="selector-tag">li</span>&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;我是<span class="selector-tag">li</span>&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;demo&quot;&gt;</span><br><span class="line">        &lt;<span class="selector-tag">div</span> class=&quot;box&quot;&gt;</span><br><span class="line">            &lt;<span class="selector-tag">span</span> class=&quot;erweima&quot;&gt;×&lt;/<span class="selector-tag">span</span>&gt;</span><br><span class="line">        &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // <span class="number">1</span>. 父节点 parentNode</span><br><span class="line">    <span class="selector-tag">var</span> erweima = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-class">.erweima</span>&#x27;);</span><br><span class="line">    // <span class="selector-tag">var</span> box = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-class">.box</span>&#x27;);</span><br><span class="line">    // 得到的是离元素最近的父级节点(亲爸爸) 如果找不到父节点就返回为 null</span><br><span class="line">    console<span class="selector-class">.log</span>(erweima<span class="selector-class">.parentNode</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="子结点"><a href="#子结点" class="headerlink" title="子结点"></a>子结点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parentNode.<span class="title function_">childNodes</span>(标准)</span><br></pre></td></tr></table></figure><ul><li>返回所有的子元素节点，包括元素节点，文本节点等</li><li>如果只想要获得里面的元素节点，则需要专门处理。所以我们一般不提倡使用<code>childNodes</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parentNode.<span class="title function_">children</span>(非标准)</span><br></pre></td></tr></table></figure><p>只返回子元素节点，其余节点不返回 （<strong>这个是我们重点掌握的</strong>）</p><p>虽然 children 是一个非标准，但是得到了各个浏览器的支持，因此我们可以放心使用</p><h4 id="第一个子结点"><a href="#第一个子结点" class="headerlink" title="第一个子结点"></a>第一个子结点</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parentNode.<span class="property">firstChild</span></span><br></pre></td></tr></table></figure><ul><li><code>firstChild</code> 返回第一个子节点，找不到则返回null</li><li>同样，也是包含所有的节点</li></ul><h4 id="最后一个子结点"><a href="#最后一个子结点" class="headerlink" title="最后一个子结点"></a>最后一个子结点</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parentNode.<span class="property">lastChild</span></span><br></pre></td></tr></table></figure><p><code>lastChild</code> 返回最后一个子节点，找不到则返回null</p><p>同样，也是包含所有的节点</p><h4 id="子节点常用"><a href="#子节点常用" class="headerlink" title="子节点常用"></a>子节点常用</h4><p>上面的两个，firstChild lastChild 第一个子节点 不管是文本节点还是元素节点</p><p>而我们一般只是想要元素节点。</p><blockquote><p>当然，我们也可以用ol.children[0]，ol.children[ol.children.length - 1]来表示第一个和最后一个节点</p><p>这个也是解决兼容性的方案，也是直接拿到元素节点</p></blockquote><h3 id="创建节点"><a href="#创建节点" class="headerlink" title="创建节点"></a>创建节点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;tagName&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li><code>document.createElement()</code> 方法创建由 tagName 指定的HTML 元素</li><li>因为这些元素原先不存在，是根据我们的需求动态生成的，所以我们也称为<strong>动态创建元素节点</strong></li></ul><h4 id="添加节点"><a href="#添加节点" class="headerlink" title="添加节点"></a>添加节点</h4><blockquote><p>node为js注册的新的元素节点</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node.<span class="title function_">appendChild</span>(child)</span><br></pre></td></tr></table></figure><p><code>node.appendChild()</code> 方法将一个节点添加到指定父节点的子节点列表<strong>末尾</strong>。类似于 CSS 里面的 after 伪元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node.<span class="title function_">insertBefore</span>(child,指定元素)</span><br></pre></td></tr></table></figure><p><code>node.insertBefore()</code> 方法将一个节点添加到父节点的指定子节点<strong>前面</strong>。类似于 CSS 里面的 before 伪元素。</p><p>示例：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;<span class="number">123</span>&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // <span class="number">1</span>. 创建节点元素节点</span><br><span class="line">        <span class="selector-tag">var</span> <span class="selector-tag">li</span> = document<span class="selector-class">.createElement</span>(&#x27;<span class="selector-tag">li</span>&#x27;);</span><br><span class="line">        // <span class="number">2</span>. 添加节点 node<span class="selector-class">.appendChild</span>(child)  node 父级  child 是子级 后面追加元素  类似于数组中的push</span><br><span class="line">        // 先获取父亲<span class="selector-tag">ul</span></span><br><span class="line">        <span class="selector-tag">var</span> <span class="selector-tag">ul</span> = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-tag">ul</span>&#x27;);</span><br><span class="line">        <span class="selector-tag">ul</span><span class="selector-class">.appendChild</span>(<span class="selector-tag">li</span>);</span><br><span class="line">        // <span class="number">3</span>. 添加节点 node<span class="selector-class">.insertBefore</span>(child, 指定元素);</span><br><span class="line">        <span class="selector-tag">var</span> lili = document<span class="selector-class">.createElement</span>(&#x27;<span class="selector-tag">li</span>&#x27;);</span><br><span class="line">        <span class="selector-tag">ul</span><span class="selector-class">.insertBefore</span>(lili, <span class="selector-tag">ul</span><span class="selector-class">.children</span><span class="selector-attr">[0]</span>);</span><br><span class="line">        // <span class="number">4</span>. 我们想要页面添加一个新的元素分两步: <span class="number">1</span>. 创建元素 <span class="number">2</span>. 添加元素</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node.<span class="title function_">removeChild</span>(child)</span><br></pre></td></tr></table></figure><ul><li><code>node.removeChild()</code>方法从 DOM 中删除一个子节点，返回删除的节点</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ul.<span class="title function_">removeChild</span>(ul.<span class="property">childern</span>[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure><h4 id="复制节点-克隆节点"><a href="#复制节点-克隆节点" class="headerlink" title="复制节点(克隆节点)"></a>复制节点(克隆节点)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node.<span class="title function_">cloneNode</span>()</span><br></pre></td></tr></table></figure><p>node.cloneNode()方法返回调用该方法的节点的一个副本。 也称为克隆节点/拷贝节点</p><p>如果括号参数为空或者为 false ，则是浅拷贝，即只克隆复制节点本身，不克隆里面的子节点</p><p>如果括号参数为 true ，则是深度拷贝，会复制节点本身以及里面所有的子节点</p><p>示例</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">li</span>&gt;<span class="number">1111</span>&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">li</span>&gt;<span class="number">2</span>&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">li</span>&gt;<span class="number">3</span>&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="selector-tag">var</span> <span class="selector-tag">ul</span> = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-tag">ul</span>&#x27;);</span><br><span class="line">    // <span class="number">1</span>. node<span class="selector-class">.cloneNode</span>(); 括号为空或者里面是false 浅拷贝 只复制标签不复制里面的内容</span><br><span class="line">    // <span class="number">2</span>. node<span class="selector-class">.cloneNode</span>(true); 括号为true 深拷贝 复制标签复制里面的内容</span><br><span class="line">    <span class="selector-tag">var</span> lili = <span class="selector-tag">ul</span><span class="selector-class">.children</span><span class="selector-attr">[0]</span><span class="selector-class">.cloneNode</span>(true);</span><br><span class="line">    <span class="selector-tag">ul</span><span class="selector-class">.appendChild</span>(lili);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h4><p>三种动态创建元素的区别</p><ul><li><p>doucument.write()</p></li><li><p>element.innerHTML</p></li><li><p>document.createElement()</p></li></ul><p>区别：</p><ul><li><code>document.write()</code> 是直接将内容写入页面的内容流，但是文档流执行完毕，则它会导致页面全部重绘(这个一般不用)</li><li><code>innerHTML</code> 是将内容写入某个 DOM 节点，不会导致页面全部重绘</li><li><code>innerHTML</code> 创建多个元素效率更高（不要拼接字符串，采取数组形式拼接），结构稍微复杂</li><li><code>createElement()</code>创建多个元素效率稍低一点点，但是结构更清晰</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;innner&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;create&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // <span class="number">2</span>. innerHTML 创建元素</span><br><span class="line">        <span class="selector-tag">var</span> inner = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-class">.inner</span>&#x27;);</span><br><span class="line">        // <span class="number">2.1</span> innerHTML 用拼接字符串方法</span><br><span class="line">        for (<span class="selector-tag">var</span> <span class="selector-tag">i</span> = <span class="number">0</span>; <span class="selector-tag">i</span> &lt;= <span class="number">100</span>; <span class="selector-tag">i</span>++) &#123;</span><br><span class="line">            inner<span class="selector-class">.innerHTML</span> += &#x27;&lt;<span class="selector-tag">a</span> href=&quot;#&quot;&gt;百度&lt;/<span class="selector-tag">a</span>&gt;&#x27;;</span><br><span class="line">        &#125;</span><br><span class="line">        // <span class="number">2.2</span> innerHTML 用数组形式拼接</span><br><span class="line">        <span class="selector-tag">var</span> arr = <span class="selector-attr">[]</span>;</span><br><span class="line">        for (<span class="selector-tag">var</span> <span class="selector-tag">i</span> = <span class="number">0</span>; <span class="selector-tag">i</span> &lt;= <span class="number">100</span>; <span class="selector-tag">i</span>++) &#123;</span><br><span class="line">            arr<span class="selector-class">.push</span>(&#x27;&lt;<span class="selector-tag">a</span> href=&quot;#&quot;&gt;百度&lt;/<span class="selector-tag">a</span>&gt;&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line">        inner<span class="selector-class">.innerHTML</span> = arr<span class="selector-class">.join</span>(&#x27;&#x27;);</span><br><span class="line"></span><br><span class="line">        // <span class="number">3</span><span class="selector-class">.document</span><span class="selector-class">.createElement</span>() 创建元素</span><br><span class="line">        <span class="selector-tag">var</span> create = document<span class="selector-class">.querySelector</span>(&#x27;<span class="selector-class">.create</span>&#x27;);</span><br><span class="line">        <span class="selector-tag">var</span> <span class="selector-tag">a</span> = document<span class="selector-class">.createElement</span>(&#x27;<span class="selector-tag">a</span>&#x27;);</span><br><span class="line">        create<span class="selector-class">.appendChild</span>(<span class="selector-tag">a</span>);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>总结：不同浏览器下， innerHTML 效率要比 createElement 高</p></blockquote><h2 id="DOM核心"><a href="#DOM核心" class="headerlink" title="DOM核心"></a>DOM核心</h2><p>对于DOM操作，我们主要针对子元素的操作，主要有</p><ul><li>创建</li><li>增</li><li>删</li><li>改</li><li>查</li><li>属性操作</li><li>时间操作</li></ul><p>1、创建<br>document.write</p><p>innerHTML</p><p>createElement<br>2、增<br>appendChild</p><p>insertBefore<br>3、删<br>removeChild<br>4、改<br>主要修改dom的元素属性，dom元素的内容、属性、表单的值等</p><p>修改元素属性：src、href、title 等</p><p>修改普通元素内容：innerHTML、innerText</p><p>修改表单元素：value、type、disabled</p><p>修改元素样式：style、className<br>5、查<br>主要获取查询dom的元素</p><p>DOM提供的API方法：getElementById、getElementsByTagName (古老用法，不推荐)</p><p>H5提供的新方法：querySelector、querySelectorAll (提倡)</p><p>利用节点操作获取元素：父(parentNode)、子(children)、兄(previousElementSibling、nextElementSibling) 提倡<br>6、属性操作<br>主要针对于自定义属性</p><p>setAttribute：设置dom的属性值</p><p>getAttribute：得到dom的属性值</p><p>removeAttribute：移除属性</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>html5</title>
      <link href="/2022/03/01/html/html5/"/>
      <url>/2022/03/01/html/html5/</url>
      
        <content type="html"><![CDATA[<h1 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h1><h2 id="1-画布"><a href="#1-画布" class="headerlink" title="1.画布"></a>1.画布</h2><p>HTML5 <canvas>元素用于图形的绘制，通过脚本 (通常是JavaScript)来完成.</p><p><canvas> 标签只是图形容器，您必须使用脚本来绘制图形。</p><p>你可以通过多种方法使用 canvas 绘制路径,盒、圆、字符以及添加图像。</p><h3 id="1-创建"><a href="#1-创建" class="headerlink" title="1.创建"></a>1.创建</h3><blockquote><p>一个画布在网页中是一个矩形框，通过 <canvas> 元素来绘制.</p><p><strong>注意:</strong> 默认情况下 <canvas> 元素没有边框和内容。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;myCanvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-绘制"><a href="#2-绘制" class="headerlink" title="2.绘制"></a>2.绘制</h3><p>canvas 元素本身是没有绘图能力的。所有的绘制工作必须在 JavaScript 内部完成：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myCanvas&quot;</span>); </span><br><span class="line">创建context对象</span><br><span class="line"><span class="keyword">var</span> ctx=c.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>); </span><br><span class="line">下面的两行代码绘制一个红色的矩形：</span><br><span class="line">ctx.<span class="property">fillStyle</span>=<span class="string">&quot;#FF0000&quot;</span>; </span><br><span class="line">ctx.<span class="title function_">fillRect</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">150</span>,<span class="number">75</span>);</span><br></pre></td></tr></table></figure><h3 id="3-Canvas-坐标"><a href="#3-Canvas-坐标" class="headerlink" title="3.Canvas 坐标"></a>3.Canvas 坐标</h3><ul><li><p>canvas 是一个二维网格。</p></li><li><p>canvas 的左上角坐标为 (0,0)</p></li><li><p>上面的 fillRect 方法拥有参数 (0,0,150,75)。</p></li><li><p>意思是：在画布上绘制 150x75 的矩形，从左上角开始 (0,0)。</p><p>如下图所示，画布的 X 和 Y 坐标用于在画布上对绘画进行定位。鼠标移动的矩形框上，显示定位坐标。</p><iframe src="https://www.runoob.com/try/demo_source/tryhtml5_canvas_coordinates.htm" frameborder="0" style="border: 0px; margin: 0px; padding: 0px; overflow: hidden; width: 400px; height: 120px;"></iframe></li></ul><h3 id="4-Canvas-路径"><a href="#4-Canvas-路径" class="headerlink" title="4.Canvas - 路径"></a>4.Canvas - 路径</h3><p>在Canvas上画线，我们将使用以下两种方法：</p><ul><li>moveTo(<em>x,y</em>) 定义线条开始坐标</li><li>lineTo(<em>x,y</em>) 定义线条结束坐标</li></ul><p>绘制线条我们必须使用到 “ink” 的方法，就像stroke().</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myCanvas&quot;</span>); </span><br><span class="line"><span class="keyword">var</span> ctx=c.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">ctx.<span class="title function_">moveTo</span>(<span class="number">0</span>,<span class="number">0</span>); </span><br><span class="line">ctx.<span class="title function_">lineTo</span>(<span class="number">200</span>,<span class="number">100</span>);</span><br><span class="line">ctx.<span class="title function_">stroke</span>();</span><br></pre></td></tr></table></figure><h2 id="2-内联svg"><a href="#2-内联svg" class="headerlink" title="2.内联svg"></a>2.内联svg</h2><p><strong>什么是SVG？</strong></p><ul><li><p>SVG 指可伸缩矢量图形 (Scalable Vector Graphics)</p></li><li><p>SVG 用于定义用于网络的基于矢量的图形</p></li><li><p>SVG 使用 XML 格式定义图形</p></li><li><p>SVG 图像在放大或改变尺寸的情况下其图形质量不会有损失</p></li><li><p>SVG 是万维网联盟的标准</p><p><strong>SVG优势</strong></p><p>与其他图像格式相比（比如 JPEG 和 GIF），使用 SVG 的优势在于：</p><ul><li>SVG 图像可通过文本编辑器来创建和修改</li><li>SVG 图像可被搜索、索引、脚本化或压缩</li><li>SVG 是可伸缩的</li><li>SVG 图像可在任何的分辨率下被高质量地打印</li><li>SVG 可在图像质量不下降的情况下被放大</li></ul></li></ul><h2 id="3-新增语义化标签"><a href="#3-新增语义化标签" class="headerlink" title="3.新增语义化标签"></a>3.新增语义化标签</h2><ul><li><p>&lt; header &gt; :头部标签</p></li><li><p>&lt; nav &gt;: 导航标签</p></li><li><p>&lt; article &gt;： 内容标签</p></li><li><p>&lt; section &gt;:定义文档某个区域</p></li><li><p>&lt; aside &gt;:侧边栏标签</p></li><li><p>&lt; footer &gt;: 尾部标签</p><p><img src="https://img-blog.csdnimg.cn/07df0702684841339d1b4884b4bdc677.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0F1Z2Vuc3Rlcm5fUVhM,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><p><strong>注意：</strong></p></li><li><p>这种语义化标准主要是针对<strong>搜索引擎</strong>的</p></li><li><p>这些新标签页面中可以使用<strong>多次</strong></p></li><li><p>在IE9中，需要把这些元素转换为<strong>块级元素</strong></p></li><li><p>其实，移动端更喜欢使用这些标签</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">header</span>, <span class="selector-tag">nav</span> &#123;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: pink;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">15px</span> auto;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">section</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: skyblue;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">header</span>&gt;头部标签&lt;/<span class="selector-tag">header</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">nav</span>&gt;导航栏标签&lt;/<span class="selector-tag">nav</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">section</span>&gt;某个区域&lt;/<span class="selector-tag">section</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-Audio-标签"><a href="#4-Audio-标签" class="headerlink" title="4.Audio 标签"></a>4.Audio 标签</h2><table><thead><tr><th align="left">属性</th><th align="left">值</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">autoplay</td><td align="left">autoplay</td><td align="left">如果出现该属性，则音频在就绪后马上播放。</td></tr><tr><td align="left">controls</td><td align="left">controls</td><td align="left">如果出现该属性，则向用户显示音频控件（比如播放/暂停按钮）。</td></tr><tr><td align="left">loop</td><td align="left">loop</td><td align="left">如果出现该属性，则每当音频结束时重新开始播放。</td></tr><tr><td align="left">muted</td><td align="left">muted</td><td align="left">如果出现该属性，则音频输出为静音。</td></tr><tr><td align="left">preload</td><td align="left">auto metadata none</td><td align="left">规定当网页加载时，音频是否默认被加载以及如何被加载。</td></tr><tr><td align="left">src</td><td align="left"><em>URL</em></td><td align="left">规定音频文件的 URL。</td></tr></tbody></table><p>##5.video视频</p><table><thead><tr><th align="center">属性</th><th align="center">值</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">autoplay</td><td align="center">autoplay</td><td align="center">视频就绪自动播放(谷歌浏览器需要添加muted来解决自动播放问题)</td></tr><tr><td align="center">controls</td><td align="center">controls</td><td align="center">向用户显示播放控件</td></tr><tr><td align="center">width</td><td align="center">pixels(像素)</td><td align="center">设置播放器宽度</td></tr><tr><td align="center">height</td><td align="center">pixels(像素)</td><td align="center">设置播放器高度</td></tr><tr><td align="center">loop</td><td align="center">loop</td><td align="center">播放完是否继续播放该视频,循环播放</td></tr><tr><td align="center">preload</td><td align="center">auto(预先加载视频)none(不应加载视频)</td><td align="center">规定是否预加载视频(如果有了autoplay 就忽略该属性)</td></tr><tr><td align="center">src</td><td align="center">url</td><td align="center">视频url的地址</td></tr><tr><td align="center">poster</td><td align="center">lmgurl</td><td align="center">加载等待的画面图片</td></tr><tr><td align="center">muted</td><td align="center">muted</td><td align="center">静音播放</td></tr></tbody></table><p>一般不显示controls，让视频循环播放</p>]]></content>
      
      
      <categories>
          
          <category> CSS &amp; HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>css(下)</title>
      <link href="/2022/03/01/css/css-%E4%B8%8B/"/>
      <url>/2022/03/01/css/css-%E4%B8%8B/</url>
      
        <content type="html"><![CDATA[<hr><p>title: css3下<br>date: 2021-11-24 16:20:51<br>tags:</p><hr><h2 id="变形"><a href="#变形" class="headerlink" title="变形"></a>变形</h2><h3 id="2d转换"><a href="#2d转换" class="headerlink" title="2d转换"></a>2d转换</h3><p><code>转换(transform)</code>是CSS3中具有颠覆性的特征之一，可以实现元素的位移，旋转，缩放等效果</p><ul><li>移动：translate</li><li>旋转：rotate</li><li>缩放：scale</li></ul><h4 id="移动translate🔥"><a href="#移动translate🔥" class="headerlink" title="移动translate🔥"></a>移动translate🔥</h4><p>2D移动是2D转换里面的一种功能，可以改变元素在页面中的位置，类似定位。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">transform:translate(x,y); </span><br><span class="line">/* 或者分开写 */</span><br><span class="line">transform:translateX(n);</span><br><span class="line">transform:translateY(n);</span><br><span class="line"></span><br><span class="line">transform:translate(100px,100px);</span><br><span class="line">/* 如果只移动X轴           */</span><br><span class="line">transform:translate(100px,0);</span><br><span class="line">translateX(100px);</span><br></pre></td></tr></table></figure><p>定义2D转换中的移动，沿着X和Y轴移动元素<br>translate 最大的优点：不会影响到其他元素的位置<br>translate 中的百分比单位是相对于自身元素的<br><code>translate:(50%,50%);</code><br>对<code>行内标签</code>没有效果</p><h4 id="旋转rotate🔥"><a href="#旋转rotate🔥" class="headerlink" title="旋转rotate🔥"></a>旋转rotate🔥</h4><p>2D旋转指的是让元素在2维平面内顺时针旋转或者逆时针旋转。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(度数)</span><br></pre></td></tr></table></figure><ol><li><p>rotate 里面跟度数，单位是 deg 比如 rotate(45deg)</p></li><li><p><strong>角度为正时，顺时针，负时，为逆时针</strong></p></li><li><p>默认旋转的中心点是元素的中心点</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">   &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">img</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">5px</span> solid pink;</span><br><span class="line">            <span class="comment">/* 过渡写到本身，谁做动画给谁加 */</span></span><br><span class="line">            <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">  &lt;head&gt;</span><br><span class="line">   &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">img</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">5px</span> solid pink;</span><br><span class="line">            <span class="comment">/* 过渡写到本身，谁做动画给谁加 */</span></span><br><span class="line">            <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">        &#125;  </span><br><span class="line">    <span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;#&quot; alt=&quot;&quot;&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="旋转中心点transform-origin🔥"><a href="#旋转中心点transform-origin🔥" class="headerlink" title="旋转中心点transform-origin🔥"></a>旋转中心点transform-origin🔥</h4><p>2D转换中心点：我们可以设置元素转换的中心点 <code>transform-origin</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform-origin</span>: x y;</span><br></pre></td></tr></table></figure><p>注意后面的参数x 和 y 用空格隔开<br>x y 默认转换的中心点是元素的中心点(50% 50%)<br>还可以给x y 设置 像素或者方位名词(top bottom left right center)</p></li></ol>   <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    &lt;head&gt;</span><br><span class="line">   &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">div</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: pink;</span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">            <span class="attribute">transition</span>: all <span class="number">1s</span>;</span><br><span class="line">            <span class="comment">/* 1.可以跟方位名词 ,以左下角为轴进行旋转*/</span></span><br><span class="line">            <span class="attribute">transform-origin</span>: left bottom;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span>&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="缩放scale🔥"><a href="#缩放scale🔥" class="headerlink" title="缩放scale🔥"></a>缩放scale🔥</h4><p>   缩放：scale,只要给元素添加上了这个属性就能控制它放大还是缩小</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">scale</span>(x,y);</span><br></pre></td></tr></table></figure><p>   注意其中的x和y用逗号分割<br>   transform:scale(1,1): 宽和高都放大一倍，相当于没有放大<br>   transform:scale(2,2)：宽和高都放大了2倍<br>   transform:scale(2)：只写一个参数，第二个参数则和第一个参数一样，相当于 scale(2,2)<br>   transform:scale(0.5,0.5)：缩小<br>   sacle缩放最大的优势：可以设置转换中心点缩放，默认以中心点缩放的，而且不影响其他盒子</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">   &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">div</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: pink;</span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="comment">/* 1.里面写的数字不跟单位 就是倍数的意思 1就是1倍，2就是2倍 */</span></span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span>&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="2D转换综合写法🔥"><a href="#2D转换综合写法🔥" class="headerlink" title="2D转换综合写法🔥"></a>2D转换综合写法🔥</h4><blockquote><ol><li>同时使用多个转换，其格式为: transform:translate() rotate() scale() 移动-旋转-缩放</li><li>其顺序会影响转换的效果(先旋转会改变坐标轴方向)</li><li><strong>当我们同时有位移和其他属性时候，记得要将位移放到最前面</strong></li></ol></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;   </span><br><span class="line">   &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">div</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: pink;</span><br><span class="line">            <span class="attribute">transition</span>: all .<span class="number">5s</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">            <span class="comment">/* 我们同时有位移和其他属性，我们需要把位移放到最前面 位移，旋转，缩放*/</span></span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">150px</span>, <span class="number">50px</span>) <span class="built_in">rotate</span>(<span class="number">180deg</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span>&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2D转换总结🔥"><a href="#2D转换总结🔥" class="headerlink" title="2D转换总结🔥"></a>2D转换总结🔥</h4><blockquote><ul><li>转换transform 我们简单理解就是变形 有2D 和 3D 之分</li><li>我们暂且学了三个 分别是 位移 旋转 和 缩放</li><li>2D 移动 translate(x, y) 最大的优势是不影响其他盒子， 里面参数用%，是相对于自身宽度和高度来计算的</li><li>可以分开写比如 translateX(x) 和 translateY(y)</li><li>2D 旋转 rotate(度数) 可以实现旋转元素 度数的单位是deg</li><li>2D 缩放 sacle(x,y) 里面参数是数字 不跟单位 可以是小数 最大的优势 不影响其他盒子</li><li>设置转换中心点 transform-origin : x y; 参数可以百分比、像素或者是方位名词</li><li>当我们进行综合写法，同时有位移和其他属性的时候，记得要将位移放到最前</li></ul></blockquote><h3 id="动画🔥"><a href="#动画🔥" class="headerlink" title="动画🔥"></a>动画🔥</h3><ul><li>先定义动画</li><li>再使用（调用）动画</li></ul><h4 id="用keyframs定义动画🔥"><a href="#用keyframs定义动画🔥" class="headerlink" title="用keyframs定义动画🔥"></a>用keyframs定义动画🔥</h4><p>用 keyframes 定义动画（类似定义类选择器）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> 动画名称 &#123;</span><br><span class="line">   <span class="number">0%</span>&#123;</span><br><span class="line">        <span class="attribute">width</span>:<span class="number">100px</span>;</span><br><span class="line">   &#125;  </span><br><span class="line">   <span class="number">100%</span>&#123;</span><br><span class="line">        <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>0% 是动画的开始，100% 是动画的完成。这样的规则就是动画序列。</li><li>在 @keyframes 中规定某项 CSS 样式，就能创建由当前样式逐渐改为新样式的动画效果</li><li>动画是使元素从一种样式逐渐变化为另一种样式的效果。您可以改变任意多的样式任意多的次数。</li><li>请用百分比来规定变化发生的时间，或用关键词 “from” 和 “to”，等同于 0% 和 100%</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">       <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">       <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">       <span class="attribute">background-color</span>: aqua;</span><br><span class="line">       <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">       <span class="comment">/* 调用动画 */</span></span><br><span class="line">       <span class="attribute">animation-name</span>: 动画名称;</span><br><span class="line">       <span class="comment">/* 持续时间 */</span></span><br><span class="line">       <span class="attribute">animation-duration</span>: 持续时间;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="动画常用属性🔥"><a href="#动画常用属性🔥" class="headerlink" title="动画常用属性🔥"></a>动画常用属性🔥</h4><table><thead><tr><th align="center">属性</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">@keyframes</td><td align="center">规定动画</td></tr><tr><td align="center">animation</td><td align="center">所有动画属性的简写属性，除了animation-play-state属性。</td></tr><tr><td align="center">animation-name</td><td align="center">规定@keyframes动画的名称。（必须的）</td></tr><tr><td align="center">animation-duration</td><td align="center">规定动画完成一个周期所花费的秒或毫秒，默认是0。（必须的）</td></tr><tr><td align="center">animation-timing-function</td><td align="center">规定动画的速度曲线，默认是“ease”。</td></tr><tr><td align="center">animation-delay</td><td align="center">规定动画何时开始，默认是0。</td></tr><tr><td align="center">animation-iteration-count</td><td align="center">规定动画被播放的次数，默认是1，还有infinite</td></tr><tr><td align="center">animation-direction</td><td align="center">规定动画是否在下一周期逆向播放，默认是“normal“,alternate逆播放</td></tr><tr><td align="center">animation-play-state</td><td align="center">规定动画是否正在运行或暂停。默认是”running”,还有”paused”。</td></tr><tr><td align="center">animation-fill-mode</td><td align="center">规定动画结束后状态，保持forwards回到起始backwards</td></tr></tbody></table><h4 id="动画简写属性🔥"><a href="#动画简写属性🔥" class="headerlink" title="动画简写属性🔥"></a>动画简写属性🔥</h4><blockquote><pre><code>   animation：动画名称 持续时间 运动曲线 何时开始 播放次数 是否反方向 动画起始或者结束的状态;</code></pre></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">animation</span>: myfirst <span class="number">5s</span> linear <span class="number">2s</span> infinite alternate;</span><br></pre></td></tr></table></figure><ul><li>简写属性里面不包含 animation-play-state</li><li>暂停动画：animation-play-state: puased; 经常和鼠标经过等其他配合使用</li><li>想要动画走回来 ，而不是直接跳回来：animation-direction: alternate</li><li>盒子动画结束后，停在结束位置： animation-fill-mode : forwards</li></ul><h4 id="速度曲线细节"><a href="#速度曲线细节" class="headerlink" title="速度曲线细节"></a>速度曲线细节</h4><ul><li><code>animation-timing-function</code>：规定动画的速度曲线，默认是“ease”</li></ul><table><thead><tr><th><strong>值</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>linear</td><td>动画从头到尾的速度是相同的。匀速</td></tr><tr><td>ease</td><td>默认。动画以低速开始，然后加快，在结束前变慢。</td></tr><tr><td>ease-in</td><td>动画以低速开始。</td></tr><tr><td>ease-out</td><td>动画以低速结束。</td></tr><tr><td>ease-in-out</td><td>动画以低速开始和结束。</td></tr><tr><td>steps()</td><td>指定了时间函数中的间隔数量（步长）</td></tr></tbody></table><h3 id="3D转换🔥"><a href="#3D转换🔥" class="headerlink" title="3D转换🔥"></a>3D转换🔥</h3><p>我们生活的环境是3D的，照片就是3D物体在2D平面呈现的例子.</p><p>3D转换的特点：</p><ul><li>近大远小。</li><li>物体后面遮挡不可见</li></ul><p>当我们在网页上构建3D效果的时候参考这些特点就能产出3D效果。</p><ul><li>x轴：水平向右 <strong>注意： x 右边是正值，左边是负值</strong></li><li>y轴：垂直向下 <strong>注意： y 下面是正值，上面是负值</strong></li><li>z轴：垂直屏幕 <strong>注意： 往外面是正值，往里面是负值</strong></li></ul><h4 id="3D位移translate3d🔥"><a href="#3D位移translate3d🔥" class="headerlink" title="3D位移translate3d🔥"></a>3D位移translate3d🔥</h4><p>3D移动在2D移动的基础上多加了一个可以移动的方向，就是z轴方向</p><ul><li>translform:translateX(100px)：仅仅是在x轴上移动</li><li>translform:translateY(100px)：仅仅是在Y轴上移动</li><li>translform:translateZ(100px)：仅仅是在Z轴上移动（注意：translateZ一般用px单位）</li><li>transform:translate3d(x,y,z)：其中 x、y、z 分别指要移动的轴的方向的距离</li></ul><p>因为z轴是垂直屏幕，由里指向外面，所以默认是看不到元素在z轴的方向上移动</p><h4 id="透视perspective🔥"><a href="#透视perspective🔥" class="headerlink" title="透视perspective🔥"></a>透视perspective🔥</h4><p>透视：在2D平面产生近大远小视觉立体，但是只是效果二维的</p><ul><li><p>如果想要在网页产生3D效果需要透视（理解成3D物体投影在2D平面内）</p></li><li><p>模拟人类的视觉位置，可认为安排一只眼睛去看</p></li><li><p>透视我们也称为视距：视距就是人的眼睛到屏幕的距离</p></li><li><p>距离视觉点越近的在电脑平面成像越大，越远成像越小</p></li><li><p>透视的单位是像素</p><p><strong>透视写在被观察元素的父盒子上面的</strong></p></li></ul><h4 id="translateZ🔥"><a href="#translateZ🔥" class="headerlink" title="translateZ🔥"></a>translateZ🔥</h4><ul><li>translform:translateZ(100px)：仅仅是在Z轴上移动。</li><li>有了透视，就能看到translateZ 引起的变化了<ul><li>translateZ：近大远小</li><li>translateZ：往外是正值</li><li>translateZ：往里是负值</li></ul></li></ul><h4 id="3D旋转rotate3d🔥"><a href="#3D旋转rotate3d🔥" class="headerlink" title="3D旋转rotate3d🔥"></a>3D旋转rotate3d🔥</h4><p>3D旋转：3D旋转指可以让元素在三维平面内沿着 x轴，y轴，z轴或者自定义轴进行旋转。</p><p>transform: rotateX(45deg) ：沿着X轴正方向旋转45度<br>transform: rotateY(45deg) ：沿着Y轴正方向旋转45度<br>transform: rotateZ(45deg) ：沿着Z轴正方向旋转45度<br>transform: rotate3d(x,y,z,deg) ：沿着自定义轴旋转 deg为角度(了解即可)<br>xyz是表示旋转轴的矢量，是标示你是否希望沿着该轴旋转，最后一个标示旋转的角度。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*沿着X轴旋转45deg*/</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate3d</span>(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">45deg</span>) </span><br><span class="line"><span class="comment">/*沿着对角线旋转45deg*/</span></span><br><span class="line">transform: <span class="built_in">rotate3d</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">45deg</span>) transform: <span class="built_in">rotate3d</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">45deg</span>) </span><br></pre></td></tr></table></figure><h4 id="3D呈现transform-style🔥"><a href="#3D呈现transform-style🔥" class="headerlink" title="3D呈现transform-style🔥"></a>3D呈现transform-style🔥</h4><p>3D呈现：transform-style</p><ol><li>控制子元素是否开启三维立体环境</li><li>transform-style: flat 子元素不开启3d立体空间 默认的</li><li>transform-style: preserve-3d 子元素开启立体空间</li><li>代码写给父级，但是影响的是子盒子</li><li>这个属性很重要</li></ol><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="1-渐变色"><a href="#1-渐变色" class="headerlink" title="1.渐变色"></a>1.渐变色</h3><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/54b72b2e0001500103790158.jpg" alt="img"></p><p><strong>参数：</strong></p><p>第一个参数:<strong>指定渐变方向</strong>，可以用“<strong>角度</strong>”的关键词或<strong>“英文”</strong>来表示：</p><p><img src="https://img.mukewang.com/542a25da00017e9406980223.jpg" alt="img"></p><p>第一个参数省略时，默认为“180deg”，等同于“to bottom”。</p><p>第二个和第三个参数，<strong>表示颜色的起始点和结束点</strong>，可以有多个颜色值。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-image</span>:<span class="built_in">linear-gradient</span>(to left, red, orange,yellow,green,blue,indigo,violet);</span><br></pre></td></tr></table></figure><h3 id="2-鼠标样式"><a href="#2-鼠标样式" class="headerlink" title="2.鼠标样式"></a>2.鼠标样式</h3><p>鼠标样式<code>cursor</code></p><ul><li>设置或检索在对象上移动的鼠标指针采用何种系统预定义的光标形状</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>属性值</th><th>描述</th></tr></thead><tbody><tr><td>default</td><td>小白，默认</td></tr><tr><td>pointer</td><td>小手</td></tr><tr><td>move</td><td>移动</td></tr><tr><td>text</td><td>文本</td></tr><tr><td>not-allowed</td><td>禁止</td></tr></tbody></table><h3 id="3-轮廓线outline"><a href="#3-轮廓线outline" class="headerlink" title="3.轮廓线outline"></a>3.轮廓线outline</h3><p>轮廓线<code>outline</code>：</p><ul><li>给表单添加 <code>outline:0</code>; 或者<code>outline: none</code>;样式后，就可以去掉默认的蓝色边框</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    outline: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>outline属性的基本语法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">outline: ［outline-color］ || [outline-style] || [outline-width] || [outline-offset] || inherit</span><br></pre></td></tr></table></figure><p>有一个border属性，外面还有outline</p><h3 id="4-自由缩放属性resize"><a href="#4-自由缩放属性resize" class="headerlink" title="4.自由缩放属性resize"></a>4.自由缩放属性resize</h3><blockquote><p>为了增强用户体验，CSS3增加了很多新的属性，其中<strong>resize</strong>就是一个重要的属性，它允许用户通过拖动的方式来修改元素的尺寸来改变元素的大小。到目前为止，可以使用overflow属性的任何容器元素。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">resize</span>: none | both | horizontal | vertical | inherit</span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>属性值</strong></th><th><strong>取值说明</strong></th></tr></thead><tbody><tr><td>none</td><td>用户不能拖动元素修改尺寸大小。</td></tr><tr><td>both</td><td>用户可以拖动元素，同时修改元素的宽度和高度</td></tr><tr><td>horizontal</td><td>用户可以拖动元素，仅可以修改元素的宽度，但不能修改元素的高度。</td></tr><tr><td>vertical</td><td>用户可以拖动元素，仅可以修改元素的高度，但不能修改元素的宽度。</td></tr><tr><td>inherit</td><td>继承父元素的resize属性值。</td></tr></tbody></table><h3 id="5-多列布局Columns"><a href="#5-多列布局Columns" class="headerlink" title="5.多列布局Columns"></a>5.多列布局Columns</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">columns：&lt;column-width&gt; || &lt;column-count&gt;</span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>参数</strong></th><th><strong>参数说明</strong></th></tr></thead><tbody><tr><td>column-width</td><td>主要用来定义多列中每列的宽度</td></tr><tr><td>column-count</td><td>主要用来定义多列中的列数</td></tr><tr><td>column-gap</td><td>设置列与列之间的<strong>间距</strong></td></tr></tbody></table><h4 id="列表边框column-rule"><a href="#列表边框column-rule" class="headerlink" title="列表边框column-rule"></a>列表边框column-rule</h4><blockquote><p>column-rule主要是用来定义列与列之间的<strong>边框宽度、边框样式</strong>和<strong>边框颜色</strong>。简单点说，就有点类似于常用的border属性。但column-rule是不占用任何空间位置的，在列与列之间改变其宽度不会改变任何列的位置。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">column-rule</span>:&lt;column-rule-width&gt;|&lt;column-rule-style&gt;|&lt;column-rule-color&gt;</span><br></pre></td></tr></table></figure><h4 id="跨列设置column-span"><a href="#跨列设置column-span" class="headerlink" title="跨列设置column-span"></a>跨列设置column-span</h4><blockquote><p>column-span主要用来定义一个分列元素中的子元素能跨列多少。column-width、column-count等属性能让一元素分成多列，不管里面元素如何排放顺序，他们都是从左向右的放置内容，但有时我们需要基中一段内容或一个标题不进行分列，也就是横跨所有列，此时column-span就可以轻松实现，此属性的语法如下。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">column-span: none | all</span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>属性值</strong></th><th><strong>属性值说明</strong></th></tr></thead><tbody><tr><td>none</td><td>此值为column-span的默认值，表示不跨越任何列。</td></tr><tr><td>all</td><td>这个值跟none值刚好相反，表示的是元素跨越所有列，并定位在列的Ｚ轴之上。</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> CSS &amp; HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>css(上)</title>
      <link href="/2022/03/01/css/css/"/>
      <url>/2022/03/01/css/css/</url>
      
        <content type="html"><![CDATA[<h1 id="CSS3的使用"><a href="#CSS3的使用" class="headerlink" title="CSS3的使用"></a>CSS3的使用</h1><img src="https://i.ibb.co/Y0BKPYF/CSS3.png" style="zoom:67%;" /><h2 id="border"><a href="#border" class="headerlink" title="border"></a>border</h2><h3 id="1-border-radius"><a href="#1-border-radius" class="headerlink" title="1.border-radius"></a>1.border-radius</h3><p>给边框加圆角效果，</p><p><strong>border-radius:10px;</strong></p><p><a href="https://img.mukewang.com/52e216d2000195ef01110111.jpg"><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/52e216d2000195ef01110111.jpg" alt="img"></a></p><p><strong>border-radius: 5px 4px 3px 2px;</strong> </p><p><a href="https://img.mukewang.com/52e216f9000131a201110111.jpg"><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/52e216f9000131a201110111.jpg" alt="img"></a></p><p>还可以使用百分比，如50%，是一个圆，em</p><h3 id="2-border-shadow"><a href="#2-border-shadow" class="headerlink" title="2.border-shadow"></a>2.border-shadow</h3><p>box-shadow是向盒子添加阴影。支持添加一个或者多个。</p><p><code>box-shadow: X轴偏移量 Y轴偏移量 [阴影模糊半径] [阴影扩展半径] [阴影颜色] [投影方式];</code></p><p><img src="https://img.mukewang.com/54292d620001ffb107080250.jpg" alt="img"></p><p>注意：inset 可以写在参数的第一个或最后一个，其它位置是无效的。</p><p>如果添加多个阴影，只需用逗号隔开即可。如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box_shadow&#123;</span><br><span class="line">    box-shadow:4px 2px 6px #f00, -4px -2px 6px #000, 0px 0px 12px 5px #33CC00 inset;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>1、阴影模糊半径与阴影扩展半径的区别</strong></p></blockquote><p>阴影模糊半径：此参数可选，其值只能是为正值，如果其值为0时，表示阴影不具有模糊效果，其值越大阴影的边缘就越模糊；</p><p>阴影扩展半径：此参数可选，其值可以是正负值，如果值为正，则整个阴影都延展扩大，反之值为负值时，则缩小；</p><blockquote><p><strong>2、X轴偏移量和Y轴偏移量值可以设置为负数</strong></p></blockquote><h3 id="3-border-image"><a href="#3-border-image" class="headerlink" title="3.border-image"></a>3.border-image</h3><p>这个属性和background-image相似。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/52e2201a0001b1e004720260.jpg" alt="img"></p><p><strong>repeat</strong>就是一直重复，然后超出部分剪裁掉，而且是居中开始重复</p><p><strong>Round</strong>可以理解为圆满的铺满。为了实现圆满所以会压缩（或拉伸）</p><p>Stretch 很好理解就是拉伸，有多长拉多长。有多远“滚”多远。</p><h2 id="文字与字体"><a href="#文字与字体" class="headerlink" title="文字与字体"></a>文字与字体</h2><h3 id="1-text-overflow"><a href="#1-text-overflow" class="headerlink" title="1.text-overflow"></a>1.text-overflow</h3><blockquote><p><strong>text-overflow</strong>只是用来说明文字溢出时用什么方式显示，要实现溢出时产生<strong>省略号</strong>的效果，还须定义<strong>强制文本在一行内显示</strong>（white-space:nowrap）及<strong>溢出内容为隐藏</strong>（overflow:hidden），只有这样才能实现<strong>溢出文本显示省略号</strong>的效果</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">text-overflow:ellipsis; </span><br><span class="line">overflow:hidden; </span><br><span class="line">white-space:nowrap; </span><br></pre></td></tr></table></figure><p>上面这个只是一行的</p><blockquote><p>同时，<strong>word-wrap</strong>也可以用来设置<strong>文本行为</strong>，当前行超过指定容器的边界时是否断开转行。</p></blockquote><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/53070cf700018a2b06000200.jpg" alt="img"></p><p><strong>如果要实现多行文本隐藏，用这个</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/* 这个是一段文字的 */</span><br><span class="line">        .text &#123;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            text-overflow: ellipsis;</span><br><span class="line">            display: -webkit-box;</span><br><span class="line">            -webkit-line-clamp: 2;</span><br><span class="line">            -webkit-box-orient: vertical;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h3 id="2-嵌入字体"><a href="#2-嵌入字体" class="headerlink" title="2.嵌入字体"></a>2.嵌入字体</h3><blockquote><p><strong>@font-face</strong>可以找网上的字体</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@font-face &#123;</span><br><span class="line">    font-family : 字体名称;</span><br><span class="line">    src : 字体文件在服务器上的相对或绝对路径;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p &#123;</span><br><span class="line">    font-size :12px;</span><br><span class="line">    font-family : &quot;My Font&quot;;</span><br><span class="line">    /*必须项，设置@font-face中font-family同样的值*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-文字阴影"><a href="#3-文字阴影" class="headerlink" title="3.文字阴影"></a>3.文字阴影</h3><blockquote><p>text-shadow可以用来设置文本的阴影效果。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text-shadow: X-Offset Y-Offset blur color;</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">属性</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">X-Offset</td><td align="center">表示阴影的水平偏移距离，其值为正值时阴影向右偏移，反之向左偏移</td></tr><tr><td align="center">Y-Offset</td><td align="center">是指阴影的垂直偏移距离，如果其值是正值时，阴影向下偏移，反之向上偏移</td></tr><tr><td align="center">Blur</td><td align="center">是指阴影的模糊程度，其值不能是负值，如果值越大，阴影越模糊，反之阴影越清晰，如果不需要阴影模糊可以将Blur值设置为0</td></tr><tr><td align="center">Color</td><td align="center">是指阴影的颜色，其可以使用rgba色</td></tr></tbody></table><h2 id="背景样式"><a href="#背景样式" class="headerlink" title="背景样式"></a>背景样式</h2><h3 id="1-background-origin"><a href="#1-background-origin" class="headerlink" title="1.background-origin"></a>1.background-origin</h3><blockquote><p>设置元素背景图片的<strong>原始起始位置</strong>。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-origin ： border-box | padding-box | content-box;</span><br></pre></td></tr></table></figure><p>参数分别表示背景图片是从<strong>边框</strong>，还是<strong>内边距（默认值）</strong>，或者是<strong>内容区域</strong>开始显示。</p><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/531003de0001166903660166.jpg" alt="img"></p><p><strong>需要注意的是</strong>，如果背景不是<strong>no-repeat</strong>，这个属性无效，它会从边框开始显示。</p><blockquote><p>这个属性是起始位置，可以在设置background-position改变具体的位置</p></blockquote><h3 id="2-background-clip"><a href="#2-background-clip" class="headerlink" title="2.background-clip"></a>2.background-clip</h3><blockquote><p>用来将背景图片做适当的<strong>裁剪</strong>以适应实际需要。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-clip ： border-box | padding-box | content-box | no-clip</span><br></pre></td></tr></table></figure><p><img src="https://yuchenimage.oss-cn-shanghai.aliyuncs.com/img/5310065d0001c95103660166.jpg" alt="img"></p><h3 id="3-background-size"><a href="#3-background-size" class="headerlink" title="3.background-size"></a>3.background-size</h3><blockquote><p>设置背景图片的大小，以<strong>长度值</strong>或<strong>百分比</strong>显示，还可以通过<strong>cover</strong>和<strong>contain</strong>来对图片进行伸缩。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-size: auto | &lt;长度值&gt; | &lt;百分比&gt; | cover | contain</span><br></pre></td></tr></table></figure><table><thead><tr><th>属性</th><th>作用</th></tr></thead><tbody><tr><td>auto</td><td>默认值，不改变背景图片的原始高度和宽度</td></tr><tr><td>&lt;长度值&gt;</td><td>成对出现如200px 50px，将背景图片宽高依次设置为前面两个值，当设置一个值时，将其作为图片宽度值来<strong>等比缩放</strong></td></tr><tr><td>&lt;百分比&gt;</td><td>0％~100％之间的任何值，将背景图片宽高依次设置为所在元素宽高乘以前面百分比得出的数值，当设置一个值时同上</td></tr><tr><td>cover</td><td>顾名思义为<strong>覆盖</strong>，即将背景图片等比缩放以<strong>填满整个容器</strong></td></tr><tr><td>contain</td><td>容纳，即将背景图片等比缩放至<strong>某一边紧贴容器边缘为止</strong></td></tr></tbody></table><p><strong>注：</strong>1.&lt;长度值&gt;设置两个值时，图片可以失真</p><p>2.cover,contain图片是自适应，不会失真</p><h3 id="4-multiple-backgrounds"><a href="#4-multiple-backgrounds" class="headerlink" title="4.multiple backgrounds"></a>4.multiple backgrounds</h3><blockquote><p>多重背景</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">background-image: url(http://img.mukewang.com/54cf2365000140e600740095.jpg),</span><br><span class="line">                     url(http://img.mukewang.com/54cf238a0001728d00740095.jpg),</span><br><span class="line">                     url(http://img.mukewang.com/54cf23b60001fd9700740096.jpg);</span><br><span class="line">   background-position: left top, 100px 0, 200px 0;</span><br><span class="line">   background-repeat: no-repeat, no-repeat, no-repeat;</span><br><span class="line">   margin:0 0 20px 0;</span><br></pre></td></tr></table></figure><p>可以是多个背景图片</p><h2 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h2><h3 id="1-通配符"><a href="#1-通配符" class="headerlink" title="1.通配符"></a>1.<strong>通配符</strong></h3><table><thead><tr><th>^=</th><th>选择以这个开头的</th></tr></thead><tbody><tr><td>$=</td><td>选择以这个结尾的</td></tr><tr><td>*=</td><td>选择包含这个的</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;xxx.pdf&quot;&gt;我链接的是PDF文件&lt;/a&gt;</span><br><span class="line">&lt;a href=&quot;#&quot; class=&quot;icon&quot;&gt;我类名是icon&lt;/a&gt;</span><br><span class="line">&lt;a href=&quot;#&quot; title=&quot;我的title是more&quot;&gt;我的title是more&lt;/a&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a[class^=&quot;icon&quot;]&#123;</span><br><span class="line">  background: green;</span><br><span class="line">  color:#fff;</span><br><span class="line">&#125;</span><br><span class="line">a[href$=&quot;pdf&quot;]&#123;</span><br><span class="line">  background: orange;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">a[title*=&quot;more&quot;]&#123;</span><br><span class="line">  background: blue;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-数目选择"><a href="#2-数目选择" class="headerlink" title="2.数目选择"></a>2.数目选择</h3><h4 id="1-root"><a href="#1-root" class="headerlink" title="1.root"></a>1.root</h4><blockquote><p><code>:root</code>选择器，从字面上我们就可以很清楚的理解是根选择器，他的意思就是匹配元素E所在文档的根元素。在HTML文档中，根元素始终是<html>。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:root &#123;</span><br><span class="line">  background:orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-not"><a href="#2-not" class="headerlink" title="2.not"></a>2.not</h4><blockquote><p><code>:not</code>选择器称为<strong>否定选择器</strong>，选择没有这个的，可以是类，也可以是下面这种</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">input:not([type=&quot;submit&quot;])&#123;</span><br><span class="line">  border:1px solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-target"><a href="#3-target" class="headerlink" title="3.target"></a>3.target</h4><blockquote><p><code>:target</code>选择器称为目标选择器，用来匹配文档(页面)的<strong>url的某个标志符的目标元素</strong>。我们先来上个例子，然后再做分析。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;&lt;a href=&quot;#brand&quot;&gt;Brand&lt;/a&gt;&lt;/h2&gt;</span><br><span class="line">&lt;div class=&quot;menuSection&quot; id=&quot;brand&quot;&gt;</span><br><span class="line">    content for Brand</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:target&#123;/*这里的:target就是指id=&quot;brand&quot;的div对象*/</span><br><span class="line">  display:block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 主要href和id一样就可以 </p><h4 id="4-child"><a href="#4-child" class="headerlink" title="4.child"></a>4.child</h4><blockquote><p>选择父元素的子元素</p></blockquote><table><thead><tr><th align="center">first-child</th><th align="center">选择元素的第一个子元素</th></tr></thead><tbody><tr><td align="center">last-child</td><td align="center">元素的最后一个子元素</td></tr><tr><td align="center">nth-child(n+5)</td><td align="center">选第五个之后的</td></tr><tr><td align="center">nth-child(odd)</td><td align="center">选奇数</td></tr><tr><td align="center">nth-child(even)</td><td align="center">选偶数</td></tr><tr><td align="center">nth-last-child(n)</td><td align="center">从某父元素的最后一个子元素开始计算，来选择特定的元素</td></tr></tbody></table><h4 id="5-of-type"><a href="#5-of-type" class="headerlink" title="5. -of-type"></a>5. -of-type</h4><blockquote><p><strong>指定了元素的类型</strong>,其主要用来定位一个父元素下的某个类型的第一个子元素。</p><p>使用和child一样</p></blockquote><p>只要使用nth-of-type(n)</p><h4 id="6-only"><a href="#6-only" class="headerlink" title="6.only"></a>6.only</h4><table><thead><tr><th>only-child</th><th>匹配的元素的父元素中仅有一个子元素，而且是一个<strong>唯一的子元素</strong>才生效</th></tr></thead><tbody><tr><td>only-of-type</td><td>一个元素他有很多个子元素，而其中只有一种类型的子元素是唯一的</td></tr></tbody></table><h3 id="3-状态选择"><a href="#3-状态选择" class="headerlink" title="3.状态选择"></a>3.状态选择</h3><h4 id="1-enabled"><a href="#1-enabled" class="headerlink" title="1.enabled"></a>1.enabled</h4><p>在Web的表单中，有些表单元素有可用（<strong>“:enabled”</strong>）和不可用（“**:disabled**”）状态</p><p>选enabled</p><h4 id="2-disabled"><a href="#2-disabled" class="headerlink" title="2.disabled"></a>2.disabled</h4><h4 id="3-checked"><a href="#3-checked" class="headerlink" title="3.checked"></a>3.checked</h4><blockquote><p>在表单元素中，单选按钮和复选按钮都具有<strong>选中</strong>和<strong>未选中</strong>状态。</p></blockquote><p>在CSS3中，我们可以通过状态选择器“:checked”配合其他标签实现<strong>自定义样式</strong>。而“**:checked**”表示的是选中状态。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">input[type=&quot;checkbox&quot;] &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">input[type=&quot;checkbox&quot;]:checked  &#123;</span><br><span class="line">  opacity: 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-selection"><a href="#4-selection" class="headerlink" title="4.::selection"></a>4.::selection</h4><blockquote><p>注：这个要写两个冒号</p></blockquote><p>“**::selection<strong>”伪元素是用来匹配</strong>突出显示**的文本(用鼠标选择文本时的文本)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">::selection &#123;</span><br><span class="line">  background: red;</span><br><span class="line">  color: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-read-only和read-write"><a href="#5-read-only和read-write" class="headerlink" title="5.read-only和read-write"></a>5.read-only和read-write</h4><blockquote><p>read-only，input添加了read-only就起作用</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">input[type=&quot;text&quot;]:read-only&#123;</span><br><span class="line">  border-color: #ccc;</span><br><span class="line">&#125;</span><br><span class="line">input[type=&quot;text&quot;]:read-write&#123;</span><br><span class="line">  border-color: #f36;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-before和-after"><a href="#6-before和-after" class="headerlink" title="6.:before和::after"></a>6.:before和::after</h4><blockquote><p>这个一个冒号和两个冒号都可以，但是是伪元素，本来是两个的</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CSS &amp; HTML </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
